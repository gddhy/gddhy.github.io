<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>mr_platEx(1103) - 读取一条短信</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">




<link REL="StyleSheet">
</head>

<body leftMargin=0 topMargin=0 marginheight="0" marginwidth="0">
<TABLE style="WIDTH: 100%; HEIGHT: 29px" border=0 cellSpacing=0 cellPadding=0 
width="100%" bgColor=#a6caf0>
  <TBODY>
  <TR>
    <TD width=5></TD>
    <TD><IMG hspace=2 alt="" align=absMiddle 
      src="msdn/icon.gif">&nbsp;<STRONG><EM><FONT face=Tahoma>SKYENGINE API&nbsp; 
      参考手册</FONT></EM></STRONG><a style="PADDING-LEFT: 20px" href="./">返回目录</a></TD>
    <TD width=60 align=right></TD>
    <TD width=12>&nbsp;</TD></TR></TBODY></TABLE>
<DIV style="PADDING-BOTTOM: 10px; PADDING-LEFT: 10px; PADDING-TOP: 10px">
<P><FONT face=Arial><FONT size=2><!--TOOLBAR_START--><!--TOOLBAR_EXEMPT--><!--TOOLBAR_END--><FONT 
size=2><FONT face=Verdana>&nbsp; </FONT>
<TABLE style="WIDTH: 100%" cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR vAlign=top>
    <TD noWrap width="10%"><SPAN style="MARGIN-RIGHT: 0px"><FONT face=Verdana 
      color=#660033><B>int32 mr_platEx</B></FONT></SPAN></TD>
    <TD>
      <P dir=ltr style="MARGIN-RIGHT: 0px"><FONT face=Verdana 
      color=#660033><B>(int32 code = 1103, <BR>uint8* input, <BR>int32 
      input_len, <BR>uint8** output, <BR>int32* output_len, <BR>MR_PLAT_EX_CB* 
      cb<BR>)</B></FONT></P></TD></TR></TBODY></TABLE><BR><FONT face=Verdana>
<HR noShade SIZE=1>
</FONT>
<H5><FONT face=Verdana>Description</FONT></H5>
<BLOCKQUOTE><FONT face=Verdana>读取一条短信。</FONT></BLOCKQUOTE>
<H5><FONT face=Verdana>Parameters</FONT></H5>
<BLOCKQUOTE>
  <P>
  <TABLE style="WIDTH: 87%" cellSpacing=0 cellPadding=5 width="87%" border=1>
    <TBODY>
    <TR vAlign=top bgColor=#dddddd>
      <TD width="20%"><FONT face=Verdana size=2><B>Name</B></FONT></TD>
      <TD><FONT face=Verdana size=2><B>Description</B></FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT face=Verdana size=2><I>input</I></FONT></TD>
      <TD><FONT face=Verdana size=2>T_DSM_GET_SMS_INFO_REQ数据结构指针</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT face=Verdana size=2><I>input_len</I></FONT></TD>
      <TD><FONT face=Verdana size=2>T_DSM_GET_SMS_INFO_REQ数据结构大小</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT face=Verdana size=2><I>output</I></FONT></TD>
      <TD><FONT face=Verdana size=2>无</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT face=Verdana size=2><I>output_len</I></FONT></TD>
      <TD><FONT face=Verdana size=2>无</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT face=Verdana size=2><I>cb</I></FONT></TD>
      <TD><FONT face=Verdana 
size=2>无</FONT></TD></TR></TBODY></TABLE></P></BLOCKQUOTE>
<H5><FONT face=Verdana>Return Value</FONT></H5>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
  <P><FONT face=Verdana><FONT 
  size=2>MR_WAITING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  请求成功<BR>MR_FAILED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请求失败<BR>MR_IGNORE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  不支持该功能</FONT></FONT></P></BLOCKQUOTE>
<H5><FONT face=Verdana>Remarks</FONT></H5>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
  <P><FONT 
  face=Verdana>读取结果通过mr_event通知应用，各个参数的含义如下：<BR>第一个：MR_SMS_OP_EVENT；<BR>第二个：MR_SMS_OP_GET_MSG_CONTENT；<BR>第三个：短信内容缓存的地址（编码方式是大端unicode）。 
  <BR><BR>T_DSM_GET_SMS_INFO_REQ数据结果：<BR>typedef 
  struct<BR>{<BR>&nbsp;&nbsp;&nbsp; &nbsp;int32 
  index;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //显示时候索引<BR>&nbsp;&nbsp;&nbsp; &nbsp;int8 
  type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //MR_SMS_INBOX, 
MR_SMS_OUTBOX<BR>}T_DSM_GET_SMS_INFO_REQ;</FONT></P></BLOCKQUOTE>
<H5><FONT face=Verdana>Example</FONT></H5>
<BLOCKQUOTE>
  <P><FONT face=Verdana>/*mrp code*/</FONT></P>
  <P><FONT face=Verdana>T_DSM_GET_SMS_INFO_REQ getInfoReq = { 0 
  };&nbsp;</FONT></P>
  <P><FONT face=Verdana>getInfoReq.index = 0;<BR>getInfoReq.type = 
  MR_SMS_OUTBOX;<BR>mrc_platEx( 1103, (uint8* )&amp;getInfoReq, sizeof( 
  T_DSM_GET_SMS_INFO_REQ ), NULL, NULL, NULL );</FONT></P>
  <P><FONT face=Verdana>mr_event事件处理：<BR></FONT><FONT face=Verdana>case 
  MR_SMS_OP_EVENT:<BR>{<BR>switch ( wParam )<BR>{</FONT><FONT 
  face=Verdana><BR>case 
  MR_SMS_OP_GET_MSG_CONTENT:<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp;char *utf8 = NULL;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;int32 
  utf8_size;<BR></FONT><FONT face=Verdana><FONT 
  face="Times New Roman"><BR></FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;utf8_size = 2*wstrlen((PCWSTR)lParam);<BR>&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp;utf8 = malloc( utf8_size );<BR>&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp;&nbsp;buflog = malloc( utf8_size + 50 
  );<BR>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;wstr2str( (PCWSTR)lParam, 
  (PSTR)utf8, utf8_size );<BR></FONT><FONT 
  face=Verdana>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mrc_printf( buflog, 
  "Response success, get content:%s", utf8 
  );<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; free( utf8 
  );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;utf8 = 
  NULL;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;break;<BR>default:<BR>&nbsp;&nbsp;break;<BR>}<BR>}<BR></P></FONT></BLOCKQUOTE>
<H5><SPAN><FONT face=Verdana>See Also</FONT></SPAN></H5>
<BLOCKQUOTE>
  <P><A href="mr_start_dsm_ex.htm"><FONT 
  face=Verdana></FONT></A>&nbsp;</P></BLOCKQUOTE></FONT></FONT></FONT></P><FONT 
color=#808080 size=2 face="Times New Roman">
<HR SIZE=1 noShade>
<FONT size=1 face=Arial>Copyright ?2005-20010&nbsp;SKY-MOBI</FONT><FONT 
color=#000000 size=3> </FONT></FONT></DIV>
<P></P>
<div style="PADDING-BOTTOM: 10px; PADDING-LEFT: 10px"><a href="./">返回目录</a></div></body>
</html>
