<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>mr_platEx(3004) - gif解码</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">




<link REL="StyleSheet">
</head>

<body leftMargin=0 topMargin=0 marginheight="0" marginwidth="0">
<TABLE style="WIDTH: 100%; HEIGHT: 29px" border=0 cellSpacing=0 cellPadding=0 
width="100%" bgColor=#a6caf0>
  <TBODY>
  <TR>
    <TD width=5></TD>
    <TD><IMG hspace=2 alt="" align=absMiddle 
      src="msdn/icon.gif">&nbsp;<STRONG><EM><FONT face=Tahoma>SKYENGINE API&nbsp; 
      参考手册</FONT></EM></STRONG><a style="PADDING-LEFT: 20px" href="./">返回目录</a></TD>
    <TD width=60 align=right></TD>
    <TD width=12>&nbsp;</TD></TR></TBODY></TABLE>
<DIV style="PADDING-BOTTOM: 10px; PADDING-LEFT: 10px; PADDING-TOP: 10px">
<P><FONT face=Arial><FONT size=2><!--TOOLBAR_START--><!--TOOLBAR_EXEMPT--><!--TOOLBAR_END--><FONT 
face="Verdana, Arial, Helvetica" size=2>&nbsp; 
<TABLE style="WIDTH: 100%" cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR vAlign=top>
    <TD noWrap width="10%"><SPAN style="MARGIN-RIGHT: 0px"><FONT 
      color=#660033><B>int32 mr_platEx</B></FONT></SPAN></TD>
    <TD>
      <P dir=ltr style="MARGIN-RIGHT: 0px"><FONT color=#660033><B>(int32 code = 
      3004, <BR>uint8* input, <BR>int32 input_len, <BR>uint8** output, 
      <BR>int32* output_len, <BR>MR_PLAT_EX_CB* 
  cb<BR>)</B></FONT></P></TD></TR></TBODY></TABLE><BR>
<HR noShade SIZE=1>

<H5>Description</H5>
<BLOCKQUOTE>解码一张GIF图片，将解完的数据放到dest所指的buf中，并通知vm解码结果。</BLOCKQUOTE>
<H5>Parameters</H5>
<BLOCKQUOTE>
  <P>
  <TABLE style="WIDTH: 87%" cellSpacing=0 cellPadding=5 width="87%" border=1>
    <TBODY>
    <TR vAlign=top bgColor=#dddddd>
      <TD width="20%"><FONT size=2><B>Name</B></FONT></TD>
      <TD><FONT size=2><B>Description</B></FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT size=2><I>input</I></FONT></TD>
      <TD><FONT size=2>MRAPP_IMAGE_DECODE_T数据结构指针</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT size=2><I>input_len</I></FONT></TD>
      <TD><FONT size=2>MRAPP_IMAGE_DECODE_T数据结构大小</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT size=2><I>output</I></FONT></TD>
      <TD><FONT size=2>MRAPP_GIF_HEADER数据结构指针地址</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT size=2><I>output_len</I></FONT></TD>
      <TD><FONT size=2>MRAPP_GIF_HEADER数据结构大小</FONT></TD></TR>
    <TR vAlign=top>
      <TD width="20%"><FONT size=2><I>cb</I></FONT></TD>
      <TD><FONT size=2>无</FONT></TD></TR></TBODY></TABLE></P></BLOCKQUOTE>
<H5>Return Value</H5>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
  <P>MR_SUCCESS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  成功<BR>MR_FAILED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;失败<BR>MR_IGNORE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  不支持该功能</P></BLOCKQUOTE>
<H5>Remarks</H5>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
  <P>MRAPP_IMAGE_DECODE_T数据结构：<BR>typedef 
  struct<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp; char 
  *src;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //文件名或是数据流的buf的地址，如果是文件名，是GB格式<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //src所指的buf的大小<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  width;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //用于图片显示的区域的宽度<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  height;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //用于图片显示的区域的高度<BR>&nbsp;&nbsp;&nbsp; &nbsp;int32 
  src_type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 
  枚举MRAPP_SRC_TYPE<BR>&nbsp;&nbsp;&nbsp;&nbsp; char 
  *dest;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //解码后的图片数据存放的buffer<BR>}MRAPP_IMAGE_DECODE_T;<BR>typedef 
  enum<BR>{<BR>&nbsp;&nbsp;&nbsp; SRC_NAME = 
  0,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 
  //传到移植接口的是文件名<BR>&nbsp;&nbsp;&nbsp; 
  SRC_STREAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;//传到移植接口的是图片数据流<BR>}MRAPP_SRC_TYPE;</P>
  <P>MRAPP_GIF_HEADER数据结构：<BR>typedef struct<BR>{<BR>&nbsp;&nbsp;&nbsp; 
  &nbsp;int32 id;<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  width;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp; //gif的宽度<BR>&nbsp;&nbsp;&nbsp; &nbsp;int32 
  height;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp;//gif的高度<BR>&nbsp;&nbsp;&nbsp; &nbsp;int 
  bg_color;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//gif的背景色<BR>&nbsp;&nbsp;&nbsp; 
  &nbsp;int 
  frame_count;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;//gif总的帧数<BR>&nbsp;&nbsp;&nbsp; &nbsp;MRAPP_GIF_FRAME_INFO_T 
  *first;&nbsp;&nbsp;&nbsp; 
  //指向gif的第一帧的数据结构<BR>}MRAPP_GIF_HEADER;<BR><BR>MRAPP_GIF_FRAME_INFO_T数据结构：<BR>typedef 
  struct _MRAPP_GIF_FRAME_INFO<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  fwidth;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp; //本帧的宽度<BR>&nbsp;&nbsp;&nbsp; &nbsp;int32 
  fheight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;&nbsp;//本帧的高度<BR>&nbsp;&nbsp;&nbsp; &nbsp;int32 
  ox;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//本帧左上角的x坐标(相对逻辑屏幕)<BR>&nbsp;&nbsp;&nbsp; 
  &nbsp;int32 
  oy;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp; //本帧左上角的y坐标(相对逻辑屏幕)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int32 
  transparent_flag;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;//是否需要透明显示<BR>&nbsp;&nbsp;&nbsp;&nbsp; int32 
  transparent_color;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//透明显示的颜色<BR>&nbsp;&nbsp;&nbsp;&nbsp; 
  int32 
  delay_time;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  &nbsp;//本帧显示的时间<BR>&nbsp;&nbsp;&nbsp; &nbsp;char 
  *pdata;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  //解压好的图片数据<BR>&nbsp;&nbsp;&nbsp; &nbsp;struct _MRAPP_GIF_FRAME_INFO *next; 
  //指向下一帧的数据结构<BR>}MRAPP_GIF_FRAME_INFO_T;</P></BLOCKQUOTE>
<H5>Example</H5>
<BLOCKQUOTE>
  <P>/*mrp code*/</P>
  <P>#define GIF_IMAGE "OATfile\\pic_test\\image.gif"<BR>U8 
  imagebuffer[100*100];<BR>MRAPP_IMAGE_DECODE_T decodeReq = 
  {0};<BR>MRAPP_GIF_HEADER *decodeRsp = NULL;<BR>int32 len;<BR><BR>memset( 
  imagebuffer, 0, sizeof(imagebuffer) );<BR>decodeReq.src = (char 
  *)GIF_IMAGE;<BR>decodeReq.src_type = SRC_NAME;<BR>decodeReq.width = 
  40;<BR>decodeReq.height = 40;<BR>decodeReq.dest = (char*)imagebuffer;</P>
  <P>mrc_platEx( 3004, (uint8* )&amp;decodeReq, sizeof(MRAPP_IMAGE_DECODE_T), 
  (uint8**)&amp;decodeRsp, (int32*)&amp;len, NULL );</P></BLOCKQUOTE>
<H5><SPAN>See Also</SPAN></H5>
<BLOCKQUOTE>
  <P><A href="mr_start_dsm_ex.htm"></A>&nbsp;</P></BLOCKQUOTE></FONT></FONT></FONT></P><FONT 
color=#808080 size=2 face="Times New Roman">
<HR SIZE=1 noShade>
<FONT size=1 face=Arial>Copyright ?2005-20010&nbsp;SKY-MOBI</FONT><FONT 
color=#000000 size=3> </FONT></FONT></DIV>
<P></P>
<div style="PADDING-BOTTOM: 10px; PADDING-LEFT: 10px"><a href="./">返回目录</a></div></body>
</html>
